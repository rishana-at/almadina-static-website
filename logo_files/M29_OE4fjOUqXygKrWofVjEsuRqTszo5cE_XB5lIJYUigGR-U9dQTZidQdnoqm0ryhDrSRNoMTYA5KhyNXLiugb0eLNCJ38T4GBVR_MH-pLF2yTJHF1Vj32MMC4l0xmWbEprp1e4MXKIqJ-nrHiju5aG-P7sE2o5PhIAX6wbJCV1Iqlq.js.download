if (self.CavalryLogger) { CavalryLogger.start_js(["bdY1J"]); }

__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5,TTL_36HOURS:1296e5,TTL_72HOURS:2592e5}}),null);
__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("PresenceUtil",["CurrentUser","randomInt"],(function(a,b,c,d,e,f){var g=b("randomInt")(0,4294967295)+1;function a(){return g}function c(){return b("CurrentUser").isLoggedInNow()}e.exports={getSessionID:a,hasUserCookie:c}}),null);
__d("PresencePrivacy",["Arbiter","ArbiterMixin","AsyncRequest","Bootloader","ChannelConstants","CurrentUser","PresencePrivacyInitialData","PresenceUtil","mixin"],(function(a,b,c,d,e,f){var g="/ajax/chat/privacy/settings.php",h="/ajax/chat/privacy/online_policy.php",i="/ajax/chat/privacy/visibility.php",j="friend_visibility",k="visibility",l="online_policy",m=babelHelpers["extends"]({},(c=b("PresencePrivacyInitialData")).privacyData),n=c.visibility,o=babelHelpers["extends"]({},c.privacyData),p=n,q=c.onlinePolicy,r=q,s=[],t=!1;d=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.WHITELISTED=1,c.BLACKLISTED=-1,c.UNLISTED=0,c.ONLINE=1,c.OFFLINE=0,c.ONLINE_TO_WHITELIST=0,c.ONLINE_TO_BLACKLIST=1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.init=function(a,b,c){};c.setVisibility=function(a){p=n;y(a);var b={visibility:a},c={type:k,visibility:a};b=G(i,b,c);B(b,c);return a};c.getVisibility=function(){return n};c.setOnlinePolicy=function(a){r=q;z(a);var b={online_policy:a},c={type:l,online_policy:a};b=G(h,b,c);B(b,c);return a};c.getOnlinePolicy=function(){return q};c.getFriendVisibility=function(a){return m[a]||u.UNLISTED};c.getFriendsVisibility=function(){return m};c.isUserOffline=function(){return this.getVisibility()===u.OFFLINE};c.allows=function(a){return this.isUserOffline()?!1:this.allowsIfViewerIsOnline(a)};c.allowsIfViewerIsOnline=function(a){var b=this.getOnlinePolicy();return b===u.ONLINE_TO_WHITELIST?m[a]==u.WHITELISTED:m[a]!=u.BLACKLISTED};c.getOnlinePolicyStr=function(){if(this.isUserOffline())return"offline";var a=this.getOnlinePolicy();if(a===u.ONLINE_TO_WHITELIST)return"online_to_whitelist";return a===u.ONLINE_TO_BLACKLIST?"online_to_blacklist":"unknown"};c.setFriendsVisibility=function(a,b){if(a.length>0){var c={};for(var d=0;d<a.length;d++){var e=a[d];o[e]=m[e];c[e]=b}v(c);e=b;e==u.UNLISTED&&(e=o[a[0]]);d={users:a,setting:b,setting_type:e};a={type:j,settings:c};e=G(g,d,a);B(e,a)}return b};c.setFriendVisibilityMap=function(a,b){for(var c in a)o[c]=m[c];v(a);a={type:j,settings:a};B(F(b,a),a)};c.allow=function(a){if(this.allows(a))throw new Error("allow() should only be called for users that are not already allowed");if(this.getVisibility()===u.OFFLINE)throw new Error("allow() should only be called when the user is already online");var b=this.getOnlinePolicy()===u.ONLINE_TO_WHITELIST?u.WHITELISTED:u.UNLISTED;return this.setFriendsVisibility([a],b)};c.disallow=function(a){if(!this.allows(a))throw new Error("disallow() should only be called for users that are not already disallowed");if(this.getVisibility()===u.OFFLINE)throw new Error("disallow() should only be called when the user is already online");var b=this.getOnlinePolicy()===u.ONLINE_TO_BLACKLIST?u.BLACKLISTED:u.UNLISTED;return this.setFriendsVisibility([a],b)};c.getBlacklist=function(){var a=[];for(var b in m)m[b]===u.BLACKLISTED&&a.push(b);return a};c.getWhitelist=function(){var a=[];for(var b in m)m[b]===u.WHITELISTED&&a.push(b);return a};c.getMapForTest=function(){return m};c.setMapForTest=function(a){m=a};return b}(b("mixin")(b("ArbiterMixin")));var u=new d();function v(a){var c;for(c in a){var d=a[c];if(c==b("CurrentUser").getID())throw new Error("Invalid to set current user's visibility");switch(d){case u.WHITELISTED:case u.BLACKLISTED:case u.UNLISTED:break;default:throw new Error("Invalid state: "+d)}}for(c in a)m[c]=a[c];u.inform("privacy-changed")}function w(a,b){var c={};c[a]=b;v(c)}function x(a){b("Bootloader").loadModules(["MessengerMQTTPresenceReporting"],function(b){b.reportChatVisibility(!!a)},"PresencePrivacy")}function y(a){switch(a){case u.ONLINE:case u.OFFLINE:break;default:throw new Error("Invalid visibility: "+a)}n=a;x(a);u.inform("privacy-changed");u.inform("privacy-user-presence-changed")}function z(a){switch(a){case u.ONLINE_TO_WHITELIST:case u.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+a)}q=a;u.inform("privacy-user-presence-changed");u.inform("privacy-changed")}function A(a,b){t=!0,a.send()}function B(a,b){s.push({request:a,data:b});if(!t){a=s.shift();A(a.request,a.data)}}function C(a,b){b=a.type;if(b===j){u.inform("privacy-availability-changed");for(var c in a.settings)o[c]=a.settings[c]}else b===k?p=a.visibility:b===l&&(r=a.online_policy),u.inform("privacy-user-presence-response")}function D(a,b){n!==p&&y(p),q!==r&&z(r),Object.assign(m,o),u.inform("privacy-changed"),s=[]}function E(a){t=!1;if(s.length>0){a=s.shift();A(a.request,a.data)}}function F(a,c){if(b("PresenceUtil")!=null){var d=a.getData();d.window_id=b("PresenceUtil").getSessionID();a.setData(d)}a.setHandler(C.bind(this,c)).setErrorHandler(D.bind(this,c)).setTransportErrorHandler(D.bind(this,c)).setFinallyHandler(E.bind(this)).setAllowCrossPageTransition(!0);return a}function G(a,c,d){return F(new(b("AsyncRequest"))(a).setData(c),d)}function a(a,c){a=c.obj;if(a.viewer_id!=b("CurrentUser").getID())throw new Error("Viewer got from the channel is not the real viewer");if(a.window_id===b("PresenceUtil").getSessionID())return;var d=a.data;if(a.event=="access_control_entry")d.target_ids.forEach(function(a){w(a,d.setting),o[a]=d.setting});else{if(a.event=="visibility_update"){c=d.visibility?u.ONLINE:u.OFFLINE;y(c);p=c}else a.event=="online_policy_update"&&(z(d.online_policy),r=d.online_policy);u.inform("privacy-user-presence-response")}}u.inform("privacy-changed");u.inform("privacy-user-presence-changed","state");b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("privacy_changed"),a.bind(this));b("Arbiter").subscribe(b("ChannelConstants").ON_CONFIG,function(a,b){a=b.getConfig("visibility",null);if(a!==null&&typeof a!=="undefined"){b=a?u.ONLINE:u.OFFLINE;y(b)}}.bind(this));e.exports=u}),null);
__d("ChatVisibility",["Arbiter","PresencePrivacy"],(function(a,b,c,d,e,f){var g={isOnline:function(){return b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends()},isVisibleToMostFriends:function(){return b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_BLACKLIST&&b("PresencePrivacy").getBlacklist().length>0},isVisibleToSomeFriends:function(){return b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_WHITELIST&&b("PresencePrivacy").getWhitelist().length>0},goOnline:function(a){b("PresencePrivacy").getVisibility()===b("PresencePrivacy").OFFLINE&&(b("PresencePrivacy").setVisibility(b("PresencePrivacy").ONLINE),b("Arbiter").inform("chat-visibility/go-online")),a&&a()},goOffline:function(a){b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE&&(b("PresencePrivacy").setVisibility(b("PresencePrivacy").OFFLINE),b("Arbiter").inform("chat-visibility/go-offline")),a&&a()},toggleVisibility:function(){g.isOnline()?g.goOffline():g.goOnline()}};e.exports=g}),null);
__d("MessengerWebStgTypedLoggerLite.bs",[],(function(a,b,c,d,e,f){}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDifference=function(a){this.$1.difference=a;return this};c.setSeqID=function(a){this.$1.seq_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTopicType=function(a){this.$1.topic_type=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={difference:!0,seq_id:!0,time:!0,topic_type:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerSharedMediaActionsLoader",["JSResource"],(function(a,b,c,d,e,f){"use strict";a={deletePhotos:function(a,c){b("JSResource").loadAll([b("JSResource")("MessengerSharedMediaActions").__setRef("MessengerSharedMediaActionsLoader")],function(b){b.deletePhotos(a,c)})}};e.exports=a}),null);
__d("Bootload.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){return b("bs_curry")._1(a.doLoad,function(a){return b("bs_curry")._1(c,a.bootloadable)})};return{load:c}}f.Create=a}),null);
__d("CallbackManagerController",["ErrorGuard"],(function(a,b,c,d,e,f){var g;a=function(){"use strict";function a(a){this.$1=[],this.$2=[void 0],this.$3=a}var c=a.prototype;c.executeOrEnqueue=function(a,b,c){c=c||{};var d=this.$4(b,a,c);if(d)return 0;this.$2.push({fn:b,request:a,options:c});d=this.$2.length-1;this.$1.push(d);return d};c.unsubscribe=function(a){delete this.$2[a]};c.reset=function(){this.$2=[]};c.getRequest=function(a){return this.$2[a]};c.runPossibleCallbacks=function(a){var b=this,c=this.$1;this.$1=[];var d=[];c.forEach(function(c){var e=b.$2[c];if(!e)return;e=b.$3(e.request,babelHelpers["extends"]({},e.options,a));e?d.push({args:e,id:c}):b.$1.push(c)});d.forEach(function(a){var c=a.args;a=a.id;var d=b.$2[a];if(!d)return;delete b.$2[a];b.$5(d.fn,c,d.request)})};c.$4=function(a,b,c){c=this.$3(b,c);c&&this.$5(a,c,b);return!!c};c.$5=function(a,c,d){d={ids:d};(g||(g=b("ErrorGuard"))).applyWithGuard(a,d,c)};return a}();e.exports=a}),null);
__d("KeyedCallbackManager",["CallbackManagerController","FBLogger"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(){this.$1={},this.$2=new(b("CallbackManagerController"))(this.$3.bind(this))}var c=a.prototype;c.executeOrEnqueue=function(a,c){if(!(a instanceof Array)){var d=a,e=c;a=[a];c=function(a){e(a[d])}}a=a.filter(function(a){var c=a!==null&&a!==void 0;c||b("FBLogger")("KeyedCallbackManager").mustfix("KeyedCallbackManager.executeOrEnqueue: key %s is invalid",JSON.stringify(a));return c});return this.$2.executeOrEnqueue(a,c)};c.unsubscribe=function(a){this.$2.unsubscribe(a)};c.reset=function(){this.$2.reset(),this.$1={}};c.getUnavailableResources=function(a){var b=this;a=this.$2.getRequest(a);var c=[];a&&(c=a.request.filter(function(a){return!b.$1[a]}));return c};c.getUnavailableResourcesFromRequest=function(a){a=Array.isArray(a)?a:[a];return a.filter(function(a){if(a!==null&&a!==void 0)return!this.$1[a]},this)};c.addResourcesAndExecute=function(a){Object.assign(this.$1,a),this.$2.runPossibleCallbacks()};c.setResource=function(a,b){this.$1[a]=b,this.$2.runPossibleCallbacks()};c.getResource=function(a){return this.$1[a]};c.getAllResources=function(){return this.$1};c.dumpResources=function(){var a={};for(var b in this.$1){var c=this.$1[b];typeof c==="object"&&(c=babelHelpers["extends"]({},c));a[b]=c}return a};c.$3=function(a){var b={};for(var c=0;c<a.length;c++){var d=a[c],e=this.$1[d];if(typeof e==="undefined")return!1;b[d]=e}return[b]};return a}();e.exports=a}),null);
__d("MercuryMessageIDs.bs",["bs_curry","bs_js_dict","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var c=b("bs_js_dict").get(d,a);if(c!==void 0)return c;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b);return 0}f.getServerIDs=a;f.addServerID=c}),null);
__d("MessengerAttachmentTransformerForSend.bs",["MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e){c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};else{if(c.__typename==="ExtensibleMessageAttachment"){var f=c.story_attachment,g=c.genie_attachment,h;if(g==null)h=null;else{g=g.genie_message;var i;if(g==null)i=null;else{g=g.story_attachment;i={story_attachment:g==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(g)}}h={genie_message:i}}g={legacy_attachment_id:c.legacy_attachment_id,story_attachment:f==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(f),genie_attachment:h}}else g=null;i=c.__typename==="Sticker"?c:null;f=c.__typename;var j;switch(f){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":j=[c];break;default:j=null}h=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:j});f=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:h,sticker:i},d,e);if(f.length!==0)return f[0];else return{}}}function a(a,b,c,d){return b.map(function(b){return g(a,b,c,d)})}f._transform=g;f.transform=a}),null);
__d("MessengerFolders.bs",["gkx","qex","MessagingTag","MessagingThreadType","MercuryFoldersConfig","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";d=b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom?[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED,b("MessagingTag").MARKETPLACE_FOLDER]:[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];var g=d.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(a){return[].concat(g)}function c(a){if(a.is_archived)return b("MessagingTag").ACTION_ARCHIVED;else{var c=a.thread_type;if(!(c==null)&&c===b("MessagingThreadType").MARKETPLACE&&b("gkx")("965951"))return b("MessagingTag").MARKETPLACE_FOLDER;else return a.folder}}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("MessengerPersonas.bs",["bs_js_dict","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){if(a==null)return 0;else{var c=b("bs_js_dict").get(g,a.id);if(c!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MessengerSharedPhotosVideosBaseData.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){return b("bs_js_dict").get(g,a)}function h(a,b){g[a]=b;return 0}function c(a,c){var d=b("bs_js_dict").get(g,a);if(d!==void 0){d=d;var e=d.actualData;if(e!==void 0){e=e;var f=e.edges;if(f.length!==0){f=f.filter(function(a){return!c.some(function(b){return b===a.node.legacy_attachment_id})});d=d.fetchingState;f={edges:f,newestItemCursor:e.newestItemCursor,oldestItemCursor:e.oldestItemCursor,hasNextPage:e.hasNextPage};e={fetchingState:d,actualData:f};return h(a,e)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.localRemove=c}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","bs_caml_int32","LogHistory","MercuryIDs","bs_caml_option","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","bs_caml_builtin_exceptions","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a,c){var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Encountered thread with no server identifier"];else c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){b("gkx")("1199097")&&b("LogHistory").getInstance("MessengerThreadFetcher").debug("setServerIDToClientID",d);a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);else{var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)}}else return b("Promise").resolve(!1)})}function j(a,c,d){return i(a,c,d).then(function(d){var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}}})["catch"](function(e){var f=g.get(a);if(f==null)return b("Promise").resolve(!1);else{e=f.get(c);if(e==null)return b("Promise").resolve(!1);else{var h=e[1];e=e[0];if(e<5||b("gkx")("678666")){var k=b("bs_caml_int32").imul(Math.pow(2,Math.min(e,5)),1e3),l=new(b("Promise"))(function(e,g){b("setTimeoutAcrossTransitions")(function(g){i(a,c,d).then(function(a){e(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});f["delete"](c);return b("Promise").resolve(a)})["catch"](function(b){return j(a,c,d)});return 0},k);return 0});f.set(c,[e+1|0,h]);return l}else{f["delete"](c);return b("Promise").resolve(!1)}}}})}function a(a,b,c,d){var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return 0}else{f=e.get(b);if(f==null){e.set(b,[0,[d]]);j(a,b,c);return 0}else{f[1].push(d);return 0}}}f.$$fetch=a}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPT_IN:0,OPT_OUT:1,UPDATE_EMOJI:2})}),null);
__d("MSuggestionDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("MSuggestionActions",["MSuggestionDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SAVE_ALL_SUGGESTIONS:null,REMOVE_ALL_SUGGESTIONS:null,REMOVE_SUGGESTIONS_BY_TYPE:null});var g={Types:a,saveAllSuggestions:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.SAVE_ALL_SUGGESTIONS,threadID:a,suggestions:c})},removeAllSuggestions:function(a){a&&b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_ALL_SUGGESTIONS,threadID:a})},removeSuggestionsByType:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_SUGGESTIONS_BY_TYPE,threadID:a,typeID:c})}};e.exports=g}),null);
__d("MercuryGlobalActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryMessageCustomizations",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=JSON.parse(a),c=[];Object.keys(b).forEach(function(a){c.push({customization_type:a,customization_value:b[a]})});return c}e.exports={parseCustomizations:a}}),null);
__d("MercuryProfileRanges",[],(function(a,b,c,d,e,f){"use strict";function g(a){return!a.id&&a.i?{id:a.i,offset:a.o,length:a.l,type:a.t}:a}e.exports={extractFromDelta:function(a){a=(a=a)!=null?(a=a.data)!=null?a.prng:a:a;if(!a)return[];var b=[];try{b=JSON.parse(a);if(b.length>0)return b.map(g)}catch(a){}return b}}}),null);
__d("MessageThreadReadState",[],(function(a,b,c,d,e,f){"use strict";a={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};e.exports=a}),null);
__d("MessageThreadReadStateEffect",["MessageThreadReadState"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){var d=c.messageMetadata.threadReadStateEffect;if(d!=null){var e=b("MessageThreadReadState")[d];return e===void 0&&typeof d==="number"?d:e}d=c.messageMetadata.skipBumpThread;return d===!0?b("MessageThreadReadState").KEEP_AS_IS:a!==c.messageMetadata.actorFbId?b("MessageThreadReadState").MARK_UNREAD:b("MessageThreadReadState").KEEP_AS_IS};e.exports={extractThreadStateEffectFromDelta:a}}),null);
__d("MessagingThreadAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MessengerApprovalModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MessengerApprovalQueueTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MessengerGroupRequestSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1})}),null);
__d("MessengerWebDeltaEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA_RECEIVED:"DELTA_RECEIVED",DELTA_IGNORED:"DELTA_IGNORED"})}),null);
__d("MessengerWebDeltasTypedLoggerBootloader.bs",["Bootload.bs","Bootloader"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["MessengerWebDeltasTypedLogger"],a,"MessengerWebDeltasTypedLoggerBootloader.bs");return 0}c={doLoad:a};d=b("Bootload.bs").Create(c);f.BootloadableMessengerWebDeltasTypedLogger=c;f.LoadableMessengerWebDeltasTypedLogger=d}),null);
__d("PagesMessagingEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("MessengerDeltaTransformer.bs",["Promise","FBID.bs","bs_block","bs_curry","gkx","bs_js_dict","bs_js_json","bs_caml_obj","FBIDCheck","bs_belt_Array","bs_caml_array","DateConsts","LogHistory","MercuryIDs","bs_belt_Option","bs_caml_option","MessagingTag","MessengerState.bs","MontageActions","bs_js_null_undefined","MercuryActionType","MercuryDispatcher","MSuggestionActions","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryProfileRanges","MercuryLogMessageType","MercuryServerRequests","MercurySyncDeltaTypes","MessagingThreadAction","MessageThreadReadState","MessengerThreadFetcher.bs","bs_caml_builtin_exceptions","MercuryGlobalActionType","MessengerWebDeltaEvents","PagesMessagingEventType","MessengerGroupsSyncStatus","MessengerGroupsSyncStatus.bs","MessageUnsendabilityStatus.bs","MessengerApprovalModeTypes","MessengerMessageDFFFetcher.bs","IrisProtocolMessageLifetime","MessengerApprovalQueueTypes","MessengerGroupRequestSource","MercuryMessageCustomizations","MessageThreadReadStateEffect","MessengerParticipantsFetcher.bs","MessengerWebDeltasTypedLogger","ChatReliabilityInstrumentation","RepliedToMessageStatusForGraphQL","ClientSyncProtocol_GroupsSyncAction","MessengerRealtimeAttachmentTransformer.bs","MessengerWebDeltasTypedLoggerBootloader.bs","MessageLiveLocationClientSyncProtocolStopReason"],(function(a,b,c,d,e,f){"use strict";function g(a){try{return JSON.parse(a)}catch(a){return{}}}var h=b("gkx")("780647")?0:1;function i(a,c){var d=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.otherUserFbId),function(a){return a.toString()});c=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.threadFbId),function(a){return a.toString()});a=b("MercuryThreadIDMap").getForFBID(a);if(d!==void 0){d=d;d=[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(d))),d]}else if(c!==void 0){c=c;d=[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c))),c]}else d=[void 0,void 0];c=d[1];d=d[0];if(c!==void 0&&d!==void 0){c=c;if(a.hasClientIDForServerID(c))return b("bs_caml_option").nullable_to_opt(a.getClientIDFromServerIDNow(c));else return b("bs_caml_option").valFromOption(d)}}function j(a,b,c,d){if(a==null)if(b==null)return[void 0,void 0];else{d=c.toString()!==d?c:b;return[d.toString(),{otherUserFbId:d,threadFbId:null}]}else return[a.toString(),{otherUserFbId:null,threadFbId:a}]}function k(a,c){var d=parseInt(c.messageMetadata.timestamp,10),e=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta(a,c),f={contents:c.messageMetadata.actorFbId.toString()},h=!b("FBIDCheck").isUser_deprecated(a),j=c.attachments;j=j==null?[]:b("bs_belt_Array").keepMapU(j,function(e){var c=e.mercury;if(c==null){e=e.mercuryJSON;e=e==null?null:g(e)}else e=c;if(e==null)return;else{c=e.extensible_attachment;var d=e.blob_attachment;e=e.sticker_attachment;e=c==null?d==null?e==null?[]:b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:null,sticker:e},h):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:[d],sticker:null},h):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:b("bs_js_null_undefined").fromOption(c==null?void 0:b("bs_caml_option").some(c)),blob_attachments:null,sticker:null},h);d=b("bs_belt_Array").get(e,0);if(d!==void 0){c=b("bs_caml_option").valFromOption(d).share;if(c==null)e=f.contents;else{c=c.target;if(c==null)e=f.contents;else{c=c.genie_id;e=c==null?f.contents:c}}}else e=f.contents;f.contents=e;return d}});var k=c.messageMetadata.tags;k=k==null?void 0:b("bs_js_null_undefined").fromOption(b("bs_belt_Array").get(k,0));var l=c.data,m;if(l==null)m=null;else{var n=b("bs_js_dict").get(l,"adminSignatureCreatorID");m=n!==void 0?{creatorID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureCreatorID")),creatorName:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureCreatorName")),creatorType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureCreatorType")),labelType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureLabelType")),pageID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignaturePageID")),profileURI:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureProfileURI"))}:null}n=f.contents;l=b("bs_caml_obj").caml_equal(e,b("MessageThreadReadState").MARK_UNREAD)&&a!==n;var o=i(a,c.messageMetadata.threadKey);if(o!==void 0){var p=c.ttl,q=c.messageMetadata.threadKey.threadFbId,r=c.messageMetadata.threadKey.otherUserFbId,s=c.body,t=c.data;if(t==null){var u=c.untypedData;u=u==null?!1:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(u,"is_sponsored"),"false")==="true"}else u=b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(t,"is_sponsored"),"false")==="true";t=c.data;var v=c.data,w;if(v==null)w=null;else{v=b("bs_js_dict").get(v,"customization");w=v!==void 0?b("MercuryMessageCustomizations").parseCustomizations(v):null}v=c.data;var x=c.data,y=c.data,z;if(y==null)z=null;else{y=b("bs_js_dict").get(y,"mib_direct_message_data");z=y!==void 0?g(y):null}y=c.data;var A;if(y==null)A=null;else{y=b("bs_js_dict").get(y,"message_source_data");if(y!==void 0){y=g(y);y=b("bs_js_json").classify(y);if(typeof y==="number"||y.tag!==2)A=null;else{y=b("bs_js_dict").get(y[0],"message_source");A=y!==void 0?b("bs_js_null_undefined").fromOption(y):null}}else A=null}y=c.messageMetadata.skipBumpThread;var B=c.data,C;if(B==null)C=null;else{B=b("bs_js_dict").get(B,"montage_reply_data");C=B!==void 0?g(B):null}B=c.data;var D;if(B==null)D=null;else{B=b("bs_js_dict").get(B,"meta_ranges");D=B!==void 0?g(B):null}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(n)),author_email:n+"@facebook.com",ephemeral_ttl_mode:p==null?0:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(b("IrisProtocolMessageLifetime"),p),0),timestamp:d,is_unread:l,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_one_way_sent:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),is_forwarded:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT}),source:k,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:q==null?null:q.toString(),other_user_fbid:r==null?null:r.toString(),body:s==null?"":s,html_body:null,subject:null,has_attachment:j.length!==0,attachments:j,ranges:void 0,thread_id:o,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:u,commerce_message_type:t==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(t,"commerce_message_type")),customizations:w,platform_xmd:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(v,"platform_xmd")),profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),verse_group_role_xmd:x==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(x,"verse_group_role_id")),mib_direct_message_data:z,message_source:A,skip_bump_thread:y==null?!1:y,thread_read_state_effect:e,montage_reply_data:C,meta_ranges:D,creator_info:m,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType),comm_status:h?b("PageCommItemStatus").TODO:null}}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"]}function l(a,c){b("LogHistory").getInstance("MessengerDeltaTransformer").debug(a,c);return 0}function m(a,c,d,e){return b("bs_curry")._1(b("MessengerWebDeltasTypedLoggerBootloader.bs").LoadableMessengerWebDeltasTypedLogger.load,function(f){f=new(b("MessengerWebDeltasTypedLogger"))();f=f.setDeltaEvent(a).setDeltaType(c).setIgnoreReason(d).setSyncSeqID(e);f.log();return 0})}function n(a){return m(b("MessengerWebDeltaEvents").DELTA_RECEIVED,a,null,null)}function o(a,c){m(b("MessengerWebDeltaEvents").DELTA_IGNORED,a,c,null);return l("DeltaIgnored",a)}function p(a,c,d,e,f){return b("MessengerThreadFetcher.bs").$$fetch(a,c,d,function(c){if(c){b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[e],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return n(f)}else return o(f,"thread fetch failed")})}function q(a,c,d,e){var f=c.other_user_fbid;if(f==null){var g=c.thread_fbid;if(g==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"];else g=[g,!1]}else g=[f,!0];f=g[1];g=g[0];var h=b("MercuryThreadIDMap").getForFBID(a);h=h.getClientIDFromServerIDNow(g);var i=h==null?null:b("MessengerState.bs").getThreadMetaNow(a,h),j=b("gkx")("1143875");if(h==null)if(e)return p(a,g,f,c,d);else return o(d,"thread not already loaded, not required to be loaded");else if(i==null)if(e){if(j){p(a,g,f,c,d);l("ThreadMetaMissing",g);b("ChatReliabilityInstrumentation").logTHREAD_INFO_MISSING(b("LogHistory").formatEntries(b("LogHistory").getEntries()));return 0}else if(j)return o(d,"thread not already loaded, not required to be loaded")}else if(j)return o(d,"thread not already loaded, not required to be loaded");b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return n(d)}function r(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,reaction:c.reaction,senderId:c.senderId.toString(),thread_fbid:e.toString(),other_user_fbid:null,userId:c.userId.toString()};else return}}function s(a){return a/Math.pow(10,8)}function t(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d),f=c.threadKey.otherUserFbId,g=f==null?void 0:b("bs_caml_option").some(f);d=d==null?f==null?[void 0,void 0]:[g,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(g)}]:[e,{otherUserFbId:b("bs_js_null_undefined").fromOption(e),threadFbId:null}];f=d[1];g=d[0];if(g!==void 0&&f!==void 0){e=i(a,b("bs_caml_option").valFromOption(f));if(e!==void 0&&c.messageLiveLocations.length===1){d=b("bs_caml_array").caml_array_get(c.messageLiveLocations,0);a=d.expirationTime;f=d.stopReason;c=f==null?Date.now()/b("DateConsts").MS_PER_SEC>a:!0;f=d.coordinate;f=f==null?null:{latitude:s(f.latitude),longitude:s(f.longitude)};var h=d.destination;h=h==null?null:{latitude:s(h.latitude),longitude:s(h.longitude),label:h.label};var j=d.stopReason;j=j==null?null:j===b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED||j===b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED?"EXPIRED":j===b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED?"ARRIVED":null;return{thread_id:e,action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:g.toString(),other_user_fbid:null,messageId:d.messageId,liveLocation:{live_location_id:d.id.toString(),is_expired:c,expiration_time:a,sender:{id:d.senderId.toString()},coordinate:f,location_title:d.locationTitle,sender_destination:h,stop_reason:j}}}else return}}function u(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,actor_fbid:c.actorFbId.toString(),rsvp_status:c.rsvpStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function v(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:c.isFollowUp?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function w(a,c){var d=[];c.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{d.push(a);return 0}});return b("MessengerParticipantsFetcher.bs").$$fetch({ids:d}).then(function(c){var d=[],e=[];c.forEach(function(a){var b=a.id;if(a.is_messenger_blocked||a.is_facebook_blocked){d.push(b);return 0}else{e.push(b);return 0}});b("MercuryDispatcher").getForFBID(a).handleUpdate({from_client:!0,message_blocked_ids:d,message_unblocked_ids:e});return b("Promise").resolve(0)})["catch"](function(a){return b("Promise").resolve(0)})}function x(a,c){var d=c.actorFbid.toString(),e=b("FBID.bs").ofStringExn(d);if(b("bs_caml_obj").caml_notequal(e,a))e=b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(a));else{var f=c.threadKey.otherUserFbId;if(f==null)e=void 0;else{f=b("FBID.bs").ofString(f.toString());e=f!==void 0?b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(f))):void 0}}if(e!==void 0){f=b("bs_caml_option").valFromOption(e);e=c.threadKey.otherUserFbId;if(e==null)return;else{w(a,[f]);a=i(a,{otherUserFbId:e,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:c.canViewerReply,reason:c.reason,message_blocked_ids:[f],other_user_fbid:e.toString(),thread_fbid:null,thread_id:a};else return}}}function y(a,c){var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:c.messageId,timestamp:c.timestamp,thread_fbid:e,other_user_fbid:null,keep_expiry_timestamp:c.keepExpiryTimestamp,thread_id:a};else return}}function z(a,c){var d=k(a,c.message),e=c.repliedToMessage;if(e==null)return b("bs_caml_option").some(d);else{a=k(a,e);e=c.status;var f;if(e==null)f=void 0;else switch(e){case 0:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").VALID);break;case 1:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").DELETED);break;case 2:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE);break;default:f=void 0}if(f!==void 0)return b("bs_caml_option").some(Object.assign(d,{replied_to_message:{status:b("bs_caml_option").valFromOption(f),message:a}}));else return}}function A(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_status_string:b("MessengerGroupsSyncStatus.bs").fromNullableString(c.groupsSyncStatus),thread_id:d};else return}}function B(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];d=c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_IN?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_IN):c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_OUT):void 0;if(e!==void 0&&d!==void 0&&f!==void 0){a=i(a,b("bs_caml_option").valFromOption(f));if(a!==void 0){f=c.syncedFbGroupId;return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_action:b("bs_caml_option").valFromOption(d),source_surface:c.sourceSurface,fb_group_id:f==null?null:f.toString(),thread_id:a,emoji_codepoints:c.emojiCodePoints}}else return}}function C(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:d.toString(),other_user_fbid:null,group_thread_description_string:c.threadDescription,thread_id:a};else return}}function D(a){return"#"+a.slice(2)}function E(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=e;e=i(a,b("bs_caml_option").valFromOption(f));if(e!==void 0){a=e;f=c.fallbackColor!==""?D(c.fallbackColor):"";e=c.reactionPack;var g;if(e==null)g=[void 0,void 0];else{var h=e.reactionAssets;e=e.fontAsset;g=[h==null?void 0:h.map(function(a){return{reactionName:a.reactionName,reactionEmoji:a.reactionEmoji,keyframeAssetUri:a.keyframeAssetUri}}),e==null?void 0:e.assetUri]}h=g[1];e=g[0];g=c.gradientColors;if(!(g==null)&&g.length!==0){g=b("bs_belt_Array").map(g,D);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId.toString(),solid_color:f,header_color:b("bs_caml_array").caml_array_get(g,0),footer_color:b("bs_caml_array").caml_array_get(g,g.length-1|0),gradient_colors:g,thread_id:a,reactions:e,reactionFont:h}}return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId.toString(),solid_color:f,header_color:f,footer_color:f,gradient_colors:[],thread_id:a,reactions:e,reactionFont:h}}else return}}function F(a,c,d,e,f,g){d={action_type:b("MercuryActionType").PIN_MESSAGE,thread_fbid:d.threadFbId===null?null:c,other_user_fbid:d.otherUserFbId===null?null:c,thread_id:e,actor_fbid:f.actorFbid.toString(),pin_message_action:{message:{message_id:f.pinnedMessage.pinnedMessageId,pinning_time:f.pinnedMessage.timestamp,message:g}}};return q(a,d,"DeltaClientDelta.deltaUpdatePinnedMessage",h)}function G(a,c,d){var e=j(c.threadKey.threadFbId,c.threadKey.otherUserFbId,c.actorFbid,a),f=e[1];e=e[0];if(e!==void 0&&f!==void 0){var g=b("bs_caml_option").valFromOption(f),h=e;f=i(a,g);if(f!==void 0){var k=f;e=c.pinnedMessage.pinnedMessageId;f=b("MessengerState.bs").getMessageFromID(a,e);if(f!==void 0)return F(a,h,g,k,c,b("bs_caml_option").valFromOption(f));else{b("MessengerMessageDFFFetcher.bs").fetch_(a,{message_id:e,thread_id:h},!1).then(function(d){F(a,h,g,k,c,d);return b("Promise").resolve(0)})["catch"](function(a){d.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","error on fetching pinned message payload"]);return b("Promise").resolve(0)});return 0}}else{d.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","transform failed"]);return 0}}else{d.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","transform failed"]);return 0}}function H(a,c){var d=j(c.threadKey.threadFbId,c.threadKey.otherUserFbId,c.actorFbid,a),e=d[1];d=d[0];if(d!==void 0&&e!==void 0){e=b("bs_caml_option").valFromOption(e);d=d;a=i(a,e);if(a!==void 0)return{action_type:b("MercuryActionType").UNPIN_MESSAGE,thread_fbid:e.threadFbId===null?null:d,other_user_fbid:e.otherUserFbId===null?null:d,thread_id:a,unpin_message_action:{message_id:c.pinnedMessage.pinnedMessageId},actor_fbid:c.actorFbid.toString()};else return}}function I(a,c){var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:e,other_user_fbid:null,is_pinned:c.isPinned,thread_id:a,thread_pin_timestamp:c.timestamp};else return}}function J(a,c){var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;e=d==null?e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]:[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MUTATE_TAGS,thread_fbid:e,other_user_fbid:null,thread_id:a,messageId:c.messageId,tags_to_add:c.isSaved?["message:save"]:[],tags_to_delete:c.isSaved?[]:["message:save"]};else return}}function K(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:c.privateGroupLink,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function L(a){a=a.directives;if(a==null)return;else{a=b("bs_belt_Array").get(a,0);if(a!==void 0){a=b("bs_caml_option").valFromOption(a).data;if(a==null)return;else{a=a.add_actions;if(a==null)return;else{var c=a.actions;if(c==null)return;else{c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread_key;if(c==null)return;else{var d=c.thread_fbid;c=c.other_user_fbid;if(d==null)if(c==null)return;else c=c;else c=d;return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c)),other_user_fbid:null,thread_id:c,suggestions:a}}}else return}}}}else return}}function M(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:d.toString(),other_user_fbid:null,promoted_admins:b("bs_belt_Array").map(c.promotedAdmins,function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}}),thread_id:a};else return}}function N(a,c){var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;if(d==null)if(e==null)return;else{var f=i(a,{otherUserFbId:e,threadFbId:null});if(f!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:null,messageId:c.messageID,other_user_fbid:e.toString(),removed_timestamp:c.deletionTimestamp,thread_id:f,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}else{e=i(a,{otherUserFbId:null,threadFbId:d});if(e!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:d.toString(),messageId:c.messageID,other_user_fbid:null,removed_timestamp:c.deletionTimestamp,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}}function O(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:c.unSubscribeStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function P(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLURRED_IMAGE_STATUS,blurred_image_uri:c.blurredImageUri,image_message_id:c.messageId,image_id:c.imageId,should_show:c.shouldShow,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function Q(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:d.toString(),other_user_fbid:null,is_pin_protected:c.isPinProtected,thread_id:a};else return}}function R(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS,other_user_fbid:d.toString(),subtitle_type:c.subtitleType,thread_connectivity_status:c.threadConnectivityStatus,thread_fbid:d.toString(),thread_id:a};else return}}function S(a,c){var d=c.threadkey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").ADS_CONVERSION_UPDATE,other_user_fbid:d.toString(),thread_fbid:d.toString(),thread_id:a,conversion_detection_data:{is_eligible:c.isEligible,conversion_type:c.conversionType,currency_code:c.currencyCode,currency_amount:c.currencyAmount,timestamp:c.timestamp,classifier:c.classifier,page_reply:c.pageReply,icebreaker_key:c.icebreakerKey,icebreaker_message:c.icebreakerMessage}};else return}}var T=function(a){return String.fromCharCode.apply(null,a)};function U(a,c){c=JSON.parse(T(c.payload));c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","malformed payload"]);else{c=b("bs_js_dict").get(c[0],"deltas");if(c!==void 0){c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number"||c.tag!==3)return b("bs_block").__(1,["DeltaClientDelta","delta is not an array"]);else{c=b("bs_belt_Array").get(c[0],0);if(c!==void 0){c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","client delta is not an object"]);else{c=c[0];var d=!1,e={contents:0},f=b("bs_js_dict").get(c,"deltaMessageReaction");if(f!==void 0){d=!0;f=r(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReaction",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReaction","transform failed"])}f=b("bs_js_dict").get(c,"liveLocationData");if(f!==void 0&&!d){d=!0;f=t(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.liveLocationData",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.liveLocationData","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupEventRSVPStatus");if(f!==void 0&&!d){d=!0;f=u(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupEventRSVPStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageThreadFollowUpData");if(f!==void 0&&!d){d=!0;f=v(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageThreadFollowUpData",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaPageThreadFollowUpData","transform failed"])}f=b("bs_js_dict").get(c,"deltaChangeViewerStatus");if(f!==void 0&&!d){d=!0;f=x(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaChangeViewerStatus",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaChangeViewerStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaMontageDirectExpire");if(f!==void 0&&!d){d=!0;f=y(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMontageDirectExpire",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaMontageDirectExpire","transform failed"])}f=b("bs_js_dict").get(c,"deltaMessageReply");if(f!==void 0&&!d){d=!0;f=z(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReply",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReply","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncStatus");if(f!==void 0&&!d){d=!0;f=A(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncStatus",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncMetadata");if(f!==void 0&&!d){d=!0;f=B(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncMetadata","transform failed"])}f=b("bs_js_dict").get(c,"deltaGroupThreadDescription");if(f!==void 0&&!d){d=!0;f=C(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaGroupThreadDescription",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaGroupThreadDescription","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateThreadTheme");if(f!==void 0&&!d){d=!0;f=E(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateThreadTheme",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateThreadTheme","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateSavedMessage");if(f!==void 0&&!d){d=!0;f=J(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateSavedMessage",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateSavedMessage","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdatePinnedThread");if(f!==void 0&&!d){d=!0;f=I(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedThread",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedThread","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdatePinnedMessage");if(f!==void 0&&!d){f=b("bs_caml_option").valFromOption(f);d=!0;if(f.pinnedMessageAction===0)G(a,f,e);else{f=H(a,f);f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedMessage",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","transform failed"])}}f=b("bs_js_dict").get(c,"deltaUpdatePrivateGroupJoinableLink");if(f!==void 0&&!d){d=!0;f=K(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink","transform failed"])}f=b("bs_js_dict").get(c,"deltaOmniMDirectivesV2");if(f!==void 0&&!d){d=!0;f=L(b("bs_caml_option").valFromOption(f));if(f!==void 0){f=b("bs_caml_option").valFromOption(f);e.contents=b("bs_block").__(0,["DeltaClientDelta.deltaOmniMDirectivesV2"]);b("MSuggestionActions").saveAllSuggestions(f.thread_id,f.suggestions)}else e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaOmniMDirectivesV2","transform failed"])}f=b("bs_js_dict").get(c,"deltaPromoteGroupThreadAdmin");if(f!==void 0&&!d){d=!0;f=M(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPromoteGroupThreadAdmin",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaPromoteGroupThreadAdmin","transform failed"])}f=b("bs_js_dict").get(c,"deltaRecallMessageData");if(f!==void 0&&!d){d=!0;f=N(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaRecallMessageData",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaRecallMessageData","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageUnSubscribeStatus");if(f!==void 0&&!d){d=!0;f=O(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageUnSubscribeStatus",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaPageUnSubscribeStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageBlurredImageStatus");if(f!==void 0&&!d){d=!0;f=P(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageBlurredImageStatus",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaPageBlurredImageStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPaymentPinProtectionStatusData");if(f!==void 0){if(!d){d=!0;f=Q(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPaymentPinProtectionStatusData",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaPaymentPinProtectionStatusData","transform failed"])}}else d||(e.contents=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));f=b("bs_js_dict").get(c,"deltaThreadConnectivityStatusUpdate");if(f!==void 0){if(!d){d=!0;f=R(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaThreadConnectivityStatusUpdateData","transform failed"])}}else d||(e.contents=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));f=b("bs_js_dict").get(c,"deltaMessengerAdsConversionUpdate");if(f!==void 0){if(!d){d=!0;f=S(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessengerAdsConversionUpdate",h):e.contents=b("bs_block").__(1,["DeltaClientDelta.deltaMessengerAdsConversionUpdate","transform failed"])}}else d||(e.contents=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));return e.contents}}else return b("bs_block").__(1,["DeltaClientDelta","client delta is missing"])}}else return b("bs_block").__(1,["DeltaClientDelta","client delta has no deltas"])}}function V(a,c){var d=[],e=[],f=c.folders,g=0;f==null||f.length===0?g=1:b("bs_belt_Array").forEachU(f,function(a){d.push({action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,a),timestamp:parseInt(c.watermarkTimestamp,10)});return 0});g===1&&b("bs_belt_Array").forEachU(c.threadKeys,function(f){var d=i(a,f);if(d!==void 0){var g=parseInt(c.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(g);e.push({thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:f.otherUserFbId,thread_fbid:f.threadFbId,mark_as_read:!0,timestamp:g,folder:b("MessagingTag").INBOX});return 0}else return 0});return[d,e]}function W(a){if(a==null)return null;else return a.toString()}function X(a){a=a.skipBumpThread;if(!(a==null)&&a)return h;else return 1}function Y(a,c){var d;switch(c.tag|0){case 0:var e=c[0],f=k(a,e);q(a,f,"deltaNewMessage",X(e.messageMetadata));d=0;break;case 1:f=c[0];q(a,Object.assign(k(a,f.newMessage),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:f.replacedMessageId}),"deltaReplaceMessage",h);d=0;break;case 2:e=c[0];f=e.threadKey.otherUserFbId;var g;if(f==null){var j=e.threadKey.threadFbId;if(j==null)g=void 0;else{var l=b("MercuryThreadIDMap").getForFBID(a);l=l.getClientIDFromServerIDNow(j.toString());g=l==null?void 0:b("bs_caml_option").some(l)}}else{j=b("FBID.bs").ofString(f.toString());g=j!==void 0?b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("bs_caml_option").valFromOption(j))):void 0}if(g!==void 0){l={};f=parseInt(e.deliveredWatermarkTimestampMs,10);l[b("bs_caml_option").valFromOption(g)]=f;b("MercuryDispatcher").getForFBID(a).handleUpdate({delivery_receipts:l,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaDeliveryReceipt"])}else d=b("bs_block").__(1,["DeltaDeliveryReceipt","no thread id"]);break;case 3:j=V(a,c[0]);e=j[1];g=j[0];g.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[],global_actions:g,pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});e.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=g.length===0&&e.length===0?b("bs_block").__(1,["DeltaMarkRead","no local or global action"]):b("bs_block").__(0,["DeltaMarkRead"]);break;case 4:var m=c[0];f=b("bs_belt_Array").keepMapU(m.threadKeys,function(c){var d=i(a,c);if(d!==void 0){var e=parseInt(m.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(e);return{thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:e,folder:b("MessagingTag").INBOX}}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:f,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMarkUnread"]);break;case 5:l=c[0];q(a,Object.assign(k(a,l),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:l.messageMetadata.adminText,log_message_data:{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(l.leftParticipantFbId)]},log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE}),"DeltaParticipantLeftGroupThread",X(l.messageMetadata));d=0;break;case 6:j=c[0];q(a,Object.assign(k(a,j),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:j.messageMetadata.adminText,log_message_data:{added_participants:b("bs_belt_Array").map(j.addedParticipants,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})},log_message_type:b("MercuryLogMessageType").SUBSCRIBE}),"DeltaParticipantsAddedToGroupThread",X(j.messageMetadata));d=0;break;case 7:g=c[0];q(a,Object.assign(k(a,g),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:g.messageMetadata.adminText,log_message_data:{name:g.name},log_message_type:b("MercuryLogMessageType").THREAD_NAME}),"DeltaThreadName",X(g.messageMetadata));d=0;break;case 8:e=c[0];f={watermark:parseInt(e.watermarkTimestampMs,10),action:parseInt(e.actionTimestampMs,10)};l=e.threadKey.otherUserFbId;j=l==null?b("bs_caml_option").nullable_to_opt(e.actorFbId):l.toString();g=e.threadKey.otherUserFbId;if(g==null){l=e.threadKey.threadFbId;e=l==null?void 0:l.toString()}else e=g.toString();if(j!==void 0)if(e!==void 0){l=e;g=b("MercuryThreadIDMap").getForFBID(a);e=g.getClientIDFromServerIDNow(l);if(e==null)d=b("bs_block").__(1,["DeltaReadReceipt","No clientID for serverID: "+l]);else{g={};l={};j=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(j));l[j]=f;g[e]=l;b("MercuryDispatcher").getForFBID(a).handleUpdate({roger:g,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaReadReceipt"])}}else d=b("bs_block").__(1,["DeltaReadReceipt","serverID is invalid"]);else d=b("bs_block").__(1,["DeltaReadReceipt","userID is invalid"]);break;case 9:j=c[0];q(a,Object.assign(k(a,j),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:j.messageMetadata.adminText,log_message_data:{message_type:j.type,untypedData:j.untypedData},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(j.messageMetadata.unsendType)}),"DeltaAdminTextMessage",X(j.messageMetadata));d=0;break;case 10:f=c[0];e=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});l=e!==void 0?{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:f.messageIds,other_user_fbid:W(f.threadKey.otherUserFbId),thread_fbid:W(f.threadKey.threadFbId),thread_id:e}:void 0;g=f.threadKey.threadFbId;j=f.folder;if(l!==void 0){e=b("bs_caml_option").valFromOption(l);g==null||j==null?(q(a,e,"DeltaMessageDelete",h),d=0):(j==="FOLDER_MONTAGE"?b("MontageActions").requestUpdate(g.toString()):q(a,e,"DeltaMessageDelete",h),d=0)}else d=b("bs_block").__(1,["DeltaMessageDelete","transform failed"]);break;case 11:f=c[0];l=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});if(l!==void 0){j=f.action;q(a,{action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:W(f.threadKey.threadFbId),other_user_fbid:W(f.threadKey.otherUserFbId),archived:j==null?!1:j===b("MessagingThreadAction").ACTION_ARCHIVED,thread_id:l},"DeltaThreadAction",h);d=0}else d=b("bs_block").__(1,["DeltaThreadAction","transform failed"]);break;case 12:g=b("bs_belt_Array").keepMapU(c[0].threadKeys,function(c){var d=i(a,c);if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadDelete"]);break;case 13:e=c[0];f=i(a,{otherUserFbId:null,threadFbId:e.messageMetadata.threadKey.threadFbId});f!==void 0?(q(a,{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:W(e.messageMetadata.threadKey.threadFbId),other_user_fbid:null,removed_admin_ids:e.removedAdminFbIds,thread_id:f},"DeltaAdminRemovedFromGroupThread",h),d=0):d=b("bs_block").__(1,["DeltaAdminRemovedFromGroupThread","transform failed"]);break;case 14:j=c[0];l=i(a,j.threadKey);if(l!==void 0){g=[{thread_id:l,action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:j.threadKey.threadFbId,other_user_fbid:j.threadKey.otherUserFbId,mute_until:parseInt(j.expireTime,10)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadMuteSettings"])}else d=b("bs_block").__(1,["DeltaThreadMuteSettings","invalid thread ID"]);break;case 15:e=c[0];f=e.jsonBlob;if(f==null)d=b("bs_block").__(1,["DeltaPagesManagerEvent","no jsonBlob"]);else{try{l=JSON.parse(f)}catch(a){l={}}j=b("bs_js_json").classify(l);if(typeof j==="number"||j.tag!==2)d=b("bs_block").__(1,["DeltaPagesManagerEvent","jsonBlob is not an object"]);else{g=j[0];f=b("bs_js_dict").get(g,"type");if(f!==void 0){l=b("bs_js_json").classify(b("bs_caml_option").valFromOption(f));if(typeof l==="number"||l.tag!==1)d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not a number"]);else if(l[0]===b("PagesMessagingEventType").FLAG){j=b("bs_js_dict").get(g,"flagData");if(j!==void 0){f=b("bs_js_json").classify(b("bs_caml_option").valFromOption(j));if(typeof f==="number"||f.tag!==2)l=!1;else{g=b("bs_js_dict").get(f[0],"state");if(g!==void 0){j=b("bs_js_json").classify(b("bs_caml_option").valFromOption(g));l=typeof j==="number"?j===1:!1}else l=!1}}else l=!1;f=i(a,e.threadKey);if(f!==void 0){g=[{thread_id:f,action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:l,other_user_fbid:e.threadKey.otherUserFbId,thread_fbid:e.threadKey.threadFbId}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaPagesManagerEvent"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","threadID is invalid"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not pagesFlag"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","no type on jsonBlob"])}}break;case 16:j=c[0];f=i(a,{otherUserFbId:null,threadFbId:j.messageMetadata.threadKey.threadFbId});f!==void 0?(q(a,{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:W(j.messageMetadata.threadKey.threadFbId),other_user_fbid:null,approval_mode:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerApprovalModeTypes"),j.mode)),thread_id:f},"DeltaApprovalMode",h),d=0):d=b("bs_block").__(1,["DeltaApprovalMode","transform failed"]);break;case 17:l=c[0];e=i(a,{otherUserFbId:l.messageMetadata.threadKey.otherUserFbId,threadFbId:l.messageMetadata.threadKey.threadFbId});if(e!==void 0){g=e;j=l.inviterFbId;if(j==null){f=l.recipientFbId;if(!(f==null)){e=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f));q(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:W(l.messageMetadata.threadKey.threadFbId),other_user_fbid:W(l.messageMetadata.threadKey.otherUserFbId),removed_id:l.action===b("MessengerApprovalQueueTypes").REMOVED?e:null,added_id:l.action===b("MessengerApprovalQueueTypes").REQUESTED?e:null,thread_id:g},"DeltaApprovalQueue",h)}}else{if(l.action===b("MessengerApprovalQueueTypes").REQUESTED){f=l.requestSource;var p;if(f==null)p=b("MessengerGroupRequestSource").ADD;else switch(f){case"ADD":p=b("MessengerGroupRequestSource").ADD;break;case"JOIN_THROUGH_LINK":p=b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;break;default:p=b("MessengerGroupRequestSource").ADD}e={requester:{id:l.recipientFbId},inviter:{id:j},request_source:p,request_timestamp:l.requestTimestamp}}else e=null;q(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:W(l.messageMetadata.threadKey.threadFbId),other_user_fbid:W(l.messageMetadata.threadKey.otherUserFbId),removed_group_id:l.action===b("MessengerApprovalQueueTypes").REMOVED?l.recipientFbId:null,added_group_id:e,thread_id:g},"DeltaApprovalQueue",h)}d=0}else d=b("bs_block").__(1,["DeltaApprovalQueue","transform failed"]);break;case 18:f=c[0];q(a,k(a,f.deltaNewMessage),"DeltaGenieMessage",X(f.deltaNewMessage.messageMetadata));d=0;break;case 19:j=c[0];l=j.messageMetadata.threadKey;if(l==null)e=void 0;else{g=l.threadFbId;e=g==null?void 0:g}f=j.initiator;if(f==null)l=void 0;else{g=f.userFbId;l=g==null?void 0:g.toString()}f=i(a,{otherUserFbId:null,threadFbId:e});f!==void 0?(q(a,{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:W(e),other_user_fbid:null,call_state:j.callState,server_info_data:j.serverInfoData,initiator_fbid:l,thread_id:f},"DeltaRTCCallData",h),d=0):d=b("bs_block").__(1,["DeltaRTCCallData","transform failed"]);break;case 20:g=c[0];e=i(a,g.threadKey);if(e!==void 0){j=[{thread_id:e,action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:g.threadKey.otherUserFbId,new_folder:b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,g.folder)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:j,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadFolder"])}else d=b("bs_block").__(1,["DeltaThreadFolder","threadID is invalid"]);break;case 21:l=c[0];f=i(a,l.threadKey);if(f!==void 0){e=[{thread_id:f,action_type:b("MercuryActionType").MUTATE_TAGS,messageId:l.messageId,tags_to_add:l.tagsToAdd,tags_to_delete:l.tagsToDelete}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMutateMessageTags"])}else d=b("bs_block").__(1,["DeltaMutateMessageTags","threadID is invalid"]);break;case 22:d=U(a,c[0]);break}if(typeof d==="number")return 0;else if(d.tag)return o(d[0],d[1]);else return n(d[0])}function a(a,c){if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").NewMessage))return Y(a,b("bs_block").__(0,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReplaceMessage))return Y(a,b("bs_block").__(1,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").DeliveryReceipt))return Y(a,b("bs_block").__(2,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkRead))return Y(a,b("bs_block").__(3,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkUnread))return Y(a,b("bs_block").__(4,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantLeftGroupThread))return Y(a,b("bs_block").__(5,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread))return Y(a,b("bs_block").__(6,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadName))return Y(a,b("bs_block").__(7,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReadReceipt))return Y(a,b("bs_block").__(8,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminTextMessage))return Y(a,b("bs_block").__(9,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MessageDelete))return Y(a,b("bs_block").__(10,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadAction))return Y(a,b("bs_block").__(11,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadDelete))return Y(a,b("bs_block").__(12,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread))return Y(a,b("bs_block").__(13,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadMuteSettings))return Y(a,b("bs_block").__(14,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").PagesManagerEvent))return Y(a,b("bs_block").__(15,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalMode))return Y(a,b("bs_block").__(16,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalQueue))return Y(a,b("bs_block").__(17,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ClientPayload))return Y(a,b("bs_block").__(22,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").GenieMessage))return Y(a,b("bs_block").__(18,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RtcCallData))return Y(a,b("bs_block").__(19,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkFolderSeen)){n("DeltaMarkFolderSeen");return b("MessengerState.bs").send(b("bs_caml_option").some(a),[b("bs_block").__(0,[b("bs_block").__(66,[c])])])}else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadFolder))return Y(a,b("bs_block").__(20,[c]));else return 0}f.transform=a}),null);
__d("JSSet.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Array.from(a.values())}f.values=a}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderFilteredContent:function(a){if(a.is_filtered_content_bh)return g._("This message was removed because it includes a link that goes against our Community Standards.");if(a.is_filtered_content_account)return g._("This message has been temporarily removed because the sender's account requires verification.");if(a.is_filtered_content_quasar)return g._("This message was removed because it contains blocked or harmful content.");return a.is_filtered_content_invalid_app?g._("This message was removed because the app it's being sent from is blocked from sending messages."):g._("This message has been temporarily removed because the sender's account requires verification, or it was identified as abusive.")}};e.exports=a}),null);
__d("MercuryLocalIDs",["randomInt"],(function(a,b,c,d,e,f){"use strict";var g={generateThreadID:function(a){return"root:"+g.generateOfflineThreadingID(a)},generateOfflineThreadingID:function(a){a=a!=null?a:Date.now();var c=b("randomInt")(0,4294967295);c=("0000000000000000000000"+c.toString(2)).slice(-22);a=a.toString(2)+c;return h(a.slice(-63))}};function h(a){var b="";a=a;while(a!="0"){var c=0,d="";for(var e=0;e<a.length;e++)c=2*c+parseInt(a[e],10),c>=10?(d+="1",c-=10):d+="0";b=c.toString()+b;a=d.slice(d.indexOf("1"))}return b}e.exports=g}),null);
__d("MercuryMessageClientState",[],(function(a,b,c,d,e,f){a=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});e.exports=a}),null);
__d("MessageProfileRangeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:"n",PROFILE:"p",THREAD:"t",THREAD_ACTIVE:"a"})}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","MessagingTag","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),preloaded_participants:[],admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:h==="user"?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,is_other_recipient_page:!1,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],composer_input_disabled:!1,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,last_message_admin_text_type:null,last_message_unsendability_status:null,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,reactions:void 0,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],accessibility_label:null,reverse_gradients_for_radial:null,joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1,thread_associated_job_applications:null,thread_associated_page_admin:null,graphql_token:null,conversion_detection_data:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ThreadConnectivityStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNCONNECTED:0,IMPLICIT_OR_TWO_WAY_MESSAGING:1})}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){if(b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED))return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("bs_belt_internalAVLtree",["bs_curry","bs_caml_option","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{key:a.key,value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c,d){var e=g(a),f=g(d);return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function j(a,b){return{key:a,value:b,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function a(a,b){if(a.value===b)return a;else return{key:a.key,value:b,height:a.height,left:a.left,right:a.right}}function l(a,b,c,d){var e=a!==null?a.height:0,f=d!==null?d.height:0;if(e>(f+2|0)){var h=a.left,j=a.key,k=a.value,l=a.right;if(g(h)>=g(l))return i(h,j,k,i(l,b,c,d));else{var m=l.left,n=l.key,o=l.value;l=l.right;return i(i(h,j,k,m),n,o,i(l,b,c,d))}}else if(f>(e+2|0)){h=d.left;j=d.key;k=d.value;m=d.right;if(g(m)>=g(h))return i(i(a,b,c,h),j,k,m);else{n=h.left;o=h.key;l=h.value;h=h.right;return i(i(a,b,c,n),o,l,i(h,j,k,m))}}else return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.key}}function c(a){if(a!==null)return b("bs_caml_option").some(m(a))}function d(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.key}}function e(a){if(a!==null)return b("bs_caml_option").some(n(a))}function o(a){if(a!==null)return n(a)}function p(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return[b.key,b.value]}}function q(a){if(a!==null)return p(a)}function r(a){if(a!==null)return p(a)}function s(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return[b.key,b.value]}}function t(a){if(a!==null)return s(a)}function aa(a){if(a!==null)return s(a)}function u(a,b,c){var d=a.left,e=a.right,f=a.key;a=a.value;if(d!==null)return l(u(d,b,c),f,a,e);else{b.contents=f;c.contents=a;return e}}function ba(a){return a===null}function v(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function w(a,b){if(a!==null){var c=w(a.left,b);if(c!==void 0)return c;else{c=a.key;var d=a.value,e=b(c,d);if(e)return[c,d];else{e=w(a.right,b);if(e!==void 0)return e;else return}}}}function ca(a,c){return w(a,b("bs_curry").__2(c))}function x(a,b){while(!0){var c=a;if(c!==null){x(c.left,b);b(c.key,c.value);a=c.right;continue}else return 0}}function da(a,c){return x(a,b("bs_curry").__2(c))}function y(a,b){if(a!==null){var c=y(a.left,b),d=b(a.value);b=y(a.right,b);return{key:a.key,value:d,height:a.height,left:c,right:b}}else return null}function ea(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null){var c=a.key,d=z(a.left,b),e=b(c,a.value);b=z(a.right,b);return{key:c,value:e,height:a.height,left:d,right:b}}else return null}function fa(a,c){return z(a,b("bs_curry").__2(c))}function A(a,b,c){while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.key,h=e.value;e=e.right;b=c(A(f,d,c),g,h);a=e;continue}else return d}}function ga(a,c,d){return A(a,c,b("bs_curry").__3(d))}function B(a,b){while(!0){var c=a;if(c!==null)if(b(c.key,c.value)&&B(c.left,b)){a=c.right;continue}else return!1;else return!0}}function ha(a,c){return B(a,b("bs_curry").__2(c))}function C(a,b){while(!0){var c=a;if(c!==null)if(b(c.key,c.value)||C(c.left,b))return!0;else{a=c.right;continue}else return!1}}function ia(a,c){return C(a,b("bs_curry").__2(c))}function D(a,b,c){if(a!==null)return l(D(a.left,b,c),a.key,a.value,a.right);else return j(b,c)}function E(a,b,c){if(a!==null)return l(a.left,a.key,a.value,E(a.right,b,c));else return j(b,c)}function F(a,b,c,d){if(a!==null)if(d!==null){var e=a.left,f=a.key,g=a.value,h=a.right,j=a.height,k=d.left,m=d.key,n=d.value,o=d.right,p=d.height;if(j>(p+2|0))return l(e,f,g,F(h,b,c,d));else if(p>(j+2|0))return l(F(a,b,c,k),m,n,o);else return i(a,b,c,d)}else return E(a,b,c);else return D(d,b,c)}function G(a,b){if(a!==null)if(b!==null){var c={contents:b.key},d={contents:b.value},e=u(b,c,d);return F(a,c.contents,d.contents,e)}else return a;else return b}function ja(a,c,d,e){if(d!==void 0)return F(a,c,b("bs_caml_option").valFromOption(d),e);else return G(a,e)}function H(a,b){if(a!==null){var c=a.key,d=a.value,e=H(a.left,b),f=b(c,d);a=H(a.right,b);if(f)return F(e,c,d,a);else return G(e,a)}else return null}function ka(a,c){return H(a,b("bs_curry").__2(c))}function I(a,c){if(a!==null){var d=a.key,e=a.value,f=I(a.left,c);e=c(d,e);a=I(a.right,c);if(e!==void 0)return F(f,d,b("bs_caml_option").valFromOption(e),a);else return G(f,a)}else return null}function la(a,c){return I(a,b("bs_curry").__2(c))}function J(a,b){if(a!==null){var c=a.key,d=a.value,e=J(a.left,b),f=e[1];e=e[0];var g=b(c,d);a=J(a.right,b);b=a[1];a=a[0];if(g)return[F(e,c,d,a),G(f,b)];else return[G(e,a),F(f,c,d,b)]}else return[null,null]}function ma(a,c){return J(a,b("bs_curry").__2(c))}function K(a){var b=a.left;a=a.right;b=b!==null?K(b):0;a=a!==null?K(a):0;return(1+b|0)+a|0}function L(a){if(a!==null)return K(a);else return 0}function M(a,b){while(!0){var c=b,d=a;if(d!==null){var e=d.left,f=d.right,g=d.key;d=d.value;b=[[g,d],M(f,c)];a=e;continue}else return c}}function na(a){return M(a,0)}function N(a){while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLtree.ml", line 385, characters 6-12');N(c);a=b;continue}else return 0}}function O(a,b,c){while(!0){var d=b,e=a,f=e.left,g=e.key;e=e.right;f=f!==null?O(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function P(a,b,c){while(!0){var d=b,e=a,f=e.left,g=e.right;f=f!==null?P(f,d,c):d;c[f]=e.value;d=f+1|0;if(g!==null){b=d;a=g;continue}else return d}}function Q(a,b,c){while(!0){var d=b,e=a,f=e.left,g=e.key,h=e.right;f=f!==null?Q(f,d,c):d;c[f]=[g,e.value];d=f+1|0;if(h!==null){b=d;a=h;continue}else return d}}function oa(b){if(b!==null){var a=K(b);a=new Array(a);Q(b,0,a);return a}else return[]}function pa(b){if(b!==null){var a=K(b);a=new Array(a);O(b,0,a);return a}else return[]}function qa(b){if(b!==null){var a=K(b);a=new Array(a);P(b,0,a);return a}else return[]}function R(a,b,c){switch(c){case 0:return null;case 1:var d=a[b];return j(d[0],d[1]);case 2:d=a[b];var e=a[b-1|0];e=e;d=d;return{key:e[0],value:e[1],height:2,left:j(d[0],d[1]),right:null};case 3:e=a[b];d=a[b-1|0];var f=a[b-2|0];f=f;d=d;e=e;return{key:d[0],value:d[1],height:2,left:j(e[0],e[1]),right:j(f[0],f[1])};default:d=c/2|0;e=R(a,b,d);f=a[b-d|0];a=R(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f[0],f[1],a)}}function S(a,b,c){switch(c){case 0:return null;case 1:var d=a[b];return j(d[0],d[1]);case 2:d=a[b];var e=a[b+1|0];e=e;d=d;return{key:e[0],value:e[1],height:2,left:j(d[0],d[1]),right:null};case 3:e=a[b];d=a[b+1|0];var f=a[b+2|0];f=f;d=d;e=e;return{key:d[0],value:d[1],height:2,left:j(e[0],e[1]),right:j(f[0],f[1])};default:d=c/2|0;e=S(a,b,d);f=a[b+d|0];a=S(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f[0],f[1],a)}}function ra(a){return S(a,0,a.length)}function T(a,b,c,d){var e=L(a),f=L(b);if(e===f){a=v(a,0);b=v(b,0);c=c;d=d;while(!0){var g=b,h=a;if(h&&g){var i=g[0],j=h[0],k=c(j.key,i.key);if(k===0){var l=d(j.value,i.value);if(l===0){b=v(i.right,g[1]);a=v(j.right,h[1]);continue}else return l}else return k}else return 0}}else if(e<f)return-1;else return 1}function sa(a,c,d,e){return T(a,c,d,b("bs_curry").__2(e))}function U(a,b,c,d){var e=L(a),f=L(b);if(e===f){e=v(a,0);f=v(b,0);a=c;b=d;while(!0){c=f;d=e;if(d&&c){var g=c[0],h=d[0];if(a(h.key,g.key)===0&&b(h.value,g.value)){f=v(g.right,c[1]);e=v(h.right,d[1]);continue}else return!1}else return!0}}else return!1}function ta(a,c,d,e){return U(a,c,d,b("bs_curry").__2(e))}function ua(c,d,a){while(!0){var e=c;if(e!==null){var f=e.key;f=a(d,f);if(f===0)return b("bs_caml_option").some(e.value);else{c=f<0?e.left:e.right;continue}}else return}}function va(b,c,a){while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else return}}function wa(b,c,a){while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function xa(b,c,d,a){while(!0){var e=b;if(e!==null){var f=e.key;f=a(c,f);if(f===0)return e.value;else{b=f<0?e.left:e.right;continue}}else return d}}function ya(b,c,a){while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function za(a){var b=W(a.left);a.left=b;return V(a)}function Aa(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(za(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(Aa(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(b,c,d,a){if(b!==null){var e=b.key;e=a(c,e);if(e===0){b.value=d;return b}else{var f=b.left,g=b.right;if(e<0){e=Z(f,c,d,a);b.left=e}else b.right=Z(g,c,d,a);return Y(b)}}else return j(c,d)}function Ba(c,a){var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b[0],c[0])<0}),f;e>=0?f=S(c,0,e):(e=-e|0,f=R(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e){var g=c[e];f=Z(f,g[0],g[1],a)}return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.key=b.key;return c}}f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.updateValue=a;f.minKey=c;f.minKeyUndefined=d;f.maxKey=e;f.maxKeyUndefined=o;f.minimum=q;f.minUndefined=r;f.maximum=t;f.maxUndefined=aa;f.removeMinAuxWithRef=u;f.isEmpty=ba;f.stackAllLeft=v;f.findFirstByU=w;f.findFirstBy=ca;f.forEachU=x;f.forEach=da;f.mapU=y;f.map=ea;f.mapWithKeyU=z;f.mapWithKey=fa;f.reduceU=A;f.reduce=ga;f.everyU=B;f.every=ha;f.someU=C;f.some=ia;f.join=F;f.concat=G;f.concatOrJoin=ja;f.keepSharedU=H;f.keepShared=ka;f.keepMapU=I;f.keepMap=la;f.partitionSharedU=J;f.partitionShared=ma;f.lengthNode=K;f.size=L;f.toList=na;f.checkInvariantInternal=N;f.fillArray=Q;f.toArray=oa;f.keysToArray=pa;f.valuesToArray=qa;f.fromSortedArrayAux=S;f.fromSortedArrayRevAux=R;f.fromSortedArrayUnsafe=ra;f.cmpU=T;f.cmp=sa;f.eqU=U;f.eq=ta;f.get=ua;f.getUndefined=va;f.getWithDefault=xa;f.getExn=wa;f.has=ya;f.fromArray=Ba;f.updateMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_MapDict",["bs_curry","bs_caml_option","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";var g;function h(c,d,e,a){if(c!==null){var f=c.key,g=a(d,f);if(g===0)return b("bs_belt_internalAVLtree").updateValue(c,e);else{var i=c.left,j=c.right;c=c.value;if(g<0)return b("bs_belt_internalAVLtree").bal(h(i,d,e,a),f,c,j);else return b("bs_belt_internalAVLtree").bal(i,f,c,h(j,d,e,a))}}else return b("bs_belt_internalAVLtree").singleton(d,e)}function i(c,d,e,a){if(c!==null){var f=c.key,g=a(d,f);if(g===0){var h=e(b("bs_caml_option").some(c.value));if(h!==void 0)return b("bs_belt_internalAVLtree").updateValue(c,b("bs_caml_option").valFromOption(h));else{h=c.left;var j=c.right;if(h!==null)if(j!==null){var k={contents:j.key},l={contents:j.value},m=b("bs_belt_internalAVLtree").removeMinAuxWithRef(j,k,l);return b("bs_belt_internalAVLtree").bal(h,k.contents,l.contents,m)}else return h;else return j}}else{k=c.left;l=c.right;m=c.value;if(g<0){h=i(k,d,e,a);if(k===h)return c;else return b("bs_belt_internalAVLtree").bal(h,f,m,l)}else{j=i(l,d,e,a);if(l===j)return c;else return b("bs_belt_internalAVLtree").bal(k,f,m,j)}}}else{g=e(void 0);if(g!==void 0)return b("bs_belt_internalAVLtree").singleton(d,b("bs_caml_option").valFromOption(g));else return c}}function a(c,d,e,a){return i(c,d,b("bs_curry").__1(e),a)}function j(c,d,a){var e=c.left,f=c.key,g=c.right,h=a(d,f);if(h===0)if(e!==null)if(g!==null){var i={contents:g.key},k={contents:g.value},l=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,i,k);return b("bs_belt_internalAVLtree").bal(e,i.contents,k.contents,l)}else return e;else return g;else if(h<0)if(e!==null){i=j(e,d,a);if(i===e)return c;else return b("bs_belt_internalAVLtree").bal(i,f,c.value,g)}else return c;else if(g!==null){k=j(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLtree").bal(e,f,c.value,k)}else return c}function c(b,c,a){if(b!==null)return j(b,c,a);else return null}function d(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=h(b,f[0],f[1],a)}return b}function k(c,d,e,a){var f=c.left,g=c.key,h=c.value,i=c.right,j=a(d,g);if(j===0){e.contents=b("bs_caml_option").some(h);return[f,i]}else if(j<0)if(f!==null){j=k(f,d,e,a);return[j[0],b("bs_belt_internalAVLtree").join(j[1],g,h,i)]}else return[null,c];else if(i!==null){j=k(i,d,e,a);return[b("bs_belt_internalAVLtree").join(f,g,h,j[0]),j[1]]}else return[c,null]}function e(b,c,a){if(b!==null){var d={contents:void 0};b=k(b,c,d,a);return[b,d.contents]}else return[[null,null],void 0]}function l(c,d,e,a){if(c!==null)if(d!==null)if(c.height>=d.height){var f=c.left,g=c.key,h=c.value,i=c.right,j={contents:void 0},m=k(d,g,j,a);j=j.contents;f=l(f,m[0],e,a);h=e(g,b("bs_caml_option").some(h),j);j=l(i,m[1],e,a);return b("bs_belt_internalAVLtree").concatOrJoin(f,g,h,j)}else{i=d.left;m=d.key;f=d.value;g=d.right;h={contents:void 0};j=k(c,m,h,a);h=h.contents;i=l(j[0],i,e,a);h=e(m,h,b("bs_caml_option").some(f));f=l(j[1],g,e,a);return b("bs_belt_internalAVLtree").concatOrJoin(i,m,h,f)}else return b("bs_belt_internalAVLtree").keepMapU(c,function(a,c){return e(a,b("bs_caml_option").some(c),void 0)});else if(d!==null)return b("bs_belt_internalAVLtree").keepMapU(d,function(a,c){return e(a,void 0,b("bs_caml_option").some(c))});else return null}function m(c,d,e,a){return l(c,d,b("bs_curry").__3(e),a)}function n(b,c,a){var d=c.length;if(b!==null){b=b;c=c;var e=0;d=d;a=a;while(!0){var f=e,g=b;if(f<d){var h=c[f];h=j(g,h,a);if(h!==null){e=f+1|0;b=h;continue}else return h}else return g}}else return null}var o=null,p=(g=b("bs_belt_internalAVLtree")).isEmpty,q=g.has,r=g.cmpU,s=g.cmp,t=g.eqU,u=g.eq,v=g.findFirstByU,w=g.findFirstBy,x=g.forEachU,y=g.forEach,z=g.reduceU,A=g.reduce,B=g.everyU,C=g.every,D=g.someU,E=g.some,F=g.size,G=g.toList,H=g.toArray,I=g.fromArray,J=g.keysToArray,K=g.valuesToArray,L=g.minKey,M=g.minKeyUndefined,N=g.maxKey,O=g.maxKeyUndefined,P=g.minimum,Q=g.minUndefined,R=g.maximum,S=g.maxUndefined,T=g.get,U=g.getUndefined,V=g.getWithDefault,W=g.getExn,X=g.checkInvariantInternal,Y=g.keepSharedU,Z=g.keepShared,$=g.partitionSharedU,aa=g.partitionShared,ba=g.mapU,ca=g.map,da=g.mapWithKeyU;g=g.mapWithKey;f.empty=o;f.isEmpty=p;f.has=q;f.cmpU=r;f.cmp=s;f.eqU=t;f.eq=u;f.findFirstByU=v;f.findFirstBy=w;f.forEachU=x;f.forEach=y;f.reduceU=z;f.reduce=A;f.everyU=B;f.every=C;f.someU=D;f.some=E;f.size=F;f.toList=G;f.toArray=H;f.fromArray=I;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.checkInvariantInternal=X;f.remove=c;f.removeMany=n;f.set=h;f.updateU=i;f.update=a;f.mergeU=l;f.merge=m;f.mergeMany=d;f.keepU=Y;f.keep=Z;f.partitionU=$;f.partition=aa;f.split=e;f.mapU=ba;f.map=ca;f.mapWithKeyU=da;f.mapWithKey=g}),null);
__d("bs_belt_Map",["bs_curry","bs_belt_MapDict"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=c.cmp;return{cmp:c,data:b("bs_belt_MapDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_MapDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp;c=c.data;c=b("bs_belt_MapDict").removeMany(c,d,a);return{cmp:a,data:c}}function e(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").set(c.data,d,e,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeMany(c.data,d,a)}}function h(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").updateU(c.data,d,e,a)}}function i(a,c,d){return h(a,c,b("bs_curry").__1(d))}function j(c,d){var a=c.cmp;c=b("bs_belt_MapDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function k(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeU(c.data,d.data,e,a)}}function l(a,c,d){return k(a,c,b("bs_curry").__3(d))}function m(a){return{cmp:a.cmp,data:null}}function n(a){return b("bs_belt_MapDict").isEmpty(a.data)}function o(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,c)}function p(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,b("bs_curry").__2(c))}function q(a,c){return b("bs_belt_MapDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_MapDict").forEachU(a.data,b("bs_curry").__2(c))}function s(a,c,d){return b("bs_belt_MapDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__3(d))}function u(a,c){return b("bs_belt_MapDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_MapDict").everyU(a.data,b("bs_curry").__2(c))}function w(a,c){return b("bs_belt_MapDict").someU(a.data,c)}function x(a,c){return b("bs_belt_MapDict").someU(a.data,b("bs_curry").__2(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__2(c))}function A(c,d){var a=c.cmp;c=b("bs_belt_MapDict").partitionU(c.data,d);return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__2(c))}function C(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapU(a.data,c)}}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapWithKeyU(a.data,c)}}function F(a,c){return E(a,b("bs_curry").__2(c))}function G(a){return b("bs_belt_MapDict").size(a.data)}function H(a){return b("bs_belt_MapDict").toList(a.data)}function I(a){return b("bs_belt_MapDict").toArray(a.data)}function J(a){return b("bs_belt_MapDict").keysToArray(a.data)}function K(a){return b("bs_belt_MapDict").valuesToArray(a.data)}function L(a){return b("bs_belt_MapDict").minKey(a.data)}function M(a){return b("bs_belt_MapDict").minKeyUndefined(a.data)}function N(a){return b("bs_belt_MapDict").maxKey(a.data)}function O(a){return b("bs_belt_MapDict").maxKeyUndefined(a.data)}function P(a){return b("bs_belt_MapDict").minimum(a.data)}function Q(a){return b("bs_belt_MapDict").minUndefined(a.data)}function R(a){return b("bs_belt_MapDict").maximum(a.data)}function S(a){return b("bs_belt_MapDict").maxUndefined(a.data)}function T(a,c){return b("bs_belt_MapDict").get(a.data,c,a.cmp)}function U(a,c){return b("bs_belt_MapDict").getUndefined(a.data,c,a.cmp)}function V(a,c,d){return b("bs_belt_MapDict").getWithDefault(a.data,c,d,a.cmp)}function W(a,c){return b("bs_belt_MapDict").getExn(a.data,c,a.cmp)}function X(a,c){return b("bs_belt_MapDict").has(a.data,c,a.cmp)}function Y(a){return b("bs_belt_MapDict").checkInvariantInternal(a.data)}function Z(a,c,d){return b("bs_belt_MapDict").eqU(a.data,c.data,a.cmp,d)}function aa(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,c,d){return b("bs_belt_MapDict").cmpU(a.data,c.data,a.cmp,d)}function ba(a,c,d){return $(a,c,b("bs_curry").__2(d))}function ca(a){return a.data}function da(a){a=a.cmp;return{cmp:a}}function ea(a,b){return{cmp:a.cmp,data:b}}var fa=0,ga=0,ha=0;f.Int=fa;f.$$String=ga;f.Dict=ha;f.make=m;f.isEmpty=n;f.has=X;f.cmpU=$;f.cmp=ba;f.eqU=Z;f.eq=aa;f.findFirstByU=o;f.findFirstBy=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.size=G;f.toArray=I;f.toList=H;f.fromArray=a;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.remove=c;f.removeMany=d;f.set=e;f.updateU=h;f.update=i;f.mergeMany=g;f.mergeU=k;f.merge=l;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.split=j;f.mapU=C;f.map=D;f.mapWithKeyU=E;f.mapWithKey=F;f.getData=ca;f.getId=da;f.packIdData=ea;f.checkInvariantInternal=Y}),null);
__d("bs_belt_internalMapString",["bs_curry","bs_caml_option","bs_belt_SortArray","bs_caml_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function a(a,c){while(!0){var d=a;if(d!==null){var e=d.key;if(c===e)return b("bs_caml_option").some(d.value);else{a=c<e?d.left:d.right;continue}}else return}}function c(a,b){while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else return}}function d(a,b){while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else throw new Error("getExn")}}function e(a,b,c){while(!0){var d=a;if(d!==null){var e=d.key;if(b===e)return d.value;else{a=b<e?d.left:d.right;continue}}else return c}}function h(a,b){while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return!0;else{a=b<d?c.left:c.right;continue}}else return!1}}function i(a,c){if(a!==null){var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g={contents:f.key},h={contents:f.value},j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g.contents,h.contents,j)}else return d;else return f;else if(c<e)return b("bs_belt_internalAVLtree").bal(i(d,c),e,a.value,f);else return b("bs_belt_internalAVLtree").bal(d,e,a.value,i(f,c))}else return a}function j(a,c){var d=c.left,e=c.key,f=c.value,g=c.right;if(a===e)return[d,b("bs_caml_option").some(f),g];else if(a<e)if(d!==null){var h=j(a,d);return[h[0],h[1],b("bs_belt_internalAVLtree").join(h[2],e,f,g)]}else return[null,void 0,c];else if(g!==null){h=j(a,g);return[b("bs_belt_internalAVLtree").join(d,e,f,h[0]),h[1],h[2]]}else return[c,void 0,null]}function k(a,b){if(b!==null)return j(a,b);else return[null,void 0,null]}function l(a,c,d){if(a!==null){if(a.height>=(c!==null?c.height:0)){var e=a.left,f=a.key,g=a.value,h=a.right,i=k(f,c);return b("bs_belt_internalAVLtree").concatOrJoin(l(e,i[0],d),f,d(f,b("bs_caml_option").some(g),i[1]),l(h,i[2],d))}}else if(c===null)return null;if(c!==null){e=c.left;f=c.key;g=c.value;h=c.right;i=k(f,a);return b("bs_belt_internalAVLtree").concatOrJoin(l(i[0],e,d),f,d(f,i[1],b("bs_caml_option").some(g)),l(i[2],h,d))}else return 0}function m(a,c,d){return l(a,c,b("bs_curry").__3(d))}function n(a,c,d){while(!0){var e=c,f=a;if(f&&e){var g=e[0],h=f[0],i=b("bs_caml_primitive").caml_string_compare(h.key,g.key);if(i===0){var j=d(h.value,g.value);if(j===0){c=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);a=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return j}else return i}else return 0}}function o(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return n(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else if(e<f)return-1;else return 1}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}function q(c,d,a){while(!0){var e=d,f=c;if(f&&e){var g=e[0],h=f[0];if(h.key===g.key&&a(h.value,g.value)){d=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);c=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return!1}else return!0}}function r(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return q(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else return!1}function s(a,c,d){return r(a,c,b("bs_curry").__2(d))}function t(a,c,d){if(a!==null){var e=a.key;if(c===e){a.key=c;a.value=d;return a}else{var f=a.left,g=a.right;if(c<e){e=t(f,c,d);a.left=e}else a.right=t(g,c,d);return b("bs_belt_internalAVLtree").balMutate(a)}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function u(a){var c=a.length;if(c===0)return null;else{var d=b("bs_belt_SortArray").strictlySortedLengthU(a,function(a,b){return a[0]<b[0]}),e;d>=0?e=b("bs_belt_internalAVLtree").fromSortedArrayAux(a,0,d):(d=-d|0,e=b("bs_belt_internalAVLtree").fromSortedArrayRevAux(a,d-1|0,d));for(var d=d,c=c-1|0;d<=c;++d){var f=a[d];e=t(e,f[0],f[1])}return e}}var v=0,w=0,x=0;f.N=v;f.A=w;f.S=x;f.add=g;f.get=a;f.getUndefined=c;f.getExn=d;f.getWithDefault=e;f.has=h;f.remove=i;f.splitAux=j;f.split=k;f.mergeU=l;f.merge=m;f.compareAux=n;f.cmpU=o;f.cmp=p;f.eqAux=q;f.eqU=r;f.eq=s;f.addMutate=t;f.fromArray=u}),null);
__d("bs_belt_MapString",["bs_curry","bs_caml_option","bs_belt_internalAVLtree","bs_belt_internalMapString"],(function(a,b,c,d,e,f){"use strict";var g,h;function i(a,c,d){if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(i(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,i(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function j(a,c,d){if(a!==null){var e=a.key;if(c===e){var f=d(b("bs_caml_option").some(a.value));if(f!==void 0)return b("bs_belt_internalAVLtree").updateValue(a,b("bs_caml_option").valFromOption(f));else{f=a.left;var g=a.right;if(f!==null)if(g!==null){var h={contents:g.key},i={contents:g.value},k=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,h,i);return b("bs_belt_internalAVLtree").bal(f,h.contents,i.contents,k)}else return f;else return g}}else{h=a.left;i=a.right;k=a.value;if(c<e){f=j(h,c,d);if(h===f)return a;else return b("bs_belt_internalAVLtree").bal(f,e,k,i)}else{g=j(i,c,d);if(i===g)return a;else return b("bs_belt_internalAVLtree").bal(h,e,k,g)}}}else{f=d(void 0);if(f!==void 0)return b("bs_belt_internalAVLtree").singleton(c,b("bs_caml_option").valFromOption(f));else return a}}function a(a,c,d){return j(a,c,b("bs_curry").__1(d))}function k(a,c){var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g={contents:f.key},h={contents:f.value},i=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g.contents,h.contents,i)}else return d;else return f;else if(c<e)if(d!==null){g=k(d,c);if(g===d)return a;else return b("bs_belt_internalAVLtree").bal(g,e,a.value,f)}else return a;else if(f!==null){h=k(f,c);return b("bs_belt_internalAVLtree").bal(d,e,a.value,h)}else return a}function c(a,b){if(a!==null)return k(a,b);else return null}function d(a,b){var c=b.length;if(a!==null){a=a;b=b;var d=0;c=c;while(!0){var e=d,f=a;if(e<c){var g=b[e];g=k(f,g);if(g!==null){d=e+1|0;a=g;continue}else return g}else return f}}else return null}function e(a,b){var c=b.length;a=a;for(var d=0,c=c-1|0;d<=c;++d){var e=b[d];a=i(a,e[0],e[1])}return a}var l=null,m=(g=b("bs_belt_internalAVLtree")).isEmpty,n=(h=b("bs_belt_internalMapString")).has,o=h.cmpU,p=h.cmp,q=h.eqU,r=h.eq,s=g.findFirstByU,t=g.findFirstBy,u=g.forEachU,v=g.forEach,w=g.reduceU,x=g.reduce,y=g.everyU,z=g.every,A=g.someU,B=g.some,C=g.size,D=g.toList,E=g.toArray,F=h.fromArray,G=g.keysToArray,H=g.valuesToArray,I=g.minKey,J=g.minKeyUndefined,K=g.maxKey,L=g.maxKeyUndefined,M=g.minimum,N=g.minUndefined,O=g.maximum,P=g.maxUndefined,Q=h.get,R=h.getUndefined,S=h.getWithDefault,T=h.getExn,U=g.checkInvariantInternal,V=h.mergeU,W=h.merge,X=g.keepSharedU,Y=g.keepShared,Z=g.partitionSharedU,$=g.partitionShared;h=h.split;var aa=g.mapU,ba=g.map,ca=g.mapWithKeyU;g=g.mapWithKey;f.empty=l;f.isEmpty=m;f.has=n;f.cmpU=o;f.cmp=p;f.eqU=q;f.eq=r;f.findFirstByU=s;f.findFirstBy=t;f.forEachU=u;f.forEach=v;f.reduceU=w;f.reduce=x;f.everyU=y;f.every=z;f.someU=A;f.some=B;f.size=C;f.toList=D;f.toArray=E;f.fromArray=F;f.keysToArray=G;f.valuesToArray=H;f.minKey=I;f.minKeyUndefined=J;f.maxKey=K;f.maxKeyUndefined=L;f.minimum=M;f.minUndefined=N;f.maximum=O;f.maxUndefined=P;f.get=Q;f.getUndefined=R;f.getWithDefault=S;f.getExn=T;f.checkInvariantInternal=U;f.remove=c;f.removeMany=d;f.set=i;f.updateU=j;f.update=a;f.mergeU=V;f.merge=W;f.mergeMany=e;f.keepU=X;f.keep=Y;f.partitionU=Z;f.partition=$;f.split=h;f.mapU=aa;f.map=ba;f.mapWithKeyU=ca;f.mapWithKey=g}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_array","bs_block","bs_curry","JSSet.bs","React","Utils.bs","FBJSON","Arbiter","gkx","bs_js_dict","qex","bs_belt_Map","bs_belt_Set","bs_caml_obj","ThreadId.bs","FBIDCheck","immutable","bs_belt_Array","bs_caml_array","ChatConfig","LogHistory","MercuryIDs","bs_pervasives","bs_belt_Option","bs_caml_option","CurrentUser","MWChatTheme.bs","requireCond","AsyncRequest","MessagingTag","RemoteAction.bs","TypingStates","MercuryAssert","MercuryViewer","ParticipantId.bs","bs_belt_MapString","bs_caml_primitive","MercuryFilters.bs","ImmutableObject","MercuryLocalIDs","ChannelConstants","MessengerFolders.bs","MessengerMessage.bs","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryMessageIDs.bs","MercuryThreadInfo","MessengerPersonas.bs","MessengerWebEvent","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryActionStatus","MessageRequestUtils","MessagingThreadType","MercuryPayloadSource","MessengerEnvironment","MessengerThreadUtils.bs","recoverableViolation","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","unrecoverableViolation","MercuryGlobalActionType","MessageProfileRangeType","ThreadConnectivityStatus.bs","MercuryMessageClientState","MessengerGroupsSyncStatus","MercuryThreadlistConstants","MessageUnsendabilityStatus","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MessengerDesktopNotifications","ChatReliabilityInstrumentation","MessengerWebStgTypedLoggerLite","RemovedMessageTombstoneContent","MWChatDeleteMessageEventEmitter","MessengerThreadCannotReplyReason.bs","RepliedToMessageStatusForGraphQL","XMercuryThreadLikeIconController","MessengerSharedMediaActionsLoader","MessengerSharedPhotosVideosBaseData.bs","MercuryDisplayTimeFilterMessageRenderer","cr:1299779"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");function j(a){var c={};b("bs_belt_Map").forEach(a,function(b,a){c[b]=a;return 0});return c}function a(a){return j(a.threads)}function k(a,c){return b("bs_js_null_undefined").fromOption(b("bs_belt_Map").get(a.threads,c))}function c(a){return a.fbid}function d(a){return a.deliveryReceipts}function e(a){return a.readReceiptsPerThread}function l(a){return a.ignoredIds}function m(a){return a.blockedIds}function aa(a){return a.pendingFolderUnseenCount}function ba(a){return a.typing}function ca(a){return a.pendingReadStatusThreads}function da(a){return a.messages}function n(a){return a.localIDsMap}function o(a){return a.messagesWithUploadsInFlight}function p(a){return a.threadlistOrderMap}function q(a){return a.pinnedThreads}function ea(a){return a.montage}function fa(a){return a.orderedMessageLists}function ga(a){return a.unreadCounts}function r(a){return a.initialUnreadCounts}function ha(a){return a.unseenTimestamp}function ia(a){b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid}));return 0}function ja(a,c,d){d=d.reduce(b("bs_belt_Set").remove,c.reduce(b("bs_belt_Set").add,a.ignoredIds));if(d===a.ignoredIds)return a;else return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:d,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages,localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}var ka=function(a,b){delete a[b];return 0};function la(a,c,d){var e=b("bs_belt_MapString").get(a,c);if(e!==void 0){e=b("bs_caml_option").valFromOption(e);var f=b("bs_belt_Map").get(e,d);if(f!==void 0)return b("bs_belt_MapString").set(a,c,b("bs_belt_Map").remove(e,d));else return a}else return a}function ma(a,c){var d=c.thread_fbid;if(d==null)if(c.type==="typ"||c.type==="page_typing"){c=b("FBID.bs").ofString(c.from.toString());if(c!==void 0)return b("MercuryIDs").getThreadIDFromUserID(b("bs_caml_option").valFromOption(c));else return null}else return null;else{c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}}var na=b("gkx")("1275193")?b("MercuryFilters.bs").getSupportedFilters(0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups,b("MercuryFilters.bs").named,b("MercuryFilters.bs").unnamed]):b("MercuryFilters.bs").getSupportedFilters(0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups]),oa=b("MessengerFolders.bs").getSupportedFolders(0).concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);function pa(a){var b={};oa.forEach(function(a){var c={};na.forEach(function(a){c[a]={threadlist:[],reachedEnd:!1,existingIDs:new Set()};return 0});b[a]=c;return 0});return b}function qa(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.invalidatedThread(c);return 0}function s(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c);return 0}function ra(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c);return 0}function sa(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e);return 0}function t(a,c){var d=new Map();c.forEach(function(a,b){d.set(a,b);return 0});return c.sort(function(c,e){var f=b("bs_belt_Map").get(a.threads,c),g=b("bs_belt_Map").get(a.threads,e);if(f!==void 0&&g!==void 0){g=b("bs_caml_option").valFromOption(g).timestamp-b("bs_caml_option").valFromOption(f).timestamp;if(g>0)return 1;else if(g<0)return-1;else return 0}f=d.get(c);g=d.get(e);return b("bs_belt_Option").getExn(f==null?void 0:b("bs_caml_option").some(f))-b("bs_belt_Option").getExn(g==null?void 0:b("bs_caml_option").some(g))|0})}function ta(a,c,d,e){a=b("bs_js_dict").get(a.threadlistOrderMap,d);if(a!==void 0){d=b("bs_js_dict").get(b("bs_caml_option").valFromOption(a),e);if(d!==void 0){var f=b("bs_caml_option").valFromOption(d);c.forEach(function(a){if(f.existingIDs.has(a)){f.existingIDs["delete"](a);a=f.threadlist.indexOf(a);f.threadlist.splice(a,1);return 0}else return 0});return 0}else return 0}else return 0}function u(a,c,d,e){a=a!==void 0?a:function(a){return!0};var f=b("bs_belt_Map").get(c.threads,d);if(f!==void 0){f=b("bs_caml_option").valFromOption(f);if(b("bs_curry")._1(a,f)){a=b("ImmutableObject").set(f,e);f=b("bs_belt_Map").set(c.threads,d,a);s(c.fbid,d);return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:c.pendingFolderUnseenCount,typing:c.typing,threads:f,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:c.unseenTimestamp}}else return c}else return c}function ua(c,a,d){var e=new Set(a.participants);Object.assign(a,{participants:Array.from(a.participants)});d.forEach(function(d){if(e.has(d))return 0;else{a.participants.push(d);if(b("bs_caml_obj").caml_equal(d,c)){Object.assign(a,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});return 0}else return 0}});return 0}function va(a){var c=[b("MercuryFilters.bs").all];a.unread_count>0&&c.push(b("MercuryFilters.bs").unread);a.is_canonical||c.push(b("MercuryFilters.bs").groups);if(b("gkx")("1275193"))if(a.name.length!==0){c.push(b("MercuryFilters.bs").named);return c}else{c.push(b("MercuryFilters.bs").unnamed);return c}else return c}function wa(a,b,c){return u(void 0,a,b,{solid_color:c.solid_color,header_color:c.header_color,footer_color:c.footer_color,gradient_colors:c.gradient_colors,theme_id:c.theme_id,reactions:c.reactions})}function xa(a,c,d,e){oa.forEach(function(b){if(b!==d)return ta(a,c,b,e);else return 0});var f=b("bs_js_dict").get(a.threadlistOrderMap,d);if(f!==void 0){f=b("bs_js_dict").get(b("bs_caml_option").valFromOption(f),e);if(f!==void 0){f=b("bs_caml_option").valFromOption(f);f=[f.threadlist,f.existingIDs]}else f=[[],new Set()]}else f=[[],new Set()];var g=f[1],h=f[0];c.forEach(function(a){if(g.has(a))return 0;else{g.add(a);h.push(a);return 0}});return[t(a,h),g]}function v(a,c,d,e){c=b("gkx")("1275193")?c.filter(function(c){c=b("bs_belt_Map").get(a.threads,c);if(c!==void 0){c=va(b("bs_caml_option").valFromOption(c));return c.some(function(a){return a===e})}else return!1}):c;return xa(a,c,d,e)}function ya(a,c,d){if(d!==void 0){var e=b("bs_js_dict").get(a.unreadCounts,c);if(e!==void 0){b("bs_caml_option").valFromOption(e).add(b("bs_caml_option").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a.fbid);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a.fbid);d.fetchUnreadThreadIDs(c);return 0}}else return 0}var za=b("MessengerFolders.bs").getSupportedFolders(0).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED});function Aa(a,c,d){if(d!==void 0){var e=b("bs_js_dict").get(a.unreadCounts,c);if(e!==void 0){b("bs_caml_option").valFromOption(e)["delete"](b("bs_caml_option").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a.fbid);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a.fbid);d.fetchUnreadThreadIDs(c);return 0}}else return 0}function Ba(c,a,d){var e=b("MessengerFolders.bs").getFromMeta(a);if(d!==e){za.includes(e)&&a.unread_count>0&&ya(c,e,b("bs_caml_option").some(a.thread_id));if(za.includes(d))return Aa(c,d,b("bs_caml_option").some(a.thread_id));else return 0}else return 0}function Ca(a,c,d,e,f){var g=b("gkx")("1275193"),h=a.threadlistOrderMap[c][d],i=h.existingIDs.has(e);!f&&g?v(a,[e],c,d):xa(a,[e],c,d);if(!g||h.threadlist.length!==0){f=b("bs_caml_array").caml_array_get(h.threadlist,h.threadlist.length-1|0)===e;if(!h.reachedEnd&&!i&&f)return ta(a,[e],c,d);else return 0}else return 0}function Da(a,c,d){if(oa.includes(c))if((c===b("MessagingTag").INBOX||c===b("MessagingTag").ACTION_ARCHIVED||c===b("MessagingTag").PENDING)&&b("gkx")("1275193"))return Ca(a,c,b("MercuryFilters.bs").unread,d,!0);else{xa(a,[d],c,b("MercuryFilters.bs").unread);return 0}else return 0}function Ea(c,a){var d=b("MessengerFolders.bs").getFromMeta(a);if(oa.includes(d)){na.forEach(function(b){return Ca(c,d,b,a.thread_id,!1)});return 0}else return 0}function Fa(a,c,d,e){var f=b("bs_belt_Map").get(a.threads,c);if(f!==void 0){f=b("bs_caml_option").valFromOption(f);var g=b("MessengerFolders.bs").getFromMeta(f);if(g!==d){if(e){e=f.comm_status;e=e==null?b("ImmutableObject").set(f,{folder:d}):d===b("MessagingTag").OTHER?b("ImmutableObject").set(f,{folder:d,comm_status:b("PageCommItemStatus").SPAM}):d===b("MessagingTag").INBOX?b("ImmutableObject").set(f,{folder:d,comm_status:b("PageCommItemStatus").TODO}):b("ImmutableObject").set(f,{folder:d})}else e=f;var h=f.other_user_fbid;h=h==null?[]:d===b("MessagingTag").OTHER?[b("MercuryIDs").getParticipantIDFromUserID(h)]:[];var i=f.other_user_fbid;d=i==null?[]:d===b("MessagingTag").OTHER?[]:[b("MercuryIDs").getParticipantIDFromUserID(i)];i=ja(a,h,d);h=b("bs_belt_Map").set(i.threads,c,e);Ba(i,e,g);Ea(i,e);s(i.fbid,c);return{fbid:i.fbid,deliveryReceipts:i.deliveryReceipts,readReceiptsPerThread:i.readReceiptsPerThread,ignoredIds:i.ignoredIds,blockedIds:i.blockedIds,pendingFolderUnseenCount:i.pendingFolderUnseenCount,typing:i.typing,threads:h,pendingReadStatusThreads:i.pendingReadStatusThreads,messages:i.messages,localIDsMap:i.localIDsMap,messagesWithUploadsInFlight:i.messagesWithUploadsInFlight,threadlistOrderMap:i.threadlistOrderMap,pinnedThreads:i.pinnedThreads,montage:i.montage,orderedMessageLists:i.orderedMessageLists,unreadCounts:i.unreadCounts,initialUnreadCounts:i.initialUnreadCounts,unseenTimestamp:i.unseenTimestamp}}else{Ea(a,f);return a}}else return a}function Ga(a,c,d){d=c.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c):d!==void 0?d:c.body;var e=c.raw_attachments;e=!(e==null)&&e.length!==0?b("MercuryAttachment").convertRaw(e):c.attachments;var f=c.removed_timestamp;if(f==null){f=c.log_message_type;d={snippet:d,snippet_attachments:e,snippet_sender:f==null?c.author:null}}else d={snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(c.author),snippet_attachments:null,snippet_sender:null};return Object.assign(a,d)}function Ha(a,c,d){var e=a.event_title,f=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:c.track_rsvp,title:e==null?c.title:e,event_time:f==null?c.event_time:parseInt(f,10),location_name:a==null?c.location_name:a,event_members:d!==void 0?b("bs_caml_option").valFromOption(d):c.event_members,oid:c.oid,event_type:c.event_type}}function Ia(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a];return 0});c[a.guest_id]=a.guest_status;return c}var w=function(a,b){delete a[b];return 0},Ja=function(a,b){delete a[b];return 0};function x(a){var c={contents:-1},d={contents:null},e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c.contents<0||c.contents>b)){c.contents=b;d.contents=a;return 0}else return 0});return d.contents}function y(a,c,d){d=b("XMercuryThreadLikeIconController").getURIBuilder().setString("emoji",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(d){var e=b("MercuryDispatcher").getForFBID(a);e.handleUpdate({actions:[{action_type:b("MercuryActionType").UPDATE_CUSTOM_LIKE,thread_id:c,custom_like:d.getPayload()}],from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE});return 0}).send();return 0}function Ka(d,a,c,e){c=c.log_message_data;if(c==null)return 0;else{var f=c.untypedData;if(c.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){var g=a.custom_nickname;if(!(g==null)){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(g));var h=f.nickname;h.trim().length>0?g[f.participant_id]=h:Ja(g,f.participant_id);Object.assign(a,{custom_nickname:g})}s(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)y(d,e,f.thread_icon);else if(c.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("ChatConfig").get("chat_tab_has_gradients")){h=f.theme_color;if(h==null)Object.assign(a,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(h.length>0){g="#"+h.slice(2);Object.assign(a,{solid_color:g,header_color:g,footer_color:g,gradient_colors:[g]})}else Object.assign(a,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});s(d,e)}}else if(f!==void 0)if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var i={},j=f.event_creator_id;a.participants.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{i[a]=b("bs_caml_obj").caml_equal(a,j)?"GOING":"INVITED";return 0}});h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));g=f.event_time;g={track_rsvp:f.event_track_rsvp,title:f.event_title,event_time:g==null?0:parseInt(g,10),location_name:f.event_location_name,event_members:i,oid:f.event_id,event_type:f.event_type};Object.assign(a,{lightweight_event:g});h[f.event_id]=Object.assign({},g);Object.assign(a,{lightweight_events:h});s(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){g=a.lightweight_event;if(!(g==null)){h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));g.oid===f.event_id&&Object.assign(a,{lightweight_event:Ha(f,g,b("bs_caml_option").some(g.event_members))});g=b("bs_js_dict").get(h,f.event_id);g!==void 0&&(h[f.event_id]=Ha(f,b("bs_caml_option").valFromOption(g),void 0),Object.assign(a,{lightweight_events:h}))}s(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));h=a.lightweight_event;if(!(h==null)&&h.oid===f.event_id){var l=Ia(h.event_members,f);Object.assign(a,{lightweight_event:Ha(f,h,b("bs_caml_option").some(l))})}h=b("bs_js_dict").get(g,f.event_id);if(h!==void 0){l=b("bs_caml_option").valFromOption(h);h=Ia(l.event_members,f);g[f.event_id]=Ha(f,l,b("bs_caml_option").some(h));Object.assign(a,{lightweight_events:g})}s(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){l=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));w(l,f.event_id);Object.assign(a,{lightweight_event:x(l),lightweight_events:l});s(d,e)}return 0}}function La(a,c,d){if(b("CurrentUser").isWorkUser()&&b("gkx")("1179386")){var e=a;c=c;var f=d;d=b("bs_belt_Map").get(e.threads,c);if(d!==void 0){d=b("bs_caml_option").valFromOption(d);var g=d.pinned_messages;g=g==null?void 0:g.map(function(a){if(f.findIndex(function(b){return b===a.message_id})!==-1)return{message_id:a.message_id,pinning_time:a.pinning_time,message:null};else return a});if(g!==void 0){d=b("ImmutableObject").set(d,{pinned_messages:g});g=b("bs_belt_Map").set(e.threads,c,d);s(e.fbid,c);d=g}else d=e.threads}else d=e.threads;return{fbid:e.fbid,deliveryReceipts:e.deliveryReceipts,readReceiptsPerThread:e.readReceiptsPerThread,ignoredIds:e.ignoredIds,blockedIds:e.blockedIds,pendingFolderUnseenCount:e.pendingFolderUnseenCount,typing:e.typing,threads:d,pendingReadStatusThreads:e.pendingReadStatusThreads,messages:e.messages,localIDsMap:e.localIDsMap,messagesWithUploadsInFlight:e.messagesWithUploadsInFlight,threadlistOrderMap:e.threadlistOrderMap,pinnedThreads:e.pinnedThreads,montage:e.montage,orderedMessageLists:e.orderedMessageLists,unreadCounts:e.unreadCounts,initialUnreadCounts:e.initialUnreadCounts,unseenTimestamp:e.unseenTimestamp}}else return a}function Ma(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.updatedMessage(c,d,b("bs_js_null_undefined").fromOption(e));return 0}function Na(c,a){c=b("MercuryThreadInformer").getForFBID(c);c.receivedMessage(a);return 0}function Oa(a,c,d){a=b("MercuryThreadInformer").getForFBID(a);a.reorderedMessages(c,d);return 0}function Pa(a,c,d,e,f){a=b("MercuryThreadInformer").getForFBID(a);f=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(f==null?void 0:b("bs_caml_option").some(f),function(a){return b("bs_belt_Array").keepMap(a,function(a){return b("bs_caml_option").nullable_to_opt(a.message_file_fbid)})}),[]);b("MWChatDeleteMessageEventEmitter").emit(d);a.deletedMessage(c,d,b("bs_js_null_undefined").fromOption(e),f);return 0}function Qa(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.deletedMessage(c,d,b("bs_js_null_undefined").fromOption(e),null);return 0}var Ra=function(a,b){delete a[b];return 0};function Sa(c,a){var d=c.localIDsMap.get(a);return b("bs_caml_option").nullable_to_opt(c.messages.get(b("bs_belt_Option").getWithDefault(d==null?void 0:b("bs_caml_option").some(d),a)))}function z(a,c,d){a=a!==void 0?a:!1;d=b("bs_belt_Array").keepMap(d,function(a){return Sa(c,a)});if(a)return d.slice().reverse();else return d}function Ta(a,c){return b("bs_belt_Array").keepMap(c,function(b){return Sa(a,b)}).sort(function(a,c){return b("MessengerMessage.bs").compare(c,a)}).map(function(a){return a.message_id})}function Ua(a,b){return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:a.ignoredIds,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages.set(b[0],b[1]),localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}function Va(b,a){b.localIDsMap.set(a.message_id,a.message_id);return{fbid:b.fbid,deliveryReceipts:b.deliveryReceipts,readReceiptsPerThread:b.readReceiptsPerThread,ignoredIds:b.ignoredIds,blockedIds:b.blockedIds,pendingFolderUnseenCount:b.pendingFolderUnseenCount,typing:b.typing,threads:b.threads,pendingReadStatusThreads:b.pendingReadStatusThreads,messages:b.messages,localIDsMap:b.localIDsMap,messagesWithUploadsInFlight:b.messagesWithUploadsInFlight,threadlistOrderMap:b.threadlistOrderMap,pinnedThreads:b.pinnedThreads,montage:b.montage,orderedMessageLists:b.orderedMessageLists,unreadCounts:b.unreadCounts,initialUnreadCounts:b.initialUnreadCounts,unseenTimestamp:b.unseenTimestamp}}var Wa=function(a,b){delete a[b];return 0};function Xa(c,d){var a=c.orderedMessageLists;Object.keys(d).forEach(function(e){var f=b("bs_js_dict").get(d,e);if(f!==void 0){f=f;var g=f[0],h=g.limit,i=g.offset;g=a.get(g.threadID);if(g==null)return 0;else{g=g.messageIDs;if(g.length>=(i+h|0)){Wa(d,e);return b("bs_curry")._1(f[1],z(!0,c,g.slice(i,i+h|0)))}else return 0}}else return 0});return 0}function Ya(d,c,e){var a=e[1],f=e[0];b("MessengerMessage.bs").finalizeRanges(a);var g=a.offline_threading_id;if(!(g==null)&&g!==a.message_id){d.localIDsMap.set(g,a.message_id);b("MercuryMessageIDs.bs").addServerID(g,a.message_id);g=a.threading_id;g==null||b("MercuryMessageIDs.bs").addServerID(g,a.message_id)}g=d.messages.has(f);var h=d.fbid,i=d.deliveryReceipts,j=d.readReceiptsPerThread,k=d.ignoredIds,l=d.blockedIds,m=d.pendingFolderUnseenCount,aa=d.typing,ba=d.threads,ca=d.pendingReadStatusThreads,da=d.messages.set(f,a),n=d.localIDsMap,o=d.messagesWithUploadsInFlight,p=d.threadlistOrderMap,q=d.pinnedThreads,ea=d.montage,fa=d.orderedMessageLists,ga=d.unreadCounts,r=d.initialUnreadCounts;d=d.unseenTimestamp;h={fbid:h,deliveryReceipts:i,readReceiptsPerThread:j,ignoredIds:k,blockedIds:l,pendingFolderUnseenCount:m,typing:aa,threads:ba,pendingReadStatusThreads:ca,messages:da,localIDsMap:n,messagesWithUploadsInFlight:o,threadlistOrderMap:p,pinnedThreads:q,montage:ea,orderedMessageLists:fa,unreadCounts:ga,initialUnreadCounts:r,unseenTimestamp:d};if(!g&&e[2]===1){i=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(a.thread_id),function(a){return b("bs_caml_option").nullable_to_opt(fa.get(a))}),{messageLoadingState:b("MercuryIDs").isLocalThread(a.thread_id)?1:0,messageIDs:[]});j=a.thread_id;if(!(j==null)){k=Ta(h,[f].concat(i.messageIDs.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a.offline_threading_id)})));fa.set(j,{messageLoadingState:i.messageLoadingState,messageIDs:k})}Xa(h,c.messageCallbacks.contents)}return h}function Za(b,c,a){b.messagesWithUploadsInFlight.set(c,a);return{fbid:b.fbid,deliveryReceipts:b.deliveryReceipts,readReceiptsPerThread:b.readReceiptsPerThread,ignoredIds:b.ignoredIds,blockedIds:b.blockedIds,pendingFolderUnseenCount:b.pendingFolderUnseenCount,typing:b.typing,threads:b.threads,pendingReadStatusThreads:b.pendingReadStatusThreads,messages:b.messages,localIDsMap:b.localIDsMap,messagesWithUploadsInFlight:b.messagesWithUploadsInFlight,threadlistOrderMap:b.threadlistOrderMap,pinnedThreads:b.pinnedThreads,montage:b.montage,orderedMessageLists:b.orderedMessageLists,unreadCounts:b.unreadCounts,initialUnreadCounts:b.initialUnreadCounts,unseenTimestamp:b.unseenTimestamp}}function $a(a,c){var d=c[1];c=c[0];var e=a.messagesWithUploadsInFlight.get(c);b("bs_belt_Option").isSome(e==null?void 0:b("bs_caml_option").some(e))||g(0,1777);a.messagesWithUploadsInFlight["delete"](c);if(e==null)return b("bs_pervasives").failwith("Message must exist to update");else return Object.assign(e,{image_ids:d.image_ids,file_ids:d.file_ids,audio_ids:d.audio_ids,gif_ids:d.gif_ids,video_ids:d.video_ids,client_state:b("MercuryMessageClientState").SEND_TO_SERVER})}function ab(a,c){var d=c[1],e=c[0],f=a.orderedMessageLists.get(e);if(f==null)return a;else{var g=b("bs_belt_Array").keepMap(d,function(b){return Sa(a,b)}).map(function(a){return a.message_id}),h=Ta(a,f.messageIDs.filter(function(a){return g.indexOf(a)===-1}));a.orderedMessageLists.set(e,{messageLoadingState:f.messageLoadingState,messageIDs:h});Oa(a.fbid,e,b("bs_js_null_undefined").fromOption(c[2]));f=La(a,e,d);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}}function bb(c,d){var e={snippet:"...",snippet_attachments:null,snippet_sender:null};d=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(c.orderedMessageLists.get(d)),function(a){return b("bs_belt_Array").get(z(void 0,c,a.messageIDs),0)});if(d!==void 0){var a=b("bs_caml_option").valFromOption(d);a=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):a.body}else a=null;if(d!==void 0){d=b("bs_caml_option").valFromOption(d);var f=d.removed_timestamp;if(f==null)if(a==null)return e;else{f=d.log_message_type;return{snippet:a,snippet_attachments:d.attachments,snippet_sender:f==null?d.author:null}}else return{snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(d.author),snippet_attachments:null,snippet_sender:null}}else return e}function cb(c,a){var d=a.attachments;if(d==null)return 0;else{var e=b("bs_belt_Array").keepMap(d,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return;else return b("bs_caml_option").nullable_to_opt(a.fbid)}});b("MessengerSharedMediaActionsLoader").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),e);if(c!==void 0)return b("MessengerSharedPhotosVideosBaseData.bs").localRemove(b("bs_caml_option").valFromOption(c),b("bs_belt_Array").keepMap(d,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return;else return b("bs_caml_option").nullable_to_opt(a.fbid)}}));else return 0}}function db(a,c,d){d=a.orderedMessageLists.get(d);if(d==null)return a;else{d=d.messageIDs;var e={contents:!0};return b("bs_belt_Array").reduce(d,a,function(d,a){if(e.contents){var f=d.localIDsMap.get(a);f=b("bs_belt_Option").getWithDefault(f==null?void 0:b("bs_caml_option").some(f),a);if(f===c){e.contents=!1;return d}else{a=Sa(d,f);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);var g=a.replied_to_message,h;if(g==null)h=void 0;else{g=g.message;if(g==null)h=void 0;else{var i=d.localIDsMap.get(g.message_id);h=b("bs_belt_Option").getWithDefault(i==null?void 0:b("bs_caml_option").some(i),g.message_id)}}if(h!==void 0&&h===c){i={status:b("RepliedToMessageStatusForGraphQL").DELETED,message:null};g=Object.assign(Object.assign({},a),{replied_to_message:i});return Ua(d,[f,g])}else return d}else return d}}else return d})}}function eb(a,c){if(a==null||a.length===0)return 0;else{a=b("bs_array").map(function(a){var d=a.type;if(b("bs_caml_obj").caml_equal(d,b("MessageProfileRangeType").THREAD_ACTIVE)||b("bs_caml_obj").caml_equal(d,b("MessageProfileRangeType").THREAD))return b("gkx")("678578");else{d=a.id;if(d==null)return!1;else return b("bs_caml_obj").caml_equal(b("FBID.bs").ofStringExn(d),c)}},a);return b("bs_array").fold_left(function(a,b){if(b)return a+1|0;else return a},0,a)}}function fb(a,c,d){if(b("cr:1299779")==null)return 0;else{var e=b("MercuryIDs").getThreadFBIDFromThreadID(a);b("MessengerWebStgTypedLoggerLite").log({event_name:b("MessengerWebEvent").SENT_MSG,mid:c,offline_threading_id:d,other_user_fbid:b("MercuryIDs").isCanonical(a)?e:null,thread_fbid:b("MercuryIDs").isGroupChat(a)?e:null});return 0}}function gb(d,c,e,f){var g=e.client_message_id,h;if(g==null)h=d;else{var i=Sa(d,g);if(i!==void 0){i=b("bs_caml_option").valFromOption(i);var j=e.message_id,k=e.status;if(b("bs_caml_obj").caml_equal(i.status,b("MercuryActionStatus").SUCCESS))h=d;else if(d.messages.has(j)){var a=Object.assign(Object.assign({},i),e);Ma(d.fbid,a.thread_id,a.message_id,f);h=Ua(d,[j,a])}else{a=b("bs_caml_obj").caml_equal(e.status,b("MercuryActionStatus").SUCCESS)?e.error_data:null;b("MercuryMessageIDs.bs").addServerID(g,j);d.localIDsMap.set(g,j);i=Object.assign(Object.assign({},i),{status:k,error_data:a,timestamp:e.timestamp,log_message_data:e.log_message_data,ranges:e.ranges,attachments:e.attachments,has_attachment:e.has_attachment,is_one_way_sent:e.is_one_way_sent,is_forwarded:e.is_forwarded});b("MessengerMessage.bs").finalizeRanges(i);k=Ua(d,[j,i]);k.messages.set(g,{});k.messages["delete"](g);a=i.thread_id;var l=k.orderedMessageLists.get(a);if(!(l==null)){var m=Ta(k,l.messageIDs);k.orderedMessageLists.set(a,{messageLoadingState:l.messageLoadingState,messageIDs:m})}Ma(k.fbid,i.thread_id,i.message_id,f);a=b("MessengerMessage.bs").isTitanMessage(i);l=c.localTitanMessageCount.get(i.thread_id);a&&(l==null||c.localTitanMessageCount.set(i.thread_id,l-1|0));h={fbid:k.fbid,deliveryReceipts:k.deliveryReceipts,readReceiptsPerThread:k.readReceiptsPerThread,ignoredIds:k.ignoredIds,blockedIds:k.blockedIds,pendingFolderUnseenCount:k.pendingFolderUnseenCount,typing:k.typing,threads:k.threads,pendingReadStatusThreads:k.pendingReadStatusThreads,messages:k.messages,localIDsMap:k.localIDsMap.set(g,j),messagesWithUploadsInFlight:k.messagesWithUploadsInFlight,threadlistOrderMap:k.threadlistOrderMap,pinnedThreads:k.pinnedThreads,montage:k.montage,orderedMessageLists:k.orderedMessageLists,unreadCounts:k.unreadCounts,initialUnreadCounts:k.initialUnreadCounts,unseenTimestamp:k.unseenTimestamp}}}else h=d}m={};f=e.log_message_type;if(f==null)Object.assign(m,{snippet_attachments:e.attachments});else{if(b("bs_caml_obj").caml_equal(f,b("MercuryLogMessageType").THREAD_IMAGE)){a=e.log_message_data;if(a==null)c=null;else{i=a.image;c=i==null?null:i.preview_url}Object.assign(m,{image_src:c});s(h.fbid,e.thread_id)}b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").UNSUBSCRIBE)&&Object.assign(m,{snippet_attachments:e.attachments})}fb(e.thread_id,e.message_id,e.offline_threading_id);return u(void 0,h,e.thread_id,m)}function hb(c,a,d,e){if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").SEND_MESSAGE))return gb(c,a,d,e);else{var f=d.offline_threading_id;f=b("bs_belt_Option").flatMap(f==null?void 0:b("bs_caml_option").some(f),function(a){return b("bs_caml_option").nullable_to_opt(c.localIDsMap.get(a))});var g=Sa(c,d.message_id);if(f!==void 0)if(g!==void 0){f=b("bs_caml_option").valFromOption(g);if(b("bs_caml_option").nullable_to_opt(f.sticker_id)!==void 0){var h=Object.assign(f,{attachments:d.attachments});return Ua(c,[f.message_id,h])}else return c}else return c;else if(g!==void 0)return c;else{f=b("bs_caml_obj").caml_equal(e,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))?Va(c,d):c;h=b("bs_caml_obj").caml_equal(d.client_state,b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER);g=d.upload_id;e=h&&!(g==null)?Za(f,g,d):f;h=b("MessengerMessage.bs").isErrorLogMessage(d);g=d.thread_id;h&&(g==null||(a.failedHistoryFetchThreads.contents[g]=!0));f=d.manual_retry_cnt;h=d.thread_id;f==null||!(h==null)&&f>0&&Oa(e.fbid,h,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE);g=Ya(e,a,[d.message_id,d,1]);Na(g.fbid,d);return g}}}function ib(a,c,d,e){if(c!==void 0){c=b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(c),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE);var f=d.thread_id;if(c&&!(f==null)){c=b("MercuryThreadInformer").getForFBID(a);return b("bs_curry")._3(e,c,f,d)}else return 0}else return 0}function jb(a,b){var c=a.participants.indexOf(b);if(c>0){Object.assign(a,{participants:[b].concat(a.participants.slice(0,c),a.participants.slice(c+1|0))});return 0}else return 0}function kb(a,c,d,e){var f=c.thread_id;if(f==null)return a;else{var g=b("bs_belt_Map").get(a.threads,f);if(g!==void 0){g=b("bs_caml_option").valFromOption(g);var h={};if(!c.skip_bump_thread&&b("bs_caml_obj").caml_notequal(d,b("bs_caml_option").some(b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))){Ga(h,c,b("bs_caml_option").nullable_to_opt(c.log_message_body));if(c.timestamp>g.timestamp){Object.assign(h,{timestamp:c.timestamp});if(c.is_unread){Object.assign(h,{unread_count:g.unread_count+1|0});d=eb(c.profile_ranges,a.fbid);d>0&&Object.assign(h,{unread_mentions_count:g.unread_mentions_count+d|0})}}Object.assign(h,{message_count:g.message_count+1|0,is_archived:!1})}e!==!0&&(c.timestamp>h.server_timestamp&&Object.assign(h,{server_timestamp:c.timestamp}));if(b("bs_caml_obj").caml_notequal(h,{}))return u(void 0,a,f,h);else return a}else return a}}function lb(b,a,c){var d=new Set(c);Object.assign(a,{participants:a.participants.filter(function(a){return!d.has(a)})});if(d.has(b)){Object.assign(a,{can_reply:!1,is_subscribed:!1});return 0}else return 0}function A(c,a,d){a=a.specific_to_list;if(a==null){d=b("MercuryIDs").tokenize(d);if(d.type!=="user"||d.value.length===0)return[c];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d.value)),c]}else return a}function B(c,a,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=a.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(c,g);if(g||f)c=A(c,a,d);else{var h=a.specific_to_list;c=h==null?[]:h}return new(b("ImmutableObject"))({admins:{},admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:!0,cannot_reply_reason:null,can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],composer_input_disabled:!1,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],accessibility_label:null,reverse_gradients_for_radial:null,group_approval_queue:null,group_thread_subtype:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_message_admin_text_type:null,last_message_unsendability_status:null,last_message_id:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,reactions:void 0,thread_associated_job_applications:null,thread_associated_page_admin:null,thread_connectivity_data:null,thread_fbid:null,thread_type:null,thread_pin_timestamp:null,thread_id:d,participants:c,preloaded_participants:[],name:"",snippet:a.body,snippet_attachments:[],snippet_sender:a.author,unread_count:0,message_count:0,image_src:null,timestamp:a.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_other_recipient_page:!1,is_canonical:g,is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,object_association_type:null,joinable_link:null,linked_mentorship_programs:null,thread_unsendability_status:null,is_business_page_active:!1,graphql_token:null,conversion_detection_data:null})}function mb(c,d,a,e){e=b("MessengerMessage.bs").hasServerTimestamp(a,e);var f=a.thread_id;if(f==null)return;else{b("MercuryAssert").isThreadID(f);d=b("bs_belt_Map").get(d,f);if(d!==void 0)return b("bs_caml_option").some(b("bs_caml_option").valFromOption(d));else if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e)return b("bs_caml_option").some(B(b("MercuryIDs").getParticipantIDFromUserID(c),a,f));else return}}function nb(a,c){var d=c.other_user_fbid;if(d==null){var e=c.thread_fbid;e=e==null?void 0:b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromThreadFBID(e))}else e=b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(d));d=c.thread_id;e=d==null?e:d==null?void 0:b("bs_caml_option").some(d);d=c.thread_id;var f;if(d==null)f="";else{d=b("bs_belt_Map").get(a.threads,d);f=d!==void 0?b("MessengerFolders.bs").getFromMeta(b("bs_caml_option").valFromOption(d)):c.folder}za.includes(f)&&((b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE))&&c.is_unread&&ya(a,f,e));return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:a.ignoredIds,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages,localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}var ob=function(a,b){delete a[b];return 0};function pb(a,c){Object.keys(c).forEach(function(d){var e=b("bs_js_dict").get(c,d);if(e!==void 0){e=e;var f=e[0],g=j(f.reduce(function(d,e){var c=b("bs_belt_Map").get(a,e);if(c!==void 0)return b("bs_belt_Map").set(d,e,b("bs_caml_option").valFromOption(c));else return d},b("bs_belt_Map").make(b("ThreadId.bs"))));if(Object.keys(g).length===f.length){ob(c,d);return b("bs_curry")._1(e[1],g)}else return 0}else return 0});return 0}function qb(c,a,d,e,f){var g=c.fbid;d!==0&&sa(g,a.thread_id,f,d);if(a.timestamp===0){b("ChatReliabilityInstrumentation").logERROR("thread timestamp is 0");e.add(a.thread_id);return}else{d=a.unread_count===0;if(d===f)return;else{s(g,a.thread_id);if(f)e=0;else{d=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(c.orderedMessageLists.get(a.thread_id)),function(a){return b("bs_belt_Array").get(z(void 0,c,a.messageIDs),0)});g=d!==void 0?b("bs_caml_option").valFromOption(d).profile_ranges:null;e=eb(g,c.fbid)}return{unread_count:f?0:1,unread_mentions_count:e}}}}function rb(a,c,d,e,f){f=b("gkx")("1275193")?v(a,f,c,d):xa(a,f,c,d);a=a.threadlistOrderMap[c];c=b("bs_js_dict").get(a,d);c=c!==void 0?b("bs_caml_option").valFromOption(c).reachedEnd:!1;a[d]={reachedEnd:e.contents?e.contents:c,threadlist:f[0],existingIDs:f[1]};return 0}function sb(a,c,d,e){var f=b("bs_belt_Array").make(e.length,[]),g={contents:!1};d.forEach(function(d){d.thread_ids.forEach(function(c){var h=b("bs_belt_Map").get(a.threads,c);if(h!==void 0){h=va(b("bs_caml_option").valFromOption(h));for(var g=0,d=e.length-1|0;g<=d;++g){var i=h.find(function(a){return function(c){return c===b("bs_caml_array").caml_array_get(e,a)}}(g));(i===void 0?void 0:b("bs_caml_option").some(i))!==void 0&&b("bs_caml_array").caml_array_get(f,g).push(c)}return 0}else return 0});d=d.limit;var h=e.find(function(a){return a===b("MercuryFilters.bs").all});h=h===void 0?void 0:b("bs_caml_option").some(h);for(var i=0,c=f.length-1|0;i<=c;++i)h===void 0&&b("bs_caml_array").caml_array_get(f,i).length<d?g.contents=!0:b("bs_caml_array").caml_array_get(e,i)===b("MercuryFilters.bs").all&&b("bs_caml_array").caml_array_get(f,i).length<d&&(g.contents=!0);return 0});for(var d=0,h=e.length-1|0;d<=h;++d)rb(a,c,b("bs_caml_array").caml_array_get(e,d),g,b("bs_caml_array").caml_array_get(f,d));return 0}function C(c,a){var d;if(a.is_archived)d=b("MessagingTag").ACTION_ARCHIVED;else{var e=a.thread_type;d=e==null||e!==b("MessagingThreadType").MARKETPLACE?a.folder:b("MessagingTag").MARKETPLACE_FOLDER}e=b("bs_js_dict").get(c.threadlistOrderMap,d);if(e!==void 0)return d}function tb(a,c){var d={};oa.forEach(function(a){var b={};na.forEach(function(a){b[a]=[];return 0});d[a]=b;return 0});c.forEach(function(c){var e=b("bs_belt_Map").get(a.threads,c.thread_id);if(e!==void 0){var f=b("bs_caml_option").valFromOption(e);e=C(a,f);if(e!==void 0){var g=e;va(f).forEach(function(a){if(f.timestamp!==0){d[g][a].push(c.thread_id);return 0}else return 0});return 0}else return 0}else return 0});oa.forEach(function(c){na.forEach(function(e){var f=d[c][e];if(b("gkx")("1275193")){v(a,f,c,e);return 0}else{xa(a,f,c,e);return 0}});return 0});return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:a.ignoredIds,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages,localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}function ub(a){b("bs_belt_Map").map(a.threads,function(c){c=b("bs_belt_Map").get(a.threads,c.thread_id);if(c!==void 0){c=b("bs_caml_option").valFromOption(c);if(b("bs_caml_option").nullable_to_opt(c.thread_type)===b("MessagingThreadType").MARKETPLACE){c=b("ImmutableObject").set(c,{folder:"marketplace_folder"});tb(a,[c]);return 0}else return 0}else return 0});return 0}function vb(c,a,d){var e=function(a){return a.timestamp>(d&&c.unseenTimestamp<=a.last_read_timestamp?a.last_read_timestamp:c.unseenTimestamp)},f=function(a){var d;return(d=b("bs_belt_Option")).mapWithDefault(d.flatMap(d.map(d.map(b("bs_caml_option").nullable_to_opt(c.orderedMessageLists.get(a.thread_id)),function(a){return b("bs_caml_array").caml_array_get(a.messageIDs,0)}),function(a){return b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.localIDsMap.get(a)),a)}),function(a){return b("bs_caml_option").nullable_to_opt(c.messages.get(a))}),!1,function(a){return a.author===b("MercuryIDs").getParticipantIDFromUserID(c.fbid)})},g=function(a,c){if(e(a)&&!b("MercuryThreadInfo").isMuted(a)&&!f(a))return c+1|0;else return c};return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_dict").get(c.threadlistOrderMap,b("MessagingTag").INBOX),function(a){return b("bs_js_dict").get(a,b("MercuryFilters.bs").all)}),function(d){d=d.threadlist;if(d.length!==0)return d.reduce(function(a,d){d=b("bs_belt_Map").get(c.threads,d);if(d!==void 0)return g(b("bs_caml_option").valFromOption(d),a);else return a},0);else if(b("bs_belt_Map").isEmpty(c.threads))return a.fallbackUnseenCount.contents;else return b("bs_belt_Map").reduce(c.threads,0,function(d,e,a){e=C(c,a);if(e!==void 0&&e===b("MessagingTag").INBOX)return g(a,d);else return d})}),a.fallbackUnseenCount.contents)}function wb(c,a){return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_dict").get(c.threadlistOrderMap,b("MessagingTag").INBOX),function(a){return b("bs_js_dict").get(a,b("MercuryFilters.bs").all)}),function(d){if(d.threadlist.length===0)if(b("bs_belt_Map").isEmpty(c.threads))return a.fallbackUnseenCount.contents;else return b("bs_belt_Map").reduce(c.threads,0,function(d,e,a){var f=C(c,a);if(f!==void 0&&f===b("MessagingTag").INBOX&&a.timestamp>c.unseenTimestamp&&!b("MercuryThreadInfo").isMuted(a)){f=b("bs_js_dict").get(c.unreadCounts,b("MessagingTag").INBOX);if(f!==void 0&&b("bs_caml_option").valFromOption(f).has(e))return d+1|0;else return d}else return d});else return d.threadlist.reduce(function(a,d){var e=b("bs_belt_Map").get(c.threads,d);if(e!==void 0){e=b("bs_caml_option").valFromOption(e);if(e.timestamp>c.unseenTimestamp&&!b("MercuryThreadInfo").isMuted(e)){e=b("bs_js_dict").get(c.unreadCounts,b("MessagingTag").INBOX);if(e!==void 0&&b("bs_caml_option").valFromOption(e).has(d))return a+1|0;else return a}else return a}else return a},0)}),a.fallbackUnseenCount.contents)}function xb(c,a,d){if(d===b("MessagingTag").PENDING)return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:0,typing:c.typing,threads:c.threads,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:c.unseenTimestamp};else{if(b("gkx")("969964")){d=b("MercuryThreadInformer").getForFBID(c.fbid);d.updatedUnseenTimestamp()}return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:c.pendingFolderUnseenCount,typing:c.typing,threads:c.threads,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:a}}}function yb(a,c,d){var e=[];d=b("bs_array").fold_left(function(f,g){switch(g.tag|0){case 0:e.push(g[0].tag|0);break;case 1:case 2:break}switch(g.tag|0){case 0:var i=g[0];if(typeof i==="number"){var l=f,m=a;m.threadCallbacks.contents={};m.threadSubToken.contents=m.threadSubToken.contents;m.failedHistoryFetchThreads.contents={};m.localTitanMessageCount.clear();b("bs_belt_Map").keysToArray(l.threads).forEach(function(a){return qa(l.fbid,a)});return{fbid:l.fbid,deliveryReceipts:l.deliveryReceipts,readReceiptsPerThread:null,ignoredIds:l.ignoredIds,blockedIds:l.blockedIds,pendingFolderUnseenCount:l.pendingFolderUnseenCount,typing:l.typing,threads:b("bs_belt_Map").make(b("ThreadId.bs")),pendingReadStatusThreads:new Set(),messages:new Map(),localIDsMap:new Map(),messagesWithUploadsInFlight:l.messagesWithUploadsInFlight,threadlistOrderMap:pa(0),pinnedThreads:l.pinnedThreads,montage:l.montage,orderedMessageLists:new Map(),unreadCounts:l.unreadCounts,initialUnreadCounts:l.initialUnreadCounts,unseenTimestamp:l.unseenTimestamp}}else switch(i.tag|0){case 0:m=f;var aa=i[0],ca={contents:!1},da={contents:m.deliveryReceipts};Object.keys(aa).forEach(function(a){var c=aa[a],d=b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(da.contents,a),0);if(c>d){ca.contents=!0;da.contents=b("bs_belt_MapString").set(da.contents,a,c);return 0}else return 0});if(ca.contents)return{fbid:m.fbid,deliveryReceipts:da.contents,readReceiptsPerThread:m.readReceiptsPerThread,ignoredIds:m.ignoredIds,blockedIds:m.blockedIds,pendingFolderUnseenCount:m.pendingFolderUnseenCount,typing:m.typing,threads:m.threads,pendingReadStatusThreads:m.pendingReadStatusThreads,messages:m.messages,localIDsMap:m.localIDsMap,messagesWithUploadsInFlight:m.messagesWithUploadsInFlight,threadlistOrderMap:m.threadlistOrderMap,pinnedThreads:m.pinnedThreads,montage:m.montage,orderedMessageLists:m.orderedMessageLists,unreadCounts:m.unreadCounts,initialUnreadCounts:m.initialUnreadCounts,unseenTimestamp:m.unseenTimestamp};else return m;case 1:return ja(f,i[0],[]);case 2:m=f;var n=i[0],o=i[1];o=o.reduce(b("bs_belt_Set").remove,n.reduce(b("bs_belt_Set").add,m.blockedIds));if(o===m.blockedIds)return m;else return{fbid:m.fbid,deliveryReceipts:m.deliveryReceipts,readReceiptsPerThread:m.readReceiptsPerThread,ignoredIds:m.ignoredIds,blockedIds:o,pendingFolderUnseenCount:m.pendingFolderUnseenCount,typing:m.typing,threads:m.threads,pendingReadStatusThreads:m.pendingReadStatusThreads,messages:m.messages,localIDsMap:m.localIDsMap,messagesWithUploadsInFlight:m.messagesWithUploadsInFlight,threadlistOrderMap:m.threadlistOrderMap,pinnedThreads:m.pinnedThreads,montage:m.montage,orderedMessageLists:m.orderedMessageLists,unreadCounts:m.unreadCounts,initialUnreadCounts:m.initialUnreadCounts,unseenTimestamp:m.unseenTimestamp};case 3:n=f;o=i[0];m=o.reduce(function(c,d){var a=d.is_messenger_ignored;if(a==null)return c;else if(a)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid))},n.ignoredIds);if(m===n.ignoredIds)return n;else return{fbid:n.fbid,deliveryReceipts:n.deliveryReceipts,readReceiptsPerThread:n.readReceiptsPerThread,ignoredIds:m,blockedIds:n.blockedIds,pendingFolderUnseenCount:n.pendingFolderUnseenCount,typing:n.typing,threads:n.threads,pendingReadStatusThreads:n.pendingReadStatusThreads,messages:n.messages,localIDsMap:n.localIDsMap,messagesWithUploadsInFlight:n.messagesWithUploadsInFlight,threadlistOrderMap:n.threadlistOrderMap,pinnedThreads:n.pinnedThreads,montage:n.montage,orderedMessageLists:n.orderedMessageLists,unreadCounts:n.unreadCounts,initialUnreadCounts:n.initialUnreadCounts,unseenTimestamp:n.unseenTimestamp};case 4:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("SetInitialPendingFolderUnseenCount");o=f;m=i[0];return{fbid:o.fbid,deliveryReceipts:o.deliveryReceipts,readReceiptsPerThread:o.readReceiptsPerThread,ignoredIds:o.ignoredIds,blockedIds:o.blockedIds,pendingFolderUnseenCount:m,typing:o.typing,threads:o.threads,pendingReadStatusThreads:o.pendingReadStatusThreads,messages:o.messages,localIDsMap:o.localIDsMap,messagesWithUploadsInFlight:o.messagesWithUploadsInFlight,threadlistOrderMap:o.threadlistOrderMap,pinnedThreads:o.pinnedThreads,montage:o.montage,orderedMessageLists:o.orderedMessageLists,unreadCounts:o.unreadCounts,initialUnreadCounts:o.initialUnreadCounts,unseenTimestamp:o.unseenTimestamp};case 5:n=f;m=i[0];o=ma(n.fbid,m);if(o==null)return n;else{var p=b("FBID.bs").ofString(m.from.toString());if(p!==void 0){b("MessengerPersonas.bs").addPersona(m.persona);var q=m.persona;p=q==null?b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(p)):b("MercuryIDs").getParticipantIDFromUserID(q.id);if(m.st===b("TypingStates").TYPING){q=b("bs_belt_MapString").get(n.typing,o);if(q!==void 0)return{fbid:n.fbid,deliveryReceipts:n.deliveryReceipts,readReceiptsPerThread:n.readReceiptsPerThread,ignoredIds:n.ignoredIds,blockedIds:n.blockedIds,pendingFolderUnseenCount:n.pendingFolderUnseenCount,typing:b("bs_belt_MapString").set(n.typing,o,b("bs_belt_Map").set(b("bs_caml_option").valFromOption(q),p,Date.now())),threads:n.threads,pendingReadStatusThreads:n.pendingReadStatusThreads,messages:n.messages,localIDsMap:n.localIDsMap,messagesWithUploadsInFlight:n.messagesWithUploadsInFlight,threadlistOrderMap:n.threadlistOrderMap,pinnedThreads:n.pinnedThreads,montage:n.montage,orderedMessageLists:n.orderedMessageLists,unreadCounts:n.unreadCounts,initialUnreadCounts:n.initialUnreadCounts,unseenTimestamp:n.unseenTimestamp};else{q=b("bs_belt_Map").set(b("bs_belt_Map").make(b("ParticipantId.bs")),p,Date.now());return{fbid:n.fbid,deliveryReceipts:n.deliveryReceipts,readReceiptsPerThread:n.readReceiptsPerThread,ignoredIds:n.ignoredIds,blockedIds:n.blockedIds,pendingFolderUnseenCount:n.pendingFolderUnseenCount,typing:b("bs_belt_MapString").set(n.typing,o,q),threads:n.threads,pendingReadStatusThreads:n.pendingReadStatusThreads,messages:n.messages,localIDsMap:n.localIDsMap,messagesWithUploadsInFlight:n.messagesWithUploadsInFlight,threadlistOrderMap:n.threadlistOrderMap,pinnedThreads:n.pinnedThreads,montage:n.montage,orderedMessageLists:n.orderedMessageLists,unreadCounts:n.unreadCounts,initialUnreadCounts:n.initialUnreadCounts,unseenTimestamp:n.unseenTimestamp}}}else if(m.st===b("TypingStates").INACTIVE){q=la(n.typing,o,p);if(q!==n.typing)return{fbid:n.fbid,deliveryReceipts:n.deliveryReceipts,readReceiptsPerThread:n.readReceiptsPerThread,ignoredIds:n.ignoredIds,blockedIds:n.blockedIds,pendingFolderUnseenCount:n.pendingFolderUnseenCount,typing:q,threads:n.threads,pendingReadStatusThreads:n.pendingReadStatusThreads,messages:n.messages,localIDsMap:n.localIDsMap,messagesWithUploadsInFlight:n.messagesWithUploadsInFlight,threadlistOrderMap:n.threadlistOrderMap,pinnedThreads:n.pinnedThreads,montage:n.montage,orderedMessageLists:n.orderedMessageLists,unreadCounts:n.unreadCounts,initialUnreadCounts:n.initialUnreadCounts,unseenTimestamp:n.unseenTimestamp};else return n}else return n}else return n}case 6:m=f;var ea=i[0],fa={contents:!1},ga={contents:m.readReceiptsPerThread};Object.keys(ea).forEach(function(c){Object.keys(ea[c]).forEach(function(d){var a=b("bs_belt_MapString").get(ga.contents,c);a=a!==void 0?b("bs_caml_option").valFromOption(a):b("immutable").OrderedMap();var e=a.get(d),f=ea[c][d];if(!(e==null)&&f.watermark<=e.watermark)return 0;fa.contents=!0;ga.contents=b("bs_belt_MapString").set(ga.contents,c,a.set(d,f));return 0});var a=b("bs_belt_MapString").get(ga.contents,c);if(a!==void 0){fa.contents=!0;ga.contents=b("bs_belt_MapString").set(ga.contents,c,b("bs_caml_option").valFromOption(a).sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)}));return 0}else return 0});if(fa.contents)return{fbid:m.fbid,deliveryReceipts:m.deliveryReceipts,readReceiptsPerThread:ga.contents,ignoredIds:m.ignoredIds,blockedIds:m.blockedIds,pendingFolderUnseenCount:m.pendingFolderUnseenCount,typing:m.typing,threads:m.threads,pendingReadStatusThreads:m.pendingReadStatusThreads,messages:m.messages,localIDsMap:m.localIDsMap,messagesWithUploadsInFlight:m.messagesWithUploadsInFlight,threadlistOrderMap:m.threadlistOrderMap,pinnedThreads:m.pinnedThreads,montage:m.montage,orderedMessageLists:m.orderedMessageLists,unreadCounts:m.unreadCounts,initialUnreadCounts:m.initialUnreadCounts,unseenTimestamp:m.unseenTimestamp};else return m;case 7:var r=f;o=a;p=i[0];if(p.length!==0){q=r.threads;n=p.reduce(function(c,a){return b("bs_belt_Map").set(c,a.thread_id,new(b("ImmutableObject"))(a))},q);pb(n,o.threadCallbacks.contents);p.forEach(function(a){return s(r.fbid,a.thread_id)});return{fbid:r.fbid,deliveryReceipts:r.deliveryReceipts,readReceiptsPerThread:r.readReceiptsPerThread,ignoredIds:r.ignoredIds,blockedIds:r.blockedIds,pendingFolderUnseenCount:r.pendingFolderUnseenCount,typing:r.typing,threads:n,pendingReadStatusThreads:r.pendingReadStatusThreads,messages:r.messages,localIDsMap:r.localIDsMap,messagesWithUploadsInFlight:r.messagesWithUploadsInFlight,threadlistOrderMap:r.threadlistOrderMap,pinnedThreads:r.pinnedThreads,montage:r.montage,orderedMessageLists:r.orderedMessageLists,unreadCounts:r.unreadCounts,initialUnreadCounts:r.initialUnreadCounts,unseenTimestamp:r.unseenTimestamp}}else return r;case 8:m=f;q=i[0];if(q.length!==0){var ia=m.pendingReadStatusThreads,sa=b("MercuryServerRequests").getForFBID(m.fbid);q.forEach(function(a){var b=a.thread_id;if(ia.has(b)){ia["delete"](b);if(a.unread_count>0){sa.changeThreadReadStatus(b,!0,null,null,null,null);return 0}else return 0}else return 0});return{fbid:m.fbid,deliveryReceipts:m.deliveryReceipts,readReceiptsPerThread:m.readReceiptsPerThread,ignoredIds:m.ignoredIds,blockedIds:m.blockedIds,pendingFolderUnseenCount:m.pendingFolderUnseenCount,typing:m.typing,threads:m.threads,pendingReadStatusThreads:ia,messages:m.messages,localIDsMap:m.localIDsMap,messagesWithUploadsInFlight:m.messagesWithUploadsInFlight,threadlistOrderMap:m.threadlistOrderMap,pinnedThreads:m.pinnedThreads,montage:m.montage,orderedMessageLists:m.orderedMessageLists,unreadCounts:m.unreadCounts,initialUnreadCounts:m.initialUnreadCounts,unseenTimestamp:m.unseenTimestamp}}else return m;case 9:var t=f,va=i[0];b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom&&ub(t);oa.forEach(function(a){na.forEach(function(d){var c=t,e=va,f=a,g=d;d=e.filter(function(c){var a=c.filter;a=a==null?b("MercuryFilters.bs").all:a;c=c.folder;c=c==null?f===b("MessagingTag").INBOX:c===f;if(c)return a===g;else return!1});if(!b("gkx")("1275193")||f!==b("MessagingTag").INBOX&&f!==b("MessagingTag").ACTION_ARCHIVED&&f!==b("MessagingTag").PENDING||g===b("MercuryFilters.bs").groups){var h=[],i={contents:!1};d.forEach(function(a){a.thread_ids.forEach(function(a){h.push(a);return 0});var b=a.limit;if(a.thread_ids.length<b){i.contents=!0;return 0}else return 0});return rb(c,f,g,i,h)}else if(g===b("MercuryFilters.bs").all){return sb(c,f,d,[(e=b("MercuryFilters.bs")).all,e.unread,e.named,e.unnamed])}else return sb(c,f,d,[b("MercuryFilters.bs").all,g])});return 0});return{fbid:t.fbid,deliveryReceipts:t.deliveryReceipts,readReceiptsPerThread:t.readReceiptsPerThread,ignoredIds:t.ignoredIds,blockedIds:t.blockedIds,pendingFolderUnseenCount:t.pendingFolderUnseenCount,typing:t.typing,threads:t.threads,pendingReadStatusThreads:t.pendingReadStatusThreads,messages:t.messages,localIDsMap:t.localIDsMap,messagesWithUploadsInFlight:t.messagesWithUploadsInFlight,threadlistOrderMap:t.threadlistOrderMap,pinnedThreads:t.pinnedThreads,montage:t.montage,orderedMessageLists:t.orderedMessageLists,unreadCounts:t.unreadCounts,initialUnreadCounts:t.initialUnreadCounts,unseenTimestamp:t.unseenTimestamp};case 10:return tb(f,i[0]);case 11:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdatePinnedThreads");var v=f,Ca=a;o=i[0];if(o.length!==0){o.forEach(function(a){if(Ca.existingPinnedThreads.has(a))return 0;else{v.pinnedThreads.push(a);Ca.existingPinnedThreads.add(a);return 0}});p=b("MercuryThreadInformer").getForFBID(v.fbid);p.updatedThreadlist();return{fbid:v.fbid,deliveryReceipts:v.deliveryReceipts,readReceiptsPerThread:v.readReceiptsPerThread,ignoredIds:v.ignoredIds,blockedIds:v.blockedIds,pendingFolderUnseenCount:v.pendingFolderUnseenCount,typing:v.typing,threads:v.threads,pendingReadStatusThreads:v.pendingReadStatusThreads,messages:v.messages,localIDsMap:v.localIDsMap,messagesWithUploadsInFlight:v.messagesWithUploadsInFlight,threadlistOrderMap:v.threadlistOrderMap,pinnedThreads:v.pinnedThreads,montage:v.montage,orderedMessageLists:v.orderedMessageLists,unreadCounts:v.unreadCounts,initialUnreadCounts:v.initialUnreadCounts,unseenTimestamp:v.unseenTimestamp}}else return v;case 12:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnSubscribeStatusUpdate");n=f;q=i[0];var Ga=i[1];return u(function(a){return a.page_unsubscribe_status!==Ga},n,q,{page_unsubscribe_status:Ga});case 13:m=f;o=i[0];p=i[1];n=i[2];return u(void 0,m,o,{can_reply:p,cannot_reply_reason:n});case 14:q=f;m=i[0];o=i[1];p=b("bs_belt_Map").get(q.threads,m);if(p!==void 0){n=Object.assign({},b("bs_caml_option").valFromOption(p));ua(b("MercuryIDs").getParticipantIDFromUserID(q.fbid),n,o);return u(void 0,q,m,n)}else return q;case 15:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFlag");p=f;o=i[0];m=i[1];n=b("bs_belt_Map").get(p.threads,o);if(n!==void 0){q=b("bs_caml_option").valFromOption(n);n=q.page_thread_info;q=b("ImmutableObject").set(q,{page_thread_info:Object.assign(n==null?{}:n,{flagged:m})});n=b("bs_belt_Map").set(p.threads,o,q);s(p.fbid,o);return{fbid:p.fbid,deliveryReceipts:p.deliveryReceipts,readReceiptsPerThread:p.readReceiptsPerThread,ignoredIds:p.ignoredIds,blockedIds:p.blockedIds,pendingFolderUnseenCount:p.pendingFolderUnseenCount,typing:p.typing,threads:n,pendingReadStatusThreads:p.pendingReadStatusThreads,messages:p.messages,localIDsMap:p.localIDsMap,messagesWithUploadsInFlight:p.messagesWithUploadsInFlight,threadlistOrderMap:p.threadlistOrderMap,pinnedThreads:p.pinnedThreads,montage:p.montage,orderedMessageLists:p.orderedMessageLists,unreadCounts:p.unreadCounts,initialUnreadCounts:p.initialUnreadCounts,unseenTimestamp:p.unseenTimestamp}}else return p;case 16:m=f;q=i[0];return u(function(a){return b("MessageRequestUtils").isMessageRequest(a)},m,q,{folder:b("MessagingTag").INBOX});case 17:o=f;n=i[0];p=i[1];return u(void 0,o,n,{custom_like_icon:p});case 18:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("PromoteGroupAdmins");m=f;q=i[0];o=i[1];n=b("bs_belt_Map").get(m.threads,q);if(n!==void 0){p=b("bs_caml_option").valFromOption(n);n=b("bs_js_dict").fromArray(b("bs_js_dict").entries(p.admins));p=b("ImmutableObject").set(p,{admins:b("bs_array").fold_left(function(a,b){a[b.admin_fbid]=b.admin_type;return a},n,o)});n=b("bs_belt_Map").set(m.threads,q,p);s(m.fbid,q);return{fbid:m.fbid,deliveryReceipts:m.deliveryReceipts,readReceiptsPerThread:m.readReceiptsPerThread,ignoredIds:m.ignoredIds,blockedIds:m.blockedIds,pendingFolderUnseenCount:m.pendingFolderUnseenCount,typing:m.typing,threads:n,pendingReadStatusThreads:m.pendingReadStatusThreads,messages:m.messages,localIDsMap:m.localIDsMap,messagesWithUploadsInFlight:m.messagesWithUploadsInFlight,threadlistOrderMap:m.threadlistOrderMap,pinnedThreads:m.pinnedThreads,montage:m.montage,orderedMessageLists:m.orderedMessageLists,unreadCounts:m.unreadCounts,initialUnreadCounts:m.initialUnreadCounts,unseenTimestamp:m.unseenTimestamp}}else return m;case 19:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("RemoveGroupAdmins");o=f;p=i[0];q=i[1];n=b("bs_belt_Map").get(o.threads,p);if(n!==void 0){m=b("bs_caml_option").valFromOption(n);n=b("bs_js_dict").fromArray(b("bs_js_dict").entries(m.admins));m=b("ImmutableObject").set(m,{admins:b("bs_array").fold_left(function(d,c){var a=b("bs_js_dict").get(d,c);a!==void 0&&ka(d,c);return d},n,q)});n=b("bs_belt_Map").set(o.threads,p,m);s(o.fbid,p);return{fbid:o.fbid,deliveryReceipts:o.deliveryReceipts,readReceiptsPerThread:o.readReceiptsPerThread,ignoredIds:o.ignoredIds,blockedIds:o.blockedIds,pendingFolderUnseenCount:o.pendingFolderUnseenCount,typing:o.typing,threads:n,pendingReadStatusThreads:o.pendingReadStatusThreads,messages:o.messages,localIDsMap:o.localIDsMap,messagesWithUploadsInFlight:o.messagesWithUploadsInFlight,threadlistOrderMap:o.threadlistOrderMap,pinnedThreads:o.pinnedThreads,montage:o.montage,orderedMessageLists:o.orderedMessageLists,unreadCounts:o.unreadCounts,initialUnreadCounts:o.initialUnreadCounts,unseenTimestamp:o.unseenTimestamp}}else return o;case 20:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("JoinableMode");q=f;m=i[0];p=i[1];return u(void 0,q,m,{joinable_mode:p});case 21:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalMode");n=f;o=i[0];q=i[1];return u(void 0,n,o,{approval_mode:q});case 22:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalQueue");m=f;p=i[0];n=i[1];o=i[2];var Ha=i[3],Ia=i[4];q=b("bs_belt_Map").get(m.threads,p);if(q!==void 0){q=b("bs_caml_option").valFromOption(q);var w=q.group_approval_queue;q={approval_queue_ids:q.approval_queue_ids.slice(),group_approval_queue:w==null?null:w.slice()};n==null||q.approval_queue_ids.indexOf(n)===-1&&Object.assign(q,{approval_queue_ids:q.approval_queue_ids.concat([n])});if(!(o==null)){w=q.group_approval_queue;w==null?Object.assign(q,{group_approval_queue:[o]}):w.map(function(a){return a.requester.id}).indexOf(o.requester.id)===-1&&Object.assign(q,{group_approval_queue:w.concat([o])})}Ha==null||Object.assign(q,{approval_queue_ids:q.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,Ha)})});if(!(Ia==null)){n=q.group_approval_queue;Object.assign(q,{group_approval_queue:(n==null?[]:n).filter(function(a){return a.requester.id!==Ia})})}return u(void 0,m,p,q)}else return m;case 23:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("IsPinProtected");w=f;o=i[0];n=i[1];return u(void 0,w,o,{is_pin_protected:n});case 24:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateRtcCallData");p=f;q=i[0];m=i[1];w=i[2];o=i[3];n=b("bs_belt_Map").get(p.threads,q);if(n!==void 0){if(m==null){n=b("bs_caml_option").valFromOption(n).rtc_call_data;n=n==null?void 0:m}else n=m;return u(void 0,p,q,{rtc_call_data:new(b("ImmutableObject"))({call_state:w,server_info_data:o,initiator_fbid:n})})}else return p;case 25:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommStatus");m=f;q=i[0];w=i[1];return u(void 0,m,q,{comm_status:w});case 26:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommItemOwner");o=f;n=i[0];p=i[1];m=i[2];q=i[3];w=p==null?{nodes:[]}:{nodes:[{admin:{id:p,name:m,profile_picture:{uri:q}}}]};u(void 0,o,n,{comm_item_owners:w});if(p==null)return u(void 0,o,n,{thread_associated_page_admin:null});else return u(void 0,o,n,{thread_associated_page_admin:{id:p,name:m,profile_picture:{uri:q}}});case 27:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("EventRsvpChanged");w=f;o=i[0];var Ja=i[1];n=i[2];p=b("bs_belt_Map").get(w.threads,o);if(p!==void 0){m=b("bs_caml_option").valFromOption(p).participants_event_status;q=(m==null?[]:m).filter(function(a){return b("bs_caml_obj").caml_notequal(a.participant_id,Ja)});q.push({participant_id:Ja,event_status:n});return u(void 0,w,o,{participants_event_status:q})}else return w;case 28:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncStatusChanged");p=f;m=i[0];n=i[1];o=i[2];return!(o==null)&&b("bs_caml_obj").caml_equal(o,b("MessengerGroupsSyncStatus").OPT_IN)?u(void 0,p,m,{groups_sync_status:n}):u(void 0,p,m,{groups_sync_status:n,work_associated_group:null});case 29:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncMetadataUpdate");q=f;w=i[0];o=i[1];p=i[2];m=i[3];if(o==null)return u(void 0,q,w,{work_associated_group:null});else if(b("bs_caml_obj").caml_equal(o,b("MessengerGroupsSyncStatus").OPT_IN)){n=new(h||(h=b("URI")))(document.URL);var x=n.getDomain();x=b("XGroupsController").getURIBuilder().setString("idorvanity",p).getURI().setDomain(x==null?"":x.replace("messenger.com","facebook.com")).setPort(n.getPort()).setProtocol("https");return u(void 0,q,w,{work_associated_group:{id:p,url:x.toString(),group_saves:{count:0},group_events:{count:0}}})}else if(b("bs_caml_obj").caml_equal(o,b("MessengerGroupsSyncStatus").UPDATE_EMOJI))return u(void 0,q,w,{work_associated_group:{id:p,group_icon:{emoji_codepoints:m}}});else return u(void 0,q,w,{work_associated_group:null});case 30:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DescriptionChanged");n=f;x=i[0];o=i[1];return u(void 0,n,x,{description:o});case 31:return wa(f,i[0],i[1]);case 32:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateJoinableLink");p=f;m=i[0];q=i[1];return u(void 0,p,m,{joinable_link:q});case 33:var y=f,Na=i[0];w=b("bs_belt_Map").toArray(y.threads).reduce(function(c,d){var a=d[1];d=d[0];if(a.folder===Na){s(y.fbid,d);return b("bs_belt_Map").set(c,d,b("ImmutableObject").set(a,{unread_count:0,unread_mentions_count:0}))}else return c},y.threads);y.unreadCounts[Na]=new Set();n=b("MercuryThreadInformer").getForFBID(y.fbid);n.updatedUnreadState();return{fbid:y.fbid,deliveryReceipts:y.deliveryReceipts,readReceiptsPerThread:y.readReceiptsPerThread,ignoredIds:y.ignoredIds,blockedIds:y.blockedIds,pendingFolderUnseenCount:y.pendingFolderUnseenCount,typing:y.typing,threads:w,pendingReadStatusThreads:y.pendingReadStatusThreads,messages:y.messages,localIDsMap:y.localIDsMap,messagesWithUploadsInFlight:y.messagesWithUploadsInFlight,threadlistOrderMap:y.threadlistOrderMap,pinnedThreads:y.pinnedThreads,montage:y.montage,orderedMessageLists:y.orderedMessageLists,unreadCounts:y.unreadCounts,initialUnreadCounts:y.initialUnreadCounts,unseenTimestamp:y.unseenTimestamp};case 34:var z=f,Va=i[0];b("gkx")("1199097")&&(b("ChatReliabilityInstrumentation").logDELETE_THREAD(Va),b("LogHistory").getInstance("messenger_state").debug("delete_thread",Va));x=b("bs_belt_Map").remove(z.threads,Va);z.orderedMessageLists["delete"](Va);z.messages.forEach(function(a,c,d){if(b("bs_caml_obj").caml_equal(a.thread_id,Va)){z.messages["delete"](a.message_id);c=a.offline_threading_id;if(!(c==null)){d=z.localIDsMap.get(c);d==null||(z.messages["delete"](d),z.localIDsMap["delete"](c))}z.localIDsMap["delete"](a.message_id);return 0}else return 0});qa(z.fbid,Va);return{fbid:z.fbid,deliveryReceipts:z.deliveryReceipts,readReceiptsPerThread:z.readReceiptsPerThread,ignoredIds:z.ignoredIds,blockedIds:z.blockedIds,pendingFolderUnseenCount:z.pendingFolderUnseenCount,typing:z.typing,threads:x,pendingReadStatusThreads:z.pendingReadStatusThreads,messages:z.messages,localIDsMap:z.localIDsMap,messagesWithUploadsInFlight:z.messagesWithUploadsInFlight,threadlistOrderMap:z.threadlistOrderMap,pinnedThreads:z.pinnedThreads,montage:z.montage,orderedMessageLists:z.orderedMessageLists,unreadCounts:z.unreadCounts,initialUnreadCounts:z.initialUnreadCounts,unseenTimestamp:z.unseenTimestamp};case 35:o=i[0];return Ya(f,a,[o.message_id,o,i[1]]);case 36:p=f;m=[i[0],i[1],i[2]];var Wa=m[2];q=m[1];var Xa=m[0];if(q.length!==0){n=ab(p,[Xa,q,Wa]);w=0;Wa!==void 0&&b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(Wa),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||(w=1);w===1&&b("MercuryServerRequests").getForFBID(n.fbid).deleteMessages(Xa,q);return b("bs_belt_Array").reduce(q,n,function(c,e){var a=Sa(c,e),d=b("bs_belt_Map").get(c.threads,Xa);if(d!==void 0){d=b("bs_caml_option").valFromOption(d);d=b("ImmutableObject").set(b("ImmutableObject").set(d,bb(c,Xa)),{message_count:d.message_count-1|0});d=b("bs_belt_Map").set(c.threads,Xa,d);s(c.fbid,Xa);d={fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:c.pendingFolderUnseenCount,typing:c.typing,threads:d,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:c.unseenTimestamp}}else d=c;if(a!==void 0){c=b("bs_caml_option").valFromOption(a);cb(b("bs_caml_option").some(Xa),c);Pa(d.fbid,Xa,e,Wa,c.attachments)}return d})}else return p;case 37:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFolder");return Fa(f,i[0],i[1],1);case 38:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeMuteSettings");x=f;o=i[0];m=i[1];w=b("bs_belt_Map").get(x.threads,o);if(w!==void 0){q=b("bs_caml_option").valFromOption(w);var Za;switch(m.tag|0){case 0:Za=b("ImmutableObject").set(q,{reactions_mute_mode:m[0]?1:0});break;case 1:Za=b("ImmutableObject").set(q,{mentions_mute_mode:m[0]?1:0});break;case 2:n=m[0];Za=b("ImmutableObject").set(q,{mute_until:n===0?void 0:n});break}p=b("bs_belt_Map").set(x.threads,o,Za);s(x.fbid,o);return{fbid:x.fbid,deliveryReceipts:x.deliveryReceipts,readReceiptsPerThread:x.readReceiptsPerThread,ignoredIds:x.ignoredIds,blockedIds:x.blockedIds,pendingFolderUnseenCount:x.pendingFolderUnseenCount,typing:x.typing,threads:p,pendingReadStatusThreads:x.pendingReadStatusThreads,messages:x.messages,localIDsMap:x.localIDsMap,messagesWithUploadsInFlight:x.messagesWithUploadsInFlight,threadlistOrderMap:x.threadlistOrderMap,pinnedThreads:x.pinnedThreads,montage:x.montage,orderedMessageLists:x.orderedMessageLists,unreadCounts:x.unreadCounts,initialUnreadCounts:x.initialUnreadCounts,unseenTimestamp:x.unseenTimestamp}}else return x;case 39:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeArchivedStatus");w=f;m=i[0];q=i[1];n=b("bs_belt_Map").get(w.threads,m);if(n!==void 0){o=b("bs_caml_option").valFromOption(n);if(o.is_archived!==q){p=b("MessengerFolders.bs").getFromMeta(o);x=o.comm_status;n=x==null?b("ImmutableObject").set(o,{is_archived:q}):b("ImmutableObject").set(o,{is_archived:q,comm_status:q?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO});x=b("bs_belt_Map").set(w.threads,m,n);Ba(w,n,p);Ea(w,n);s(w.fbid,m);return{fbid:w.fbid,deliveryReceipts:w.deliveryReceipts,readReceiptsPerThread:w.readReceiptsPerThread,ignoredIds:w.ignoredIds,blockedIds:w.blockedIds,pendingFolderUnseenCount:w.pendingFolderUnseenCount,typing:w.typing,threads:x,pendingReadStatusThreads:w.pendingReadStatusThreads,messages:w.messages,localIDsMap:w.localIDsMap,messagesWithUploadsInFlight:w.messagesWithUploadsInFlight,threadlistOrderMap:w.threadlistOrderMap,pinnedThreads:w.pinnedThreads,montage:w.montage,orderedMessageLists:w.orderedMessageLists,unreadCounts:w.unreadCounts,initialUnreadCounts:w.initialUnreadCounts,unseenTimestamp:w.unseenTimestamp}}else return w}else return w;case 40:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePageFollowUpStatus");o=f;q=i[0];p=i[1];n=b("bs_belt_Map").get(o.threads,q);if(n!==void 0){m=b("bs_caml_option").valFromOption(n);if(m.is_page_follow_up!==p){x=b("ImmutableObject").set(m,{is_page_follow_up:p});w=b("bs_belt_Map").set(o.threads,q,x);s(o.fbid,q);return{fbid:o.fbid,deliveryReceipts:o.deliveryReceipts,readReceiptsPerThread:o.readReceiptsPerThread,ignoredIds:o.ignoredIds,blockedIds:o.blockedIds,pendingFolderUnseenCount:o.pendingFolderUnseenCount,typing:o.typing,threads:w,pendingReadStatusThreads:o.pendingReadStatusThreads,messages:o.messages,localIDsMap:o.localIDsMap,messagesWithUploadsInFlight:o.messagesWithUploadsInFlight,threadlistOrderMap:o.threadlistOrderMap,pinnedThreads:o.pinnedThreads,montage:o.montage,orderedMessageLists:o.orderedMessageLists,unreadCounts:o.unreadCounts,initialUnreadCounts:o.initialUnreadCounts,unseenTimestamp:o.unseenTimestamp}}else return o}else return o;case 41:n=f;m=i[0];p=i[1];x=i[2];q=i[3];w=i[4];o=b("bs_belt_Map").get(n.threads,m);if(o!==void 0){o=b("bs_caml_option").valFromOption(o);x=qb(n,o,x,n.pendingReadStatusThreads,p);x=x!==void 0&&o.last_message_timestamp>o.last_read_timestamp?b("bs_caml_option").some(Object.assign(b("bs_caml_option").valFromOption(x),{last_read_timestamp:o.last_message_timestamp})):x;if(x!==void 0){x=b("ImmutableObject").set(o,b("bs_caml_option").valFromOption(x));var A=b("bs_belt_Map").set(n.threads,m,x);if(q){q=!o.read_only&&o.folder===b("MessagingTag").INBOX;var B=b("MercuryServerRequests").getForFBID(n.fbid);B.changeThreadReadStatus(x.thread_id,p,w,x.last_read_timestamp,q,x.last_message_type)}B=A}else B=n.threads;w=b("MessengerFolders.bs").getFromMeta(o);p?(ta(n,[m],w,b("MercuryFilters.bs").unread),Aa(n,w,b("bs_caml_option").some(m))):(b("gkx")("1275193")?Da(n,w,m):xa(n,[m],w,b("MercuryFilters.bs").unread),ya(n,w,b("bs_caml_option").some(m)));return{fbid:n.fbid,deliveryReceipts:n.deliveryReceipts,readReceiptsPerThread:n.readReceiptsPerThread,ignoredIds:n.ignoredIds,blockedIds:n.blockedIds,pendingFolderUnseenCount:n.pendingFolderUnseenCount,typing:n.typing,threads:B,pendingReadStatusThreads:n.pendingReadStatusThreads,messages:n.messages,localIDsMap:n.localIDsMap,messagesWithUploadsInFlight:n.messagesWithUploadsInFlight,threadlistOrderMap:n.threadlistOrderMap,pinnedThreads:n.pinnedThreads,montage:n.montage,orderedMessageLists:n.orderedMessageLists,unreadCounts:n.unreadCounts,initialUnreadCounts:n.initialUnreadCounts,unseenTimestamp:n.unseenTimestamp}}else return n;case 42:var C=f,wb=i[0];q=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(C.orderedMessageLists.get(wb)),function(a){return{messageLoadingState:a.messageLoadingState,messageIDs:[]}}),{messageLoadingState:0,messageIDs:[]});C.orderedMessageLists.set(wb,q);x=b("bs_belt_Option").map(b("bs_belt_Map").get(C.threads,wb),function(a){return b("ImmutableObject").set(a,{message_count:0})});if(x!==void 0){var yb=b("bs_caml_option").valFromOption(x);A=b("bs_belt_Map").set(C.threads,wb,yb);na.forEach(function(a){return ta(C,[wb],b("MessengerFolders.bs").getFromMeta(yb),a)});o=A}else o=C.threads;za.forEach(function(a){a=b("bs_js_dict").get(C.unreadCounts,a);if(a!==void 0){b("bs_caml_option").valFromOption(a)["delete"](wb);return 0}else return 0});ra(C.fbid,wb);return{fbid:C.fbid,deliveryReceipts:C.deliveryReceipts,readReceiptsPerThread:C.readReceiptsPerThread,ignoredIds:C.ignoredIds,blockedIds:C.blockedIds,pendingFolderUnseenCount:C.pendingFolderUnseenCount,typing:C.typing,threads:o,pendingReadStatusThreads:C.pendingReadStatusThreads,messages:C.messages,localIDsMap:C.localIDsMap,messagesWithUploadsInFlight:C.messagesWithUploadsInFlight,threadlistOrderMap:C.threadlistOrderMap,pinnedThreads:C.pinnedThreads,montage:C.montage,orderedMessageLists:C.orderedMessageLists,unreadCounts:C.unreadCounts,initialUnreadCounts:C.initialUnreadCounts,unseenTimestamp:C.unseenTimestamp};case 43:p=f;w=a;m=[i[0],i[1],i[2]];B=$a(p,[m[0],m[1]]);n=B.thread_id;q=ab(p,[n,[B.message_id],m[2]]);x=w.localTitanMessageCount.get(n);x==null||w.localTitanMessageCount.set(n,Math.max(0,x-1|0));return q;case 44:A=f;o=[i[0],i[1]];p=$a(A,[o[0],o[1]]);b("MercuryServerRequests").getForFBID(A.fbid).sendNewMessage(Object.assign(p,{preview_attachments:void 0}));return A;case 45:B=f;m=[i[0],i[1],i[2],i[3]];w=m[2];n=m[1];x=m[0];q=Sa(B,x);if(q!==void 0){o=b("bs_caml_option").valFromOption(q);p=b("bs_js_dict").map(function(a){return a},b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(o.reactions),{}));n!==void 0?p[w]=n:Ra(p,w);A=Object.assign(Object.assign({},o),{reactions:p});q=o.thread_id;q==null||Ma(B.fbid,q,x,m[3]);return Ua(B,[x,A])}else return B;case 46:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontageDirectExpire");n=f;w=i[0];p=Sa(n,w);if(p!==void 0){o=b("bs_caml_option").valFromOption(p);q=o.attachments;if(q==null||q.length===0)return n;else{m=b("bs_caml_array").caml_array_get(q,0);x=m.share;if(x==null)return n;else{A=x.target;if(A==null)return n;else{B=A.message_state;if(B==null)return n;else{p=Object.assign(Object.assign({},o),{attachments:b("bs_caml_array").caml_array_set(b("bs_array").copy(q),0,Object.assign(Object.assign({},m),{share:Object.assign(Object.assign({},x),{target:Object.assign(Object.assign({},A),{message_state:"EXPIRED"})})}))});return Ua(n,[w,p])}}}}}else return n;case 47:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("LiveLocationUpdate");B=f;o=[i[0],i[1],i[2]];q=o[0];m=Sa(B,q);if(m!==void 0){x=b("bs_caml_option").valFromOption(m);A=x.attachments;if(A==null||A.length===0)return B;else{w=b("bs_caml_array").caml_array_get(A,0);p=w.share;if(p==null)return B;else{n=p.target;if(n==null)return B;else{m=b("bs_array").copy(A);b("bs_caml_array").caml_array_set(m,0,Object.assign(Object.assign({},w),{share:Object.assign(Object.assign({},p),{target:Object.assign(Object.assign({},o[1]),{live_location_id:n.live_location_id})})}));A=Object.assign(Object.assign({},x),{attachments:m});w=x.thread_id;w==null||Ma(B.fbid,w,q,o[2]);return Ua(B,[q,A])}}}}else return B;case 48:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ReplaceMessage");p=f;n=i[0];m=i[1];var zb=n.replaced_message_id;if(zb==null)return p;else{x=Sa(p,zb);if(x!==void 0){w=n.message_id;o={timestamp:n.timestamp};q=b("bs_caml_option").nullable_to_opt(n.status);q!==void 0&&(o.status=b("bs_caml_option").valFromOption(q));A=b("bs_caml_option").nullable_to_opt(n.log_message_data);A!==void 0&&(o.log_message_data=b("bs_caml_option").valFromOption(A));B=b("bs_caml_option").nullable_to_opt(n.meta_ranges);B!==void 0&&(o.meta_ranges=b("bs_caml_option").valFromOption(B));q=b("bs_caml_option").nullable_to_opt(n.ranges);q!==void 0&&(o.ranges=b("bs_caml_option").valFromOption(q));A=b("bs_caml_option").nullable_to_opt(n.raw_attachments);A!==void 0&&(o.raw_attachments=b("bs_caml_option").valFromOption(A));B=b("bs_caml_option").nullable_to_opt(n.attachments);B!==void 0&&(o.attachments=b("bs_caml_option").valFromOption(B));q=b("bs_caml_option").nullable_to_opt(n.body);q!==void 0&&(o.body=b("bs_caml_option").valFromOption(q));A=b("bs_caml_option").nullable_to_opt(n.platform_xmd);A!==void 0&&(o.platform_xmd=b("bs_caml_option").valFromOption(A));B=b("bs_caml_option").nullable_to_opt(n.profile_ranges);B!==void 0&&(o.profile_ranges=b("bs_caml_option").valFromOption(B));q=o;A=Object.assign(Object.assign({},b("bs_caml_option").valFromOption(x)),q);b("MercuryMessageIDs.bs").addServerID(w,w);var D=Ua(p,[w,A]);if(w!==zb){D.messages["delete"](zb);D.localIDsMap.set(zb,w);B=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(n.thread_id),function(a){return b("bs_caml_option").nullable_to_opt(D.orderedMessageLists.get(a))});o=n.thread_id;if(B!==void 0&&!(o==null)){x=B;q=Ta(D,[w].concat(x.messageIDs.filter(function(a){return a!==zb})));D.orderedMessageLists.set(o,{messageLoadingState:x.messageLoadingState,messageIDs:q})}}A=n.message_id;B=n.thread_id;B==null||(Ma(D.fbid,B,zb,m),Ma(D.fbid,B,A,m));return{fbid:D.fbid,deliveryReceipts:D.deliveryReceipts,readReceiptsPerThread:D.readReceiptsPerThread,ignoredIds:D.ignoredIds,blockedIds:D.blockedIds,pendingFolderUnseenCount:D.pendingFolderUnseenCount,typing:D.typing,threads:D.threads,pendingReadStatusThreads:D.pendingReadStatusThreads,messages:D.messages,localIDsMap:D.localIDsMap,messagesWithUploadsInFlight:D.messagesWithUploadsInFlight,threadlistOrderMap:D.threadlistOrderMap,pinnedThreads:D.pinnedThreads,montage:D.montage,orderedMessageLists:D.orderedMessageLists,unreadCounts:D.unreadCounts,initialUnreadCounts:D.initialUnreadCounts,unseenTimestamp:D.unseenTimestamp}}else return p}case 49:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateLocalTitanMessagesCount");w=f;o=a;x=[i[0],i[1]];q=x[0];n=Sa(w,x[1]);if(n!==void 0&&b("MessengerMessage.bs").isTitanMessage(b("bs_caml_option").valFromOption(n))){B=o.localTitanMessageCount.get(q);B==null?o.localTitanMessageCount.set(q,1):o.localTitanMessageCount.set(q,1+B|0)}return w;case 50:return gb(f,a,i[0],i[1]);case 51:A=f;m=a;p=i[0];x=i[1];n=i[2];o=kb(A,p,x,n==null?void 0:b("bs_caml_option").some(n));ib(o.fbid,x,p,function(a,b,c){a.informNewMessage(b,c);return 0});q=o.fbid;if(p.folder===b("MessagingTag").PENDING&&b("bs_caml_obj").caml_equal(x,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)))B={fbid:o.fbid,deliveryReceipts:o.deliveryReceipts,readReceiptsPerThread:o.readReceiptsPerThread,ignoredIds:o.ignoredIds,blockedIds:o.blockedIds,pendingFolderUnseenCount:o.pendingFolderUnseenCount+1|0,typing:o.typing,threads:o.threads,pendingReadStatusThreads:o.pendingReadStatusThreads,messages:o.messages,localIDsMap:o.localIDsMap,messagesWithUploadsInFlight:o.messagesWithUploadsInFlight,threadlistOrderMap:o.threadlistOrderMap,pinnedThreads:o.pinnedThreads,montage:o.montage,orderedMessageLists:o.orderedMessageLists,unreadCounts:o.unreadCounts,initialUnreadCounts:o.initialUnreadCounts,unseenTimestamp:o.unseenTimestamp};else if(p.folder===b("MessagingTag").INBOX){w=p.thread_id;B=w==null?o:Fa(o,w,p.folder,0)}else{A=p.thread_id;if(A==null)B=o;else{w=mb(o.fbid,o.threads,p,n);if(w!==void 0){n=b("bs_caml_option").valFromOption(w);w=o.fbid;var E=o.deliveryReceipts,F=o.readReceiptsPerThread,G=o.ignoredIds,H=o.blockedIds,I=o.pendingFolderUnseenCount,J=o.typing,K=b("bs_belt_Map").set(o.threads,n.thread_id,n),L=o.pendingReadStatusThreads,M=o.messages,N=o.localIDsMap,O=o.messagesWithUploadsInFlight,P=o.threadlistOrderMap,Q=o.pinnedThreads,R=o.montage,S=o.orderedMessageLists,T=o.unreadCounts,U=o.initialUnreadCounts,V=o.unseenTimestamp;w={fbid:w,deliveryReceipts:E,readReceiptsPerThread:F,ignoredIds:G,blockedIds:H,pendingFolderUnseenCount:I,typing:J,threads:K,pendingReadStatusThreads:L,messages:M,localIDsMap:N,messagesWithUploadsInFlight:O,threadlistOrderMap:P,pinnedThreads:Q,montage:R,orderedMessageLists:S,unreadCounts:T,initialUnreadCounts:U,unseenTimestamp:V};if(b("bs_caml_obj").caml_equal(x,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE))){E=p.offline_threading_id;E==null?Object.assign(p,{folder:n.folder}):b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(N.get(E)),E)?Object.assign(p,{client_message_id:p.offline_threading_id,status:b("MercuryActionStatus").SUCCESS,action_type:b("MercuryActionType").SEND_MESSAGE}):Object.assign(p,{folder:n.folder})}Ea(w,n);F=Object.assign({},n);G=p.offline_threading_id;if(!(G==null)){if(G!==p.message_id){Object.assign(F,{last_message_timestamp:p.timestamp});H=p.comm_status;H==null||Object.assign(F,{last_message_id:p.message_id})}I=p.author;if(!(b("cr:1299779")==null)&&!(I==null)){J=b("MercuryIDs").getParticipantIDFromUserID(q);p.has_attachment&&J===I&&fb(A,p.message_id,G)}}K=p.comm_status;L=F.comm_status;K==null||!(L==null)&&b("bs_caml_obj").caml_notequal(L,b("PageCommItemStatus").FOLLOW_UP)&&Object.assign(F,{comm_status:K});M=p.creator_info;M==null||b("bs_caml_obj").caml_equal(M.pageID,q)&&Object.assign(F,{folder:p.folder});O=p.author;O==null||jb(F,O);B=u(void 0,w,A,F)}else B=o}}P=hb(B,m,p,x);Q=nb(P,p);R=Q;S=p;T=b("bs_caml_obj").caml_notequal(S.author,b("MercuryViewer").getID());U=S.thread_id;V=S.author;if(T&&!(U==null||V==null)){N=la(R.typing,U,V);if(N!==R.typing)return{fbid:R.fbid,deliveryReceipts:R.deliveryReceipts,readReceiptsPerThread:R.readReceiptsPerThread,ignoredIds:R.ignoredIds,blockedIds:R.blockedIds,pendingFolderUnseenCount:R.pendingFolderUnseenCount,typing:N,threads:R.threads,pendingReadStatusThreads:R.pendingReadStatusThreads,messages:R.messages,localIDsMap:R.localIDsMap,messagesWithUploadsInFlight:R.messagesWithUploadsInFlight,threadlistOrderMap:R.threadlistOrderMap,pinnedThreads:R.pinnedThreads,montage:R.montage,orderedMessageLists:R.orderedMessageLists,unreadCounts:R.unreadCounts,initialUnreadCounts:R.initialUnreadCounts,unseenTimestamp:R.unseenTimestamp};else return R}else return R;case 52:E=f;n=a;H=i[0];J=i[1];I=i[2];G=b("bs_caml_obj").caml_notequal(I==null?void 0:b("bs_caml_option").some(I),!1);L=b("bs_caml_obj").caml_equal(I==null?void 0:b("bs_caml_option").some(I),!0);K=E.fbid;M=b("MercuryIDs").getParticipantIDFromUserID(K);q=hb(E,n,H,J);ib(q.fbid,J,H,function(a,b,c){a.informNewLogMessage(b,c);return 0});O=kb(q,H,J,I==null?void 0:b("bs_caml_option").some(I));w=H.thread_id;if(w==null)A=O;else{F=b("bs_belt_Map").get(O.threads,w);if(F!==void 0){o=Object.assign({},b("bs_caml_option").valFromOption(F));Ea(O,o);o.last_message_timestamp<H.timestamp&&Object.assign(o,{last_message_timestamp:H.timestamp});if(H.timestamp>=o.timestamp||b("gkx")("1183082")){B=H.log_message_type;if(!(B==null))if(b("bs_caml_obj").caml_equal(B,b("MercuryLogMessageType").SUBSCRIBE)&&!L){m=H.log_message_data;if(m==null)x=[];else{P=m.added_participants;x=P==null?[]:P}ua(M,o,x);s(K,w)}else if(b("bs_caml_obj").caml_equal(B,b("MercuryLogMessageType").UNSUBSCRIBE)&&!L){Q=H.log_message_data;if(Q==null)p=[];else{S=Q.removed_participants;p=S==null?[]:S}lb(M,o,p);s(K,w)}else if(b("bs_caml_obj").caml_equal(B,b("MercuryLogMessageType").THREAD_IMAGE)){if(!G){T=H.log_message_data;if(T==null)U=null;else{V=T.image;U=V==null?null:V.preview_url}Object.assign(o,{image_src:U})}}else if(b("bs_caml_obj").caml_equal(B,b("MercuryLogMessageType").THREAD_NAME)){N=H.log_message_data;if(!(N==null)){R=N.name;!(R==null)&&o.name===R||s(K,w);Object.assign(o,{name:N.name})}}else b("bs_caml_obj").caml_equal(B,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)&&Ka(K,o,H,w)}A=u(void 0,O,w,o)}else A=O}return nb(A,H);case 53:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("PinMessage");if(b("gkx")("1179386")){E=f;n=i[0];var Bb=i[1];q=b("bs_belt_Map").get(E.threads,n);if(q!==void 0&&!(Bb==null)){J=b("bs_caml_option").valFromOption(q);I=J.pinned_messages;F=I==null?[Bb.message]:I.findIndex(function(a){return a.message_id===Bb.message.message_id})===-1?[Bb.message]:void 0;if(F!==void 0){m=b("ImmutableObject").set(J,{pinned_messages:b("bs_belt_Option").getExn(F)});P=b("bs_belt_Map").set(E.threads,n,m);s(E.fbid,n);x=P}else x=E.threads}else x=E.threads;return{fbid:E.fbid,deliveryReceipts:E.deliveryReceipts,readReceiptsPerThread:E.readReceiptsPerThread,ignoredIds:E.ignoredIds,blockedIds:E.blockedIds,pendingFolderUnseenCount:E.pendingFolderUnseenCount,typing:E.typing,threads:x,pendingReadStatusThreads:E.pendingReadStatusThreads,messages:E.messages,localIDsMap:E.localIDsMap,messagesWithUploadsInFlight:E.messagesWithUploadsInFlight,threadlistOrderMap:E.threadlistOrderMap,pinnedThreads:E.pinnedThreads,montage:E.montage,orderedMessageLists:E.orderedMessageLists,unreadCounts:E.unreadCounts,initialUnreadCounts:E.initialUnreadCounts,unseenTimestamp:E.unseenTimestamp}}else return f;case 54:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnpinMessage");if(b("gkx")("1179386")){L=f;Q=i[0];var Cb=i[1];S=b("bs_belt_Map").get(L.threads,Q);if(S!==void 0&&!(Cb==null)){M=b("bs_caml_option").valFromOption(S);p=M.pinned_messages;G=p==null?void 0:p.filter(function(a){return a.message_id!==Cb.message_id});if(G!==void 0){T=b("ImmutableObject").set(M,{pinned_messages:b("bs_belt_Option").getExn(G)});V=b("bs_belt_Map").set(L.threads,Q,T);s(L.fbid,Q);U=V}else U=L.threads}else U=L.threads;return{fbid:L.fbid,deliveryReceipts:L.deliveryReceipts,readReceiptsPerThread:L.readReceiptsPerThread,ignoredIds:L.ignoredIds,blockedIds:L.blockedIds,pendingFolderUnseenCount:L.pendingFolderUnseenCount,typing:L.typing,threads:U,pendingReadStatusThreads:L.pendingReadStatusThreads,messages:L.messages,localIDsMap:L.localIDsMap,messagesWithUploadsInFlight:L.messagesWithUploadsInFlight,threadlistOrderMap:L.threadlistOrderMap,pinnedThreads:L.pinnedThreads,montage:L.montage,orderedMessageLists:L.orderedMessageLists,unreadCounts:L.unreadCounts,initialUnreadCounts:L.initialUnreadCounts,unseenTimestamp:L.unseenTimestamp}}else return f;case 55:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePinnedStatus");R=f;N=a;B=i[0];K=i[1];w=i[2];o=b("bs_belt_Map").get(R.threads,B);O=!1;if(K&&!N.existingPinnedThreads.has(B))R.pinnedThreads.push(B),N.existingPinnedThreads.add(B),O=!0;else if(!K&&N.existingPinnedThreads.has(B)){A=R.pinnedThreads.indexOf(B);A>-1&&R.pinnedThreads.splice(A,1);N.existingPinnedThreads["delete"](B);O=!0}if(o!==void 0){H=b("bs_caml_option").valFromOption(o);q=b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(H.thread_pin_timestamp),0);if(H.is_pinned!==K||q!==w){I=b("ImmutableObject").set(H,{is_pinned:K,thread_pin_timestamp:w});J=b("bs_belt_Map").set(R.threads,B,I);s(R.fbid,B);O=!0;F=J}else F=R.threads}else F=R.threads;if(O)return{fbid:R.fbid,deliveryReceipts:R.deliveryReceipts,readReceiptsPerThread:R.readReceiptsPerThread,ignoredIds:R.ignoredIds,blockedIds:R.blockedIds,pendingFolderUnseenCount:R.pendingFolderUnseenCount,typing:R.typing,threads:F,pendingReadStatusThreads:R.pendingReadStatusThreads,messages:R.messages,localIDsMap:R.localIDsMap,messagesWithUploadsInFlight:R.messagesWithUploadsInFlight,threadlistOrderMap:R.threadlistOrderMap,pinnedThreads:R.pinnedThreads,montage:R.montage,orderedMessageLists:R.orderedMessageLists,unreadCounts:R.unreadCounts,initialUnreadCounts:R.initialUnreadCounts,unseenTimestamp:R.unseenTimestamp};else return R;case 56:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InvalidateMontageState");m=f;n=i[0];P=b("bs_js_dict").fromArray(b("bs_js_dict").entries(m.montage));P[n]=[];return{fbid:m.fbid,deliveryReceipts:m.deliveryReceipts,readReceiptsPerThread:m.readReceiptsPerThread,ignoredIds:m.ignoredIds,blockedIds:m.blockedIds,pendingFolderUnseenCount:m.pendingFolderUnseenCount,typing:m.typing,threads:m.threads,pendingReadStatusThreads:m.pendingReadStatusThreads,messages:m.messages,localIDsMap:m.localIDsMap,messagesWithUploadsInFlight:m.messagesWithUploadsInFlight,threadlistOrderMap:m.threadlistOrderMap,pinnedThreads:m.pinnedThreads,montage:P,orderedMessageLists:m.orderedMessageLists,unreadCounts:m.unreadCounts,initialUnreadCounts:m.initialUnreadCounts,unseenTimestamp:m.unseenTimestamp};case 57:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("NewMontageMessage");x=f;E=i[0];S=b("bs_js_dict").fromArray(b("bs_js_dict").entries(x.montage));p=E.actor.id;M=b("bs_js_dict").get(S,p);if(M!==void 0){G=M;G.push(E);S[p]=G}else S[p]=[E];return{fbid:x.fbid,deliveryReceipts:x.deliveryReceipts,readReceiptsPerThread:x.readReceiptsPerThread,ignoredIds:x.ignoredIds,blockedIds:x.blockedIds,pendingFolderUnseenCount:x.pendingFolderUnseenCount,typing:x.typing,threads:x.threads,pendingReadStatusThreads:x.pendingReadStatusThreads,messages:x.messages,localIDsMap:x.localIDsMap,messagesWithUploadsInFlight:x.messagesWithUploadsInFlight,threadlistOrderMap:x.threadlistOrderMap,pinnedThreads:x.pinnedThreads,montage:S,orderedMessageLists:x.orderedMessageLists,unreadCounts:x.unreadCounts,initialUnreadCounts:x.initialUnreadCounts,unseenTimestamp:x.unseenTimestamp};case 58:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InstantiateMontageThread");T=f;Q=i[0];V=b("bs_js_dict").fromArray(b("bs_js_dict").entries(T.montage));U=b("bs_js_dict").get(V,Q);U===void 0&&(V[Q]=[]);return{fbid:T.fbid,deliveryReceipts:T.deliveryReceipts,readReceiptsPerThread:T.readReceiptsPerThread,ignoredIds:T.ignoredIds,blockedIds:T.blockedIds,pendingFolderUnseenCount:T.pendingFolderUnseenCount,typing:T.typing,threads:T.threads,pendingReadStatusThreads:T.pendingReadStatusThreads,messages:T.messages,localIDsMap:T.localIDsMap,messagesWithUploadsInFlight:T.messagesWithUploadsInFlight,threadlistOrderMap:T.threadlistOrderMap,pinnedThreads:T.pinnedThreads,montage:V,orderedMessageLists:T.orderedMessageLists,unreadCounts:T.unreadCounts,initialUnreadCounts:T.initialUnreadCounts,unseenTimestamp:T.unseenTimestamp};case 59:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeleteMontageMessage");L=f;var Db=i[0],Eb=b("bs_js_dict").fromArray(b("bs_js_dict").entries(L.montage));A=Object.keys(Eb);A.forEach(function(c){var a=b("bs_js_dict").get(Eb,c);if(a!==void 0){a=a.filter(function(a){return a.id!==Db.messageFBID});Eb[c]=a;return 0}else return 0});return{fbid:L.fbid,deliveryReceipts:L.deliveryReceipts,readReceiptsPerThread:L.readReceiptsPerThread,ignoredIds:L.ignoredIds,blockedIds:L.blockedIds,pendingFolderUnseenCount:L.pendingFolderUnseenCount,typing:L.typing,threads:L.threads,pendingReadStatusThreads:L.pendingReadStatusThreads,messages:L.messages,localIDsMap:L.localIDsMap,messagesWithUploadsInFlight:L.messagesWithUploadsInFlight,threadlistOrderMap:L.threadlistOrderMap,pinnedThreads:L.pinnedThreads,montage:Eb,orderedMessageLists:L.orderedMessageLists,unreadCounts:L.unreadCounts,initialUnreadCounts:L.initialUnreadCounts,unseenTimestamp:L.unseenTimestamp};case 60:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("AddFetchedAllHistoryMarkers");var W=f;N=[i[0],i[1]];var Fb=N[1];N[0].forEach(function(b){var a=W.orderedMessageLists.get(b);a==null?W.orderedMessageLists.set(b,{messageLoadingState:1,messageIDs:[]}):W.orderedMessageLists.set(b,{messageLoadingState:1,messageIDs:a.messageIDs});return Oa(W.fbid,b,Fb)});return{fbid:W.fbid,deliveryReceipts:W.deliveryReceipts,readReceiptsPerThread:W.readReceiptsPerThread,ignoredIds:W.ignoredIds,blockedIds:W.blockedIds,pendingFolderUnseenCount:W.pendingFolderUnseenCount,typing:W.typing,threads:W.threads,pendingReadStatusThreads:W.pendingReadStatusThreads,messages:W.messages,localIDsMap:W.localIDsMap,messagesWithUploadsInFlight:W.messagesWithUploadsInFlight,threadlistOrderMap:W.threadlistOrderMap,pinnedThreads:W.pinnedThreads,montage:W.montage,orderedMessageLists:W.orderedMessageLists,unreadCounts:W.unreadCounts,initialUnreadCounts:W.initialUnreadCounts,unseenTimestamp:W.unseenTimestamp};case 61:var X=f;o=i[0];o.forEach(function(c){var a=c.folder;if(za.includes(a)){c=c.thread_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromThreadFBID(a)}).concat(c.other_user_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromUserID(a)}));X.unreadCounts[a]=new Set(c);a=b("MercuryThreadInformer").getForFBID(X.fbid);a.updatedUnreadState();return 0}else return 0});return{fbid:X.fbid,deliveryReceipts:X.deliveryReceipts,readReceiptsPerThread:X.readReceiptsPerThread,ignoredIds:X.ignoredIds,blockedIds:X.blockedIds,pendingFolderUnseenCount:X.pendingFolderUnseenCount,typing:X.typing,threads:X.threads,pendingReadStatusThreads:X.pendingReadStatusThreads,messages:X.messages,localIDsMap:X.localIDsMap,messagesWithUploadsInFlight:X.messagesWithUploadsInFlight,threadlistOrderMap:X.threadlistOrderMap,pinnedThreads:X.pinnedThreads,montage:X.montage,orderedMessageLists:X.orderedMessageLists,unreadCounts:X.unreadCounts,initialUnreadCounts:X.initialUnreadCounts,unseenTimestamp:X.unseenTimestamp};case 62:var Y=f,Gb=a;q=i[0];var d={contents:Y.unseenTimestamp};q.forEach(function(a){Y.initialUnreadCounts[a.folder]=a.unread_count;a.unread_count===0&&(Y.unreadCounts[a.folder]=new Set());a.folder===b("MessagingTag").INBOX&&(d.contents=b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.seen_timestamp),d.contents),Gb.fallbackUnseenCount.contents=a.unseen_count);a=b("MercuryThreadInformer").getForFBID(Y.fbid);a.updatedUnreadState();a.updatedUnseenState();return 0});return{fbid:Y.fbid,deliveryReceipts:Y.deliveryReceipts,readReceiptsPerThread:Y.readReceiptsPerThread,ignoredIds:Y.ignoredIds,blockedIds:Y.blockedIds,pendingFolderUnseenCount:Y.pendingFolderUnseenCount,typing:Y.typing,threads:Y.threads,pendingReadStatusThreads:Y.pendingReadStatusThreads,messages:Y.messages,localIDsMap:Y.localIDsMap,messagesWithUploadsInFlight:Y.messagesWithUploadsInFlight,threadlistOrderMap:Y.threadlistOrderMap,pinnedThreads:Y.pinnedThreads,montage:Y.montage,orderedMessageLists:Y.orderedMessageLists,unreadCounts:Y.unreadCounts,initialUnreadCounts:Y.initialUnreadCounts,unseenTimestamp:d.contents};case 63:var Hb=f,Ib=i[0];za.forEach(function(a){a=b("bs_js_dict").get(Hb.unreadCounts,a);if(a!==void 0){var c=b("bs_caml_option").valFromOption(a);b("bs_js_dict").entries(Ib).forEach(function(a){var b=a[0];if(c.has(b)){c.add(a[1]);c["delete"](b);return 0}else return 0});return 0}else return 0});return{fbid:Hb.fbid,deliveryReceipts:Hb.deliveryReceipts,readReceiptsPerThread:Hb.readReceiptsPerThread,ignoredIds:Hb.ignoredIds,blockedIds:Hb.blockedIds,pendingFolderUnseenCount:Hb.pendingFolderUnseenCount,typing:Hb.typing,threads:Hb.threads,pendingReadStatusThreads:Hb.pendingReadStatusThreads,messages:Hb.messages,localIDsMap:Hb.localIDsMap,messagesWithUploadsInFlight:Hb.messagesWithUploadsInFlight,threadlistOrderMap:Hb.threadlistOrderMap,pinnedThreads:Hb.pinnedThreads,montage:Hb.montage,orderedMessageLists:Hb.orderedMessageLists,unreadCounts:Hb.unreadCounts,initialUnreadCounts:Hb.initialUnreadCounts,unseenTimestamp:Hb.unseenTimestamp};case 64:H=f;K=i[0];w=i[1];I=i[2];B=i[3];J=i[4];O=La(H,K,[w]);F=Sa(O,w);if(F!==void 0){R=b("bs_caml_option").valFromOption(F);cb(b("bs_caml_option").some(K),R);n=b("MessengerMessage.bs").makeFakeMessage(R.message_id,R.thread_id,R.author,R.action_type,R.timestamp,{removed_timestamp:B,message_unsendability_status:b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE,unsender:{id:I}});P=Ua(O,[w,n]);m=R.thread_id;if(m==null)return P;else{M=db(P,w,m);Ma(M.fbid,m,w,J);Pa(M.fbid,m,w,J,R.attachments);G=b("bs_belt_Map").get(M.threads,m);if(G!==void 0){p=b("bs_caml_option").valFromOption(G);E=eb(R.profile_ranges,M.fbid);S=b("ImmutableObject").set(b("ImmutableObject").set(p,bb(M,m)),{unread_mentions_count:p.unread_mentions_count-E|0});x=b("bs_belt_Map").set(M.threads,m,S);s(M.fbid,m);return{fbid:M.fbid,deliveryReceipts:M.deliveryReceipts,readReceiptsPerThread:M.readReceiptsPerThread,ignoredIds:M.ignoredIds,blockedIds:M.blockedIds,pendingFolderUnseenCount:M.pendingFolderUnseenCount,typing:M.typing,threads:x,pendingReadStatusThreads:M.pendingReadStatusThreads,messages:M.messages,localIDsMap:M.localIDsMap,messagesWithUploadsInFlight:M.messagesWithUploadsInFlight,threadlistOrderMap:M.threadlistOrderMap,pinnedThreads:M.pinnedThreads,montage:M.montage,orderedMessageLists:M.orderedMessageLists,unreadCounts:M.unreadCounts,initialUnreadCounts:M.initialUnreadCounts,unseenTimestamp:M.unseenTimestamp}}else return M}}else{Qa(O.fbid,K,w,J);return O}case 65:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateConnectivityStatus");U=f;Q=i[0];V=i[1];T=b("ThreadConnectivityStatus.bs").toGraphQLValue(V);A=b("bs_belt_Map").get(U.threads,Q);if(A!==void 0){L=b("bs_caml_option").valFromOption(A);N=L.thread_connectivity_data;o=N==null?b("ImmutableObject").set(L,{thread_connectivity_data:{connectivity_status:T,first_sender_id:null}}):b("ImmutableObject").set(L,{thread_connectivity_data:{connectivity_status:T,first_sender_id:N.first_sender_id}});return{fbid:U.fbid,deliveryReceipts:U.deliveryReceipts,readReceiptsPerThread:U.readReceiptsPerThread,ignoredIds:U.ignoredIds,blockedIds:U.blockedIds,pendingFolderUnseenCount:U.pendingFolderUnseenCount,typing:U.typing,threads:b("bs_belt_Map").set(U.threads,Q,o),pendingReadStatusThreads:U.pendingReadStatusThreads,messages:U.messages,localIDsMap:U.localIDsMap,messagesWithUploadsInFlight:U.messagesWithUploadsInFlight,threadlistOrderMap:U.threadlistOrderMap,pinnedThreads:U.pinnedThreads,montage:U.montage,orderedMessageLists:U.orderedMessageLists,unreadCounts:U.unreadCounts,initialUnreadCounts:U.initialUnreadCounts,unseenTimestamp:U.unseenTimestamp}}else return U;case 66:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeltaMarkFolderSeen");q=f;var Jb=i[0];return b("bs_belt_Array").reduceU(Jb.folders,q,function(c,a){a=b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,a);if(a!==void 0)return xb(c,Number(Jb.timestamp),a);else return c});case 67:H=f;F=[i[0],i[1],i[2],i[3]];var Kb=F[2];B=F[0];I=Sa(H,B);if(I!==void 0){n=b("bs_caml_option").valFromOption(I);P=F[1].concat(n.tags).filter(function(a){return Kb.indexOf(a)===-1});G=Object.assign(Object.assign({},n),{tags:P});R=n.thread_id;R==null||Ma(H.fbid,R,B,F[3]);return Ua(H,[B,G])}else return H;case 68:p=f;E=i[0];S=i[1];return u(void 0,p,E,{conversion_detection_data:S});case 69:m=f;x=[i[0],i[1],i[2],i[3],i[4]];M=x[0];K=Sa(m,M);if(K!==void 0){w=b("bs_caml_option").valFromOption(K);J=w.attachments;if(J==null||J.length!==1)return m;else{O=J[0];V=x[2]?[Object.assign(Object.assign({},O),{blurred_image_uri:void 0})]:[Object.assign(Object.assign({},O),{blurred_image_uri:x[3]})];A=Object.assign(Object.assign({},w),{attachments:V});L=w.thread_id;L==null||Ma(m.fbid,L,M,x[4]);return Ua(m,[M,A])}}else return m}case 1:T=g[0];if(typeof T==="number")if(T===0){N=f;var Lb=[];b("bs_belt_MapString").forEach(N.typing,function(a,c){return b("bs_belt_Map").forEach(c,function(b,c){if(c<Date.now()-3e4){Lb.push([a,b]);return 0}else return 0})});if(Lb.length!==0){var c={contents:N.typing};Lb.forEach(function(a){c.contents=la(c.contents,a[0],a[1]);return 0});return{fbid:N.fbid,deliveryReceipts:N.deliveryReceipts,readReceiptsPerThread:N.readReceiptsPerThread,ignoredIds:N.ignoredIds,blockedIds:N.blockedIds,pendingFolderUnseenCount:N.pendingFolderUnseenCount,typing:c.contents,threads:N.threads,pendingReadStatusThreads:N.pendingReadStatusThreads,messages:N.messages,localIDsMap:N.localIDsMap,messagesWithUploadsInFlight:N.messagesWithUploadsInFlight,threadlistOrderMap:N.threadlistOrderMap,pinnedThreads:N.pinnedThreads,montage:N.montage,orderedMessageLists:N.orderedMessageLists,unreadCounts:N.unreadCounts,initialUnreadCounts:N.initialUnreadCounts,unseenTimestamp:N.unseenTimestamp}}else return N}else{Q=f;o=a;if(vb(Q,o,!1)>0){U=b("MercuryServerRequests").getForFBID(Q.fbid);U.markSeen();return xb(Q,U.getLastActionTimestamp(),b("MessagingTag").INBOX)}else return Q}else switch(T.tag|0){case 0:var Z=f,Mb=a;q=T[0];I=T[1];P=T[2];n=T[3];var Nb=Z.threads,Ob=[];R=j(q.reduce(function(d,a){var c=b("bs_belt_Map").get(Nb,a);if(c!==void 0)return b("bs_belt_Map").set(d,a,b("bs_caml_option").valFromOption(c));else{Ob.push(a);return d}},b("bs_belt_Map").make(b("ThreadId.bs"))));if(Ob.length!==0){F=Mb.threadSubToken;B=F.contents.toString();Mb.threadSubToken.contents=F.contents+1|0;Mb.threadCallbacks.contents[B]=[q,P];G=b("MercuryServerRequests").getForFBID(Z.fbid);H=Ob.reduce(function(c,a){var d=b("MercuryIDs").tokenize(a),e=d.type;d=d.value;if(e==="user"){e=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d));d=b("MercuryIDs").getParticipantIDFromUserID(Z.fbid);d=b("MessengerThreadUtils.bs").createNewLocalThread(d,a,b("bs_caml_obj").caml_equal(e,d)?[d]:[d,e],null);e=b("bs_belt_Map").set(c,a,d);b("gkx")("1074761")||pb(e,Mb.threadCallbacks.contents);return e}else return c},Z.threads);G.fetchThreadData(Ob,n);b("bs_curry")._1(I,B);if(H===Z.threads)return Z;else return{fbid:Z.fbid,deliveryReceipts:Z.deliveryReceipts,readReceiptsPerThread:Z.readReceiptsPerThread,ignoredIds:Z.ignoredIds,blockedIds:Z.blockedIds,pendingFolderUnseenCount:Z.pendingFolderUnseenCount,typing:Z.typing,threads:H,pendingReadStatusThreads:Z.pendingReadStatusThreads,messages:Z.messages,localIDsMap:Z.localIDsMap,messagesWithUploadsInFlight:Z.messagesWithUploadsInFlight,threadlistOrderMap:Z.threadlistOrderMap,pinnedThreads:Z.pinnedThreads,montage:Z.montage,orderedMessageLists:Z.orderedMessageLists,unreadCounts:Z.unreadCounts,initialUnreadCounts:Z.initialUnreadCounts,unseenTimestamp:Z.unseenTimestamp}}else{b("bs_curry")._1(P,R);return Z}case 1:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnsubscribeThread");p=a.threadCallbacks.contents;ob(p,T[0]);a.threadCallbacks.contents=p;return f;case 2:var $=f;E=T[0];S=b("bs_belt_Array").keepMap(E,function(a){a=Sa($,a);if(a!==void 0)return b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(a).offline_threading_id)});S.forEach(function(a){$.localIDsMap["delete"](a);return 0});return{fbid:$.fbid,deliveryReceipts:$.deliveryReceipts,readReceiptsPerThread:$.readReceiptsPerThread,ignoredIds:$.ignoredIds,blockedIds:$.blockedIds,pendingFolderUnseenCount:$.pendingFolderUnseenCount,typing:$.typing,threads:$.threads,pendingReadStatusThreads:$.pendingReadStatusThreads,messages:$.messages,localIDsMap:$.localIDsMap,messagesWithUploadsInFlight:$.messagesWithUploadsInFlight,threadlistOrderMap:$.threadlistOrderMap,pinnedThreads:$.pinnedThreads,montage:$.montage,orderedMessageLists:$.orderedMessageLists,unreadCounts:$.unreadCounts,initialUnreadCounts:$.initialUnreadCounts,unseenTimestamp:$.unseenTimestamp};case 3:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontagePollStickerVoted");i=f;var Pb=T[0];K=b("bs_js_dict").fromArray(b("bs_js_dict").entries(i.montage));J=Pb.montageActorID;O=b("bs_js_dict").get(K,J);if(O!==void 0){V=O.map(function(a){if(b("bs_caml_obj").caml_equal(Pb.montageMessageID,a.id)){var c=a,d=Pb,e=c.montage_overlays.map(function(a){if(b("bs_caml_obj").caml_equal(a.poll.id,d.pollID)){var c=a.poll.poll_options.map(function(a,c){if(c===d.optionVotedIndex)return new(b("ImmutableObject"))({text:a.text,vote_count:a.vote_count+1|0});else return a});c=new(b("ImmutableObject"))({can_viewer_vote:a.poll.can_viewer_vote,id:a.poll.id,poll_options:c,viewer_vote_index:d.optionVotedIndex});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{poll:c})}else return a});return b("ImmutableObject").set(new(b("ImmutableObject"))(c),{montage_overlays:e})}else return a});K[J]=V}return{fbid:i.fbid,deliveryReceipts:i.deliveryReceipts,readReceiptsPerThread:i.readReceiptsPerThread,ignoredIds:i.ignoredIds,blockedIds:i.blockedIds,pendingFolderUnseenCount:i.pendingFolderUnseenCount,typing:i.typing,threads:i.threads,pendingReadStatusThreads:i.pendingReadStatusThreads,messages:i.messages,localIDsMap:i.localIDsMap,messagesWithUploadsInFlight:i.messagesWithUploadsInFlight,threadlistOrderMap:i.threadlistOrderMap,pinnedThreads:i.pinnedThreads,montage:K,orderedMessageLists:i.orderedMessageLists,unreadCounts:i.unreadCounts,initialUnreadCounts:i.initialUnreadCounts,unseenTimestamp:i.unseenTimestamp};case 4:w=b("bs_belt_Map").set(f.threads,T[0],T[1]);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:w,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 5:L=T[1];if(L.tag){x=L[0];M={solid_color:x.fallback,header_color:b("bs_caml_array").caml_array_get(x.colors,0),footer_color:b("bs_caml_array").caml_array_get(x.colors,x.colors.length-1|0),gradient_colors:x.colors,theme_id:b("MWChatTheme.bs").genFBIDFromThemeId(x.id),reactions:[]}}else{A=L[0];M={solid_color:A.color,header_color:A.color,footer_color:A.color,gradient_colors:[],theme_id:b("MWChatTheme.bs").genFBIDFromThemeId(A.id),reactions:[]}}return wa(f,T[0],M);case 6:b("MercuryServerRequests").getForFBID(f.fbid).updateLastActionTimestamp(T[0]);return f}case 2:m=g[0];switch(m.tag|0){case 0:b("bs_curry")._1(m[0],{blocked_ids:f.blockedIds});break;case 1:b("bs_curry")._1(m[1],b("bs_belt_Map").get(f.threads,m[0]));break;case 2:b("bs_curry")._1(m[0],f.pinnedThreads.concat([]));break;case 3:b("bs_curry")._2(m[0],f,a);break}return f}},d,c);e.length>0&&b("LogHistory").getInstance("messenger_state").debug("actions",b("bs_belt_Option").getWithDefault(JSON.stringify(e),""));return d}function zb(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}function D(a){return{fbid:a,deliveryReceipts:null,readReceiptsPerThread:null,ignoredIds:b("bs_belt_Set").make(b("ParticipantId.bs")),blockedIds:b("bs_belt_Set").make(b("ParticipantId.bs")),pendingFolderUnseenCount:0,typing:null,threads:b("bs_belt_Map").make(b("ThreadId.bs")),pendingReadStatusThreads:new Set(),messages:new Map(),localIDsMap:new Map(),messagesWithUploadsInFlight:new Map(),threadlistOrderMap:pa(0),pinnedThreads:[],montage:{},orderedMessageLists:new Map(),unreadCounts:{},initialUnreadCounts:{},unseenTimestamp:0}}var E={contents:{}},F={contents:0},G=new Map(),H={contents:{}},I={contents:0},J=new Set(),K={contents:{}},L={contents:0},M={threadCallbacks:E,threadSubToken:F,localTitanMessageCount:G,messageCallbacks:H,messageSubToken:I,existingPinnedThreads:J,failedHistoryFetchThreads:K,fallbackUnseenCount:L},Ab={contents:0},N={};function O(a,c,d){d=c!==void 0?b("bs_caml_option").valFromOption(c):b("RemoteAction.bs").create(0);c=b("bs_js_dict").get(N,a);if(c!==void 0)return 0;else{N[a]={subscriptions:new Set(),state:D(a),remoteAction:d};b("RemoteAction.bs").subscribe(function(c){var d=b("bs_js_dict").get(N,a);if(d!==void 0){d=d;var e=d.state;c=yb(M,c,e);N[a]={subscriptions:d.subscriptions,state:c,remoteAction:d.remoteAction};if(c!==e){d=b("bs_js_dict").get(N,a);if(d!==void 0){d.subscriptions.forEach(function(a){return b("bs_curry")._1(a.fn,0)});return 0}else{b("recoverableViolation")("Subscriptions deleted after createion","messenger_comet");return 0}}else return 0}else{b("recoverableViolation")("State deleted after creation","messenger_comet");return 0}},d);var e=b("bs_caml_option").some(a),f=a,g=function(a){return P(e,a)},h=function(a){b("bs_curry")._1(g,[b("bs_block").__(0,[b("bs_block").__(5,[a])])]);b("setTimeoutAcrossTransitions")(function(a){return b("bs_curry")._1(g,[b("bs_block").__(1,[0])])},3e4);return 0};b("Arbiter").subscribe(zb(f),function(a,b){a=b.obj;b=a.to;if(!(b==null)&&b.toString()!==f)return 0;else{h(a);return 0}});return 0}}function P(a,c){a=a!==void 0?b("bs_caml_option").valFromOption(a):b("CurrentUser").getID();O(a,void 0,0);a=b("bs_js_dict").get(N,a);if(a!==void 0)return b("RemoteAction.bs").send(a.remoteAction,c);else{b("recoverableViolation")("Subscriptions deleted after createion","messenger_comet");return 0}}function Q(a,c,d,e){var f=a!==void 0?b("bs_caml_option").valFromOption(a):b("CurrentUser").getID();e=c!==void 0?b("bs_caml_option").valFromOption(c):b("RemoteAction.bs").create(0);O(f,b("bs_caml_option").some(e),0);a=i.useState(function(){var a=b("bs_js_dict").get(N,f);if(a!==void 0)return a.state;else return b("unrecoverableViolation")("Rendering without state initialized","messenger_comet")});var g=a[1],h=a[0];c=b("bs_js_dict").get(N,f);var j=i.useCallback(function(a){a=b("bs_js_dict").get(N,f);var c=a!==void 0?a.state:b("unrecoverableViolation")("Rendering without state initialized","messenger_comet");if(d!==void 0)if(b("bs_curry")._2(d,h,c))return b("bs_curry")._1(g,function(a){return c});else return 0;else return b("bs_curry")._1(g,function(a){return c})},[d,h,g,c,f]);i.useEffect(function(){Ab.contents=Ab.contents+1|0;var a=Ab.contents,c={id:a,fn:j};a=b("bs_js_dict").get(N,f);a!==void 0?a.subscriptions.add(c):b("recoverableViolation")("Subscriptions deleted after createion, can't add subscription","messenger_comet");b("bs_curry")._1(j,0);return function(a){a=b("bs_js_dict").get(N,f);if(a!==void 0){a.subscriptions["delete"](c);return 0}else{b("recoverableViolation")("Subscriptions deleted after createion, can't remove subscription","messenger_comet");return 0}}},[j,f]);return h}function R(a){var c=a.shouldUpdate,d=a.remoteAction,e=a.fbid;a=a.children;e=e!==void 0?b("bs_caml_option").valFromOption(e):b("CurrentUser").getID();return b("bs_curry")._1(a,Q(b("bs_caml_option").some(e),d,c,0))}function S(a){return Q(b("bs_caml_option").some(a),void 0,void 0,0)}function T(a,c){return P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(0,[c])])])}function U(a,c){b("MercuryAssert").isThreadID(c);var d={contents:void 0},e=function(a){d.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);return b("bs_js_null_undefined").fromOption(d.contents)}function V(a,c,d,e){if(c.length!==0){b("MercuryAssert").allThreadID(c);var f={contents:null},g=function(a){f.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(1,[b("bs_block").__(0,[c,g,d,e])])]);return f.contents}else{b("bs_curry")._1(d,{});return null}}function Bb(a,c,d,e){return V(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function Cb(a,c,d,e){var f={contents:void 0},g=function(a){f.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f.contents;if(g!==void 0)return b("bs_caml_option").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);P(b("bs_caml_option").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function Db(a){var c=b("MercuryLocalIDs").generateThreadID(null);Cb(a,c,[],null);return c}function Eb(a,c,d,e){var f={contents:void 0},g=function(a){f.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f.contents;if(g!==void 0)return b("bs_caml_option").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);P(b("bs_caml_option").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function W(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);Eb(a,e,c,d);return e}function Fb(a,c){var d={contents:void 0},e=function(a){d.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d.contents;if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_caml_option").valFromOption(a));else return!1}function X(a,c){var d={contents:void 0},e=function(a){d.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d.contents;if(a!==void 0)return b("MercuryThreadInfo").isNewEmptyLocalThread(b("bs_caml_option").valFromOption(a));else return!1}function Y(c){var a={contents:[]},d=function(b){a.contents=b;return 0};P(b("bs_caml_option").some(c),[b("bs_block").__(2,[b("bs_block").__(2,[d])])]);return a.contents}function Gb(a,c,d){return P(b("bs_caml_option").some(a),[b("bs_block").__(1,[b("bs_block").__(5,[c,d])])])}function Hb(a,c){return P(b("bs_caml_option").some(a),[b("bs_block").__(1,[b("bs_block").__(1,[c])])])}function Ib(a){var c=a.payload_source;if(c==null)return!1;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_THREAD_SYNC)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_MESSAGES)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS))return!0;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INITIAL_DATA)){c=a.ordered_threadlists;return!(c==null)}else return!1}function Jb(a,c){c=b("bs_block").__(1,[b("bs_block").__(3,[c])]);return P(b("bs_caml_option").some(a),[c])}function Kb(a,c){return P(a==null?void 0:b("bs_caml_option").some(a),c)}function Lb(a){var c=[],d=!1;if(!(a==null)){var e=a.payload_source;!(e==null)&&b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&(d=!0);e=a.newlyAddedClientIDs;e==null||Object.keys(e).length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(63,[e])]));e=a.delivery_receipts;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(0,[e])]));e=a.message_ignored_ids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(1,[e])]));e=a.threads;if(!(e==null)){var f=a.payload_source;f==null||(b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push(b("bs_block").__(0,[b("bs_block").__(8,[e])])),b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)&&(e.length>0&&c.unshift(b("bs_block").__(0,[b("bs_block").__(34,[b("bs_caml_array").caml_array_get(e,0).thread_id])]))));c.push(b("bs_block").__(0,[b("bs_block").__(7,[e])]))}f=a.participants;if(!(f==null)){c.push(b("bs_block").__(0,[b("bs_block").__(3,[f])]));var g=[],h=[];f.forEach(function(a){if(a.is_messenger_blocked||a.is_facebook_blocked){g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}else{h.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}});e=0;(g.length!==0||h.length!==0)&&(e=1);e===1&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[g,h])]))}f=a.message_blocked_ids;f==null||f.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[f,[]])]));e=a.message_unblocked_ids;e==null||e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[[],e])]));f=a.pending_folder_unseen_count;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(4,[f])]));e=a.global_actions;e==null||e.forEach(function(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)){c.push(b("bs_block").__(0,[b("bs_block").__(33,[a.folder])]));return 0}else return 0});if(Ib(a)){f=a.ordered_threadlists;e=0;f==null||f.length===0?e=1:c.push(b("bs_block").__(0,[b("bs_block").__(9,[f])]));if(e===1){f=a.threads;e=a.payload_source;f==null||!(e==null)&&f.length>0&&e!==b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS&&c.push(b("bs_block").__(0,[b("bs_block").__(10,[f])]))}}e=a.pinned_thread_ids;e==null||e.length>0&&Ib(a)&&c.push(b("bs_block").__(0,[b("bs_block").__(11,[e])]));f=a.roger;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(6,[f])]));e=a.montage_delete_message_delta;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(59,[e])]));f=a.montage_new_message_delta;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(57,[f])]));e=a.montage_poll_sticker_vote;e==null||e.forEach(function(a){c.push(b("bs_block").__(1,[b("bs_block").__(3,[a])]));return 0});f=a.current_montage_thread;if(!(f==null)){e=f.user;if(!(e==null)){f=e.messenger_montage_thread;f==null||(c.push(b("bs_block").__(0,[b("bs_block").__(58,[e.id])])),f.montage_messages.edges.forEach(function(a){c.push(b("bs_block").__(0,[b("bs_block").__(57,[a.node])]));return 0}))}}e=a.unread_thread_fbids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(61,[e])]));f=a.message_counts;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(62,[f])]));e=a.actions;if(!(e==null)){var i=a.payload_source,j=i==null?void 0:b("bs_caml_option").some(i);e.forEach(function(d){var e=d.action_type,f=0;(i==null||!i.startsWith("server"))&&(f=1);f===1&&c.push(b("bs_block").__(1,[b("bs_block").__(6,[d.timestamp])]));if(b("bs_caml_obj").caml_equal(j,b("bs_caml_option").some(b("MercuryPayloadSource").SERVER_SEARCH))||b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(d.client_state),b("bs_caml_option").some(b("MercuryMessageClientState").SEND_TO_SERVER))){c.push(b("bs_block").__(0,[b("bs_block").__(35,[d,0])]));return 0}else{f=d.thread_id;var g=d.upload_id,h=d.upload_data,k=d.message_ids;ia(d);if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_MESSAGES))if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(36,[f,k,j])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FOLDER)){k=d.new_folder;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(37,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(39,[f,d.archived])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){k=d.reactions_mute_mode;var l=d.mentions_mute_mode,m=d.mute_until;l=k==null?l==null?m==null?void 0:b("bs_block").__(2,[m]):m==null?b("bs_block").__(1,[l===1]):void 0:!(l==null)||!(m==null)?void 0:b("bs_block").__(0,[k===1]);if(!(f==null)&&l!==void 0){c.push(b("bs_block").__(0,[b("bs_block").__(38,[f,l])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_READ_STATUS))if(f==null)return 0;else{m=a.from_client;c.push(b("bs_block").__(0,[b("bs_block").__(41,[f,d.mark_as_read,d.timestamp,m==null?!1:m,d.source])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(40,[f,d.is_page_follow_up])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED))if(f==null)return 0;else{k=d.canViewerReply?null:b("MessengerThreadCannotReplyReason.bs").fromMessageThreadCannotReplyReason(d.reason);c.push(b("bs_block").__(0,[b("bs_block").__(13,[f,d.canViewerReply,k])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_THREAD))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(42,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REACTION_UPDATE)){l=d.messageId;m=d.userId;if(!(l==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(45,[l,b("bs_caml_option").nullable_to_opt(d.reaction),m,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MONTAGE_DIRECT_EXPIRE)){k=d.messageId;if(k==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(46,[k,j])]));return 0}}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LIVE_LOCATION_UPDATE)){l=d.messageId;m=d.liveLocation;if(!(l==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(47,[l,m,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REPLACE_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(48,[d,j])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(44,[g,h])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(43,[g,h,j])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SEND_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(50,[d,j])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(51,[d,j,a.from_client])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LOG_MESSAGE))if(b("MessengerMessage.bs").isLocalMessage(d))return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(52,[d,j,a.from_client])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PINNED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(55,[f,d.is_pinned,d.thread_pin_timestamp])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PIN_MESSAGE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(53,[f,d.pin_message_action])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNPIN_MESSAGE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(54,[f,d.unpin_message_action])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_MESSAGE)){k=d.thread_id;l=d.messageId;m=d.removed_timestamp;g=d.author;if(!(k==null)&&!(l==null)&&!(m==null)&&!(g==null)){c.push(b("bs_block").__(0,[b("bs_block").__(64,[k,l,g,m,j])]));b("MessengerDesktopNotifications").removeNotification(l);return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(12,[f,d.page_unsubscribe_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLURRED_IMAGE_STATUS)){h=d.image_message_id;k=d.image_id;g=d.should_show;m=d.blurred_image_uri;if(!(h==null)&&!(k==null)&&!(g==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(69,[h,k,g,m,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADD_PARTICIPANTS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(14,[f,d.participants])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FLAG))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(15,[f,d.mark_as_flag])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MOVE_PENDING_TO_INBOX))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(16,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CUSTOM_LIKE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(17,[f,d.custom_like])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PROMOTE_GROUP_ADMINS)){l=d.promoted_admins;if(!(f==null)&&!(l==null)){c.push(b("bs_block").__(0,[b("bs_block").__(18,[f,l])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_GROUP_ADMINS)){h=d.removed_admin_ids;if(!(f==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(19,[f,h])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").JOINABLE_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(20,[f,d.joinable_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(21,[f,d.approval_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_QUEUE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(22,[f,d.added_id,d.added_group_id,d.removed_id,d.removed_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").IS_PIN_PROTECTED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(23,[f,d.is_pin_protected])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_RTC_CALL_DATA))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(24,[f,d.initiator_fbid,d.call_state,d.server_info_data])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(25,[f,d.comm_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(26,[f,d.id,d.name,d.profile_pic_uri])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").EVENT_RSVP_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(27,[f,d.actor_fbid,d.rsvp_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS)){k=d.thread_connectivity_status;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(65,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(28,[f,d.groups_sync_action,d.groups_sync_status_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(29,[f,d.groups_sync_action,d.fb_group_id,d.emoji_codepoints])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DESCRIPTION_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(30,[f,d.group_thread_description_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_THREAD_THEME))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(31,[f,{solid_color:d.solid_color,header_color:d.header_color,footer_color:d.footer_color,gradient_colors:d.gradient_colors,theme_id:d.theme_id,reactions:d.reactions}])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_JOINABLE_LINK))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(32,[f,d.joinable_link])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MUTATE_TAGS)){g=d.tags_to_add;m=g==null?[]:g;l=d.tags_to_delete;h=l==null?[]:l;k=d.messageId;if(k==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(67,[k,m,h,j])]));return 0}}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADS_CONVERSION_UPDATE)){g=d.conversion_detection_data;if(!(f==null)&&!(g==null)){c.push(b("bs_block").__(0,[b("bs_block").__(68,[f,g])]));return 0}else return 0}else return 0}});b("Utils.bs").isTruthy(a.from_client)&&e.forEach(function(d){var a=d.thread_id;if(a==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(49,[a,d.message_id])]));return 0}})}f=a.end_of_history;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(60,[f,a.payload_source])]))}d&&c.unshift(b("bs_block").__(0,[0]));return c}function Z(c,d){var a={contents:[]},e=function(b,c){c=b.orderedMessageLists.get(d);if(c==null)return 0;else{a.contents=z(!0,b,c.messageIDs);return 0}};P(b("bs_caml_option").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a.contents}function Mb(c,d){var a={contents:d},e=function(b,c){c=b.localIDsMap.get(d);if(c==null)return 0;else{a.contents=c;return 0}};P(b("bs_caml_option").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a.contents}function Nb(a,c){var d={contents:void 0},e=function(a,b){d.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);a=d.contents;if(a!==void 0)return z(!1,a,c);else return[]}function Ob(a,c){var d={contents:void 0},e=function(a,b){d.contents=a;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);a=d.contents;if(a!==void 0)return b("bs_caml_option").nullable_to_opt(a.messages.get(c))}function $(a,c,d){var e={contents:!1},f=function(a,b){b=a.orderedMessageLists.get(c);if(b==null)return 0;else{a=b.messageLoadingState;b=b.messageIDs.length;if(a){e.contents=!0;return 0}else{e.contents=b>=d;return 0}}};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[f])])]);return e.contents}function Pb(a,c){var d={contents:!1},e=function(a,b){b=a.orderedMessageLists.get(c);if(b==null)return 0;else{a=b.messageLoadingState;if(a){d.contents=!0;return 0}else{d.contents=!1;return 0}}};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return d.contents}function Qb(a,c){return P(b("bs_caml_option").some(a),[b("bs_block").__(1,[b("bs_block").__(2,[c])])])}function Rb(a,c,d,e){var f=[],g=function(g,h){h=g.orderedMessageLists.get(c);if(h==null)return 0;else{h=h.messageIDs;for(var i=d,j=d+e|0;i<=j;++i){var a=b("bs_belt_Option").flatMap(b("bs_belt_Array").get(h,i),function(a){return Sa(g,a)});a!==void 0&&f.push(b("bs_caml_option").valFromOption(a))}return 0}};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[g])])]);return f}var Sb={contents:void 0};function Tb(a,c,d,e,f,g,h){var i=function(j,i){Sb.contents=[c,d,e];var k=j.orderedMessageLists.get(c);k=k==null?[[],void 0]:[k.messageIDs,k.messageLoadingState];var l=k[0];if(b("bs_js_dict").get(i.failedHistoryFetchThreads.contents,c)!==!0){var m=i.localTitanMessageCount;m=l.length-b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(m.get(c)),0)|0;m>0&&b("ChatReliabilityInstrumentation").logERROR("fetch made with message in flight");var aa=m-d|0;aa=e-aa|0;if(aa>0&&b("bs_caml_obj").caml_notequal(k[1],1)){k=b("MercuryServerRequests").getForFBID(a);var ba=b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_belt_Array").get(l,m-1|0),function(a){return Sa(j,a)}),function(a){return a.timestamp})),ca=i.messageSubToken.contents;i.messageSubToken.contents=ca+1|0;i.messageCallbacks.contents[String(ca)]=[{threadID:c,offset:d,limit:e},f];if(b("bs_caml_obj").caml_equal([c,d,e],Sb.contents)){k.fetchThreadMessages(c,m,aa,ba,g,h);return 0}else return 0}else return b("bs_curry")._1(f,b("bs_belt_Array").keepMap(l,function(a){return Sa(j,a)}).slice(d,e))}else{Sb.contents=void 0;i.failedHistoryFetchThreads.contents[c]=!1;return 0}};return P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[i])])])}function Ub(a,b,c,d,e,f,g){if(Pb(a,b))return 0;else return Tb(a,b,c,d,e,f,g)}function Vb(a){var c={contents:0},d=function(d,a){c.contents=b("bs_caml_primitive").caml_int_min(wb(d,a),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c.contents}function Wb(a){var c={contents:0},d=function(b,a){c.contents=wb(b,a);return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c.contents}function Xb(a){var c={contents:0},d=function(d,a){c.contents=b("bs_caml_primitive").caml_int_min(vb(d,a,!0),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c.contents}function Yb(a){return P(b("bs_caml_option").some(a),[b("bs_block").__(1,[1])])}function Zb(a,c){var d={contents:null},e=function(a,e){e=b("bs_js_dict").get(a.unreadCounts,c);d.contents=e!==void 0?b("bs_belt_Array").keepMap(b("JSSet.bs").values(b("bs_caml_option").valFromOption(e)),function(c){return b("bs_caml_option").nullable_to_opt(k(a,c))}).filter(function(a){return!b("MercuryThreadInfo").isMuted(a)}).length:null;return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return d.contents}function $b(a){var c={contents:[]},d=function(a,d){c.contents=b("bs_belt_Map").keysToArray(a.threads);return 0};P(b("bs_caml_option").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c.contents}E={make:R};F=R;f.fbid=c;f.deliveryReceipts=d;f.readReceiptsPerThread=e;f.ignoredIds=l;f.blockedIds=m;f.pendingFolderUnseenCount=aa;f.typing=ba;f.pendingReadStatusThreads=ca;f.messages=da;f.localIDsMap=n;f.messagesWithUploadsInFlight=o;f.threadlistOrderMap=p;f.pinnedThreads=q;f.montage=ea;f.orderedMessageLists=fa;f.unreadCounts=ga;f.initialUnreadCounts=r;f.unseenTimestamp=ha;f.threads=a;f.thread=k;f.send=P;f.compute=T;f.getThreadMetaNow=U;f.getMultiThreadMeta=V;f.getThreadMeta=Bb;f.createNewLocalThread=Cb;f.createNewLocalThreadGenerateID=Db;f.createNewLocalGroupGeneralThreadGenerateID=W;f.isEmptyLocalThread=Fb;f.isNewEmptyLocalThread=X;f.getPinnedThreadlist=Y;f.unsubscribeThread=Hb;f.sendJS=Kb;f.invalidateSearchedMessages=Qb;f.hasLoadedNMessages=$;f.hasLoadedAllMessages=Pb;f.getCurrentlyLoadedMessages=Z;f.getServerMessageID=Mb;f.getMessagesFromIDs=Nb;f.getMessageFromID=Ob;f.getThreadMessagesRange=Tb;f.getThreadMessagesRangeNow=Rb;f.fetchMoreMessages=Ub;f.processPollStickerVoted=Jb;f.getUnseenUnreadCount=Vb;f.getUnseenUnreadCountRaw=Wb;f.getUnseenCount=Xb;f.getThreadIDs_debug=$b;f.getUnreadThreadCount=Zb;f.markAsSeen=Yb;f.localThreadThemeUpdate=Gb;f.processJSActions=Lb;f.Provider=E;f.jsComponent=F;f.useHook=S}),null);
__d("MessengerState.re",["bs_curry","MessengerState.bs"],(function(a,b,c,d,e,f){c=(a=b("MessengerState.bs")).fbid;f.fbid=c;d=a.deliveryReceipts;f.deliveryReceipts=d;e=a.readReceiptsPerThread;f.readReceiptsPerThread=e;c=a.ignoredIds;f.ignoredIds=c;d=a.blockedIds;f.blockedIds=d;e=a.pendingFolderUnseenCount;f.pendingFolderUnseenCount=e;c=a.typing;f.typing=c;d=a.pendingReadStatusThreads;f.pendingReadStatusThreads=d;e=a.messages;f.messages=e;c=a.localIDsMap;f.localIDsMap=c;d=a.messagesWithUploadsInFlight;f.messagesWithUploadsInFlight=d;e=a.threadlistOrderMap;f.threadlistOrderMap=e;c=a.pinnedThreads;f.pinnedThreads=c;d=a.montage;f.montage=d;e=a.orderedMessageLists;f.orderedMessageLists=e;c=a.unreadCounts;f.unreadCounts=c;d=a.initialUnreadCounts;f.initialUnreadCounts=d;e=a.unseenTimestamp;f.unseenTimestamp=e;c=a.threads;f.threads=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").thread,a,c);return a};f.thread=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").compute,a,c);return a};f.compute=e;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getThreadMetaNow,a,c);return a};f.getThreadMetaNow=c;d=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getMultiThreadMeta,a,c,d,e);return a};f.getMultiThreadMeta=d;e=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getThreadMeta,a,c,d,e);return a};f.getThreadMeta=e;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").isEmptyLocalThread,a,c);return a};f.isEmptyLocalThread=c;d=a.getPinnedThreadlist;f.getPinnedThreadlist=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").unsubscribeThread,a,c);return a};f.unsubscribeThread=e;c=function(a,c,d){a=b("bs_curry")._3(b("MessengerState.bs").hasLoadedNMessages,a,c,d);return a};f.hasLoadedNMessages=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getServerMessageID,a,c);return a};f.getServerMessageID=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getMessagesFromIDs,a,c);return a};f.getMessagesFromIDs=e;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getMessageFromID,a,c);return a};f.getMessageFromID=c;d=function(a,c,d,e,f,g,h){a=b("bs_curry")._7(b("MessengerState.bs").getThreadMessagesRange,a,c,d,e,f,g,h);return a};f.getThreadMessagesRange=d;e=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getThreadMessagesRangeNow,a,c,d,e);return a};f.getThreadMessagesRangeNow=e;c=function(a,c,d,e,f,g,h){a=b("bs_curry")._7(b("MessengerState.bs").fetchMoreMessages,a,c,d,e,f,g,h);return a};f.fetchMoreMessages=c;d=a.getUnseenUnreadCount;f.getUnseenUnreadCount=d;e=a.getUnseenCount;f.getUnseenCount=e;c=a.getThreadIDs_debug;f.getThreadIDs_debug=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getUnreadThreadCount,a,c);return a};f.getUnreadThreadCount=d;e=function(a,c,d){a=b("bs_curry")._3(b("MessengerState.bs").localThreadThemeUpdate,a,c,d);return a};f.localThreadThemeUpdate=e;(function(a){return null});c=a.jsComponent;f.jsComponent=c;d=a.useHook;f.useHook=d}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=this;this.$1=a;this.$2=[];this.$3=b("MercuryThreadIDMap").getForFBID(this.$1);this.$4=b("MercuryDispatcher").getForFBID(this.$1);this.$5=b("MercuryServerRequests").getForFBID(this.$1);this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.$4.subscribe("model-update-completed",function(a,b){return c.$7()})}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.handleUpdateWaitForThread=function(a,b){var c=this,d=this.$3.getClientIDFromServerIDNow(b);if(d){this.$8(a);return}this.$3.getClientIDFromServerID(b,function(){return c.$2.push({thread_fbid:b,payload:a})});this.$5.ensureThreadIsFetched(b)};c.$7=function(){if(this.$2&&this.$2.length){var a=this.$2.shift(),b=a.thread_fbid;a=a.payload;this.handleUpdateWaitForThread(a,b)}};c.$8=function(a){a.from_client?this.$4.handleUpdate(a):this.$6.handleUpdate(a)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDispatcher",["invariant","ArbiterMixin","LogHistory","MercurySingletonProvider","MercuryThreadInformer","MessengerParticipants.bs","MessengerState.bs","gkx","isEmpty","mixin"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("LogHistory").getInstance("mercury_dispatcher");a=function(a){babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return j.getForFBID(a)};c.get=function(){return j.get()};function c(b){var c;c=a.call(this)||this;c.$MercuryDispatcher1=b;return c}var d=c.prototype;d.handlePreprocessedUpdate=function(a){a.preprocessed=!0,this.handleUpdate(a)};d.handleUpdate=function(a){var c=this;this.$MercuryDispatcher2(a);!!a.from_client!==!!a.preprocessed||g(0,5757);delete a.preprocessed;(h||(h=b("isEmpty")))(a)||b("MercuryThreadInformer").getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){a.payload_source==="server_invalidate_global_state"&&(c.inform("invalidate-global-state",{}),b("MessengerParticipants.bs").reset());if(a.payload_source==="server_invalidate_thread_state"){var d=a.threads&&a.threads.length>0&&a.threads[0]&&a.threads[0].thread_id;d&&c.inform("invalidate-thread-state",d)}a.threads&&Array.isArray(a.threads)&&a.threads.length>0&&b("gkx")("1443200")&&b("MessengerParticipants.bs").addPreloadedParticipants(a.threads[0]);b("MessengerParticipants.bs").addParticipants(a);b("MessengerState.bs").sendJS(c.$MercuryDispatcher1,b("MessengerState.bs").processJSActions(a));c.inform("update-threadlist",a);c.inform("update-messages",a);c.inform("model-update-completed",null)})};d.$MercuryDispatcher2=function(a){var b=a.payload_source;if(b==="client_change_read_status"||b==="client_mark_thread_seen")return;var c={from_client:a.from_client,messages:null};if(a.actions){a=a.actions.filter(function(a){return a.action_type==="ma-type:user-generated-message"||a.action_type==="ma-type:log-message"}).map(function(a){return{action_type:a.action_type,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,message_id:a.message_id}});a.length&&(c.messages=a)}i.debug("update:"+b,JSON.stringify(c))};return c}(b("mixin")(b("ArbiterMixin")));var j=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],(function(a,b,c,d,e,f){var g=b("BanzaiLogger").create({retry:!0}),h=b("Banzai").isEnabled("mercury_send_error_logging");a={log:function(a){if(!h)return;a={message_id:a.message_id,timestamp_client:Date.now(),error_type:a.error_data.type,error_code:a.error_data.code,error_description:a.error_data.description,is_transient:a.error_data.is_transient};g.log("MercurySendErrorLoggerConfig",a)}};e.exports=a}),null);
__d("MercuryServerPayloadPreprocessor",["invariant","ChatReliabilityInstrumentation","LogHistory","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","MessengerEnvironment","MessengerState.re","URI","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$4=b("LogHistory").getInstance("MercuryServerPayloadPreprocessor"),this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercuryDispatcher").getForFBID(this.$1)}a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};var c=a.prototype;c.handleUpdate=function(a){var c=this,e={};a.from_client&&g(0,2150);(a.threads||[]).forEach(function(a){c.$5(a,e);var b=c.$2.getServerIDFromClientIDNow(a.thread_id);d(["MercuryServerRequests"],function(d){d=d.getForFBID(c.$1);d.markThreadFetched(a.thread_id);b&&d.markThreadFetched(b);d.updateLastActionTimestamp(a.timestamp)})});a.pinned_thread_ids=(a.pinned_thread_ids||[]).map(function(a){return c.$2.getClientIDFromServerIDNow(a)});(a.ordered_threadlists||[]).forEach(function(a){var b=a.thread_fbids||[];b=b.concat(a.other_user_fbids||[]);a.thread_ids=b.map(function(a){return c.$2.getClientIDFromServerIDNow(a.toString())})});if(a.delivery_receipts){var f={};for(var h=a.delivery_receipts,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;var l=k.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(k.other_user_fbid):this.$2.getClientIDFromServerIDNow(k.thread_fbid);l&&(f[l]=k.time)}a.delivery_receipts=f}a.actions=a.actions||[];a.actions.forEach(function(f){f.action_type==="ma-type:send-message"&&f.status===10&&b("MercurySendErrorLogger").log(f);var h=null,i=null;f.other_user_fbid?(i=b("MercuryIDs").getThreadIDFromUserID(f.other_user_fbid),h=f.other_user_fbid):f.thread_fbid?(i=b("MercuryIDs").getThreadIDFromThreadFBID(f.thread_fbid),h=f.thread_fbid):f.thread_id?(i=b("MercuryIDs").getThreadIDFromThreadFBID(f.thread_id),h=f.thread_id):f.status&&f.status!=1&&f.client_thread_id?i=f.client_thread_id:g(0,2151,f.action_type,f.status);h=h&&h.toString();f.thread_id=c.$2.hasClientIDForServerID(h)?c.$2.getClientIDFromServerIDNow(h):i;f.action_type=="ma-type:send-message"&&f.client_thread_id&&h&&(f.thread_id=f.client_thread_id,c.$6("forceSetServerIDToClientID",h,f.client_thread_id)&&b("ChatReliabilityInstrumentation").logSET_THREAD_ID_MAP(h+":"+f.client_thread_id),c.$2.forceSetServerIDToClientID(h,f.client_thread_id),e[h]=f.client_thread_id);f.thread_id||g(0,2152,f.action_type);(!a.payload_source||!a.payload_source.startsWith("server"))&&d(["MercuryServerRequests"],function(a){a.getForFBID(c.$1).updateLastActionTimestamp(f.timestamp)})});this.$7(a);this.$8(a);if(a.end_of_history){l=[];for(var k=0;k<a.end_of_history.length;k++){j=a.end_of_history[k];j.type=="user"?l.push("user:"+j.fbid):j.type=="thread"&&this.$2.hasClientIDForServerID(j.fbid)&&l.push(this.$2.getClientIDFromServerIDNow(j.fbid))}a.end_of_history=l}if(a.roger){var m={};Object.keys(a.roger).forEach(function(d){var e=Object.keys(a.roger[d]),f;d?f=c.$2.getClientIDFromServerIDNow(d):e.length===1&&(f=b("MercuryIDs").getThreadIDFromUserID(e[0]));if(f){e=a.roger[d];m[f]={};for(var g in e)if(Object.prototype.hasOwnProperty.call(e,g)){d=b("MercuryIDs").getParticipantIDFromUserID(g);m[f][d]=e[g]}}});a.roger=m}a.newlyAddedClientIDs=e;a.preprocessed=!0;this.$3.handleUpdate(a)};c.$6=function(a,c,d){if(!b("gkx")("1199097"))return;var e=b("MessengerState.re").getThreadMetaNow(this.$1,d);if(e==null){this.$4.debug(a,c+":"+d);return!0}return!1};c.$5=function(a,c){var d=a.other_user_fbid?a.other_user_fbid:a.thread_fbid;d||g(0,2153);var e=this.$2.getClientIDFromServerIDNow(d);e||(e=a.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(a.other_user_fbid):b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid),this.$6("setServerIDToClientID",d,e),this.$2.setServerIDToClientID(d,e),this.$2.setDeprecatedServerIDToClientID(a.thread_id,e),c[d]=e);a.thread_id=e};c.$7=function(a){a.actions.forEach(function(a){a.action_type==="ma-type:user-generated-message"&&(a.attachments=a.attachments||[],a.attachments.forEach(function(a){if(b("MercuryAttachment").isShareAttachment(a)&&a.share&&b("MessengerEnvironment").messengerui){var c=new(h||(h=b("URI")))(a.share.uri);c.getDomain()||(a.share.uri=c.setDomain("facebook.com").setSubdomain((h||(h=b("URI"))).getRequestURI().getSubdomain()).setProtocol("https").toString())}}))})};c.$8=function(a){a.actions.forEach(function(a){if(a.action_type!=="ma-type:user-generated-message")return;a=a;if(!a.has_attachment||!a.attachments)return;for(var c=a.attachments.length-1;c>=0;c-=1){var d=a.attachments[c];if(!d.share||!d.share.style_list||d.share.style_list[0]!="genie_message")continue;d.share.target.genie_id&&(a.author=b("MercuryIDs").getParticipantIDFromUserID(d.share.target.genie_id));d.share.target&&!d.share.target.attachment&&(a.attachments.splice(c,1),a.has_attachment=a.attachments.length>0)}})};return a}();var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryServerURIs",[],(function(a,b,c,d,e,f){"use strict";e.exports={THREAD_INFO:"/ajax/mercury/thread_info.php",MARK_FOLDER_READ:"/ajax/mercury/mark_folder_as_read.php",CHANGE_READ_STATUS:"/ajax/mercury/change_read_status.php",MARK_SEEN:"/ajax/mercury/mark_seen.php",THREADLIST_INFO:"/ajax/mercury/threadlist_info.php",MARK_SPAM:"/ajax/mercury/mark_spam.php",UNMARK_SPAM:"/ajax/mercury/unmark_spam.php",UNREAD_THREADS:"/ajax/mercury/unread_threads.php",CHANGE_PINNED_STATUS:"/ajax/mercury/change_pinned_status.php",CHANGE_ARCHIVED_STATUS:"/ajax/mercury/change_archived_status.php",CHANGE_PAGE_FOLLOW_UP_STATUS:"/ajax/mercury/change_page_follow_up_status.php",DELETE_THREAD:"/ajax/mercury/delete_thread.php",DELETE_MESSAGES:"/ajax/mercury/delete_messages.php",DELIVERY_RECEIPTS:"/ajax/mercury/delivery_receipts.php",MOVE_THREAD:"/ajax/mercury/move_thread.php",CHANGE_MUTE_THREAD:"/ajax/mercury/change_mute_thread.php"}}),null);
__d("areJSONRepresentationsEqual",[],(function(a,b,c,d,e,f){function a(a,b){return JSON.stringify(a)==JSON.stringify(b)}e.exports=a}),null);
__d("MercuryServerDispatcher",["AsyncRequest","AsyncResponse","BanzaiLogger","Bootloader","ChatReliabilityInstrumentation","CurrentUser","FBIDCheck","LogHistory","MercuryServerURIs","MessagingTag","MessengerWebGraphQLTypedLogger","areJSONRepresentationsEqual","debounceAcrossTransitions","getByPath","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g,h={},i=b("LogHistory").getInstance("mercury_server_dispatcher"),j=50,k=[],l=!1,m={IMMEDIATE:"immediate",IDEMPOTENT:"idempotent",BATCH_SUCCESSIVE:"batch-successive",BATCH_SUCCESSIVE_UNIQUE:"batch-successive-unique",BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:"batch-successive-piggyback-retry",BATCH_DEFERRED_MULTI:"batch-deferred-multi",BATCH_CONDITIONAL:"batch-conditional",DEFAULT_ENDPOINT_ID:"mercuryServerDispatcherDefaultEndpointID",registerEndpoints:function(a){for(var c in a){var d=a[c],e=d.request_user_id||b("CurrentUser").getID(),f=d.endpoint_id||m.DEFAULT_ENDPOINT_ID;h[c]||(h[c]={});h[c][e]||(h[c][e]={});h[c][e][f]=new n(c,d)}},trySend:function(a,c,d,e,f){e=e||b("CurrentUser").getID(),f=f||m.DEFAULT_ENDPOINT_ID,h[a][e][f].trySend(c,d)},getRequestErrors:function(){return k}};function n(a,c){var d=c.mode||m.IMMEDIATE;switch(d){case m.IMMEDIATE:case m.IDEMPOTENT:case m.BATCH_SUCCESSIVE:case m.BATCH_SUCCESSIVE_UNIQUE:case m.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:case m.BATCH_DEFERRED_MULTI:case m.BATCH_CONDITIONAL:break;default:throw new Error("Invalid MercuryServerDispatcher mode "+d)}this._endpoint=a;this._mode=d;this._customHeader=c.customHeader;this._requestUserID=c.request_user_id;this._combineData=c.batch_function;this._combineDataIf=c.batch_if;this._batches=[];this._handler=c.handler;this._errorHandler=c.error_handler;this._transportErrorHandler=c.transport_error_handler||c.error_handler;this._connectionRetries=c.connection_retries||0;this._timeoutHandler=c.timeout_handler;this._timeout=c.timeout;this._serverDialogCancelHandler=c.server_dialog_cancel_handler||c.error_handler;this._deferredSend=b("debounceAcrossTransitions")(this._batchSend,0,this)}Object.assign(n.prototype,{_inFlight:0,_handler:null,_errorHandler:null,_transportErrorHandler:null,_timeoutHandler:null,_timeout:null,_serverDialogCancelHandler:null,_combineData:null,trySend:function(a,b){if(l)return;a===void 0&&(a=null);b=b||this._mode;if(b==m.IMMEDIATE)this._send(a);else if(b==m.IDEMPOTENT)this._inFlight||this._send(a);else if(b==m.BATCH_SUCCESSIVE||b==m.BATCH_SUCCESSIVE_UNIQUE)!this._inFlight?this._send(a):this._batchData(a);else if(b==m.BATCH_CONDITIONAL){var c=this._batches[0]&&this._batches[0].getData();this._inFlight&&(this._combineDataIf(this._pendingRequestData,a)||this._combineDataIf(c,a))?this._batchData(a):this._send(a)}else b==m.BATCH_DEFERRED_MULTI?(this._batchData(a),this._deferredSend()):b==m.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR&&(this._batchData(a),this._inFlight||this._batchSend())},_send:function(a){var c=this;this._inFlight++;this._pendingRequestData=babelHelpers["extends"]({},a);this._requestUserID!=b("CurrentUser").getID()&&(a.request_user_id=this._requestUserID);i.log("send",JSON.stringify({endpoint:this._endpoint,inflight_count:this._inFlight}));var d=(g||(g=b("performanceAbsoluteNow")))(),e=new(b("AsyncRequest"))(this._endpoint).setData(a).setOption("retries",this._connectionRetries).setAllowCrossPageTransition(!0);this._customHeader&&e.setRequestHeader(this._customHeader.name,this._customHeader.value);if(this._endpoint===b("MercuryServerURIs").THREADLIST_INFO){b("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs","MercuryJewelBootloadModules"],function(f,g){var h=a.request_user_id||b("CurrentUser").getID(),d=a.request_user_id&&!b("FBIDCheck").isUser_deprecated(a.request_user_id);g=(g={},g[b("MessagingTag").INBOX]="INBOX",g[b("MessagingTag").OTHER]="OTHER",g[b("MessagingTag").ACTION_ARCHIVED]="ARCHIVED",g[b("MessagingTag").SPAM]="SPAM",g[b("MessagingTag").PENDING]="PENDING",g[b("MessagingTag").PAGE_BACKGROUND]="PAGE_BACKGROUND",g);var i=[],j=Object.keys(g);for(var k=0;k<j.length;k++){var l=j[k];if(Object.prototype.hasOwnProperty.call(a,l)){var m=a[l];i.push({limit:m.before?m.limit+1:m.limit,folder:l,tags:m.filter?[g[l],m.filter]:[g[l]],timestamp:m.before,filter:m.filter,includeDeliveryReceipts:!0,includeSeqID:!1})}}l=function(){f.fetchAll(h,i,d,"fetch_threadlist").done(function(a){a=new(b("AsyncResponse"))(e,babelHelpers["extends"]({},a,{payload_source:"server_fetch_threadlist_info"}));c._handleResponse(a)},function(a){c._handleGraphQLError("threadlist_failure",i,a,e)})};l()},"MercuryServerDispatcher");return}if(this._endpoint===b("MercuryServerURIs").THREAD_INFO){var f,h=(f=b("getByPath"))(a,["threads","user_ids"],[]),j=f(a,["threads","thread_fbids"],[]),k=f(a,["messages","user_ids"],{}),l=f(a,["messages","thread_fbids"],{}),m=a.request_user_id&&!b("FBIDCheck").isUser_deprecated(a.request_user_id);b("Bootloader").loadModules(["MessengerGraphQLThreadFetcher.bs"],function(d){var f=a.request_user_id||b("CurrentUser").getID(),g=Object.keys(k),i=g.map(function(a){var b=k[a].limit,c=k[a].timestamp;return{id:a,limit:c?b+1:b,loadReadReceipts:!0,loadDeliveryReceipts:!0,timestamp:c,isCanonical:!0}}),n=new Set(g);h.forEach(function(a){if(n.has(a))return;i.push({id:a,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:!0})});g=Object.keys(l);var o=g.map(function(a){var b=l[a].limit,c=l[a].timestamp;return{id:a,limit:c?b+1:b,loadReadReceipts:!0,loadDeliveryReceipts:!0,timestamp:c,isCanonical:!1}}),p=new Set(g);j.forEach(function(a){if(p.has(a))return;o.push({id:a,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:!1})});var q=[].concat(i,o);q.forEach(function(a){a.limit>21&&b("ChatReliabilityInstrumentation").logFETCHING_MANY_MESSAGES(JSON.stringify(a))});d.fetchAll(f,q,m).done(function(a){a=a.slice(0);if(a.length>0){var d={};a.forEach(function(a){return Object.assign(d,a.roger)});var f=[];a.forEach(function(a){return f.push.apply(f,a.delivery_receipts)});var g=[];a.forEach(function(a){return g=g.concat(a.actions)});g=g.filter(Boolean);a={actions:g,threads:a.map(function(a){return a.thread}).filter(Boolean),end_of_history:a.map(function(a){return a.end_of_history}).filter(Boolean),roger:d,delivery_receipts:f,payload_source:"server_fetch_thread_info"};a=new(b("AsyncResponse"))(e,a);c._handleResponse(a)}else c._handleResponse(new(b("AsyncResponse"))(e,{}))},function(a){c._handleGraphQLError("thread_failure",q,a,e)})},"MercuryServerDispatcher");return}e.setHandler(function(a){b("BanzaiLogger").log("ChatPerfLoggerConfig",{event:"async_request",duration:(g||(g=b("performanceAbsoluteNow")))()-d,endpoint:c._endpoint}),c._handleResponse(a)}).setErrorHandler(this._handleError.bind(this)).setTransportErrorHandler(this._handleTransportError.bind(this)).setServerDialogCancelHandler(this._handleServerDialogCancel.bind(this));this._timeout&&this._timeoutHandler&&e.setTimeoutHandler(this._timeout,this._handleTimeout.bind(this));e.send()},_handleGraphQLError:function(a,c,d,e){var f=null,g=e.getData().retry_count;typeof d.toString==="function"&&(f=d.toString());if(typeof d.getRequest!=="function"){var h=d.errors&&d.errors[0];d=new(b("AsyncResponse"))(e,d);d.errorSummary=d.errors&&d.errors.map();d.errorDescription=h?h.message:null;f=h&&h.message?h.message:f;d.silentError=h&&h.is_silent;d.transientError=h&&h.is_transient}g||new(b("MessengerWebGraphQLTypedLogger"))().setErrorMessage(f).setEvent(a).setQueryParams(JSON.stringify(c)).log();this._handleError(d)},_batchData:function(a,c){if(this._mode==m.BATCH_SUCCESSIVE_UNIQUE&&this._pendingRequestData!==void 0&&b("areJSONRepresentationsEqual")(a,this._pendingRequestData))return;else{var d=this._batches.length-1;d>=0?c?this._batches[d].combineWithOlder(a,this._combineData):this._batches[d].combineWith(a,this._combineData):this._batches.push(new o(a));i.debug("batch",JSON.stringify({endpoint:this._endpoint}))}},_batchSend:function(){this._batches[0]&&(this._send(this._batches[0].getData()),this._batches.shift())},_handleResponse:function(a){this._inFlight--;i.log("response",JSON.stringify({endpoint:this._endpoint,inflight_count:this._inFlight}));var b=a.getPayload();l=b&&b.kill_chat;l&&i.log("killswitch_enabled",JSON.stringify({endpoint:this._endpoint,inflight_count:this._inFlight}));b&&b.error_payload?this._errorHandler&&this._errorHandler(a):this._handler&&this._handler(b,a.getRequest());(this._mode==m.BATCH_SUCCESSIVE||this._mode==m.BATCH_SUCCESSIVE_UNIQUE||this._mode==m.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR||this._mode==m.BATCH_CONDITIONAL)&&this._batchSend();delete this._pendingRequestData},_createErrorRecord:function(a){return a instanceof b("AsyncResponse")?{endpoint:this._endpoint,user:this._requestUserID,time:Date.now(),code:a.getError(),description:a.getErrorDescriptionString(),summary:a.getErrorSummary(),isSilent:a.isSilent,isTransient:a.isTransient(),isBlockedAction:a.isBlockedAction(),isWarning:a.getErrorIsWarning(),payload:a.getPayload()}:{endpoint:this._endpoint,user:this._requestUserID,time:Date.now(),description:a.toString()}},_postErrorHandler:function(a){this._inFlight--;i.error("error",JSON.stringify({endpoint:this._endpoint,inflight_count:this._inFlight,error:a instanceof b("AsyncResponse")?a.getError()+" "+a.getErrorDescription():a instanceof Error?a.toString():"Unknown"}));k.push(this._createErrorRecord(a));k.length>j&&(k=k.slice(-1*j));a=this._mode;a==m.BATCH_SUCCESSIVE||a==m.BATCH_SUCCESSIVE_UNIQUE||a==m.BATCH_CONDITIONAL?this._batchSend():a==m.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR&&(this._batches[0]?(this._batchData(this._pendingRequestData,!0),this._batchSend()):this._batchData(this._pendingRequestData,!0));delete this._pendingRequestData},_handleError:function(a){this._errorHandler&&this._errorHandler(a),this._postErrorHandler(a)},_handleTransportError:function(a){this._transportErrorHandler&&this._transportErrorHandler(a),this._postErrorHandler(a)},_handleTimeout:function(a){this._timeoutHandler&&this._timeoutHandler(a),this._postErrorHandler(new Error("Endpoint Timeout"))},_handleServerDialogCancel:function(a){this._serverDialogCancelHandler&&this._serverDialogCancelHandler(a),this._postErrorHandler(a)}});function o(a){this._data=a,this._size=1}Object.assign(o.prototype,{getData:function(){return this._data},getSize:function(){return this._size},combineWith:function(a,b){this._data=b(this._data,a),this._size++},combineWithOlder:function(a,b){this._data=b(a,this._data),this._size++}});e.exports=m}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function(a,b,c,d,e,f){a=function(a,b,c,d,e,f){"use strict";this.success_handler=a,this.error_handler=b,this.transport_error_handler=c,this.timeout_handler=d,this.timeout=e,this.connection_retries=f};e.exports=a}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["errorCode","invariant","Promise","Arbiter","AsyncResponse","AvailableListConstants","BanzaiODS","Bootloader","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","Env","EventProfiler","LogHistory","MercuryAPIArgsSource","MercuryAssert","MercuryDispatcher","MercuryIDs","MercuryMessageClientState","MercuryMessageIDs.bs","MercurySendErrorLogger","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueOptions","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySyncDeltaHolder","MercuryTagHelper","MercuryThreadIDMap","MessagingConfig","MessagingTag","MessengerEnvironment","MessengerWebStgTypedLoggerLite","PresenceStatus","ScriptPath","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("MessengerWebStgTypedLoggerLite").log,k=b("LogHistory").getInstance("mercury_server"),l=b("MercuryAPIArgsSource").MERCURY,m=30*1e3,n=!0;function o(a){return a.getError()?"_"+a.getError():""}function p(a,c){var d=babelHelpers["extends"]({},a),e;if(c.threads){d.threads||(d.threads={});for(e in c.threads)d.threads[e]=Object.keys(b("createObjectFrom")((d.threads[e]||[]).concat(c.threads[e]||[])))}if(c.messages){d.messages||(d.messages={});for(e in c.messages){d.messages[e]||(d.messages[e]={});for(var f in c.messages[e])d.messages[e][f]?d.messages[e][f]=t(d.messages[e][f],c.messages[e][f]):d.messages[e][f]=c.messages[e][f]}}d.client=a.client||c.client;return d}function q(a,c){var d=Object.assign(b("createObjectFrom")(a.folders,!0),b("createObjectFrom")(c.folders,!0));a=a.client||c.client;return{folders:Object.keys(d),client:a}}function r(a,b){for(var c in b)if(a[c]&&typeof a[c]==="object")a[c]=t(a[c],b[c]);else if(b[c]&&typeof b[c]==="object"){var d={};Object.assign(d,b[c]);a[c]=d}return a}function s(a,b){return b}function t(a,b){var c=Math.max(a.limit,b.limit),d;!a.timestamp?d=b.timestamp:!b.timestamp?d=a.timestamp:d=Math.min(a.timestamp,b.timestamp);return{limit:c,timestamp:d}}function u(a,b){var c=a.client||b.client;c={ids:{},client:c};Object.assign(c.ids,a.ids,b.ids);return c}function v(a,c){var d={},e,f=a.client||c.client;delete a.client;delete c.client;for(e in a)Object.assign(d,b("createObjectFrom")(a[e],e));for(e in c)Object.assign(d,b("createObjectFrom")(c[e],e));a={client:f};for(var g in d)e=d[g],a[e]||(a[e]=[]),a[e].push(g);return a}function w(a,c){var d=a.client||c.client;a=b("createObjectFrom")(a.ids,!0);c=b("createObjectFrom")(c.ids,!0);a=Object.assign(a,c);return{ids:Object.keys(a),client:d}}a=function(){function a(a){var c=this;this.$1=a;this.$2=0;this.$3={};this.$4={};this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1);this.$5=b("MercuryDispatcher").getForFBID(this.$1);this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.$7=new(b("MercuryServerSendMessageQueueOptions"))(function(a,b){c.__handleUpdate(a,b)},function(a){return c.$9(a)},function(a){c.$10(a)},function(a){return c.$11(a)},b("MercuryServerRequestsConfig").sendMessageTimeout,b("MessagingConfig").SEND_CONNECTION_RETRIES);this.$8=b("MercurySyncDeltaHolder").getForFBID(this.$1);this.$12()}a.getForFBID=function(a){return x.getForFBID(a)};a.get=function(){return x.get()};var c=a.prototype;c.fetchThreadlistInfo=function(a,c,d,e,f,g){d===void 0&&(d=b("MessagingTag").INBOX);f===void 0&&(f=l);n&&(n=!1,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstMercuryThreadFetch"));var h=e?b("MercuryServerDispatcher").IMMEDIATE:null;f={client:f};f[d]={offset:a,limit:c,filter:e,before:g};this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,f,h)};c.fetchUnseenThreadIDs=function(a,c){a===void 0&&b("MessagingTag").INBOX,c===void 0&&(c=l),this.__sendRequest(b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString(),{})};c.fetchUnreadThreadIDs=function(a,c){c===void 0&&(c=l),this.__sendRequest(b("MercuryServerURIs").UNREAD_THREADS,{folders:[a],client:c})};c.fetchThreadData=function(a,c){var d=this;c===void 0&&(c=l);b("MercuryAssert").allThreadID(a);var e={threads:{},client:c},f=[],g=[];a.forEach(function(a){if(d.$3[a])return;d.$3[a]=!0;var c=d.__threadIDMap.getServerIDFromClientIDNow(a);a=b("MercuryIDs").tokenize(a);if(a.type=="user")f.push(a.value),e.threads.user_ids=f;else if(a.type=="thread")c?g.push(c):g.push(a.value),e.threads.thread_fbids=g;else if(a.type=="root")c&&(g.push(c),e.threads.thread_fbids=g);else if(a.type!="pending")throw new Error("Unknown thread type",a)});e.threads.user_ids&&e.threads.user_ids.forEach(function(a){a||(k.error("empty user id",JSON.stringify(f)),b("ChatReliabilityInstrumentation").logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(f)))});e.threads.thread_fbids&&e.threads.thread_fbids.forEach(function(c){c||b("ChatReliabilityInstrumentation").logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(a))});for(var h in e.threads){this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,e);break}};c.ensureThreadIsFetched=function(a,c){c===void 0&&(c=l);if(!this.__threadIDMap.getClientIDFromServerIDNow(a)&&!this.$3[a]){if(!a){b("ChatReliabilityInstrumentation").logERROR("Ensure invalid FBID sent to thread_info.php");k.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$3[a]=!0;this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,{threads:{thread_fbids:[a]},client:c})}};c.fetchThreadMessages=function(a,c,d,e,f,g){var h=this;g===void 0&&(g=l);b("MercuryAssert").isThreadID(a);var i;c=b("MercuryIDs").tokenize(a);var j=this.__threadIDMap.getServerIDFromClientIDNow(a),k=!1;if(j)j=j,i=c.type=="user"?"user_ids":"thread_fbids";else{j=c.value;switch(c.type){case"user":i="user_ids";k=!0;break;case"thread":i="thread_fbids";break}}var m={messages:{},threads:{},client:g};i?(m.messages[i]={},m.messages[i][j]={timestamp:e,limit:d},k&&(m.threads[i]=[j]),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)):this.__threadIDMap.getServerIDFromClientID(a,function(a){m.messages.thread_fbids={},m.messages.thread_fbids[a]={timestamp:e,limit:d},h.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)})};c.handleThreadInfoError=function(a,c){var d=a.getData();c=[];if(d.messages){for(var e in d.messages.thread_fbids){a=this.__threadIDMap.getClientIDFromServerIDNow(e);a&&c.push(this.$13(a))}for(var f in d.messages.user_ids)c.push(this.$13("user:"+f));for(var g in d.messages.group_ids)c.push(this.$13("group:"+g))}c.length&&this.$5.handleUpdate({actions:c,from_client:!0,payload_source:"client_channel_message"});if(d.threads&&(d.threads.user_ids||d.threads.thread_fbids||d.threads.group_ids||d.threads.thread_ids)){a=5;c=!0;d.retry_count||(d.retry_count=0,d.messages&&delete d.messages);if(c){c=Math.pow(2,Math.min(d.retry_count,a))*1e3;b("setTimeoutAcrossTransitions")(function(){k.log("retry_thread","{}"),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d)}.bind(this),c);d.retry_count++}}};c.markFolderAsRead=function(a){this.__sendRequest(b("MercuryServerURIs").MARK_FOLDER_READ,{folder:a});a=[{action_type:"mga-type:mark-all-read",folder:a}];this.$5.handleUpdate({global_actions:a,from_client:!0,payload_source:"client_change_read_status"})};c.changeThreadReadStatus=function(a,c,d,e,f,g){var h=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(i){var j;j={ids:(j={},j[i]=c,j),source:d,watermarkTimestamp:e,shouldSendReadReceipt:f,commerce_last_message_type:g};k.log("initiate_change_read_status",JSON.stringify({thread_id:a,thread_fbid:i,mark_as_read:c,watermarkTimestamp:e}));h.__sendRequest(b("MercuryServerURIs").CHANGE_READ_STATUS,j)})};c.changeThreadArchivedStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS,f)})};c.changeThreadPinnedStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_PINNED_STATUS,f)})};c.changeThreadPageFollowUpStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS,f)})};c.changeThreadFolder=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={};e[c]=[a];d.__sendRequest(b("MercuryServerURIs").MOVE_THREAD,e)})};c.changeMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").CHANGE_MUTE_THREAD,{thread_fbid:a,mute_settings:c,payload_source:l})})};c.changeMentionsMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,mentions_mute_mode:c,payload_source:l})})};c.changeReactionsMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,reactions_mute_mode:c,payload_source:l})})};c.markThreadSpam=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").MARK_SPAM,{id:a,source:c})})};c.unmarkThreadSpam=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").UNMARK_SPAM,{id:a,source:c})})};c.deleteThread=function(a,b){this.deleteThreads([a],b)};c.deleteThreads=function(a,c){var d=this;b("promiseDone")(b("Promise").all(a.map(function(a){b("MercuryAssert").isThreadID(a);return new(b("Promise"))(function(b){return d.__threadIDMap.getServerIDFromClientID(a,b)})})).then(function(a){d.__sendRequest(b("MercuryServerURIs").DELETE_THREAD,{ids:a,source:c})}))};c.deleteMessages=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(c||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_MESSAGES,{message_ids:a})}.bind(this))};c.sendDeliveryReceipts=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(a||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELIVERY_RECEIPTS,{message_ids:a,thread_ids:c})}.bind(this))};c.sendNewMessage=function(a,c){var d=this;c===void 0&&(c=l);a.offline_threading_id||b("BanzaiODS").bumpEntityKey(3303,"chat.web","missing_otid_on_send");if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var e=b("MercuryIDs").tokenize(a.thread_id),f=e.type,g=babelHelpers["extends"]({},a);g.thread_id=null;f=="user"?(g.other_user_fbid=e.value,this.$14(g,c)):f=="thread"?(g.thread_fbid=e.value,this.$14(g,c)):f=="root"&&e.value==g.offline_threading_id?(g.client_thread_id=a.thread_id,this.$14(g,c)):(b("MercuryIDs").isLocalThread(a.thread_id)||h(0,5587,a.thread_id),this.__threadIDMap.getServerIDFromClientID(a.thread_id,function(a){g.thread_fbid=a,d.$14(g,c)}));this.$15("send_msg",a);b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerStart(c.SEND_MESSAGE,a.offline_threading_id)},"MercuryServerRequests")};c.$15=function(a,c){try{var d=(i||(i=b("Env"))).isCQuick?"Comet Inbox":b("MessengerEnvironment").messengerdotcom?"messenger_dot_com":b("MessengerEnvironment").facebookdotcom?"Facebook Messenger (other)":"Other",e=b("MercuryTagHelper").get(c.tags||[],"entrypoint"),f=b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id),g=b("PresenceStatus").get(f)===b("AvailableListConstants").ACTIVE;j({attachment_infos:void 0,client_timestamp:Date.now(),entry_point:e,event_name:a,first_attachment_type:void 0,"interface":d,mid:c.message_id,offline_threading_id:c.offline_threading_id,other_user_fbid:b("MercuryIDs").isGroupChat(c.thread_id)?void 0:f,thread_fbid:b("MercuryIDs").isGroupChat(c.thread_id)?f:void 0,extra_data:{pathName:b("ScriptPath").getScriptPath(),isActiveNow:g}})}catch(a){b("BanzaiODS").bumpEntityKey(3303,"chat.web","logging_error")}};c.$14=function(a,c){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this.$4[a.message_id]=Date.now(),b("MercuryServerSendMessageQueueRouter").getForFBID(this.$1).enqueue(a.other_user_fbid||a.thread_fbid||a.client_thread_id,this.$7,c,a)};c.__getSendMessageQueueOptions=function(){return this.$7};c.markSeen=function(){var a=this.$2;this.__sendRequest(b("MercuryServerURIs").MARK_SEEN,{seen_timestamp:a})};c.$16=function(a,c,d,e){a=a.getData();a=a.message_batch||[a];k.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:d,request_error_status:c,error_data:e,message_list:a}));b("ChatReliabilityInstrumentation").logERROR("send_message_fail");var f=a.map(function(a){a={action_type:"ma-type:send-message",other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,client_message_id:a.message_id,message_id:a.message_id,client_thread_id:a.client_thread_id,status:c,error_data:e};return a});f.forEach(function(a){a.action_type==="ma-type:send-message"&&a.status===10&&this.__logMercurySendError(a)},this);d={actions:f,payload_source:"client_handle_error"};b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){f.map(function(c){a.markerEnd(b.SEND_MESSAGE,"FAIL",c.client_message_id)})},"MercuryServerRequests");this.$6.handleUpdate(d)};c.handleSendMessageError=function(a){var c=a.getPayload(),d=null,e=null;c&&c.error_payload?(d=3,e="send_error"):(d=10,e="request_error"+o(a));c=a.error;c===1404102?b("AsyncResponse").verboseErrorHandler(a):(c===1545052||c===1409009||c===1409008||c===1409007||c===1409006||c===1545083||c===1545084)&&b("AsyncResponse").defaultErrorHandler(a);c=/<.*>/.test(a.getErrorDescription())?a.getErrorSummary():a.getErrorDescription();this.$16(a.getRequest(),d,e,{type:1,code:a.getError(),description:c,is_transient:a.isTransient()})};c.handleSendMessageTransportError=function(a){this.$16(a.getRequest(),10,"transport_error"+o(a),{type:2,code:a.getError(),is_transient:!0})};c.handleSendMessageTimeout=function(a){this.$16(a,10,"transport_timeout",{type:3,is_transient:!0})};c.getLastActionTimestamp=function(){return this.$2};c.__logMercurySendError=function(a){b("MercurySendErrorLogger").log(a)};c.updateLastActionTimestamp=function(a){var b=Date.now()-1e3*60*60*24;a&&a>b&&(this.$2=Math.max(this.$2,a))};c.markThreadFetched=function(a){delete this.$3[a]};c.$13=function(a){return{action_type:"ma-type:log-message",thread_id:a,message_id:a,timestamp:Date.now(),is_unread:!1,source:"source:unknown",log_message_body:"",log_message_type:"log:error-msg",log_message_data:{}}};c.__getForAsyncRequest=function(c){c=c.getData();c=c.request_user_id?c.request_user_id:b("CurrentUser").getID();return a.getForFBID(c)};c.__handleUpdate=function(a,c){a.payload_source==="server_send_message"&&b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){var d=a.actions&&a.actions[0]&&a.actions[0].client_message_id;d&&b.markerEnd(c.SEND_MESSAGE,"SUCCESS",d)},"MercuryServerRequests"),this.__getForAsyncRequest(c).$6.handleUpdate(a)};c.$17=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a)};c.$18=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a,!0)};c.$9=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageError(a)};c.$10=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageTransportError(a)};c.$11=function(a){var b=this.__getForAsyncRequest(a);b.handleSendMessageTimeout(a)};c.$12=function(){var a=this,c,d=null;b("MercuryServerRequestsConfig").msgrRegion&&(d={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=(c={},c[b("MercuryServerURIs").THREAD_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,customHeader:d,batch_function:p,handler:function(b,c){return a.__handleUpdate(b,c)},error_handler:function(b){return a.$17(b.getRequest())},timeout_handler:function(b){return a.$18(b)},timeout:m},c[b("MercuryServerURIs").MARK_FOLDER_READ]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_READ_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){a.__handleUpdate(b,c);c=(b.threads||[]).map(function(a){return a&&a.thread_id});k.log("response_change_read_status",JSON.stringify({threads:c}))}},c[b("MercuryServerURIs").MARK_SEEN]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:s,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").THREADLIST_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:d,batch_function:r,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").MARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").UNMARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").UNREAD_THREADS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:d,batch_function:q,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:u,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_PINNED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:u,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:u,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELETE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:w,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELETE_MESSAGES]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELIVERY_RECEIPTS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").MOVE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:v,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_MUTE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c);var e=b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};e=b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};e=b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};b("MercuryServerDispatcher").registerEndpoints(c)};c.__sendRequest=function(a,c,d){if(this.$8)switch(a){case b("MercuryServerURIs").THREADLIST_INFO:case b("MercuryServerURIs").THREAD_INFO:c.cachius_min_seq_id=this.$8.getLastSeqID();break;default:break}b("MercuryServerDispatcher").trySend(a,c,d,this.$1)};c.__getFBID=function(){return this.$1};return a}();var x=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=new(b("KeyedCallbackManager"))()}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.setServerIDToClientID=function(a,b){var c=this.getClientIDFromServerIDNow(a);if(c)return;this.forceSetServerIDToClientID(a,b)};c.forceSetServerIDToClientID=function(a,b){this.$2.setResource(a,b),this.$3.setResource(b,a)};c.setDeprecatedServerIDToClientID=function(a,b){a&&this.$2.setResource(a,b)};c.getClientIDFromServerIDNow=function(a){return this.$2.getResource(a)};c.getClientIDFromServerID=function(a,b){var c=this;this.$2.executeOrEnqueue(a,b);d(["MercuryServerRequests"],function(b){b.getForFBID(c.$1).ensureThreadIsFetched(a)})};c.getServerIDFromClientIDNow=function(a){return this.$3.getResource(a)};c.getServerIDFromClientID=function(a,c){var e=this;b("MercuryAssert").isThreadID(a);var f=this.$3.executeOrEnqueue(a,c);d(["MercuryServerRequests"],function(c){var d=e.$3.getUnavailableResources(f),g=b("MercuryIDs").tokenize(a);d.length&&g.type!="root"&&c.getForFBID(e.$1).fetchThreadData(d)})};c.hasClientIDForServerID=function(a){return!!this.getClientIDFromServerIDNow(a)};c.convertThreadIDIfAvailable=function(a){var b=this.getClientIDFromServerIDNow(a);return b||a};c.canLinkExternally=function(a){b("MercuryAssert").isThreadID(a);var c=b("MercuryIDs").tokenize(a);return c.type=="user"||!!this.getServerIDFromClientIDNow(a)};c.reset=function(){this.$3.reset(),this.$2.reset()};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryLoggingHelper",[],(function(a,b,c,d,e,f){a={obfuscateThread:function(a){var b=babelHelpers["extends"]({},a);a&&a.snippet&&a.snippet.length>0&&(b.snippet="*** [redacted] ***");return b},obfuscateMessage:function(a){var b=babelHelpers["extends"]({},a);a&&a.body&&a.body.length>0&&(b.body="*** [redacted] ***");return b}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function(a,b,c,d,e,f){var g=9999;a={create:function(a){a=new(b("AsyncRequest"))(this.endpoint_uri).setData({message_batch:[a],client:this.client});var c=new(b("AsyncResponse"))(a,{});Object.assign(c,{error:g,silentError:!1,transientError:!0,request:a});return c}};e.exports=a}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{})}),null);
__d("MercuryServerSendMessageQueue",["fbt","BanzaiODS","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryIDs","MercuryLoggingHelper","MercuryServerDispatcher","MercuryServerRequestsConfig","MercuryServerSendMessageQueueSimulatedError","MercurySyncDeltaHandler","MessengerAttachmentTransformerForSend.bs","MessengerObjectAssociationType","MessengerState.bs","Run","XMessagingSendController"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LogHistory").getInstance("mercury_server_send_message_queue");a=function(){function a(a,c,d,e){var f=this;this.pending_message=null;this.queue=[];this.$6=function(){return f.queue.length||f.pending_message?g._("You haven't sent your message yet. Do you want to leave without sending?"):void 0};this.sender_id=a;this.queue_id=c;this.$2=d.success_handler;this.$1=d.error_handler;this.$4=d.transport_error_handler;this.$3=d.timeout_handler;this.$5=b("MercurySyncDeltaHandler").getForFBID(this.sender_id);this.client=e;b("Run").onBeforeUnload(this.$6,!1);a=null;b("MercuryServerRequestsConfig").msgrRegion&&(a={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=this.__getSendURI();c=(e={},e[c]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:a,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:d.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:d.connection_retries},e);b("MercuryServerDispatcher").registerEndpoints(c)}var c=a.prototype;c.__getSendURI=function(){return b("XMessagingSendController").getURIBuilder().getURI().toString()};c.__preparePayload=function(a){var c;c=(c=a)!=null?(c=c.replied_to_message)!=null?(c=c.message)!=null?c.message_id:c:c:c;var d=null,e=a.client_thread_id;if(b("MercuryIDs").isLocalThread(e)){e=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),e);if(e&&e.message_count===1&&e.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT){d=(e=e)!=null?(e=e.associated_object)!=null?e.id:e:e}}e=c?b("MessengerState.bs").getServerMessageID(b("CurrentUser").getID(),c):null;return{client:this.client,action_type:a.action_type,app_id:a.app_id,audio_ids:a.audio_ids,body:a.body,client_thread_id:a.client_thread_id,ephemeral_ttl_mode:a.ephemeral_ttl_mode,file_ids:a.file_ids,gif_ids:a.gif_ids,has_attachment:a.has_attachment,image_ids:a.image_ids,location_attachment:a.location_attachment,lightweight_action_attachment:a.lightweight_action_attachment,log_message_data:a.log_message_data,log_message_type:a.log_message_type,message_id:a.message_id,message_source_data:a.message_source_data,montage_reply_data:a.montage_reply_data,offline_threading_id:a.offline_threading_id,other_user_fbid:a.other_user_fbid,photo_fbids:a.photo_fbids,shareable_attachment:a.shareable_attachment,signature_id:a.signatureID,source:a.source,specific_to_list:a.specific_to_list,sticker_id:a.sticker_id,tags:a.tags,thread_fbid:a.thread_fbid,timestamp:a.timestamp,ui_push_phase:a.ui_push_phase,video_ids:a.video_ids,platform_xmd:a.platform_xmd,profile_xmd:a.profile_xmd,replied_to_message_id:e,work_synced_group_id:d,to_list_md5:a.to_list_md5,mib_direct_message_data:a.mib_direct_message_data}};c.enqueue=function(a){this.queue.push(a),this.$7()};c.$7=function(){if(this.pending_message||!this.queue.length){this.pending_message&&this.$8();return}this.pending_message=this.queue.shift();var a=this.__preparePayload(this.pending_message);for(var c in a)(a[c]===void 0||a[c]===null)&&delete a[c];if(!a.action_type){var d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller");h.debug("missing_action_type",JSON.stringify(d))}if(!a.message_id){d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller"+JSON.stringify(d));h.debug("missing_message_id",JSON.stringify(d))}this.$9();b("MercuryServerDispatcher").trySend(this.__getSendURI(),a,null,this.sender_id,this.queue_id)};c.$10=function(){while(this.queue.length)this.$11(this.queue.shift())};c.$11=function(a){this.$1(b("MercuryServerSendMessageQueueSimulatedError").create(a)),h.error("mark_as_failed",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:b("MercuryLoggingHelper").obfuscateMessage(a)}))};c.handleSuccess=function(a,c){var d=this;this.pending_message=null;var e=(a.actions||[]).map(function(a){var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.length>0){var e=b("MessengerAttachmentTransformerForSend.bs").transform(d.sender_id,a.graphql_payload,a.message_id,a.for_page);c=Object.assign(c,{attachments:e})}e=(e=a)!=null?(e=e.log_message_data)!=null?e.graphql_image:e:e;if(e){e=b("MessengerAttachmentTransformerForSend.bs").transform(d.sender_id,[e],a.message_id,a.for_page);c=Object.assign(c,{log_message_data:{image:e[0]}})}return c});a.actions=e;this.resumeAfterSuccess(a,c)};c.resumeAfterSuccess=function(a,b){this.$2(a,b),this.$12(),this.$7()};c.handleError=function(a){this.pending_message=null,this.$12(),this.$1(a),this.$10()};c.handleTransportError=function(a){this.pending_message=null,this.$12(),this.$4(a),this.$10()};c.handleTimeout=function(a){this.pending_message=null,this.$12(),this.$3(a),this.$10()};c.$9=function(){this.$5.pause()};c.$12=function(){this.$5.resume()};c.$8=function(){h.debug("maybe_send_next_pending_message",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:b("MercuryLoggingHelper").obfuscateMessage(this.pending_message),queue:this.queue.map(function(a){return b("MercuryLoggingHelper").obfuscateMessage(a)})}));var a="send_queue.delayed.queue_length."+this.queue.length.toString();b("BanzaiODS").bumpEntityKey(3303,"chat.web",a)};return a}();e.exports=a}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function(a,b,c,d,e,f){a={_getInstances:function(){this._instances||(this._instances={});return this._instances},get:function(){return this.getForFBID(b("CurrentUser").getID())},getForFBID:function(a){var b=this._getInstances();b[a]||(b[a]=new this(a));return b[a]}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","MercuryServerSendMessageQueue","MercurySingletonMixin"],(function(a,b,c,d,e,f){var g=b("LogHistory").getInstance("mercury_server_send_message_queue_router"),h="chat.web.send_queue_router";b("BanzaiODS").setEntitySample(h,.1);a=function(){"use strict";function a(a){this.queues=new Map(),this.fbid=a}var c=a.prototype;c.enqueue=function(a,c,d,e){var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f),g.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:a})),b("BanzaiODS").bumpEntityKey(3303,h,"new_queue"));f.enqueue(e)};return a}();Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySyncDataFetcherImpl",["invariant","Promise","AsyncResponse","Bootloader","CurrentUser","FBIDCheck","MercuryConfig","MercuryThreadlistConstants","MessagingConfig","QE2Logger","UserActivity","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j=null,k={limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,filter:null,includeDeliveryReceipts:!1,includeSeqID:!0},l={};function a(a){return new(b("Promise"))(function(b,c){m(a,b,c,0)})}function m(a,c,d,e){if(!b("CurrentUser").isLoggedInNow()||e>b("MessagingConfig").syncFetchRetries){b("clearTimeout")(l[a]);d();return}var f=e===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,e);b("UserActivity").isOnTab()||(b("QE2Logger").logExposureForUser("mercury_dff_fetch_delay",a),f+=b("MercuryConfig").DFFD*Math.random());b("clearTimeout")(l[a]);l[a]=b("setTimeoutAcrossTransitions")(function(){var f=!1,n=function(h){if(f)return;if(h.errors&&h.errors.length>0){var k=h.errors[0].message;if(k){var l=function(){j&&i||g(0,3650),new j().setErrorMessage(k).setEvent(i.DFF_FAILURE).setQueryParams(a).log()};j&&i?l():b("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(a,b){j=a,i=b,l()},"MercurySyncDataFetcherImpl")}}f=!0;m(a,c,d,e+1)},o=function(){if(!b("CurrentUser").isLoggedInNow())return;h||g(0,3651);h.fetchAll(a,[k],!b("FBIDCheck").isUser_deprecated(a),"dff").then(function(d){f=!0,c(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},d,{payload_source:"server_invalidate_global_state"}))),b("clearTimeout")(l[a])},n)};h?o():b("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(a){h=a,o()},"MercurySyncDataFetcherImpl")},f)}function c(a,c,d){return new(b("Promise"))(function(b,e){n(a,c,d,b,e,0)})}function n(a,c,d,e,f,g){if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;n(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(f){return f.fetch_(a,{id:c,limit:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a,{payload_source:"server_invalidate_thread_state"})))},i)},"MercurySyncDataFetcherImpl")},h)}function d(a,c,d){return new(b("Promise"))(function(b,e){o(a,c,d,b,e,0)})}function o(a,c,d,e,f,g){if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;o(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(f){return f.fetch_(a,{thread_id:c,message_id:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a)))},i)},"MercurySyncDataFetcherImpl")},h)}e.exports={fetchThreadlistFromGraphQL:a,fetchThreadFromGraphQL:c,fetchMessageFromGraphQL:d}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MercurySyncDataFetcherImpl","MessagingConfig","WebGraphQLConfig","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";var g=b("LogHistory").getInstance("mercury_sync_data_fetcher");function a(){var a=0;for(var c=0;c<b("MessagingConfig").syncFetchRetries;c++){var d=c===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,c);a+=d+b("MessagingConfig").syncFetchRequestTimeoutMs}return a}var h=a();function c(a){var c=null;return new(b("Promise"))(function(d,e){var f=function(a){g.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:h})),b("clearTimeout")(c),e(a)};c=b("setTimeoutAcrossTransitions")(f,Math.max(h,b("WebGraphQLConfig").timeout*b("MessagingConfig").syncFetchRetries));b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(a),function(a){b("clearTimeout")(c),d(a)},f)})}function d(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}function f(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_message_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}e.exports={fetchThreadlistFromGraphQL:c,fetchThreadFromGraphQL:d,fetchMessageFromGraphQL:f,getMaxTimeoutMs:a}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercurySingletonProvider","MercurySyncDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1)}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.fetchInvalidateGlobalStateForGraphQL=function(){return this.$1&&this.$1!=="0"&&b("CurrentUser").isLoggedIn()?b("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$1):new(b("Promise"))(function(a,b){return b(!0)})};c.fetchInvalidateThreadState=function(a,c){var d=11,e=3;a=a||c;c=this.__threadIDMap.getClientIDFromServerIDNow(a);if(!c)return b("Promise").resolve({getPayload:function(){return{}}});e=e+b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,c).length;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$1,a,Math.max(e,d))};c.fetchInvalidateMessage=function(a,c,d){a=a||c;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$1,a,d)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncTopicType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("onAfterLoadSafe",["Run","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("TimeSlice").guard(function(){return b("Run").onAfterLoad(function(){b("requestIdleCallback")(a)})},"delayed after load",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};e.exports=a}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","Bootloader","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryDelayedDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncEventsProxy","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercurySyncTopicType","MercuryThreadIDMap","MessengerDeltaTransformer.bs","gkx","onAfterLoadSafe","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("LogHistory").getInstance("mercury_sync_delta_handler"),j="app_id:219994525426954";a=function(){a.getForFBID=function(a){return k.getForFBID(a)};a.get=function(){return k.get()};function a(a){var c=this;this.$1=a;this.$2=b("MercurySyncForcedFetchHandler").getForFBID(this.$1);this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.__delayedDispatcher=b("MercuryDelayedDispatcher").getForFBID(this.$1);this.$3=b("MercurySyncDeltaHolder").getForFBID(this.$1);this.$4=0;this.$12=b("MercuryThreadIDMap").getForFBID(this.$1);this.$5=[];this.$11=b("MercurySyncEventsProxy").getForFBID(this.$1);i.debug("constructor",JSON.stringify({fbid:this.$1}));b("Arbiter").subscribe(b("MercurySyncEventsProxy").Events.INIT,function(a,d){i.debug("initSeqID",JSON.stringify(d));a=d&&d.seqID;d=d&&d.fbid;if(!d)return;if(d!==c.$1)return;a?c.$3.updateLastSeqID(a):c.$3.updateLastSeqID(0);c.$13();b("gkx")("678667")&&b("onAfterLoadSafe")(function(){b("Bootloader").loadModules(["MessengerSyncSeqIDSanityCheck"],function(a){a.getForFBID(c.$1).init()},"MercurySyncDeltaHandler")})})}var c=a.prototype;c.$14=function(){var a=this;this.$7=b("Arbiter").subscribe(this.$11.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW),function(b,c){a.$10||a.$13()})};c.$13=function(){var a=this;i.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:this.$1}));this.$6=b("Arbiter").subscribe(this.$11.getArbiterType(b("MercurySyncEventsProxy").Events.DELTA),function(c,d){c=d&&d.obj&&d.obj.queue;if(c&&c.toString()!==a.$1)return;c=d&&d.obj&&d.obj.delta;d=d&&d.obj&&d.obj.iseq;if(!c||!d)return;a.$15(d,b("MercurySyncTopicType").DELTA);a.$16(d,c);a.$3.push(d,c);a.$17()});this.$9=b("Arbiter").subscribe(this.$11.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW_REJECT),function(b,c){b=c&&c.obj&&c.obj.queue;if(b&&b.toString()!==a.$1)return;a.$10&&a.$18()});this.$8=b("Arbiter").subscribe(this.$11.getArbiterType(b("MercurySyncEventsProxy").Events.FAKE_DFF),function(b,c){b=c&&c.obj&&c.obj.queue;if(b&&b.toString()!==a.$1)return;b=c&&c.obj&&c.obj.delta;if(!b)return;if(a.$19(b))if(a.$5.some(function(b){return a.$19(b)}))return;else a.$5.push(b);else a.$5.push(b);a.$17()});this.$10=!0};c.$19=function(a){return a["class"]===b("MercurySyncDeltaTypes").ForcedFetch&&!a.threadKey&&!a.messageId};c.$17=function(){if(this.$4>0)return;if(this.$5.length>0){var a=this.$5.shift();this.$20(this.$3.getLastSeqID(),a);this.$17()}a=this.$3.peek();if(!a)return;a=a-this.$3.getLastSeqID();if(a===1){var b=this.$3.pop();if(!b)return;var c=b.seqID;b=b.delta;this.$20(c,b);this.$17()}else a>1?this.$21():(this.$3.pop(),this.$17())};c.$20=function(a,c){c.numNoOps&&c.numNoOps>1?this.$3.updateLastSeqID(a+c.numNoOps-1):this.$3.updateLastSeqID(a),c["class"]===b("MercurySyncDeltaTypes").ForcedFetch?(i.debug("DFF",JSON.stringify(c)),c.threadKey!==void 0&&c.messageId===void 0?this.$22(a,c):c.threadKey!==void 0&&c.messageId!==void 0?this.$23(a,c):(b("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(c)),this.$24(a))):b("MessengerDeltaTransformer.bs").transform(this.$1,c)};c.$21=function(){var a=JSON.stringify({$25:this.$3.getLastSeqID(),nextSeqID:this.$3.peek()});i.warn("hole",a);var c=this.$3.peek();!c&&g(0,5132);c=c-1;b("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(a);this.$24(c)};c.$26=function(a,c,d,e){var f=this;this.$4&&g(0,5134);this.$4++;i.debug("_scheduleDataFetch:start",JSON.stringify({seqID:a}));b("promiseDone")(c(),function(b){i.debug("_scheduleDataFetch:success",JSON.stringify({seqID:a})),f.$4--,d(a,b),f.$17()},function(b){i.error("_scheduleDataFetch:failure",JSON.stringify({seqID:a})),f.$4--,e(a,b),f.$17()})};c.emergencyDFF=function(a,b){this.$24(0,a,b)};c.$24=function(a,c,d){var e=this;if(!b("CurrentUser").isLoggedInNow())return;this.$26(void 0,function(){return e.$2.processGlobalDFFForGraphQL()},function(a,d){b("gkx")("1199098")&&e.$12.reset();a=d.getPayload();e.__payloadPreprocessor.handleUpdate(a);a.sequence_id&&(i.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:a.sequence_id})),b("gkx")("678668")?e.$3.updateLastSeqIDAndClearHistory(a.sequence_id):e.$3.updateLastSeqID(a.sequence_id));b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER);c&&c(a.sequence_id)},function(f,g){i.error("_initiateGlobalDFF:failure",""),g?(e.$10&&e.$18(),d&&d()):(b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY),i.debug("_initiateGlobalDFF:retry",""),e.$24(a,c,d))})};c.$22=function(a,b){var c=this;this.$26(a,function(){return c.$2.processThreadDFF(a,b.threadKey,b.isLazy)},function(a,b){c.__payloadPreprocessor.handleUpdate(b.getPayload()),c.$3.updateLastSeqID(a)},function(){i.error("_initiateThreadDFF:failure",JSON.stringify(b));var d=babelHelpers["extends"]({},b);delete d.threadKey;c.$3.updateLastSeqID(a-1);c.$3.push(a,d)})};c.$23=function(a,b){var c=this;this.$26(a,function(){return c.$2.processMessageDFF(a,b.threadKey,b.messageId,b.isLazy)},function(a,b){b=b.getPayload();var d=b.other_user_fbid?b.other_user_fbid:b.thread_fbid;b=[babelHelpers["extends"]({},b)];var e="client_channel_message";c.__delayedDispatcher.handleUpdateWaitForThread({actions:b,payload_source:e},d);c.$3.updateLastSeqID(a)},function(){i.error("_initiateMessageDFF:failure",JSON.stringify(b));var d=babelHelpers["extends"]({},b);delete d.messageId;c.$3.updateLastSeqID(a-1);c.$3.push(a,d)})};c.$15=function(a,c){var d=a-this.$3.getLastSeqID();if(d!==1&&d!==0){if(!b("CurrentUser").isEmployee())return;new(b("MercurySyncHolesTypedLogger"))().setSeqID(a).setDifference(d).setTopicType(c).log()}};c.$16=function(a,c){switch(c["class"]){case b("MercurySyncDeltaTypes").NewMessage:var d=(h||(h=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){var e=c.messageMetadata.tags;Array.isArray(e)&&e.includes(j)&&a.markerEnd(b.SEND_MESSAGE,"SUCCESS",c.messageMetadata.offlineThreadingId,d)},"MercurySyncDeltaHandler");i.debug("message_delta",JSON.stringify({seqID:a,threadKey:c.messageMetadata.threadKey,messageId:c.messageMetadata.messageId}));break;case b("MercurySyncDeltaTypes").ReadReceipt:i.debug("read_receipt_delta",JSON.stringify({seqID:a,threadKey:c.threadKey,actionTimestampMs:c.actionTimestampMs,watermarkTimestampMs:c.watermarkTimestampMs}));break;case b("MercurySyncDeltaTypes").DeliveryReceipt:i.debug("delivery_receipt_delta",JSON.stringify({seqID:a,deliveredWatermarkTimestampMs:c.deliveredWatermarkTimestampMs,messageIds:c.messageIds}));break}};c.pause=function(){this.$4++};c.resume=function(){this.$4--,this.$17()};c.$18=function(a){a===void 0&&(a=!1),this.$10=!1,b("Arbiter").unsubscribe(this.$6),b("Arbiter").unsubscribe(this.$8),b("Arbiter").unsubscribe(this.$9),a||b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};return a}();var k=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){return{getPayload:function(){return{sequence_id:a}}}}a=function(){a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercurySyncDFFDataFetcher").getForFBID(this.$1)}var c=a.prototype;c.processMessageDFF=function(a,c,d,e){if(e){e=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();e=this.$2.getClientIDFromServerIDNow(e);if(e===void 0)return b("Promise").resolve(g(a));e=b("MessengerState.bs").getMessagesFromIDs(this.$1,[d]);if(e.length===0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateMessage(c.otherUserFbId,c.threadFbId,d)};c.processThreadDFF=function(a,c,d){if(d){d=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();d=this.$2.getClientIDFromServerIDNow(d);if(d===void 0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateThreadState(c.otherUserFbId,c.threadFbId)};c.processGlobalDFFForGraphQL=function(){return this.$3.fetchInvalidateGlobalStateForGraphQL()};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!1})}),null);
__d("MontageActions",["Bootloader","CurrentUser","MercuryServerPayloadPreprocessor","MontageDispatcher","WebGraphQL","keyMirror","promiseDone","uniqueID"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null,HANDLE_ACTION:null}),h=new Set();a={Types:g,requestUpdate:function(a){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},montageThreadChanged:function(a,c){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},hasUpdated:function(a){b("MontageDispatcher").dispatch({type:g.HAS_UPDATED,threadFBID:a})},loadMontageThreadForActor:function(a){if(h.has(a))return;h.add(a);b("Bootloader").loadModules(["MessengerMontageThreadQueryWebGraphQLQuery"],function(c){c=b("WebGraphQL").exec(new c({id:a}));b("promiseDone")(c,function(c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({current_montage_thread:c}),h["delete"](a)})},"MontageActions")},deleteMontage:function(a,c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_delete_message_delta:c})},handleNewMontageDelta:function(a,c){b("Bootloader").loadModules(["MessengerNewMontageMessageWebGraphQLQuery"],function(a){a=b("WebGraphQL").exec(new a({id:c.message_fbid}));b("promiseDone")(a,function(a){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_new_message_delta:a.montage_message})})},"MontageActions")},updatePollStickerChoice:function(a){b("Bootloader").loadModules(["MessengerState.bs","MessengerMontagePollVoteMutationWebGraphQLMutation"],function(c,d){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_poll_sticker_vote:[a]});c=b("WebGraphQL").exec(new d({input:{client_mutation_id:b("uniqueID")(),story_card_poll_id:a.pollID,option:a.optionVotedIndex,actor_id:b("CurrentUser").getID()}}));b("promiseDone")(c,function(a){},function(a){})},"MontageActions")}};e.exports=a}),null);
__d("RemovedMessageTombstoneContent",["fbt","CurrentUser","GenderConst","IntlVariations","MercuryIDs","MessengerParticipants.bs","MessengerState.bs","immutable"],(function(a,b,c,d,e,f,g){"use strict";a={getRemovedMessageTombstoneContent:function(a,c){var d;d=((d=a.unsender)==null?void 0:d.id)||a.author;var e=b("MercuryIDs").getUserIDFromParticipantID(d),f=b("CurrentUser").getID();if(e===f)return this._getFbtForCurrentViewerAuthor();f=b("MessengerState.bs").getThreadMetaNow(f,a.thread_id);f=f==null?void 0:(f=f.custom_nickname)==null?void 0:f[e];f=f||((e=c.get(d))==null?void 0:e.short_name)||((f=a.unsender)==null?void 0:f.short_name)||((e=a.unsender)==null?void 0:e.name);e=(a=c.get(d))==null?void 0:a.gender;if(f)return this._getFbtForOtherAuthor(f,e);else return this._getFbtForUnknownAuthor()},getTombstoneContentForSnippet:function(a){if(a==null)return this._getFbtForUnknownAuthor().toString();var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c===b("CurrentUser").getID())return this._getFbtForCurrentViewerAuthor().toString();c=b("MessengerParticipants.bs").getNow(a);a=c&&c.short_name;c=c&&c.gender;if(a)return this._getFbtForOtherAuthor(a,c).toString();else return this._getFbtForUnknownAuthor().toString()},_getFbtForCurrentViewerAuthor:function(){return g._("You removed a message")},_getFbtForOtherAuthor:function(a,c){return g._({"*":"{name} removed a message"},[g._param("name",a,[1,c===b("GenderConst").FEMALE_SINGULAR?b("IntlVariations").GENDER_FEMALE:b("IntlVariations").GENDER_MALE])])},_getFbtForUnknownAuthor:function(){return g._("A contact removed a message")}};e.exports=a}),null);
__d("installUFI2ComposerInputDecorators",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return babelHelpers["extends"]({},a,{inputDecorators:[].concat(a.inputDecorators,c)})}e.exports=a}),null);
__d("PhotosMimeType",[],(function(a,b,c,d,e,f){var g={isImage:function(a){return h(a)[0]==="image"},isJpeg:function(a){var b=h(a);return g.isImage(a)&&(b[1]==="jpeg"||b[1]==="pjpeg")}};function h(a){return a.split("/")}e.exports=g}),null);
__d("DataTransfer",["Promise","PhotosMimeType","createArrayFromMixed","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){var g=new RegExp("\r\n","g"),h="\n",i={"text/rtf":1,"text/html":1};function j(a){if(a.kind=="file")return a.getAsFile()}function k(a){return new(b("Promise"))(function(b){a.file(function(a){b([a])})})}function l(a){return typeof a.webkitGetAsEntry==="function"?a.webkitGetAsEntry():null}function m(a,c){return new(b("Promise"))(function(d){b("promiseDone")(b("Promise").all(a.map(function(a){var b=l(a);if(b&&b.createReader!=null){c();return n(b)}else{return(b=j(a))!=null?b:[]}})),function(a){d(a.flatMap(b("emptyFunction").thatReturnsArgument))})})}function n(a){return new(b("Promise"))(function(c){var d=a.createReader(),e=[],f=function(){b("promiseDone")(b("Promise").all(e.map(function(a){if(a.isDirectory)return n(a);else return k(a)})),function(a){c(a.flatMap(b("emptyFunction").thatReturnsArgument))})},g=function a(){d.readEntries(function(b){b.length?(e=e.concat(b),a()):f()},f)};g()})}a=function(){"use strict";function a(a){this.data=a,this.types=a.types?b("createArrayFromMixed")(a.types):[]}var c=a.prototype;c.isRichText=function(){if(this.getHTML()&&this.getText())return!0;return this.isImage()?!1:this.types.some(function(a){return i[a]})};c.getText=function(){var a;!this.types.length?a=this.data.getData("Text"):this.types.indexOf("text/plain")!=-1&&(a=this.data.getData("text/plain"));return a?a.replace(g,h):null};c.getHTML=function(){if(this.data.getData)if(!this.types.length)return this.data.getData("Text");else if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")};c.isLink=function(){return this.types.some(function(a){return a.indexOf("Url")!=-1||a.indexOf("text/uri-list")!=-1||a.indexOf("text/x-moz-url")!=-1})};c.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var a=this.data.getData("text/x-moz-url").split("\n");return a[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null};c.isImage=function(){var a=this.types.some(function(a){return a.indexOf("application/x-moz-file")!=-1});if(a)return!0;a=this.getFiles();for(var c=0;c<a.length;c++){var d=a[c].type;if(!b("PhotosMimeType").isImage(d))return!1}return!0};c.getCount=function(){if(Object.prototype.hasOwnProperty.call(this.data,"items"))return this.data.items.length;else if(Object.prototype.hasOwnProperty.call(this.data,"mozItemCount"))return this.data.mozItemCount;else if(this.data.files)return this.data.files.length;return null};c.getFiles=function(){if(this.data.items)return Array.prototype.slice.call(this.data.items).map(j).filter(b("emptyFunction").thatReturnsArgument);else if(this.data.files)return Array.prototype.slice.call(this.data.files);else return[]};c.getRecursiveFiles=function(a){if(this.data.items)return m(Array.prototype.slice.call(this.data.items),a);else if(this.data.files)return new(b("Promise"))(Array.prototype.slice.call(this.data.files))};c.hasFiles=function(){return this.getFiles().length>0};return a}();e.exports=a}),null);
__d("getEntityMatcher",[],(function(a,b,c,d,e,f){function g(a,b){return b.getEntity(a)}function a(a,b){return function(c,d,e){var f=b||g;c.findEntityRanges(function(b){b=b.getEntity();return typeof b==="string"&&a(f(b,e))},d)}}e.exports=a}),null);
__d("getHashtagRegexString",[],(function(a,b,c,d,e,f){function a(){var a="\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff",b="\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc",c=String.fromCharCode;c="\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff"+c(173824)+"-"+c(177983)+c(177984)+"-"+c(178207)+c(194560)+"-"+c(195103)+"\u3003\u3005\u303b";a=a+b+c;b="A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u0241\u0250-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ee\u037a\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03f5\u03f7-\u0481\u048a-\u04ce\u04d0-\u04f9\u0500-\u050f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u076d\u0780-\u07a5\u07b1\u0904-\u0939\u093d\u0950\u0958-\u0961\u097d\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029-\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u1a00-\u1a16\u1d00-\u1dbf\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213c-\u213f\u2145-\u2149\u2c00-\u2c2e\u2c30-\u2c5e\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fbb\ua000-\ua48c\ua800-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";c="\u0300-\u036f\u0483-\u0486\u0591-\u05b9\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u0615\u064b-\u065e\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u0901-\u0903\u093c\u093e-\u094d\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7-\u09c8\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03\u0d3e-\u0d43\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d82-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2-\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f3f\u0f71-\u0f84\u0f86-\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102c-\u1032\u1036-\u1039\u1056-\u1059\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8-\u19c9\u1a17-\u1a1b\u1dc0-\u1dc3\u20d0-\u20dc\u20e1\u20e5-\u20eb\u302a-\u302f\u3099-\u309a\ua802\ua806\ua80b\ua823-\ua827\ufb1e\ufe00-\ufe0f\ufe20-\ufe23";var d="0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\uff10-\uff19";b=b+c+a;c=d+"_";a=b+c;d="["+b+"]";c="["+a+"]";b="^|$|[^&/"+a+"]";a="[#\\uFF03]";b="("+b+")("+a+")("+c+"*"+d+c+"*)";return b}e.exports=a}),null);
__d("getHashtagRegex",["getHashtagRegexString"],(function(a,b,c,d,e,f){function a(){return new RegExp(b("getHashtagRegexString")(),"ig")}e.exports=a}),null);
__d("getHashtagMatches",["getHashtagRegex"],(function(a,b,c,d,e,f){var g=b("getHashtagRegex")();function a(a,b){a=a.getText();var c,d,e;while((c=g.exec(a))!==null)d=c.index+c[1].length,e=c[2],c=c[3],b(d,d+e.length+c.length)}e.exports=a}),null);
__d("DocumentMentionsRegex",[],(function(a,b,c,d,e,f){"use strict";a="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;";b="\\b[A-Z][^\\s"+a+"]";c={PUNCTUATION:a,NAME:b};e.exports=c}),null);
__d("createMentionEntityForContentState",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=b.getType().toLowerCase();if(c==="hashtag")return a.createEntity("HASHTAG","IMMUTABLE");var d=c==="user"||c==="fb4c"?"SEGMENTED":"IMMUTABLE",e=b.getAuxiliaryData();return a.createEntity("MENTION",d,{id:b.getUniqueID(),uri:b.getURI(),isWeak:e&&e.renderType==="non_member",type:c})}e.exports=a}),null);
__d("immutable",[],(function(a,b,c,d,e,f){(function(b,c){typeof f==="object"&&typeof e!=="undefined"?e.exports=c():typeof define==="function"&&define.amd?define(c):b.Immutable=c()})(this,function(){"use strict";var a=Array.prototype.slice;function b(a,b){b&&(a.prototype=Object.create(b.prototype)),a.prototype.constructor=a}var c="delete",d=5,e=1<<d,f=e-1,g={},h={value:!1},i={value:!1};function j(a){a.value=!1;return a}function k(a){a&&(a.value=!0)}function l(){}function m(a,b){b=b||0;var c=Math.max(0,a.length-b),d=new Array(c);for(var e=0;e<c;e++)d[e]=a[e+b];return d}function n(a){a.size===void 0&&(a.size=a.__iterate(p));return a.size}function o(a,b){return b>=0?+b:n(a)+ +b}function p(){return!0}function q(a,b,c){return(a===0||c!==void 0&&a<=-c)&&(b===void 0||c!==void 0&&b>=c)}function r(a,b){return aa(a,b,0)}function s(a,b){return aa(a,b,b)}function aa(a,b,c){return a===void 0?c:a<0?Math.max(0,b+a):b===void 0?a:Math.min(b,a)}function t(a){return x(a)?a:F(a)}b(u,t);function u(a){return y(a)?a:G(a)}b(v,t);function v(a){return z(a)?a:H(a)}b(w,t);function w(a){return x(a)&&!ba(a)?a:I(a)}function x(a){return!!(a&&a[da])}function y(a){return!!(a&&a[ea])}function z(a){return!!(a&&a[fa])}function ba(a){return y(a)||z(a)}function ca(a){return!!(a&&a[ga])}t.isIterable=x;t.isKeyed=y;t.isIndexed=z;t.isAssociative=ba;t.isOrdered=ca;t.Keyed=u;t.Indexed=v;t.Set=w;var da="@@__IMMUTABLE_ITERABLE__@@",ea="@@__IMMUTABLE_KEYED__@@",fa="@@__IMMUTABLE_INDEXED__@@",ga="@@__IMMUTABLE_ORDERED__@@",ha=0,A=1,B=2,ia=typeof Symbol==="function"&&Symbol.iterator,ja="@@iterator",ka=ia||ja;function C(a){this.next=a}C.prototype.toString=function(){return"[Iterator]"};C.KEYS=ha;C.VALUES=A;C.ENTRIES=B;C.prototype.inspect=C.prototype.toSource=function(){return this.toString()};C.prototype[ka]=function(){return this};function D(a,b,c,d){a=a===0?b:a===1?c:[b,c];d?d.value=a:d={value:a,done:!1};return d}function E(){return{value:void 0,done:!0}}function la(a){return!!oa(a)}function ma(a){return a&&typeof a.next==="function"}function na(a){var b=oa(a);return b&&b.call(a)}function oa(a){a=a&&(ia&&a[ia]||a[ja]);if(typeof a==="function")return a}function pa(a){return a&&typeof a.length==="number"}b(F,t);function F(a){return a===null||a===void 0?xa():x(a)?a.toSeq():Aa(a)}F.of=function(){return F(arguments)};F.prototype.toSeq=function(){return this};F.prototype.toString=function(){return this.__toString("Seq {","}")};F.prototype.cacheResult=function(){!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length);return this};F.prototype.__iterate=function(a,b){return Ca(this,a,b,!0)};F.prototype.__iterator=function(a,b){return Da(this,a,b,!0)};b(G,F);function G(a){return a===null||a===void 0?xa().toKeyedSeq():x(a)?y(a)?a.toSeq():a.fromEntrySeq():ya(a)}G.prototype.toKeyedSeq=function(){return this};b(H,F);function H(a){return a===null||a===void 0?xa():x(a)?y(a)?a.entrySeq():a.toIndexedSeq():za(a)}H.of=function(){return H(arguments)};H.prototype.toIndexedSeq=function(){return this};H.prototype.toString=function(){return this.__toString("Seq [","]")};H.prototype.__iterate=function(a,b){return Ca(this,a,b,!1)};H.prototype.__iterator=function(a,b){return Da(this,a,b,!1)};b(I,F);function I(a){return(a===null||a===void 0?xa():x(a)?y(a)?a.entrySeq():a:za(a)).toSetSeq()}I.of=function(){return I(arguments)};I.prototype.toSetSeq=function(){return this};F.isSeq=va;F.Keyed=G;F.Set=I;F.Indexed=H;var qa="@@__IMMUTABLE_SEQ__@@";F.prototype[qa]=!0;b(ra,H);function ra(a){this._array=a,this.size=a.length}ra.prototype.get=function(a,b){return this.has(a)?this._array[o(this,a)]:b};ra.prototype.__iterate=function(a,b){var c=this._array,d=c.length-1;for(var e=0;e<=d;e++)if(a(c[b?d-e:e],e,this)===!1)return e+1;return e};ra.prototype.__iterator=function(a,b){var c=this._array,d=c.length-1,e=0;return new C(function(){return e>d?E():D(a,e,c[b?d-e++:e++])})};b(sa,G);function sa(a){var b=Object.keys(a);this._object=a;this._keys=b;this.size=b.length}sa.prototype.get=function(a,b){return b!==void 0&&!this.has(a)?b:this._object[a]};sa.prototype.has=function(a){return this._object.hasOwnProperty(a)};sa.prototype.__iterate=function(a,b){var c=this._object,d=this._keys,e=d.length-1;for(var f=0;f<=e;f++){var g=d[b?e-f:f];if(a(c[g],g,this)===!1)return f+1}return f};sa.prototype.__iterator=function(a,b){var c=this._object,d=this._keys,e=d.length-1,f=0;return new C(function(){var g=d[b?e-f:f];return f++>e?E():D(a,g,c[g])})};sa.prototype[ga]=!0;b(ta,H);function ta(a){this._iterable=a,this.size=a.length||a.size}ta.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);b=this._iterable;b=na(b);var c=0;if(ma(b)){var d;while(!(d=b.next()).done)if(a(d.value,c++,this)===!1)break}return c};ta.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);b=this._iterable;var c=na(b);if(!ma(c))return new C(E);var d=0;return new C(function(){var b=c.next();return b.done?b:D(a,d++,b.value)})};b(ua,H);function ua(a){this._iterator=a,this._iteratorCache=[]}ua.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);b=this._iterator;var c=this._iteratorCache,d=0;while(d<c.length)if(a(c[d],d++,this)===!1)return d;var e;while(!(e=b.next()).done){e=e.value;c[d]=e;if(a(e,d++,this)===!1)break}return d};ua.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterator,d=this._iteratorCache,e=0;return new C(function(){if(e>=d.length){var b=c.next();if(b.done)return b;d[e]=b.value}return D(a,e,d[e++])})};function va(a){return!!(a&&a[qa])}var wa;function xa(){return wa||(wa=new ra([]))}function ya(a){var b=Array.isArray(a)?new ra(a).fromEntrySeq():ma(a)?new ua(a).fromEntrySeq():la(a)?new ta(a).fromEntrySeq():typeof a==="object"?new sa(a):void 0;if(!b)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return b}function za(a){var b=Ba(a);if(!b)throw new TypeError("Expected Array or iterable object of values: "+a);return b}function Aa(a){var b=Ba(a)||typeof a==="object"&&new sa(a);if(!b)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return b}function Ba(a){return pa(a)?new ra(a):ma(a)?new ua(a):la(a)?new ta(a):void 0}function Ca(a,b,c,d){var e=a._cache;if(e){var f=e.length-1;for(var g=0;g<=f;g++){var h=e[c?f-g:g];if(b(h[1],d?h[0]:g,a)===!1)return g+1}return g}return a.__iterateUncached(b,c)}function Da(a,b,c,d){var e=a._cache;if(e){var f=e.length-1,g=0;return new C(function(){var a=e[c?f-g:g];return g++>f?E():D(b,d?a[0]:g-1,a[1])})}return a.__iteratorUncached(b,c)}b(Ea,t);function Ea(){throw TypeError("Abstract")}b(Fa,Ea);function Fa(){}b(Ga,Ea);function Ga(){}b(Ha,Ea);function Ha(){}Ea.Keyed=Fa;Ea.Indexed=Ga;Ea.Set=Ha;function J(a,b){if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1;if(typeof a.valueOf==="function"&&typeof b.valueOf==="function"){a=a.valueOf();b=b.valueOf();if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1}return typeof a.equals==="function"&&typeof b.equals==="function"&&a.equals(b)?!0:!1}function Ia(a,b){return b?Ja(b,a,"",{"":a}):Ka(a)}function Ja(a,b,c,d){if(Array.isArray(b))return a.call(d,c,H(b).map(function(c,d){return Ja(a,c,d,b)}));return La(b)?a.call(d,c,G(b).map(function(c,d){return Ja(a,c,d,b)})):b}function Ka(a){if(Array.isArray(a))return H(a).map(Ka).toList();return La(a)?G(a).map(Ka).toMap():a}function La(a){return a&&(a.constructor===Object||a.constructor===void 0)}var Ma=typeof Math.imul==="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(a,b){a=a|0;b=b|0;var c=a&65535,d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function Na(a){return a>>>1&1073741824|a&3221225471}function K(a){if(a===!1||a===null||a===void 0)return 0;if(typeof a.valueOf==="function"){a=a.valueOf();if(a===!1||a===null||a===void 0)return 0}if(a===!0)return 1;var b=typeof a;if(b==="number"){var c=a|0;c!==a&&(c^=a*4294967295);while(a>4294967295)a/=4294967295,c^=a;return Na(c)}if(b==="string")return a.length>Ya?Oa(a):Pa(a);return typeof a.hashCode==="function"?a.hashCode():Qa(a)}function Oa(b){var a=ab[b];a===void 0&&(a=Pa(b),$a===Za&&($a=0,ab={}),$a++,ab[b]=a);return a}function Pa(b){var a=0;for(var c=0;c<b.length;c++)a=31*a+b.charCodeAt(c)|0;return Na(a)}function Qa(b){var a;if(Ua){a=Va.get(b);if(a!==void 0)return a}a=b[Xa];if(a!==void 0)return a;if(!Sa){a=b.propertyIsEnumerable&&b.propertyIsEnumerable[Xa];if(a!==void 0)return a;a=Ta(b);if(a!==void 0)return a}a=++Wa;Wa&1073741824&&(Wa=0);if(Ua)Va.set(b,a);else if(Ra!==void 0&&Ra(b)===!1)throw new Error("Non-extensible objects are not allowed as keys.");else if(Sa)Object.defineProperty(b,Xa,{enumerable:!1,configurable:!1,writable:!1,value:a});else if(b.propertyIsEnumerable!==void 0&&b.propertyIsEnumerable===b.constructor.prototype.propertyIsEnumerable)b.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},b.propertyIsEnumerable[Xa]=a;else if(b.nodeType!==void 0)b[Xa]=a;else throw new Error("Unable to set a non-enumerable property on object.");return a}var Ra=Object.isExtensible,Sa=function(){try{Object.defineProperty({},"@",{});return!0}catch(a){return!1}}();function Ta(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}var Ua=typeof WeakMap==="function",Va;Ua&&(Va=new WeakMap());var Wa=0,Xa="__immutablehash__";typeof Symbol==="function"&&(Xa=Symbol(Xa));var Ya=16,Za=255,$a=0,ab={};function bb(a,b){if(!a)throw new Error(b)}function L(a){bb(a!==Infinity,"Cannot perform this action with an infinite size.")}b(M,G);function M(a,b){this._iter=a,this._useKeys=b,this.size=a.size}M.prototype.get=function(a,b){return this._iter.get(a,b)};M.prototype.has=function(a){return this._iter.has(a)};M.prototype.valueSeq=function(){return this._iter.valueSeq()};M.prototype.reverse=function(){var a=this,b=hb(this,!0);this._useKeys||(b.valueSeq=function(){return a._iter.toSeq().reverse()});return b};M.prototype.map=function(a,b){var c=this,d=gb(this,a,b);this._useKeys||(d.valueSeq=function(){return c._iter.toSeq().map(a,b)});return d};M.prototype.__iterate=function(a,b){var c=this,d;return this._iter.__iterate(this._useKeys?function(b,d){return a(b,d,c)}:(d=b?xb(this):0,function(e){return a(e,b?--d:d++,c)}),b)};M.prototype.__iterator=function(a,b){if(this._useKeys)return this._iter.__iterator(a,b);var c=this._iter.__iterator(A,b),d=b?xb(this):0;return new C(function(){var e=c.next();return e.done?e:D(a,b?--d:d++,e.value,e)})};M.prototype[ga]=!0;b(cb,H);function cb(a){this._iter=a,this.size=a.size}cb.prototype.includes=function(a){return this._iter.includes(a)};cb.prototype.__iterate=function(a,b){var c=this,d=0;return this._iter.__iterate(function(b){return a(b,d++,c)},b)};cb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(A,b),d=0;return new C(function(){var b=c.next();return b.done?b:D(a,d++,b.value,b)})};b(db,I);function db(a){this._iter=a,this.size=a.size}db.prototype.has=function(a){return this._iter.includes(a)};db.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){return a(b,b,c)},b)};db.prototype.__iterator=function(a,b){var c=this._iter.__iterator(A,b);return new C(function(){var b=c.next();return b.done?b:D(a,b.value,b.value,b)})};b(eb,G);function eb(a){this._iter=a,this.size=a.size}eb.prototype.entrySeq=function(){return this._iter.toSeq()};eb.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){if(b){wb(b);var d=x(b);return a(d?b.get(1):b[1],d?b.get(0):b[0],c)}},b)};eb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(A,b);return new C(function(){while(!0){var b=c.next();if(b.done)return b;var d=b.value;if(d){wb(d);var e=x(d);return D(a,e?d.get(0):d[0],e?d.get(1):d[1],b)}}})};cb.prototype.cacheResult=M.prototype.cacheResult=db.prototype.cacheResult=eb.prototype.cacheResult=Ab;function fb(a){var b=zb(a);b._iter=a;b.size=a.size;b.flip=function(){return a};b.reverse=function(){var b=a.reverse.apply(this);b.flip=function(){return a.reverse()};return b};b.has=function(b){return a.includes(b)};b.includes=function(b){return a.has(b)};b.cacheResult=Ab;b.__iterateUncached=function(b,c){var d=this;return a.__iterate(function(a,c){return b(c,a,d)!==!1},c)};b.__iteratorUncached=function(b,c){if(b===B){var d=a.__iterator(b,c);return new C(function(){var a=d.next();if(!a.done){var b=a.value[0];a.value[0]=a.value[1];a.value[1]=b}return a})}return a.__iterator(b===A?ha:A,c)};return b}function gb(a,b,c){var d=zb(a);d.size=a.size;d.has=function(b){return a.has(b)};d.get=function(d,e){var f=a.get(d,g);return f===g?e:b.call(c,f,d,a)};d.__iterateUncached=function(d,e){var f=this;return a.__iterate(function(a,e,g){return d(b.call(c,a,e,g),e,f)!==!1},e)};d.__iteratorUncached=function(d,e){var f=a.__iterator(B,e);return new C(function(){var e=f.next();if(e.done)return e;var g=e.value,h=g[0];return D(d,h,b.call(c,g[1],h,a),e)})};return d}function hb(a,b){var c=zb(a);c._iter=a;c.size=a.size;c.reverse=function(){return a};a.flip&&(c.flip=function(){var b=fb(a);b.reverse=function(){return a.flip()};return b});c.get=function(c,d){return a.get(b?c:-1-c,d)};c.has=function(c){return a.has(b?c:-1-c)};c.includes=function(b){return a.includes(b)};c.cacheResult=Ab;c.__iterate=function(b,c){var d=this;return a.__iterate(function(a,c){return b(a,c,d)},!c)};c.__iterator=function(b,c){return a.__iterator(b,!c)};return c}function ib(a,b,c,d){var e=zb(a);d&&(e.has=function(d){var e=a.get(d,g);return e!==g&&!!b.call(c,e,d,a)},e.get=function(d,e){var f=a.get(d,g);return f!==g&&b.call(c,f,d,a)?f:e});e.__iterateUncached=function(e,f){var g=this,h=0;a.__iterate(function(a,f,i){if(b.call(c,a,f,i)){h++;return e(a,d?f:h-1,g)}},f);return h};e.__iteratorUncached=function(e,f){var g=a.__iterator(B,f),h=0;return new C(function(){while(!0){var f=g.next();if(f.done)return f;var i=f.value,j=i[0];i=i[1];if(b.call(c,i,j,a))return D(e,d?j:h++,i,f)}})};return e}function jb(a,b,c){var d=O().asMutable();a.__iterate(function(e,f){d.update(b.call(c,e,f,a),0,function(a){return a+1})});return d.asImmutable()}function kb(a,b,c){var d=y(a),e=(ca(a)?S():O()).asMutable();a.__iterate(function(f,g){e.update(b.call(c,f,g,a),function(a){return a=a||[],a.push(d?[g,f]:f),a})});var f=yb(a);return e.map(function(b){return N(a,f(b))})}function lb(a,b,c,d){var e=a.size;if(q(b,c,e))return a;var f=r(b,e);e=s(c,e);if(f!==f||e!==e)return lb(a.toSeq().cacheResult(),b,c,d);b=e-f;var g;b===b&&(g=b<0?0:b);c=zb(a);c.size=g;!d&&va(a)&&g>=0&&(c.get=function(b,c){b=o(this,b);return b>=0&&b<g?a.get(b+f,c):c});c.__iterateUncached=function(b,c){var e=this;if(g===0)return 0;if(c)return this.cacheResult().__iterate(b,c);var h=0,i=!0,j=0;a.__iterate(function(a,c){if(!(i&&(i=h++<f))){j++;return b(a,d?c:j-1,e)!==!1&&j!==g}});return j};c.__iteratorUncached=function(b,c){if(g!==0&&c)return this.cacheResult().__iterator(b,c);var e=g!==0&&a.__iterator(b,c),h=0,i=0;return new C(function(){while(h++<f)e.next();if(++i>g)return E();var a=e.next();if(d||b===A)return a;else if(b===ha)return D(b,i-1,void 0,a);else return D(b,i-1,a.value[1],a)})};return c}function mb(a,b,c){var d=zb(a);d.__iterateUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterate(d,e);var g=0;a.__iterate(function(a,e,h){return b.call(c,a,e,h)&&++g&&d(a,e,f)});return g};d.__iteratorUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterator(d,e);var g=a.__iterator(B,e),h=!0;return new C(function(){if(!h)return E();var a=g.next();if(a.done)return a;var e=a.value,i=e[0];e=e[1];if(!b.call(c,e,i,f)){h=!1;return E()}return d===B?a:D(d,i,e,a)})};return d}function nb(a,b,c,d){var e=zb(a);e.__iterateUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterate(e,f);var h=!0,i=0;a.__iterate(function(a,f,j){if(!(h&&(h=b.call(c,a,f,j)))){i++;return e(a,d?f:i-1,g)}});return i};e.__iteratorUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterator(e,f);var h=a.__iterator(B,f),i=!0,j=0;return new C(function(){var a,f;do{a=h.next();if(a.done)if(d||e===A)return a;else if(e===ha)return D(e,j++,void 0,a);else return D(e,j++,a.value[1],a);var k=a.value;f=k[0];k=k[1];i&&(i=b.call(c,k,f,g))}while(i);return e===B?a:D(e,f,k,a)})};return e}function ob(a,b){var c=y(a);b=[a].concat(b).map(function(a){!x(a)?a=c?ya(a):za(Array.isArray(a)?a:[a]):c&&(a=u(a));return a}).filter(function(a){return a.size!==0});if(b.length===0)return a;if(b.length===1){var d=b[0];if(d===a||c&&y(d)||z(a)&&z(d))return d}d=new ra(b);c?d=d.toKeyedSeq():z(a)||(d=d.toSetSeq());d=d.flatten(!0);d.size=b.reduce(function(a,b){if(a!==void 0){b=b.size;if(b!==void 0)return a+b}},0);return d}function pb(a,b,c){var d=zb(a);d.__iterateUncached=function(d,e){var f=0,g=!1;function h(a,i){var j=this;a.__iterate(function(a,e){(!b||i<b)&&x(a)?h(a,i+1):d(a,c?e:f++,j)===!1&&(g=!0);return!g},e)}h(a,0);return f};d.__iteratorUncached=function(d,e){var f=a.__iterator(d,e),g=[],h=0;return new C(function(){while(f){var a=f.next();if(a.done!==!1){f=g.pop();continue}var i=a.value;d===B&&(i=i[1]);if((!b||g.length<b)&&x(i))g.push(f),f=i.__iterator(d,e);else return c?a:D(d,h++,i,a)}return E()})};return d}function qb(a,b,c){var d=yb(a);return a.toSeq().map(function(e,f){return d(b.call(c,e,f,a))}).flatten(!0)}function rb(a,b){var c=zb(a);c.size=a.size&&a.size*2-1;c.__iterateUncached=function(c,d){var e=this,f=0;a.__iterate(function(a,d){return(!f||c(b,f++,e)!==!1)&&c(a,f++,e)!==!1},d);return f};c.__iteratorUncached=function(c,d){var e=a.__iterator(A,d),f=0,g;return new C(function(){if(!g||f%2){g=e.next();if(g.done)return g}return f%2?D(c,f++,b):D(c,f++,g.value,g)})};return c}function sb(a,b,c){b||(b=Bb);var d=y(a),e=0,f=a.toSeq().map(function(b,d){return[d,b,e++,c?c(b,d,a):b]}).toArray();f.sort(function(a,c){return b(a[3],c[3])||a[2]-c[2]}).forEach(d?function(a,b){f[b].length=2}:function(a,b){f[b]=a[1]});return d?G(f):z(a)?H(f):I(f)}function tb(a,b,c){b||(b=Bb);if(c){var d=a.toSeq().map(function(b,d){return[b,c(b,d,a)]}).reduce(function(a,c){return ub(b,a[1],c[1])?c:a});return d&&d[0]}else return a.reduce(function(a,c){return ub(b,a,c)?c:a})}function ub(a,b,c){a=a(c,b);return a===0&&c!==b&&(c===void 0||c===null||c!==c)||a>0}function vb(a,b,c){a=zb(a);a.size=new ra(c).map(function(a){return a.size}).min();a.__iterate=function(a,b){b=this.__iterator(A,b);var c,d=0;while(!(c=b.next()).done)if(a(c.value,d++,this)===!1)break;return d};a.__iteratorUncached=function(a,d){var e=c.map(function(a){return a=t(a),na(d?a.reverse():a)}),f=0,g=!1;return new C(function(){var c;g||(c=e.map(function(a){return a.next()}),g=c.some(function(a){return a.done}));return g?E():D(a,f++,b.apply(null,c.map(function(a){return a.value})))})};return a}function N(a,b){return va(a)?b:a.constructor(b)}function wb(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function xb(a){L(a.size);return n(a)}function yb(a){return y(a)?u:z(a)?v:w}function zb(a){return Object.create((y(a)?G:z(a)?H:I).prototype)}function Ab(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this}else return F.prototype.cacheResult.call(this)}function Bb(a,b){return a>b?1:a<b?-1:0}function Cb(a){var b=na(a);if(!b){if(!pa(a))throw new TypeError("Expected iterable or array-like: "+a);b=na(t(a))}return b}b(O,Fa);function O(a){return a===null||a===void 0?Pb():Db(a)?a:Pb().withMutations(function(b){var c=u(a);L(c.size);c.forEach(function(a,c){return b.set(c,a)})})}O.prototype.toString=function(){return this.__toString("Map {","}")};O.prototype.get=function(a,b){return this._root?this._root.get(0,void 0,a,b):b};O.prototype.set=function(a,b){return Qb(this,a,b)};O.prototype.setIn=function(a,b){return this.updateIn(a,g,function(){return b})};O.prototype.remove=function(a){return Qb(this,a,g)};O.prototype.deleteIn=function(a){return this.updateIn(a,function(){return g})};O.prototype.update=function(a,b,c){return arguments.length===1?a(this):this.updateIn([a],b,c)};O.prototype.updateIn=function(a,b,c){c||(c=b,b=void 0);a=$b(this,Cb(a),b,c);return a===g?void 0:a};O.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._root=null;this.__hash=void 0;this.__altered=!0;return this}return Pb()};O.prototype.merge=function(){return Xb(this,void 0,arguments)};O.prototype.mergeWith=function(b){var c=a.call(arguments,1);return Xb(this,b,c)};O.prototype.mergeIn=function(b){var c=a.call(arguments,1);return this.updateIn(b,Pb(),function(a){return typeof a.merge==="function"?a.merge.apply(a,c):c[c.length-1]})};O.prototype.mergeDeep=function(){return Xb(this,Yb(void 0),arguments)};O.prototype.mergeDeepWith=function(b){var c=a.call(arguments,1);return Xb(this,Yb(b),c)};O.prototype.mergeDeepIn=function(b){var c=a.call(arguments,1);return this.updateIn(b,Pb(),function(a){return typeof a.mergeDeep==="function"?a.mergeDeep.apply(a,c):c[c.length-1]})};O.prototype.sort=function(a){return S(sb(this,a))};O.prototype.sortBy=function(a,b){return S(sb(this,b,a))};O.prototype.withMutations=function(a){var b=this.asMutable();a(b);return b.wasAltered()?b.__ensureOwner(this.__ownerID):this};O.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new l())};O.prototype.asImmutable=function(){return this.__ensureOwner()};O.prototype.wasAltered=function(){return this.__altered};O.prototype.__iterator=function(a,b){return new Kb(this,a,b)};O.prototype.__iterate=function(a,b){var c=this,d=0;this._root&&this._root.iterate(function(b){d++;return a(b[1],b[0],c)},b);return d};O.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;if(!a){this.__ownerID=a;this.__altered=!1;return this}return Nb(this.size,this._root,a,this.__hash)};function Db(a){return!!(a&&a[Eb])}O.isMap=Db;var Eb="@@__IMMUTABLE_MAP__@@",P=O.prototype;P[Eb]=!0;P[c]=P.remove;P.removeIn=P.deleteIn;function Fb(a,b){this.ownerID=a,this.entries=b}Fb.prototype.get=function(a,b,c,d){a=this.entries;for(var b=0,e=a.length;b<e;b++)if(J(c,a[b][0]))return a[b][1];return d};Fb.prototype.update=function(a,b,c,d,e,f,h){b=e===g;c=this.entries;var i=0;for(var j=c.length;i<j;i++)if(J(d,c[i][0]))break;var l=i<j;if(l?c[i][1]===e:b)return this;k(h);(b||!l)&&k(f);if(b&&c.length===1)return;if(!l&&!b&&c.length>=ec)return Ub(a,c,d,e);h=a&&a===this.ownerID;f=h?c:m(c);l?b?i===j-1?f.pop():f[i]=f.pop():f[i]=[d,e]:f.push([d,e]);if(h){this.entries=f;return this}return new Fb(a,f)};function Gb(a,b,c){this.ownerID=a,this.bitmap=b,this.nodes=c}Gb.prototype.get=function(a,b,c,e){b===void 0&&(b=K(c));var g=1<<((a===0?b:b>>>a)&f),h=this.bitmap;return(h&g)===0?e:this.nodes[ac(h&g-1)].get(a+d,b,c,e)};Gb.prototype.update=function(a,b,c,e,h,i,j){c===void 0&&(c=K(e));var k=(b===0?c:c>>>b)&f,l=1<<k,m=this.bitmap,n=(m&l)!==0;if(!n&&h===g)return this;var o=ac(m&l-1),p=this.nodes,q=n?p[o]:void 0;b=Rb(q,a,b+d,c,e,h,i,j);if(b===q)return this;if(!n&&b&&p.length>=fc)return Wb(a,p,m,k,b);if(n&&!b&&p.length===2&&Sb(p[o^1]))return p[o^1];if(n&&b&&p.length===1&&Sb(b))return b;c=a&&a===this.ownerID;e=n?b?m:m^l:m|l;h=n?b?bc(p,o,b,c):dc(p,o,c):cc(p,o,b,c);if(c){this.bitmap=e;this.nodes=h;return this}return new Gb(a,e,h)};function Hb(a,b,c){this.ownerID=a,this.count=b,this.nodes=c}Hb.prototype.get=function(a,b,c,e){b===void 0&&(b=K(c));var g=(a===0?b:b>>>a)&f;g=this.nodes[g];return g?g.get(a+d,b,c,e):e};Hb.prototype.update=function(a,b,c,e,h,i,j){c===void 0&&(c=K(e));var k=(b===0?c:c>>>b)&f,l=h===g,m=this.nodes,n=m[k];if(l&&!n)return this;l=Rb(n,a,b+d,c,e,h,i,j);if(l===n)return this;b=this.count;if(!n)b++;else if(!l){b--;if(b<gc)return Vb(a,m,b,k)}c=a&&a===this.ownerID;e=bc(m,k,l,c);if(c){this.count=b;this.nodes=e;return this}return new Hb(a,b,e)};function Ib(a,b,c){this.ownerID=a,this.keyHash=b,this.entries=c}Ib.prototype.get=function(a,b,c,d){a=this.entries;for(var b=0,e=a.length;b<e;b++)if(J(c,a[b][0]))return a[b][1];return d};Ib.prototype.update=function(a,b,c,d,e,f,h){c===void 0&&(c=K(d));var i=e===g;if(c!==this.keyHash){if(i)return this;k(h);k(f);return Tb(this,a,b,c,[d,e])}b=this.entries;c=0;for(var j=b.length;c<j;c++)if(J(d,b[c][0]))break;var l=c<j;if(l?b[c][1]===e:i)return this;k(h);(i||!l)&&k(f);if(i&&j===2)return new Jb(a,this.keyHash,b[c^1]);h=a&&a===this.ownerID;f=h?b:m(b);l?i?c===j-1?f.pop():f[c]=f.pop():f[c]=[d,e]:f.push([d,e]);if(h){this.entries=f;return this}return new Ib(a,this.keyHash,f)};function Jb(a,b,c){this.ownerID=a,this.keyHash=b,this.entry=c}Jb.prototype.get=function(a,b,c,d){return J(c,this.entry[0])?this.entry[1]:d};Jb.prototype.update=function(a,b,c,d,e,f,h){c=e===g;var i=J(d,this.entry[0]);if(i?e===this.entry[1]:c)return this;k(h);if(c){k(f);return}if(i){if(a&&a===this.ownerID){this.entry[1]=e;return this}return new Jb(a,this.keyHash,[d,e])}k(f);return Tb(this,a,b,K(d),[d,e])};Fb.prototype.iterate=Ib.prototype.iterate=function(a,b){var c=this.entries;for(var d=0,e=c.length-1;d<=e;d++)if(a(c[b?e-d:d])===!1)return!1};Gb.prototype.iterate=Hb.prototype.iterate=function(a,b){var c=this.nodes;for(var d=0,e=c.length-1;d<=e;d++){var f=c[b?e-d:d];if(f&&f.iterate(a,b)===!1)return!1}};Jb.prototype.iterate=function(a,b){return a(this.entry)};b(Kb,C);function Kb(a,b,c){this._type=b,this._reverse=c,this._stack=a._root&&Mb(a._root)}Kb.prototype.next=function(){var a=this._type,b=this._stack;while(b){var c=b.node,d=b.index++,e;if(c.entry){if(d===0)return Lb(a,c.entry)}else if(c.entries){e=c.entries.length-1;if(d<=e)return Lb(a,c.entries[this._reverse?e-d:d])}else{e=c.nodes.length-1;if(d<=e){c=c.nodes[this._reverse?e-d:d];if(c){if(c.entry)return Lb(a,c.entry);b=this._stack=Mb(c,b)}continue}}b=this._stack=this._stack.__prev}return E()};function Lb(a,b){return D(a,b[0],b[1])}function Mb(a,b){return{node:a,index:0,__prev:b}}function Nb(b,c,d,a){var e=Object.create(P);e.size=b;e._root=c;e.__ownerID=d;e.__hash=a;e.__altered=!1;return e}var Ob;function Pb(){return Ob||(Ob=Nb(0))}function Qb(a,b,c){var d,e;if(!a._root){if(c===g)return a;e=1;d=new Fb(a.__ownerID,[[b,c]])}else{var f=j(h),k=j(i);d=Rb(a._root,a.__ownerID,0,void 0,b,c,f,k);if(!k.value)return a;e=a.size+(f.value?c===g?-1:1:0)}if(a.__ownerID){a.size=e;a._root=d;a.__hash=void 0;a.__altered=!0;return a}return d?Nb(e,d):Pb()}function Rb(a,b,c,d,e,f,h,i){if(!a){if(f===g)return a;k(i);k(h);return new Jb(b,d,[e,f])}return a.update(b,c,d,e,f,h,i)}function Sb(a){return a.constructor===Jb||a.constructor===Ib}function Tb(a,b,c,e,g){if(a.keyHash===e)return new Ib(b,e,[a.entry,g]);var h=(c===0?a.keyHash:a.keyHash>>>c)&f,i=(c===0?e:e>>>c)&f;e=h===i?[Tb(a,b,c+d,e,g)]:(c=new Jb(b,e,g),h<i?[a,c]:[c,a]);return new Gb(b,1<<h|1<<i,e)}function Ub(a,b,c,d){a||(a=new l());c=new Jb(a,K(c),[c,d]);for(var d=0;d<b.length;d++){var e=b[d];c=c.update(a,0,void 0,e[0],e[1])}return c}function Vb(a,b,c,d){var e=0,f=0;c=new Array(c);for(var g=0,h=1,i=b.length;g<i;g++,h<<=1){var j=b[g];j!==void 0&&g!==d&&(e|=h,c[f++]=j)}return new Gb(a,e,c)}function Wb(a,b,c,d,f){var g=0,h=new Array(e);for(var i=0;c!==0;i++,c>>>=1)h[i]=c&1?b[g++]:void 0;h[d]=f;return new Hb(a,g+1,h)}function Xb(a,b,c){var d=[];for(var e=0;e<c.length;e++){var f=c[e],g=u(f);x(f)||(g=g.map(function(a){return Ia(a)}));d.push(g)}return Zb(a,b,d)}function Yb(a){return function(b,c,d){return b&&b.mergeDeepWith&&x(c)?b.mergeDeepWith(a,c):a?a(b,c,d):c}}function Zb(a,b,c){c=c.filter(function(a){return a.size!==0});if(c.length===0)return a;return a.size===0&&!a.__ownerID&&c.length===1?a.constructor(c[0]):a.withMutations(function(a){var d=b?function(c,d){a.update(d,g,function(a){return a===g?c:b(a,c,d)})}:function(b,c){a.set(c,b)};for(var e=0;e<c.length;e++)c[e].forEach(d)})}function $b(a,b,c,d){var e=a===g,f=b.next();if(f.done){var h=e?c:a,i=d(h);return i===h?a:i}bb(e||a&&a.set,"invalid keyPath");h=f.value;i=e?g:a.get(h,g);f=$b(i,b,c,d);return f===i?a:f===g?a.remove(h):(e?Pb():a).set(h,f)}function ac(a){a=a-(a>>1&1431655765);a=(a&858993459)+(a>>2&858993459);a=a+(a>>4)&252645135;a=a+(a>>8);a=a+(a>>16);return a&127}function bc(a,b,c,d){d=d?a:m(a);d[b]=c;return d}function cc(a,b,c,d){var e=a.length+1;if(d&&b+1===e){a[b]=c;return a}d=new Array(e);var f=0;for(var g=0;g<e;g++)g===b?(d[g]=c,f=-1):d[g]=a[g+f];return d}function dc(a,b,c){var d=a.length-1;if(c&&b===d){a.pop();return a}c=new Array(d);var e=0;for(var f=0;f<d;f++)f===b&&(e=1),c[f]=a[f+e];return c}var ec=e/4,fc=e/2,gc=e/4;b(Q,Ga);function Q(a){var b=oc();if(a===null||a===void 0)return b;if(hc(a))return a;var c=v(a),f=c.size;if(f===0)return b;L(f);return f>0&&f<e?mc(0,f,d,null,new jc(c.toArray())):b.withMutations(function(a){a.setSize(f),c.forEach(function(b,c){return a.set(c,b)})})}Q.of=function(){return this(arguments)};Q.prototype.toString=function(){return this.__toString("List [","]")};Q.prototype.get=function(a,b){a=o(this,a);if(a<0||a>=this.size)return b;a+=this._origin;b=sc(this,a);return b&&b.array[a&f]};Q.prototype.set=function(a,b){return pc(this,a,b)};Q.prototype.remove=function(a){return this.has(a)?a===0?this.shift():a===this.size-1?this.pop():this.splice(a,1):this};Q.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=d;this._root=this._tail=null;this.__hash=void 0;this.__altered=!0;return this}return oc()};Q.prototype.push=function(){var a=arguments,b=this.size;return this.withMutations(function(c){tc(c,0,b+a.length);for(var d=0;d<a.length;d++)c.set(b+d,a[d])})};Q.prototype.pop=function(){return tc(this,0,-1)};Q.prototype.unshift=function(){var a=arguments;return this.withMutations(function(b){tc(b,-a.length);for(var c=0;c<a.length;c++)b.set(c,a[c])})};Q.prototype.shift=function(){return tc(this,1)};Q.prototype.merge=function(){return uc(this,void 0,arguments)};Q.prototype.mergeWith=function(b){var c=a.call(arguments,1);return uc(this,b,c)};Q.prototype.mergeDeep=function(){return uc(this,Yb(void 0),arguments)};Q.prototype.mergeDeepWith=function(b){var c=a.call(arguments,1);return uc(this,Yb(b),c)};Q.prototype.setSize=function(a){return tc(this,0,a)};Q.prototype.slice=function(a,b){var c=this.size;return q(a,b,c)?this:tc(this,r(a,c),s(b,c))};Q.prototype.__iterator=function(a,b){var c=0,d=lc(this,b);return new C(function(){var b=d();return b===kc?E():D(a,c++,b)})};Q.prototype.__iterate=function(a,b){var c=0;b=lc(this,b);var d;while((d=b())!==kc)if(a(d,c++,this)===!1)break;return c};Q.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;if(!a){this.__ownerID=a;return this}return mc(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash)};function hc(a){return!!(a&&a[ic])}Q.isList=hc;var ic="@@__IMMUTABLE_LIST__@@",R=Q.prototype;R[ic]=!0;R[c]=R.remove;R.setIn=P.setIn;R.deleteIn=R.removeIn=P.removeIn;R.update=P.update;R.updateIn=P.updateIn;R.mergeIn=P.mergeIn;R.mergeDeepIn=P.mergeDeepIn;R.withMutations=P.withMutations;R.asMutable=P.asMutable;R.asImmutable=P.asImmutable;R.wasAltered=P.wasAltered;function jc(a,b){this.array=a,this.ownerID=b}jc.prototype.removeBefore=function(a,b,c){if(c===b?1<<b:this.array.length===0)return this;var e=c>>>b&f;if(e>=this.array.length)return new jc([],a);var g=e===0,h;if(b>0){var i=this.array[e];h=i&&i.removeBefore(a,b-d,c);if(h===i&&g)return this}if(g&&!h)return this;b=rc(this,a);if(!g)for(var c=0;c<e;c++)b.array[c]=void 0;h&&(b.array[e]=h);return b};jc.prototype.removeAfter=function(a,b,c){if(c===b?1<<b:this.array.length===0)return this;var e=c-1>>>b&f;if(e>=this.array.length)return this;var g=e===this.array.length-1,h;if(b>0){var i=this.array[e];h=i&&i.removeAfter(a,b-d,c);if(h===i&&g)return this}if(g&&!h)return this;b=rc(this,a);g||b.array.pop();h&&(b.array[e]=h);return b};var kc={};function lc(a,b){var c=a._origin,f=a._capacity,g=vc(f),h=a._tail;return i(a._root,a._level,0);function i(a,b,c){return b===0?j(a,c):k(a,b,c)}function j(a,d){var i=d===g?h&&h.array:a&&a.array,j=d>c?0:c-d,k=f-d;k>e&&(k=e);return function(){if(j===k)return kc;var a=b?--k:j++;return i&&i[a]}}function k(a,g,h){var j,k=a&&a.array,l=h>c?0:c-h>>g,m=(f-h>>g)+1;m>e&&(m=e);return function(){do{if(j){var a=j();if(a!==kc)return a;j=null}if(l===m)return kc;a=b?--m:l++;j=i(k&&k[a],g-d,h+(a<<g))}while(!0)}}}function mc(b,c,d,e,f,g,a){var h=Object.create(R);h.size=c-b;h._origin=b;h._capacity=c;h._level=d;h._root=e;h._tail=f;h.__ownerID=g;h.__hash=a;h.__altered=!1;return h}var nc;function oc(){return nc||(nc=mc(0,0,d))}function pc(a,b,c){b=o(a,b);if(b>=a.size||b<0)return a.withMutations(function(a){b<0?tc(a,b).set(0,c):tc(a,0,b+1).set(b,c)});b+=a._origin;var d=a._tail,e=a._root,f=j(i);b>=vc(a._capacity)?d=qc(d,a.__ownerID,0,b,c,f):e=qc(e,a.__ownerID,a._level,b,c,f);if(!f.value)return a;if(a.__ownerID){a._root=e;a._tail=d;a.__hash=void 0;a.__altered=!0;return a}return mc(a._origin,a._capacity,a._level,e,d)}function qc(a,b,c,e,g,h){var i=e>>>c&f,j=a&&i<a.array.length;if(!j&&g===void 0)return a;if(c>0){var l=a&&a.array[i];c=qc(l,b,c-d,e,g,h);if(c===l)return a;e=rc(a,b);e.array[i]=c;return e}if(j&&a.array[i]===g)return a;k(h);e=rc(a,b);g===void 0&&i===e.array.length-1?e.array.pop():e.array[i]=g;return e}function rc(a,b){return b&&a&&b===a.ownerID?a:new jc(a?a.array.slice():[],b)}function sc(a,b){if(b>=vc(a._capacity))return a._tail;if(b<1<<a._level+d){var c=a._root;a=a._level;while(c&&a>0)c=c.array[b>>>a&f],a-=d;return c}}function tc(a,b,c){var e=a.__ownerID||new l(),g=a._origin,h=a._capacity;b=g+b;c=c===void 0?h:c<0?h+c:g+c;if(b===g&&c===h)return a;if(b>=c)return a.clear();var i=a._level,j=a._root,k=0;while(b+k<0)j=new jc(j&&j.array.length?[void 0,j]:[],e),i+=d,k+=1<<i;k&&(b+=k,g+=k,c+=k,h+=k);var m=vc(h),n=vc(c);while(n>=1<<i+d)j=new jc(j&&j.array.length?[j]:[],e),i+=d;var o=a._tail,p=n<m?sc(a,c-1):n>m?new jc([],e):o;if(o&&n>m&&b<h&&o.array.length){j=rc(j,e);var q=j;for(var r=i;r>d;r-=d){var s=m>>>r&f;q=q.array[s]=rc(q.array[s],e)}q.array[m>>>d&f]=o}c<h&&(p=p&&p.removeAfter(e,0,c));if(b>=n)b-=n,c-=n,i=d,j=null,p=p&&p.removeBefore(e,0,b);else if(b>g||n<m){k=0;while(j){s=b>>>i&f;if(s!==n>>>i&f)break;s&&(k+=(1<<i)*s);i-=d;j=j.array[s]}j&&b>g&&(j=j.removeBefore(e,i,b-k));j&&n<m&&(j=j.removeAfter(e,i,n-k));k&&(b-=k,c-=k)}if(a.__ownerID){a.size=c-b;a._origin=b;a._capacity=c;a._level=i;a._root=j;a._tail=p;a.__hash=void 0;a.__altered=!0;return a}return mc(b,c,i,j,p)}function uc(a,b,c){var d=[],e=0;for(var f=0;f<c.length;f++){var g=c[f],h=v(g);h.size>e&&(e=h.size);x(g)||(h=h.map(function(a){return Ia(a)}));d.push(h)}e>a.size&&(a=a.setSize(e));return Zb(a,b,d)}function vc(a){return a<e?0:a-1>>>d<<d}b(S,O);function S(a){return a===null||a===void 0?zc():wc(a)?a:zc().withMutations(function(b){var c=u(a);L(c.size);c.forEach(function(a,c){return b.set(c,a)})})}S.of=function(){return this(arguments)};S.prototype.toString=function(){return this.__toString("OrderedMap {","}")};S.prototype.get=function(a,b){a=this._map.get(a);return a!==void 0?this._list.get(a)[1]:b};S.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this}return zc()};S.prototype.set=function(a,b){return Ac(this,a,b)};S.prototype.remove=function(a){return Ac(this,a,g)};S.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()};S.prototype.__iterate=function(a,b){var c=this;return this._list.__iterate(function(b){return b&&a(b[1],b[0],c)},b)};S.prototype.__iterator=function(a,b){return this._list.fromEntrySeq().__iterator(a,b)};S.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a),c=this._list.__ensureOwner(a);if(!a){this.__ownerID=a;this._map=b;this._list=c;return this}return xc(b,c,a,this.__hash)};function wc(a){return Db(a)&&ca(a)}S.isOrderedMap=wc;S.prototype[ga]=!0;S.prototype[c]=S.prototype.remove;function xc(b,c,d,a){var e=Object.create(S.prototype);e.size=b?b.size:0;e._map=b;e._list=c;e.__ownerID=d;e.__hash=a;return e}var yc;function zc(){return yc||(yc=xc(Pb(),oc()))}function Ac(a,b,c){var d=a._map,f=a._list,h=d.get(b),i=h!==void 0,j,k;if(c===g){if(!i)return a;f.size>=e&&f.size>=d.size*2?(k=f.filter(function(a,b){return a!==void 0&&h!==b}),j=k.toKeyedSeq().map(function(a){return a[0]}).flip().toMap(),a.__ownerID&&(j.__ownerID=k.__ownerID=a.__ownerID)):(j=d.remove(b),k=h===f.size-1?f.pop():f.set(h,void 0))}else if(i){if(c===f.get(h)[1])return a;j=d;k=f.set(h,[b,c])}else j=d.set(b,f.size),k=f.set(f.size,[b,c]);if(a.__ownerID){a.size=j.size;a._map=j;a._list=k;a.__hash=void 0;return a}return xc(j,k)}b(T,Ga);function T(a){return a===null||a===void 0?Gc():Bc(a)?a:Gc().unshiftAll(a)}T.of=function(){return this(arguments)};T.prototype.toString=function(){return this.__toString("Stack [","]")};T.prototype.get=function(a,b){var c=this._head;a=o(this,a);while(c&&a--)c=c.next;return c?c.value:b};T.prototype.peek=function(){return this._head&&this._head.value};T.prototype.push=function(){if(arguments.length===0)return this;var a=this.size+arguments.length,b=this._head;for(var c=arguments.length-1;c>=0;c--)b={value:arguments[c],next:b};if(this.__ownerID){this.size=a;this._head=b;this.__hash=void 0;this.__altered=!0;return this}return Ec(a,b)};T.prototype.pushAll=function(a){a=v(a);if(a.size===0)return this;L(a.size);var b=this.size,c=this._head;a.reverse().forEach(function(a){b++,c={value:a,next:c}});if(this.__ownerID){this.size=b;this._head=c;this.__hash=void 0;this.__altered=!0;return this}return Ec(b,c)};T.prototype.pop=function(){return this.slice(1)};T.prototype.unshift=function(){return this.push.apply(this,arguments)};T.prototype.unshiftAll=function(a){return this.pushAll(a)};T.prototype.shift=function(){return this.pop.apply(this,arguments)};T.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._head=void 0;this.__hash=void 0;this.__altered=!0;return this}return Gc()};T.prototype.slice=function(a,b){if(q(a,b,this.size))return this;var c=r(a,this.size),d=s(b,this.size);if(d!==this.size)return Ga.prototype.slice.call(this,a,b);d=this.size-c;a=this._head;while(c--)a=a.next;if(this.__ownerID){this.size=d;this._head=a;this.__hash=void 0;this.__altered=!0;return this}return Ec(d,a)};T.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;if(!a){this.__ownerID=a;this.__altered=!1;return this}return Ec(this.size,this._head,a,this.__hash)};T.prototype.__iterate=function(a,b){if(b)return this.reverse().__iterate(a);b=0;var c=this._head;while(c){if(a(c.value,b++,this)===!1)break;c=c.next}return b};T.prototype.__iterator=function(a,b){if(b)return this.reverse().__iterator(a);var c=0,d=this._head;return new C(function(){if(d){var b=d.value;d=d.next;return D(a,c++,b)}return E()})};function Bc(a){return!!(a&&a[Cc])}T.isStack=Bc;var Cc="@@__IMMUTABLE_STACK__@@",Dc=T.prototype;Dc[Cc]=!0;Dc.withMutations=P.withMutations;Dc.asMutable=P.asMutable;Dc.asImmutable=P.asImmutable;Dc.wasAltered=P.wasAltered;function Ec(b,c,d,a){var e=Object.create(Dc);e.size=b;e._head=c;e.__ownerID=d;e.__hash=a;e.__altered=!1;return e}var Fc;function Gc(){return Fc||(Fc=Ec(0))}b(U,Ha);function U(a){return a===null||a===void 0?Mc():Hc(a)?a:Mc().withMutations(function(b){var c=w(a);L(c.size);c.forEach(function(a){return b.add(a)})})}U.of=function(){return this(arguments)};U.fromKeys=function(a){return this(u(a).keySeq())};U.prototype.toString=function(){return this.__toString("Set {","}")};U.prototype.has=function(a){return this._map.has(a)};U.prototype.add=function(a){return Jc(this,this._map.set(a,!0))};U.prototype.remove=function(a){return Jc(this,this._map.remove(a))};U.prototype.clear=function(){return Jc(this,this._map.clear())};U.prototype.union=function(){var b=a.call(arguments,0);b=b.filter(function(a){return a.size!==0});if(b.length===0)return this;return this.size===0&&!this.__ownerID&&b.length===1?this.constructor(b[0]):this.withMutations(function(a){for(var c=0;c<b.length;c++)w(b[c]).forEach(function(b){return a.add(b)})})};U.prototype.intersect=function(){var b=a.call(arguments,0);if(b.length===0)return this;b=b.map(function(a){return w(a)});var c=this;return this.withMutations(function(a){c.forEach(function(c){b.every(function(a){return a.includes(c)})||a.remove(c)})})};U.prototype.subtract=function(){var b=a.call(arguments,0);if(b.length===0)return this;b=b.map(function(a){return w(a)});var c=this;return this.withMutations(function(a){c.forEach(function(c){b.some(function(a){return a.includes(c)})&&a.remove(c)})})};U.prototype.merge=function(){return this.union.apply(this,arguments)};U.prototype.mergeWith=function(b){var c=a.call(arguments,1);return this.union.apply(this,c)};U.prototype.sort=function(a){return Nc(sb(this,a))};U.prototype.sortBy=function(a,b){return Nc(sb(this,b,a))};U.prototype.wasAltered=function(){return this._map.wasAltered()};U.prototype.__iterate=function(a,b){var c=this;return this._map.__iterate(function(b,d){return a(d,d,c)},b)};U.prototype.__iterator=function(a,b){return this._map.map(function(a,b){return b}).__iterator(a,b)};U.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a);if(!a){this.__ownerID=a;this._map=b;return this}return this.__make(b,a)};function Hc(a){return!!(a&&a[Ic])}U.isSet=Hc;var Ic="@@__IMMUTABLE_SET__@@",V=U.prototype;V[Ic]=!0;V[c]=V.remove;V.mergeDeep=V.merge;V.mergeDeepWith=V.mergeWith;V.withMutations=P.withMutations;V.asMutable=P.asMutable;V.asImmutable=P.asImmutable;V.__empty=Mc;V.__make=Kc;function Jc(a,b){if(a.__ownerID){a.size=b.size;a._map=b;return a}return b===a._map?a:b.size===0?a.__empty():a.__make(b)}function Kc(a,b){var c=Object.create(V);c.size=a?a.size:0;c._map=a;c.__ownerID=b;return c}var Lc;function Mc(){return Lc||(Lc=Kc(Pb()))}b(Nc,U);function Nc(a){return a===null||a===void 0?Sc():Oc(a)?a:Sc().withMutations(function(b){var c=w(a);L(c.size);c.forEach(function(a){return b.add(a)})})}Nc.of=function(){return this(arguments)};Nc.fromKeys=function(a){return this(u(a).keySeq())};Nc.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Oc(a){return Hc(a)&&ca(a)}Nc.isOrderedSet=Oc;var Pc=Nc.prototype;Pc[ga]=!0;Pc.__empty=Sc;Pc.__make=Qc;function Qc(a,b){var c=Object.create(Pc);c.size=a?a.size:0;c._map=a;c.__ownerID=b;return c}var Rc;function Sc(){return Rc||(Rc=Qc(zc()))}b(W,Fa);function W(a,b){var c,d=function(f){if(f instanceof d)return f;if(!(this instanceof d))return new d(f);if(!c){c=!0;var g=Object.keys(a);Vc(e,g);e.size=g.length;e._name=b;e._keys=g;e._defaultValues=a}this._map=O(f)},e=d.prototype=Object.create(X);e.constructor=d;return d}W.prototype.toString=function(){return this.__toString(Uc(this)+" {","}")};W.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)};W.prototype.get=function(a,b){if(!this.has(a))return b;b=this._defaultValues[a];return this._map?this._map.get(a,b):b};W.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this}var a=this.constructor;return a._empty||(a._empty=Tc(this,Pb()))};W.prototype.set=function(a,b){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+Uc(this));a=this._map&&this._map.set(a,b);return this.__ownerID||a===this._map?this:Tc(this,a)};W.prototype.remove=function(a){if(!this.has(a))return this;a=this._map&&this._map.remove(a);return this.__ownerID||a===this._map?this:Tc(this,a)};W.prototype.wasAltered=function(){return this._map.wasAltered()};W.prototype.__iterator=function(a,b){var c=this;return u(this._defaultValues).map(function(a,b){return c.get(b)}).__iterator(a,b)};W.prototype.__iterate=function(a,b){var c=this;return u(this._defaultValues).map(function(a,b){return c.get(b)}).__iterate(a,b)};W.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map&&this._map.__ensureOwner(a);if(!a){this.__ownerID=a;this._map=b;return this}return Tc(this,b,a)};var X=W.prototype;X[c]=X.remove;X.deleteIn=X.removeIn=P.removeIn;X.merge=P.merge;X.mergeWith=P.mergeWith;X.mergeIn=P.mergeIn;X.mergeDeep=P.mergeDeep;X.mergeDeepWith=P.mergeDeepWith;X.mergeDeepIn=P.mergeDeepIn;X.setIn=P.setIn;X.update=P.update;X.updateIn=P.updateIn;X.withMutations=P.withMutations;X.asMutable=P.asMutable;X.asImmutable=P.asImmutable;function Tc(a,b,c){a=Object.create(Object.getPrototypeOf(a));a._map=b;a.__ownerID=c;return a}function Uc(a){return a._name||a.constructor.name||"Record"}function Vc(a,b){try{b.forEach(Wc.bind(void 0,a))}catch(a){}}function Wc(a,b){Object.defineProperty(a,b,{get:function(){return this.get(b)},set:function(a){bb(this.__ownerID,"Cannot set on an immutable record."),this.set(b,a)}})}function Xc(a,b){if(a===b)return!0;if(!x(b)||a.size!==void 0&&b.size!==void 0&&a.size!==b.size||a.__hash!==void 0&&b.__hash!==void 0&&a.__hash!==b.__hash||y(a)!==y(b)||z(a)!==z(b)||ca(a)!==ca(b))return!1;if(a.size===0&&b.size===0)return!0;var c=!ba(a);if(ca(a)){var d=a.entries();return b.every(function(a,b){var e=d.next().value;return e&&J(e[1],a)&&(c||J(e[0],b))})&&d.next().done}var e=!1;if(a.size===void 0)if(b.size===void 0)typeof a.cacheResult==="function"&&a.cacheResult();else{e=!0;var f=a;a=b;b=f}f=!0;b=b.__iterate(function(b,d){if(c?!a.has(b):e?!J(b,a.get(d,g)):!J(a.get(d,g),b)){f=!1;return!1}});return f&&a.size===b}b(Y,H);function Y(a,b,c){if(!(this instanceof Y))return new Y(a,b,c);bb(c!==0,"Cannot step a Range by 0");a=a||0;b===void 0&&(b=Infinity);c=c===void 0?1:Math.abs(c);b<a&&(c=-c);this._start=a;this._end=b;this._step=c;this.size=Math.max(0,Math.ceil((b-a)/c-1)+1);if(this.size===0){if(Yc)return Yc;Yc=this}}Y.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"};Y.prototype.get=function(a,b){return this.has(a)?this._start+o(this,a)*this._step:b};Y.prototype.includes=function(a){a=(a-this._start)/this._step;return a>=0&&a<this.size&&a===Math.floor(a)};Y.prototype.slice=function(a,b){if(q(a,b,this.size))return this;a=r(a,this.size);b=s(b,this.size);return b<=a?new Y(0,0):new Y(this.get(a,this._end),this.get(b,this._end),this._step)};Y.prototype.indexOf=function(a){a=a-this._start;if(a%this._step===0){a=a/this._step;if(a>=0&&a<this.size)return a}return-1};Y.prototype.lastIndexOf=function(a){return this.indexOf(a)};Y.prototype.__iterate=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start;for(var f=0;f<=c;f++){if(a(e,f,this)===!1)return f+1;e+=b?-d:d}return f};Y.prototype.__iterator=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;return new C(function(){var g=e;e+=b?-d:d;return f>c?E():D(a,f++,g)})};Y.prototype.equals=function(a){return a instanceof Y?this._start===a._start&&this._end===a._end&&this._step===a._step:Xc(this,a)};var Yc;b(Z,H);function Z(a,b){if(!(this instanceof Z))return new Z(a,b);this._value=a;this.size=b===void 0?Infinity:Math.max(0,b);if(this.size===0){if(Zc)return Zc;Zc=this}}Z.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"};Z.prototype.get=function(a,b){return this.has(a)?this._value:b};Z.prototype.includes=function(a){return J(this._value,a)};Z.prototype.slice=function(a,b){var c=this.size;return q(a,b,c)?this:new Z(this._value,s(b,c)-r(a,c))};Z.prototype.reverse=function(){return this};Z.prototype.indexOf=function(a){return J(this._value,a)?0:-1};Z.prototype.lastIndexOf=function(a){return J(this._value,a)?this.size:-1};Z.prototype.__iterate=function(a,b){for(var b=0;b<this.size;b++)if(a(this._value,b,this)===!1)return b+1;return b};Z.prototype.__iterator=function(a,b){var c=this,d=0;return new C(function(){return d<c.size?D(a,d++,c._value):E()})};Z.prototype.equals=function(a){return a instanceof Z?J(this._value,a._value):Xc(a)};var Zc;function $c(a,b){var c=function(c){a.prototype[c]=b[c]};Object.keys(b).forEach(c);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(b).forEach(c);return a}t.Iterator=C;$c(t,{toArray:function(){L(this.size);var a=new Array(this.size||0);this.valueSeq().__iterate(function(b,c){a[c]=b});return a},toIndexedSeq:function(){return new cb(this)},toJS:function(){return this.toSeq().map(function(a){return a&&typeof a.toJS==="function"?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&typeof a.toJSON==="function"?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new M(this,!0)},toMap:function(){return O(this.toKeyedSeq())},toObject:function(){L(this.size);var a={};this.__iterate(function(b,c){a[c]=b});return a},toOrderedMap:function(){return S(this.toKeyedSeq())},toOrderedSet:function(){return Nc(y(this)?this.valueSeq():this)},toSet:function(){return U(y(this)?this.valueSeq():this)},toSetSeq:function(){return new db(this)},toSeq:function(){return z(this)?this.toIndexedSeq():y(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return T(y(this)?this.valueSeq():this)},toList:function(){return Q(y(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,b){return this.size===0?a+b:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+b},concat:function(){var b=a.call(arguments,0);return N(this,ob(this,b))},contains:function(a){return this.includes(a)},includes:function(a){return this.some(function(b){return J(b,a)})},entries:function(){return this.__iterator(B)},every:function(a,b){L(this.size);var c=!0;this.__iterate(function(d,e,f){if(!a.call(b,d,e,f)){c=!1;return!1}});return c},filter:function(a,b){return N(this,ib(this,a,b,!0))},find:function(a,b,c){a=this.findEntry(a,b);return a?a[1]:c},findEntry:function(a,b){var c;this.__iterate(function(d,e,f){if(a.call(b,d,e,f)){c=[e,d];return!1}});return c},findLastEntry:function(a,b){return this.toSeq().reverse().findEntry(a,b)},forEach:function(a,b){L(this.size);return this.__iterate(b?a.bind(b):a)},join:function(a){L(this.size);a=a!==void 0?""+a:",";var b="",c=!0;this.__iterate(function(d){c?c=!1:b+=a,b+=d!==null&&d!==void 0?d.toString():""});return b},keys:function(){return this.__iterator(ha)},map:function(a,b){return N(this,gb(this,a,b))},reduce:function(a,b,c){L(this.size);var d,e;arguments.length<2?e=!0:d=b;this.__iterate(function(b,f,g){e?(e=!1,d=b):d=a.call(c,d,b,f,g)});return d},reduceRight:function(a,b,c){var d=this.toKeyedSeq().reverse();return d.reduce.apply(d,arguments)},reverse:function(){return N(this,hb(this,!0))},slice:function(a,b){return N(this,lb(this,a,b,!0))},some:function(a,b){return!this.every(cd(a),b)},sort:function(a){return N(this,sb(this,a))},values:function(){return this.__iterator(A)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(a,b){return n(a?this.toSeq().filter(a,b):this)},countBy:function(a,b){return jb(this,a,b)},equals:function(a){return Xc(this,a)},entrySeq:function(){var a=this;if(a._cache)return new ra(a._cache);var b=a.toSeq().map(bd).toIndexedSeq();b.fromEntrySeq=function(){return a.toSeq()};return b},filterNot:function(a,b){return this.filter(cd(a),b)},findLast:function(a,b,c){return this.toKeyedSeq().reverse().find(a,b,c)},first:function(){return this.find(p)},flatMap:function(a,b){return N(this,qb(this,a,b))},flatten:function(a){return N(this,pb(this,a,!0))},fromEntrySeq:function(){return new eb(this)},get:function(a,b){return this.find(function(b,c){return J(c,a)},void 0,b)},getIn:function(a,b){var c=this;a=Cb(a);var d;while(!(d=a.next()).done){d=d.value;c=c&&c.get?c.get(d,g):g;if(c===g)return b}return c},groupBy:function(a,b){return kb(this,a,b)},has:function(a){return this.get(a,g)!==g},hasIn:function(a){return this.getIn(a,g)!==g},isSubset:function(a){a=typeof a.includes==="function"?a:t(a);return this.every(function(b){return a.includes(b)})},isSuperset:function(a){return a.isSubset(this)},keySeq:function(){return this.toSeq().map(ad).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(a){return tb(this,a)},maxBy:function(a,b){return tb(this,b,a)},min:function(a){return tb(this,a?dd(a):gd)},minBy:function(a,b){return tb(this,b?dd(b):gd,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return N(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,b){return N(this,nb(this,a,b,!0))},skipUntil:function(a,b){return this.skipWhile(cd(a),b)},sortBy:function(a,b){return N(this,sb(this,b,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return N(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,b){return N(this,mb(this,a,b))},takeUntil:function(a,b){return this.takeWhile(cd(a),b)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hd(this))}});var $=t.prototype;$[da]=!0;$[ka]=$.values;$.__toJS=$.toArray;$.__toStringMapper=ed;$.inspect=$.toSource=function(){return this.toString()};$.chain=$.flatMap;(function(){try{Object.defineProperty($,"length",{get:function(){if(!t.noLengthWarning){var a;try{throw new Error()}catch(b){a=b.stack}if(a.indexOf("_wrapObject")===-1){console&&emptyFunction&&!1;return this.size}}}})}catch(a){}})();$c(u,{flip:function(){return N(this,fb(this))},findKey:function(a,b){a=this.findEntry(a,b);return a&&a[0]},findLastKey:function(a,b){return this.toSeq().reverse().findKey(a,b)},keyOf:function(a){return this.findKey(function(b){return J(b,a)})},lastKeyOf:function(a){return this.findLastKey(function(b){return J(b,a)})},mapEntries:function(a,b){var c=this,d=0;return N(this,this.toSeq().map(function(e,f){return a.call(b,[f,e],d++,c)}).fromEntrySeq())},mapKeys:function(a,b){var c=this;return N(this,this.toSeq().flip().map(function(d,e){return a.call(b,d,e,c)}).flip())}});c=u.prototype;c[ea]=!0;c[ka]=$.entries;c.__toJS=$.toObject;c.__toStringMapper=function(a,b){return JSON.stringify(b)+": "+ed(a)};$c(v,{toKeyedSeq:function(){return new M(this,!1)},filter:function(a,b){return N(this,ib(this,a,b,!1))},findIndex:function(a,b){a=this.findEntry(a,b);return a?a[0]:-1},indexOf:function(a){a=this.toKeyedSeq().keyOf(a);return a===void 0?-1:a},lastIndexOf:function(a){return this.toSeq().reverse().indexOf(a)},reverse:function(){return N(this,hb(this,!1))},slice:function(a,b){return N(this,lb(this,a,b,!1))},splice:function(a,b){var c=arguments.length;b=Math.max(b|0,0);if(c===0||c===2&&!b)return this;a=r(a,this.size);var d=this.slice(0,a);return N(this,c===1?d:d.concat(m(arguments,2),this.slice(a+b)))},findLastIndex:function(a,b){a=this.toKeyedSeq().findLastKey(a,b);return a===void 0?-1:a},first:function(){return this.get(0)},flatten:function(a){return N(this,pb(this,a,!1))},get:function(a,b){a=o(this,a);return a<0||this.size===Infinity||this.size!==void 0&&a>this.size?b:this.find(function(b,c){return c===a},void 0,b)},has:function(a){a=o(this,a);return a>=0&&(this.size!==void 0?this.size===Infinity||a<this.size:this.indexOf(a)!==-1)},interpose:function(a){return N(this,rb(this,a))},interleave:function(){var a=[this].concat(m(arguments)),b=vb(this.toSeq(),H.of,a),c=b.flatten(!0);b.size&&(c.size=b.size*a.length);return N(this,c)},last:function(){return this.get(-1)},skipWhile:function(a,b){return N(this,nb(this,a,b,!1))},zip:function(){var a=[this].concat(m(arguments));return N(this,vb(this,fd,a))},zipWith:function(a){var b=m(arguments);b[0]=this;return N(this,vb(this,a,b))}});v.prototype[fa]=!0;v.prototype[ga]=!0;$c(w,{get:function(a,b){return this.has(a)?a:b},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}});w.prototype.has=$.includes;$c(G,u.prototype);$c(H,v.prototype);$c(I,w.prototype);$c(Fa,u.prototype);$c(Ga,v.prototype);$c(Ha,w.prototype);function ad(a,b){return b}function bd(a,b){return[b,a]}function cd(a){return function(){return!a.apply(this,arguments)}}function dd(a){return function(){return-a.apply(this,arguments)}}function ed(a){return typeof a==="string"?JSON.stringify(a):a}function fd(){return m(arguments)}function gd(a,b){return a<b?1:a>b?-1:0}function hd(a){if(a.size===Infinity)return 0;var b=ca(a),c=y(a),d=b?1:0;a=a.__iterate(c?b?function(a,b){d=31*d+jd(K(a),K(b))|0}:function(a,b){d=d+jd(K(a),K(b))|0}:b?function(a){d=31*d+K(a)|0}:function(a){d=d+K(a)|0});return id(a,d)}function id(a,b){b=Ma(b,3432918353);b=Ma(b<<15|b>>>-15,461845907);b=Ma(b<<13|b>>>-13,5);b=(b+3864292196|0)^a;b=Ma(b^b>>>16,2246822507);b=Ma(b^b>>>13,3266489909);b=Na(b^b>>>16);return b}function jd(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}b={Iterable:t,Seq:F,Collection:Ea,Map:O,OrderedMap:S,List:Q,Stack:T,Set:U,OrderedSet:Nc,Record:W,Range:Y,Repeat:Z,is:J,fromJS:Ia};return b})}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}e.exports=a}),null);
__d("getRangeClientRects",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";c=b("UserAgent").isBrowser("Chrome");function a(a){var b=a.cloneRange(),c=[];for(var d=a.endContainer;d!=null;d=d.parentNode){var e=d===a.commonAncestorContainer;e?b.setStart(a.startContainer,a.startOffset):b.setStart(b.endContainer,0);var f=Array.from(b.getClientRects());c.push(f);if(e){c.reverse();return(f=[]).concat.apply(f,c)}b.setEndBefore(d)}g(0,578)}d=c?a:function(a){return Array.from(a.getClientRects())};e.exports=d}),null);
__d("KeyBindingUtil",["UserAgent","isSoftNewlineEvent"],(function(a,b,c,d,e,f){"use strict";var g=b("UserAgent").isPlatform("Mac OS X"),h={isCtrlKeyCommand:function(a){return!!a.ctrlKey&&!a.altKey},isOptionKeyCommand:function(a){return g&&a.altKey},usesMacOSHeuristics:function(){return g},hasCommandModifier:function(a){return g?!!a.metaKey&&!a.altKey:h.isCtrlKeyCommand(a)},isSoftNewlineEvent:b("isSoftNewlineEvent")};e.exports=h}),null);
__d("getDefaultKeyBinding",["KeyBindingUtil","Keys","UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=b("UserAgent").isPlatform("Mac OS X"),h=g&&b("UserAgent").isBrowser("Firefox < 29"),i=b("KeyBindingUtil").hasCommandModifier,j=b("KeyBindingUtil").isCtrlKeyCommand;function k(a){return g&&a.altKey||j(a)}function l(a){return!i(a)?null:a.shiftKey?"redo":"undo"}function m(a){return!g&&a.shiftKey?null:k(a)?"delete-word":"delete"}function n(a){return i(a)&&g?"backspace-to-start-of-line":k(a)?"backspace-word":"backspace"}function a(a){switch(a.keyCode){case 66:return i(a)?"bold":null;case 68:return j(a)?"delete":null;case 72:return j(a)?"backspace":null;case 73:return i(a)?"italic":null;case 74:return i(a)?"code":null;case 75:return g&&j(a)?"secondary-cut":null;case 77:return j(a)?"split-block":null;case 79:return j(a)?"split-block":null;case 84:return g&&j(a)?"transpose-characters":null;case 85:return i(a)?"underline":null;case 87:return g&&j(a)?"backspace-word":null;case 89:return j(a)?g?"secondary-paste":"redo":null;case 90:return l(a)||null;case b("Keys").RETURN:return"split-block";case b("Keys").DELETE:return m(a);case b("Keys").BACKSPACE:return n(a);case b("Keys").LEFT:return h&&i(a)?"move-selection-to-start-of-block":null;case b("Keys").RIGHT:return h&&i(a)?"move-selection-to-end-of-block":null;default:return null}}e.exports=a}),null);
__d("CompositeDraftDecorator",["immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List,h=".";a=function(){function a(a){this.$1=a.slice()}var b=a.prototype;b.getDecorations=function(a,b){var c=Array(a.getText().length).fill(null);this.$1.forEach(function(d,e){var f=0;d=d.strategy;var g=function(a,b){i(c,a,b)&&(j(c,a,b,e+h+f),f++)};d(a,g,b)});return g(c)};b.getComponentForKey=function(a){a=parseInt(a.split(h)[0],10);return this.$1[a].component};b.getPropsForKey=function(a){a=parseInt(a.split(h)[0],10);return this.$1[a].props};return a}();function i(a,b,c){for(var b=b;b<c;b++)if(a[b]!=null)return!1;return!0}function j(a,b,c,d){for(var b=b;b<c;b++)a[b]=d}e.exports=a}),null);
__d("DefaultDraftBlockRenderMap",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=b("immutable").Map;d=a.jsx("ul",{className:"_1bv0"});f=a.jsx("ol",{className:"_1bv1"});g=a.jsx("pre",{className:"_1bv2"});b=c({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:d},"ordered-list-item":{element:"li",wrapper:f},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:g},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=b}),null);
__d("adjustBlockDepthForContentState",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=b.getStartKey(),f=b.getEndKey(),g=a.getBlockMap(),h=g.toSeq().skipUntil(function(a,b){return b===e}).takeUntil(function(a,b){return b===f}).concat([[f,g.get(f)]]).map(function(a){var b=a.getDepth()+c;b=Math.max(0,Math.min(b,d));return a.set("depth",b)});g=g.merge(h);return a.merge({blockMap:g,selectionBefore:b,selectionAfter:b})}e.exports=a}),null);
__d("RichTextEditorUtil",["DraftModifier","EditorState","adjustBlockDepthForContentState","nullthrows"],(function(a,b,c,d,e,f){"use strict";var g={currentBlockContainsLink:function(a){var b=a.getSelection();a=a.getCurrentContent();var c=a.getEntityMap();return a.getBlockForKey(b.getAnchorKey()).getCharacterList().slice(b.getStartOffset(),b.getEndOffset()).some(function(a){a=a.getEntity();return!!a&&c.__get(a).getType()==="LINK"})},getCurrentBlockType:function(a){var b=a.getSelection();return a.getCurrentContent().getBlockForKey(b.getStartKey()).getType()},getDataObjectForLinkURL:function(a){return{url:a.toString()}},handleKeyCommand:function(a,b,c){switch(b){case"bold":return g.toggleInlineStyle(a,"BOLD");case"italic":return g.toggleInlineStyle(a,"ITALIC");case"underline":return g.toggleInlineStyle(a,"UNDERLINE");case"code":return g.toggleCode(a);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return g.onBackspace(a);case"delete":case"delete-word":case"delete-to-end-of-block":return g.onDelete(a);default:return null}},insertSoftNewline:function(a){var c=b("DraftModifier").insertText(a.getCurrentContent(),a.getSelection(),"\n",a.getCurrentInlineStyle(),null);a=b("EditorState").push(a,c,"insert-characters");return b("EditorState").forceSelection(a,c.getSelectionAfter())},onBackspace:function(a){var c=a.getSelection();if(!c.isCollapsed()||c.getAnchorOffset()||c.getFocusOffset())return null;var d=a.getCurrentContent(),e=c.getStartKey();e=d.getBlockBefore(e);if(e&&e.getType()==="atomic"){e=d.getBlockMap()["delete"](e.getKey());e=d.merge({blockMap:e,selectionAfter:c});if(e!==d)return b("EditorState").push(a,e,"remove-range")}c=g.tryToRemoveBlockStyle(a);return c?b("EditorState").push(a,c,"change-block-type"):null},onDelete:function(a){var c=a.getSelection();if(!c.isCollapsed())return null;var d=a.getCurrentContent(),e=c.getStartKey(),f=d.getBlockForKey(e);f=f.getLength();if(c.getStartOffset()<f)return null;f=d.getBlockAfter(e);if(!f||f.getType()!=="atomic")return null;e=c.merge({focusKey:f.getKey(),focusOffset:f.getLength()});c=b("DraftModifier").removeRange(d,e,"forward");return c!==d?b("EditorState").push(a,c,"remove-range"):null},onTab:function(a,c,d){var e=c.getSelection(),f=e.getAnchorKey();if(f!==e.getFocusKey())return c;var g=c.getCurrentContent();f=g.getBlockForKey(f);var h=f.getType();if(h!=="unordered-list-item"&&h!=="ordered-list-item")return c;a.preventDefault();h=f.getDepth();if(!a.shiftKey&&h===d)return c;f=b("adjustBlockDepthForContentState")(g,e,a.shiftKey?-1:1,d);return b("EditorState").push(c,f,"adjust-depth")},toggleBlockType:function(a,c){var d=a.getSelection(),e=d.getStartKey(),f=d.getEndKey(),g=a.getCurrentContent(),h=d;if(e!==f&&d.getEndOffset()===0){var i=b("nullthrows")(g.getBlockBefore(f));f=i.getKey();h=h.merge({anchorKey:e,anchorOffset:d.getStartOffset(),focusKey:f,focusOffset:i.getLength(),isBackward:!1})}d=g.getBlockMap().skipWhile(function(a,b){return b!==e}).reverse().skipWhile(function(a,b){return b!==f}).some(function(a){return a.getType()==="atomic"});if(d)return a;i=g.getBlockForKey(e).getType()===c?"unstyled":c;return b("EditorState").push(a,b("DraftModifier").setBlockType(g,h,i),"change-block-type")},toggleCode:function(a){var b=a.getSelection(),c=b.getAnchorKey(),d=b.getFocusKey();return b.isCollapsed()||c!==d?g.toggleBlockType(a,"code-block"):g.toggleInlineStyle(a,"CODE")},toggleInlineStyle:function(a,c){var d=a.getSelection(),e=a.getCurrentInlineStyle();if(d.isCollapsed())return b("EditorState").setInlineStyleOverride(a,e.has(c)?e.remove(c):e.add(c));var f=a.getCurrentContent();e.has(c)?e=b("DraftModifier").removeInlineStyle(f,d,c):e=b("DraftModifier").applyInlineStyle(f,d,c);return b("EditorState").push(a,e,"change-inline-style")},toggleLink:function(a,c,d){c=b("DraftModifier").applyEntity(a.getCurrentContent(),c,d);return b("EditorState").push(a,c,"apply-entity")},tryToRemoveBlockStyle:function(a){var c=a.getSelection(),d=c.getAnchorOffset();if(c.isCollapsed()&&d===0){d=c.getAnchorKey();a=a.getCurrentContent();var e=a.getBlockForKey(d);e=e.getType();d=a.getBlockBefore(d);if(e==="code-block"&&d&&d.getType()==="code-block"&&d.getLength()!==0)return null;if(e!=="unstyled")return b("DraftModifier").setBlockType(a,c,"unstyled")}return null}};e.exports=g}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={FileAttachment:"file_attachment",AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("JsDictReadOnly.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";function a(a){return Object.keys(a)}function c(a){return a}d=b("bs_js_dict").get;e=b("bs_js_dict").entries;b=b("bs_js_dict").values;f.from=c;f.get=d;f.keys=a;f.entries=e;f.values=b}),null);
__d("MercuryParticipantListRenderer",["fbt","MercuryIDs"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.$6=function(c){var d=a.$5;if(d!=null){var e=b("MercuryIDs").getUserIDFromParticipantID(c.id);if(e!=null&&d[e]!=null&&d[e]!=void 0)return d[e]}return a.$2?c.short_name:c.name};this.$1=!1;this.$2=!1;this.$3=!1;this.$4=0;this.$5=null}var c=a.prototype;c.renderParticipantList=function(a){a=a.map(this.$6);switch(a.length){case 0:return h(this.$1);case 1:return i(a);case 2:return this.$3?k(a):j(a);case 3:return this.$3?m(a):l(a);default:return this.$3?o(a,this.$4):n(a,this.$4)}};c.setIsNewThread=function(a){this.$1=a;return this};c.setNameRenderer=function(a){this.$6=a;return this};c.setUseShortName=function(a){this.$2=a;return this};c.setNickname=function(a){this.$5=a;return this};c.setUseAndSeparator=function(a){this.$3=a;return this};c.setTotalParticipantCount=function(a){this.$4=a;return this};return a}();function h(a){if(a)return g._("New Message");else return g._("No Participants")}function i(a){return a[0]}function j(a){return g._("{participant1}, {participant2}",[g._param("participant1",a[0]),g._param("participant2",a[1])])}function k(a){return g._("{participant1} and {participant2}",[g._param("participant1",a[0]),g._param("participant2",a[1])])}function l(a){return g._("{participant1}, {participant2}, {participant3}",[g._param("participant1",a[0]),g._param("participant2",a[1]),g._param("participant3",a[2])])}function m(a){return g._("{participant1}, {participant2} and {participant3}",[g._param("participant1",a[0]),g._param("participant2",a[1]),g._param("participant3",a[2])])}function n(a,b){return g._("{participant1}, {participant2}, {participant3}, {others_link}",[g._param("participant1",a[0]),g._param("participant2",a[1]),g._param("participant3",a[2]),g._param("others_link",p((b||a.length)-3))])}function o(a,b){return g._("{participant1}, {participant2} and {others_link}",[g._param("participant1",a[0]),g._param("participant2",a[1]),g._param("others_link",p((b||a.length)-2))])}function p(a){if(a>1)return g._({"*":"{others_count} others"},[g._param("others_count",a,[0])]);else return g._("1 other")}e.exports=a}),null);
__d("bs_js_int",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a===b}b=2147483647;c=-2147483648;f.equal=a;f.max=b;f.min=c}),null);
__d("bs_js_math",["bs_js_int"],(function(a,b,c,d,e,f){"use strict";function a(a){return Math.ceil(a)}function c(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.ceil(a)}function d(a){return Math.floor(a)}function g(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.floor(a)}function e(a,b){return g(Math.random()*(b-a|0))+a|0}var h=c,i=g;f.unsafe_ceil=a;f.ceil_int=c;f.ceil=h;f.unsafe_floor=d;f.floor_int=g;f.floor=i;f.random_int=e}),null);
__d("bs_belt_Array",["bs_curry","bs_js_math","bs_caml_option","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c>=0&&c<a.length)return b("bs_caml_option").some(a[c])}function c(a,b){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 25, characters 6-12');return a[b]}function d(a,b,c){if(b>=0&&b<a.length){a[b]=c;return!0}else return!1}function e(a,b,c){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 31, characters 4-10');a[b]=c;return 0}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d;return 0}function h(a){var c=a.length;for(var d=0,e=c-1|0;d<=e;++d)g(a,d,b("bs_js_math").random_int(d,c));return 0}function i(a){a=a.slice(0);h(a);return a}function j(a){var b=a.length;a=a;var c=0;b=b;for(var d=0,e=(b/2|0)-1|0;d<=e;++d)g(a,c+d|0,((c+b|0)-d|0)-1|0);return 0}function k(a){var b=a.length,c=new Array(b);for(var d=0,e=b-1|0;d<=e;++d)c[d]=a[(b-1|0)-d|0];return c}function l(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}}function m(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b(d);return c}}function n(a,c){return m(a,b("bs_curry").__1(c))}function o(a,b){a=m(a,b);h(a);return a}function p(a,c){return o(a,b("bs_curry").__1(c))}function q(a,b){b=b-a|0;if(b<0)return[];else{var c=new Array(b+1|0);for(var d=0;d<=b;++d)c[d]=a+d|0;return c}}function r(a,b,c){b=b-a|0;if(b<0||c<=0)return[];else{b=(b/c|0)+1|0;var d=new Array(b);a=a;for(var e=0,b=b-1|0;e<=b;++e)d[e]=a,a=a+c|0;return d}}function s(a,b){var c=a.length,d=b.length;c=c<d?c:d;d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=[a[e],b[e]];return d}function t(a,b,c){var d=a.length,e=b.length;d=d<e?d:e;e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=c(a[f],b[f]);return e}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){var c=a.length,d=b.length,e=new Array(c+d|0);for(var f=0,g=c-1|0;f<=g;++f)e[f]=a[f];for(var a=0,f=d-1|0;a<=f;++a)e[c+a|0]=b[a];return e}function w(a){var b=a.length,c=0;for(var d=0,e=b-1|0;d<=e;++d)c=c+a[d].length|0;d=new Array(c);c=0;for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];for(var g=0,h=f.length-1|0;g<=h;++g)d[c]=f[g],c=c+1|0}return d}function x(a,c,d){if(d<=0)return[];else{var e=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(e+c|0,0):c;e=e-c|0;e=e<d?e:d;if(e<=0)return[];else{d=new Array(e);for(var f=0,e=e-1|0;f<=e;++f)d[f]=a[c+f|0];return d}}}function y(a,c){var d=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(d+c|0,0):c;d=d-c|0;var e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=a[c+f|0];return e}function z(a,c,d,e){if(d>0){var f=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(f+c|0,0):c;f=f-c|0;f=f<d?f:d;if(f>0){for(var d=c,c=(c+f|0)-1|0;d<=c;++d)a[d]=e;return 0}else return 0}else return 0}function A(a,b,c,d,e){if(d<=b){for(var f=0,g=e-1|0;f<=g;++f)c[f+d|0]=a[f+b|0];return 0}else{for(var f=e-1|0;f>=0;--f)c[f+d|0]=a[f+b|0];return 0}}function B(a,c,d,e,f){var g=a.length,h=d.length;c=c<0?b("bs_caml_primitive").caml_int_max(g+c|0,0):c;e=e<0?b("bs_caml_primitive").caml_int_max(h+e|0,0):e;f=b("bs_caml_primitive").caml_int_min(f,b("bs_caml_primitive").caml_int_min(g-c|0,h-e|0));if(e<=c){for(var g=0,h=f-1|0;g<=h;++g)d[g+e|0]=a[g+c|0];return 0}else{for(var g=f-1|0;g>=0;--g)d[g+e|0]=a[g+c|0];return 0}}function C(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(a[c]);return 0}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(a[e]);return d}function F(a,c){return E(a,b("bs_curry").__1(c))}function G(a,c){var d=a.length,e=0,f=void 0;while(f===void 0&&e<d){var g=a[e];c(g)&&(f=b("bs_caml_option").some(g));e=e+1|0}return f}function H(a,c){return G(a,b("bs_curry").__1(c))}function I(a,b){var c=a.length,d=0,e=void 0;while(e===void 0&&d<c){var f=a[d];b(f)&&(e=d);d=d+1|0}return e}function J(a,c){return I(a,b("bs_curry").__1(c))}function K(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function aa(a,c){return K(a,b("bs_curry").__1(c))}function L(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g,f)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function ba(a,c){return L(a,b("bs_curry").__2(c))}function M(a,c){var d=a.length,e=new Array(d),f=0;for(var g=0,d=d-1|0;g<=d;++g){var h=a[g];h=c(h);h!==void 0&&(e[f]=b("bs_caml_option").valFromOption(h),f=f+1|0)}e.length=f;return e}function ca(a,c){return M(a,b("bs_curry").__1(c))}function N(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(c,a[c]);return 0}function da(a,c){return N(a,b("bs_curry").__2(c))}function O(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(e,a[e]);return d}function ea(a,c){return O(a,b("bs_curry").__2(c))}function P(a,b,c){b=b;for(var d=0,e=a.length-1|0;d<=e;++d)b=c(b,a[d]);return b}function fa(a,c,d){return P(a,c,b("bs_curry").__2(d))}function Q(a,b,c){b=b;for(var d=a.length-1|0;d>=0;--d)b=c(b,a[d]);return b}function ga(a,c,d){return Q(a,c,b("bs_curry").__2(d))}function R(a,c,d,e){d=d;var f=b("bs_caml_primitive").caml_int_min(a.length,c.length);for(var f=f-1|0;f>=0;--f)d=e(d,a[f],c[f]);return d}function ha(a,c,d,e){return R(a,c,d,b("bs_curry").__3(e))}function S(a,b,c){b=b;for(var d=0,e=a.length-1|0;d<=e;++d)b=c(b,a[d],d);return b}function ia(a,c,d){return S(a,c,b("bs_curry").__3(d))}function T(a,b){var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!0;else if(b(a[e])){d=e+1|0;continue}else return!1}}function ja(a,c){return T(a,b("bs_curry").__1(c))}function U(a,b){var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!1;else if(b(a[e]))return!0;else{d=e+1|0;continue}}}function ka(a,c){return U(a,b("bs_curry").__1(c))}function V(a,b,c,d,e){while(!0){var f=c;if(f===e)return!0;else if(d(a[f],b[f])){c=f+1|0;continue}else return!1}}function W(a,c,d){return V(a,c,0,d,b("bs_caml_primitive").caml_int_min(a.length,c.length))}function la(a,c,d){return W(a,c,b("bs_curry").__2(d))}function X(a,c,d){var e=a,f=c,g=0;d=d;a=b("bs_caml_primitive").caml_int_min(a.length,c.length);while(!0){c=g;if(c===a)return!1;else if(d(e[c],f[c]))return!0;else{g=c+1|0;continue}}}function ma(a,c,d){return X(a,c,b("bs_curry").__2(d))}function Y(a,b,c){var d=a.length,e=b.length;if(d===e)return V(a,b,0,c,d);else return!1}function na(a,c,d){return Y(a,c,b("bs_curry").__2(d))}function Z(a,b,c){var d=a.length,e=b.length;if(d>e)return 1;else if(d<e)return-1;else{e=a;a=b;b=0;c=c;d=d;while(!0){var f=b;if(f===d)return 0;else{var g=c(e[f],a[f]);if(g===0){b=f+1|0;continue}else return g}}}}function oa(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,b){var c=a.length,d=0,e=0,f=new Array(c),g=new Array(c);for(var h=0,c=c-1|0;h<=c;++h){var i=a[h];b(i)?(f[d]=i,d=d+1|0):(g[e]=i,e=e+1|0)}f.length=d;g.length=e;return[f,g]}function pa(a,c){return $(a,b("bs_curry").__1(c))}function qa(a){var b=a.length,c=new Array(b),d=new Array(b);for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];c[e]=f[0];d[e]=f[1]}return[c,d]}f.get=a;f.getExn=c;f.set=d;f.setExn=e;f.shuffleInPlace=h;f.shuffle=i;f.reverseInPlace=j;f.reverse=k;f.make=l;f.range=q;f.rangeBy=r;f.makeByU=m;f.makeBy=n;f.makeByAndShuffleU=o;f.makeByAndShuffle=p;f.zip=s;f.zipByU=t;f.zipBy=u;f.unzip=qa;f.concat=v;f.concatMany=w;f.slice=x;f.sliceToEnd=y;f.fill=z;f.blit=B;f.blitUnsafe=A;f.forEachU=C;f.forEach=D;f.mapU=E;f.map=F;f.getByU=G;f.getBy=H;f.getIndexByU=I;f.getIndexBy=J;f.keepU=K;f.keep=aa;f.keepWithIndexU=L;f.keepWithIndex=ba;f.keepMapU=M;f.keepMap=ca;f.forEachWithIndexU=N;f.forEachWithIndex=da;f.mapWithIndexU=O;f.mapWithIndex=ea;f.partitionU=$;f.partition=pa;f.reduceU=P;f.reduce=fa;f.reduceReverseU=Q;f.reduceReverse=ga;f.reduceReverse2U=R;f.reduceReverse2=ha;f.reduceWithIndexU=S;f.reduceWithIndex=ia;f.someU=U;f.some=ka;f.everyU=T;f.every=ja;f.every2U=W;f.every2=la;f.some2U=X;f.some2=ma;f.cmpU=Z;f.cmp=oa;f.eqU=Y;f.eq=na}),null);
__d("MWMSThreadTitle.bs",["bs_js_dict","bs_belt_Array","MercuryIDs","bs_caml_option","CurrentUser","JsDictReadOnly.bs","MercuryParticipantListRenderer"],(function(a,b,c,d,e,f){"use strict";function g(a){var c={};b("bs_js_dict").entries(a).forEach(function(a){c[a[0]]=a[1];return 0});return c}function h(a,c,d,e,f){if(a!=="")return a;else{a=g(d);return new(b("MercuryParticipantListRenderer"))().setUseShortName(f).setUseAndSeparator(e).setIsNewThread(!1).setNickname(a).renderParticipantList(c)}}function i(a,c){if(a!==void 0)return[b("bs_caml_option").valFromOption(a)];else{var d=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());a=b("JsDictReadOnly.bs").keys(c);var e=a.length;return b("bs_belt_Array").keepMap(a,function(a){if(a===d&&e!==1)return;else{a=a;a=b("JsDictReadOnly.bs").get(c,a);if(a!==void 0)return b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(a).image_src);else return}})}}function a(a,c){return i(a,b("JsDictReadOnly.bs").from(c))}function j(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID()),f=b("JsDictReadOnly.bs").keys(c).length,g=b("bs_belt_Array").keepMap(b("JsDictReadOnly.bs").keys(c),function(a){if(a===e&&f>1)return;else{a=b("JsDictReadOnly.bs").get(c,a);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);return{id:a.id,name:a.name,short_name:a.short_name}}else return}});return h(a,g,d,!0,!0)}function c(a,c,d){return j(a,b("JsDictReadOnly.bs").from(c),d)}function k(a,c,d){c=b("JsDictReadOnly.bs").get(c,b("MercuryIDs").getParticipantIDFromUserID(a));if(c!==void 0){a=b("bs_caml_option").valFromOption(c);return h("",[{id:a.id,name:a.name,short_name:a.short_name}],d,!1,!1)}}function d(a,c,d){return k(a,b("JsDictReadOnly.bs").from(c),d)}function l(a,c){c=b("JsDictReadOnly.bs").get(c,b("MercuryIDs").getParticipantIDFromUserID(a));if(c!==void 0)return b("bs_caml_option").some(b("bs_caml_option").valFromOption(c).name)}function e(a,c){return l(a,b("JsDictReadOnly.bs").from(c))}f.getProfileImages_=i;f.getProfileImages=a;f.getTitleForGroup_=j;f.getTitleForGroup=c;f.getTitleForUser_=k;f.getTitleForUser=d;f.getTitleForPage_=l;f.getTitleForPage=e}),null);
__d("MWChatTextTransform.bs",["CometEmojiTransform","CometEmoticonTransform"],(function(a,b,c,d,e,f){"use strict";a=b("CometEmoticonTransform")();c=b("CometEmojiTransform")();f.emoticonTransform=a;f.emojiTransform=c}),null);
__d("MWChatFacepile.bs",["React","stylex","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={root:{display:"j83agx80",position:"l9j0dhe7"},image:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",position:"pmk7jnqg"},leftImage:{start:"j9ispegn",bottom:"i09qtzwb"},imageBorder:{borderTop:"onbmnuye",borderEnd:"ss08itiq",borderBottom:"gm9yxfny",borderStart:"e3a5340w"},rightImage:{end:"n7fi1qx3",top:"kr520xx4"},dropShadow:{boxShadow:"akv41dx8",":hover":{boxShadow:"eb3gnj61"}}};function a(a){var c=a.borderBetweenImages,d=a.children,e=a.firstParticipantURI,f=a.secondParticipantURI,j=a.shadow;a=a.size;c=c!==void 0?c:!0;d=d!==void 0?b("bs_caml_option").valFromOption(d):null;j=j!==void 0?j:!1;a=a!==void 0?a:30;var k=a/1.5|0;k={height:String(k)+"px",width:String(k)+"px"};return h.jsxs("div",{children:[h.jsx("img",{className:(g||(g=b("stylex")))(j?i.dropShadow:!1,i.image,i.rightImage),style:k,src:f}),h.jsx("img",{className:g(j?i.dropShadow:!1,i.image,c?i.imageBorder:!1,i.leftImage),style:k,src:e}),d],className:g(i.root),style:{height:String(a)+"px",width:String(a)+"px"}})}c=a;f.styles=i;f.make=c}),null);
__d("MWChatFacepile.re",["MWChatFacepile.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MWChatFacepile.bs").make;f.make=a}),null);
__d("MWChatProfile.bs",["React","stylex","bs_belt_Option","BaseGlimmer.react"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={root:{position:"l9j0dhe7"},img:{width:"k4urcfbm",height:"datstx6m",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",verticalAlign:"pzggbiyp",objectFit:"bixrwtb6"},activeNow:{display:"mkhogb32",position:"pmk7jnqg",backgroundColor:"jllm4f4h",width:"c9rrlmt1",height:"t6na6p9t",borderTop:"iruzoqzv",borderEnd:"n8v90iwk",borderBottom:"qx7ju95k",borderStart:"m8of71z0",bottom:"i09qtzwb",end:"n7fi1qx3",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"},active:{display:"a8c37x1j"}};function a(a){var c=a.size,d=a.src,e=a.isActiveNow,f=a.alt;a=a.children;e=e!==void 0?e:!1;f=f!==void 0?f:"";f=d!==void 0?h.jsx("img",{className:(g||(g=b("stylex")))(i.img),alt:f,src:d}):h.jsx(b("BaseGlimmer.react"),{className:(g||(g=b("stylex")))(i.img),index:1});return h.jsxs("div",{children:[f,b("bs_belt_Option").getWithDefault(a,null),h.jsx("div",{className:(g||(g=b("stylex")))(i.activeNow,e?i.active:!1)})],className:g(i.root),style:{height:String(c)+"px",width:String(c)+"px"}})}c=a;f.styles=i;f.make=c}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);a.onShow&&a.onShow();c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick()};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null},removeNotification:function(a){a=h.get(a);a&&a.close()}};b("Run").onUnload(a);e.exports=c}),null);
__d("MercuryActionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("MercuryMessageDeliveryState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});e.exports=a}),null);
__d("MercuryPayloadSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"unknown",CLIENT_CHANNEL_MESSAGE:"client_channel_message",CLIENT_SEND_MESSAGE:"client_send_message",CLIENT_CHANGE_ARCHIVED_STATUS:"client_change-archived_status",CLIENT_CHANGE_PINNED_MESSAGES:"client_change-pinned_messages",CLIENT_CHANGE_PINNED_STATUS:"client_change-pinned_status",CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS:"client_change_page_follow_up_status",CLIENT_CHANGE_FOLDER:"client_change_folder",CLIENT_CHANGE_MUTE_SETTINGS:"client_change_mute_settings",CLIENT_CHANGE_READ_STATUS:"client_change_read_status",CLIENT_CHANGE_CUSTOM_LIKE:"client_change_custom_like",CLIENT_MARK_THREAD_SEEN:"client_mark_thread_seen",CLIENT_ADD_PARTICIPANTS:"client_add_participants",CLIENT_FETCH_PARTICIPANTS:"client_fetch_participants",CLIENT_DELETE_MESSAGES:"client_delete_messages",CLIENT_DELETE_THREAD:"client_delete_thread",CLIENT_UPDATE_SNIPPET:"client_update_snippet",CLIENT_HANDLE_ERROR:"client_handle_error",CLIENT_CHANGE_FLAG:"client_change_flag",CLIENT_MOVE_PENDING_TO_INBOX:"client_move_pending_to_inbox",CLIENT_CREATE_PAGE_ADMIN_NOTE:"client_create_page_admin_note",CLIENT_UNWRAP_MESSAGE:"client_unwrap_message",CLIENT_UPDATE_COMM_STATUS:"client_update_comm_status",CLIENT_UPDATE_COMM_ITEM_OWNER:"client_update_comm_item_owner",CLIENT_CHANGE_SAVED_MESSAGE_STATUS:"client_update_saved_message_status",SERVER_INITIAL_DATA:"server_initial_data",SERVER_SEND_MESSAGE:"server_send_message",SERVER_CHANGE_ARCHIVED_STATUS:"server_change_archived_status",SERVER_CHANGE_PINNED_MESSAGES:"server_change-pinned_messages",SERVER_CHANGE_PINNED_STATUS:"server_change_pinned_status",SERVER_CHANGE_PAGE_FOLLOW_UP_STATUS:"server_change_page_follow_up_status",SERVER_CHANGE_READ_STATUS:"server_change_read_status",SERVER_MARK_FOLDER_READ:"server_mark_folder_read",SERVER_MARK_SEEN:"server_mark_seen",SERVER_FETCH_PARTICIPANTS:"server_fetch_participants",SERVER_FETCH_THREAD_INFO:"server_fetch_thread_info",SERVER_FETCH_THREADLIST_INFO:"server_fetch_threadlist_info",SERVER_STANDALONE_NOTIFICATIONS:"server_standalone_notifications",SERVER_THREAD_SYNC:"server_thread_sync",SERVER_TAB_PRESENCE:"server_tab_presence",SERVER_UNREAD_THREADS:"server_unread_threads",SERVER_UNSEEN_THREADS:"server_unseen_threads",SERVER_SEARCH:"server_search",SERVER_CHANGE_FLAG:"server_change_flag",SERVER_INVALIDATE_THREAD_STATE:"server_invalidate_thread_state",SERVER_INVALIDATE_GLOBAL_STATE:"server_invalidate_global_state"})}),null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],(function(a,b,c,d,e,f){"use strict";var g="fbid:"+b("CurrentUser").getID();a={getID:function(){return g},isViewer:function(a){b("MercuryAssert").isParticipantID(a);return a===g}};e.exports=a}),null);
__d("MessengerMessage.bs",["URI","Utils.bs","bs_js_dict","bs_js_json","bs_caml_obj","bs_caml_option","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,b,c,d,e,f){b={thread_id:b,thread_fbid:null,other_user_fbid:null,action_type:d,message_id:a,threading_id:null,offline_threading_id:null,author:c,author_email:"",ephemeral_ttl_mode:null,timestamp:e,is_unread:null,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_sponsored:!1,is_one_way_sent:!1,ad_id:null,ad_client_token:null,commerce_message_type:null,customizations:[],source:"",source_tags:[],m_suggestions:null,tags:[],is_spoof_warning:!1,folder:"inbox",platform_xmd:null,message_source:null,montage_reply_data:null,replied_to_message:null,skip_bump_thread:!1,profile_ranges:null,reactions:null,attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,raw_attachments:null,body:null,subject:null,has_attachment:null,creator_info:null,error_data:null,removed_timestamp:null,unsender:null,verse_group_role_xmd:null,message_unsendability_status:null,is_forwarded:!1,preview_attachments:null,sticker_id:null,mib_direct_message_data:null};return Object.assign(b,f)}function c(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function d(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;else{a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}}function e(a){var c=a.ranges;if(c==null)return 0;else{c=c.map(function(c){var a=c.entity;if(a==null)return c;else{var d=b("Utils.bs").isTruthy(a.external),e=a.url;if(d||e==null)return c;else{d=new(g||(g=b("URI")))(e);e=b("isMessengerDotComURI")(g.getRequestURI());var f=d.getDomain();return!(e&&!(!(f==null)&&f!==""))?c:Object.assign(Object.assign({},c),{entity:Object.assign(Object.assign({},a),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})}}});Object.assign(a,{ranges:c});return 0}}function h(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function i(a){a=a.author;if(a==null)return!1;else return a===b("MercuryViewer").getID()}function j(a){a=a.author;if(a==null)return!1;else return a!==b("MercuryViewer").getID()}function k(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function l(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function m(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function n(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function o(a){a=a.error_data;if(a==null)return;else return b("bs_caml_option").nullable_to_opt(a.description)}function p(a,c){if(n(a))return b("MercuryMessageDeliveryState").ERROR;else if(k(a))return b("MercuryMessageDeliveryState").SENDING;else if(l(a))if(a.is_one_way_sent||a.timestamp>c)return b("MercuryMessageDeliveryState").SENT;else return b("MercuryMessageDeliveryState").DELIVERED;else return b("MercuryMessageDeliveryState").UNKNOWN}function q(a,b){if(n(a))return 4;else if(k(a))return 1;else if(l(a))if(a.timestamp<=b&&!a.is_one_way_sent)return 3;else return 2;else return 0}function r(a){try{a=b("bs_caml_option").some(JSON.parse(a))}catch(b){a=void 0}if(a!==void 0){a=b("bs_js_json").classify(b("bs_caml_option").valFromOption(a));if(typeof a==="number"||a.tag!==2)return;else{a=b("bs_js_dict").get(a[0],"persona");if(a!==void 0){a=b("bs_js_json").classify(b("bs_caml_option").valFromOption(a));if(typeof a==="number"||a.tag!==2)return;else return b("bs_caml_option").some(a[0])}else return}}}function s(a){if(a==null)return null;else{a=a.platform_xmd;if(a==null)return null;else{a=r(a);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);var c=b("bs_js_dict").get(a,"id"),d=b("bs_js_dict").get(a,"name");a=b("bs_js_dict").get(a,"profile_picture_url");if(c!==void 0&&d!==void 0&&a!==void 0)return{id:b("bs_caml_option").valFromOption(c),name:b("bs_caml_option").valFromOption(d),profile_picture_url:b("bs_caml_option").valFromOption(a)};else return null}else return null}}}function t(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function u(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(!(b==null)&&b)return!1;if(!(c==null)||!(d==null)||a)return!0;else return!1}f.makeFakeMessage=a;f.isLocalMessage=c;f.isTitanMessage=d;f.finalizeRanges=e;f.shouldSortForPayloadSource=h;f.isOutbound=i;f.isInbound=j;f.isSending=k;f.isSent=l;f.compare=m;f.hasError=n;f.getError=o;f.getDeliveryState=p;f.getGutterItemStatus=q;f.getPersonaData=r;f.getPersona=s;f.isErrorLogMessage=t;f.hasServerTimestamp=u}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("MercuryTagHelper",[],(function(a,b,c,d,e,f){"use strict";a={get:function(a,b){a=a.find(function(a){return a!=null?a.startsWith(b):!1});return a==null?a:a.substr(a.indexOf(":")+1)}};e.exports=a}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","MercuryTagHelper"],(function(a,b,c,d,e,f){"use strict";function a(a,b){!a.tags?a.tags=[g(b)]:a.tags.push(g(b));return a}function g(a){var c=b("EmojiLikeConstants").TAG_PREFIX_NEW;return c+":"+a}function c(a,b){!a.tags?a.tags=[h(b)]:a.tags.push(h(b));return a}function h(a){return b("EmojiLikeConstants").SOURCE_TAG_PREFIX+":"+a}function d(a){return i(a)!=null}function i(a){if(!a.tags)return null;var c=b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_NEW);return c?c:b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_OLD)}e.exports={getEmojiSize:i,isEmojiLike:d,setEmojiSize:a,setEmojiSource:c}}),null);
__d("getPageIDFromThreadID",["FBIDCheck","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MercuryIDs").getUserIDFromThreadID(a);return!a||b("FBIDCheck").isUser_deprecated(a)?null:a}e.exports=a}),null);
__d("MessageRequestUtils",["CurrentUser","MercuryIDs","MessagingTag","ThreadConnectivityStatusGraphQLType.re","getPageIDFromThreadID"],(function(a,b,c,d,e,f){"use strict";a={isMessageRequest:function(a){return(a.folder===b("MessagingTag").PENDING||a.folder===b("MessagingTag").OTHER)&&a.can_reply},isFiltered:function(a){return a.folder===b("MessagingTag").OTHER},shouldShowComposerPendingActions:function(a){return this.isMessageRequest(a)&&(b("MercuryIDs").isGroupChat(a.thread_id)||!!b("getPageIDFromThreadID")(a.thread_id)||b("CurrentUser").isWorkUser())},shouldShowThreadlistPendingActions:function(a){return a.folder===b("MessagingTag").PENDING&&a.can_reply&&(b("MercuryIDs").isGroupChat(a.thread_id)||!!b("getPageIDFromThreadID")(a.thread_id)||b("CurrentUser").isWorkUser())},shouldShowUnconnectedThreadInfoText:function(a){var c;return!b("CurrentUser").isWorkUser()&&b("CurrentUser").getID()!==a.other_user_fbid&&((c=a.thread_connectivity_data)==null?void 0:c.connectivity_status)===b("ThreadConnectivityStatusGraphQLType.re").unconnected&&((c=a.thread_connectivity_data)==null?void 0:c.first_sender_id)===a.other_user_fbid},shouldSendTypingIndicators:function(a){if(!a)return!1;if(this.isMessageRequest(a))return!1;return b("CurrentUser").isWorkUser()||b("MercuryIDs").isGroupChat(a.thread_id)?!0:((a=a.thread_connectivity_data)==null?void 0:a.connectivity_status)===b("ThreadConnectivityStatusGraphQLType.re").implicitOrTwoWayMessaging}};e.exports=a}),null);
__d("MercuryThreadInfo",["MercuryIDs"],(function(a,b,c,d,e,f){"use strict";var g={canReply:function(a){return!!(a.is_subscribed&&(a.can_reply===void 0||a.can_reply)&&!a.has_email_participant&&!a.read_only)},getMuteSetting:function(a){return a.mute_until==null?void 0:a.mute_until},isEmptyLocalThread:function(a){return b("MercuryIDs").tokenize(a.thread_id).type==="root"&&!a.timestamp},isMuted:function(a){a=g.getMuteSetting(a);return a!=null&&(a>Date.now()/1e3||a===-1)},areMentionsMuted:function(a){return a.mentions_mute_mode===1},areReactionsMuted:function(a){return a.reactions_mute_mode===1},isNewEmptyLocalThread:function(a){return!!(g.isEmptyLocalThread(a)&&a.participants&&a.participants.length===0)},showSettingsMenu:function(a){return!!((a.can_reply||!a.cannot_reply_reason||a.cannot_reply_reason.toLowerCase()==="blocked"||a.cannot_reply_reason.toLowerCase()==="messenger_blockee")&&!a.has_email_participant&&!a.read_only&&a.is_subscribed)},isColdOpen:function(a){return!!(a.is_canonical_user&&(a.message_count===0||!a.timestamp))}};e.exports=g}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mixin"],(function(a,b,c,d,e,f){"use strict";var g=b("LogHistory").getInstance("mercury_informer");a=function(a){babelHelpers.inheritsLoose(c,a);c.get=function(){return h.get()};c.getForFBID=function(a){return h.getForFBID(a)};function c(b){var c;c=a.call(this)||this;c.$MercuryThreadInformer1=b;c.$MercuryThreadInformer2={};c.$MercuryThreadInformer3={};c.$MercuryThreadInformer4={};c.$MercuryThreadInformer5={};c.$MercuryThreadInformer6=!1;c.$MercuryThreadInformer7=!1;c.$MercuryThreadInformer8=!1;c.$MercuryThreadInformer9=!1;c.$MercuryThreadInformer10={};c.$MercuryThreadInformer11={};c.$MercuryThreadInformer12={};c.$MercuryThreadInformer13={};c.$MercuryThreadInformer14=0;return c}var d=c.prototype;d.informNewMessage=function(a,b){this.inform("new-message",{threadID:a,message:b})};d.informNewLogMessage=function(a,b){this.inform("new-log-message",{threadID:a,message:b})};d.updatedThread=function(a){this.$MercuryThreadInformer3[a]=!0,this.$MercuryThreadInformer15()};d.invalidatedThread=function(a){this.$MercuryThreadInformer4[a]=!0,this.$MercuryThreadInformer15()};d.deletedThread=function(a){this.$MercuryThreadInformer2[a]=!0,this.$MercuryThreadInformer15()};d.updatedThreadlist=function(){this.$MercuryThreadInformer6=!0,this.$MercuryThreadInformer15()};d.updatedUnseenState=function(){this.$MercuryThreadInformer7=!0,this.$MercuryThreadInformer15()};d.updatedUnseenTimestamp=function(){this.$MercuryThreadInformer8=!0,this.$MercuryThreadInformer15()};d.updatedUnreadState=function(){this.$MercuryThreadInformer9=!0,this.$MercuryThreadInformer15()};d.changedThreadReadState=function(a,b,c){(!this.$MercuryThreadInformer5[a]||this.$MercuryThreadInformer5[a].timestamp<c)&&(this.$MercuryThreadInformer5[a]={mark_as_read:b,timestamp:c}),this.$MercuryThreadInformer15()};d.receivedMessage=function(a){b("MercuryAssert").isThreadID(a.thread_id);var c=a.thread_id;this.$MercuryThreadInformer10[c]||(this.$MercuryThreadInformer10[c]=[]);this.$MercuryThreadInformer10[c].push(a);this.updatedThread(c)};d.reorderedMessages=function(a,b){this.$MercuryThreadInformer11[a]={source:b},this.$MercuryThreadInformer15()};d.updatedMessage=function(a,b,c){this.$MercuryThreadInformer12[a]||(this.$MercuryThreadInformer12[a]={}),this.$MercuryThreadInformer12[a][b]={source:c},this.updatedThread(a)};d.deletedMessage=function(a,b,c,d){this.$MercuryThreadInformer13[a]||(this.$MercuryThreadInformer13[a]={}),this.$MercuryThreadInformer13[a][b]={attachmentIDs:d,source:c},this.updatedThread(a)};d.synchronizeInforms=function(a){this.$MercuryThreadInformer14++;try{a()}catch(a){throw a}finally{this.$MercuryThreadInformer14--,this.$MercuryThreadInformer15()}};d.listen=function(a,b){return this.subscribe("threads-updated",function(c,d){d[a]&&b(a)})};d.$MercuryThreadInformer15=function(){if(!this.$MercuryThreadInformer14){var a=this.$MercuryThreadInformer2,b=this.$MercuryThreadInformer3,c=this.$MercuryThreadInformer4,d=this.$MercuryThreadInformer5,e=this.$MercuryThreadInformer6,f=this.$MercuryThreadInformer7,g=this.$MercuryThreadInformer8,h=this.$MercuryThreadInformer9,i=this.$MercuryThreadInformer10,j=this.$MercuryThreadInformer11,k=this.$MercuryThreadInformer12,l=this.$MercuryThreadInformer13;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=!1;this.$MercuryThreadInformer7=!1;this.$MercuryThreadInformer8=!1;this.$MercuryThreadInformer9=!1;this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12={};this.$MercuryThreadInformer13={};var m=Object.keys(b);(m.length||e)&&this.inform("threadlist-updated",m);m.length&&this.$MercuryThreadInformer16("threads-updated",b);for(var e in c){this.$MercuryThreadInformer16("thread-invalidated",c);break}for(var e in d){this.$MercuryThreadInformer16("thread-read-changed",d);break}for(e in a){this.$MercuryThreadInformer16("threads-deleted",a);break}f&&this.$MercuryThreadInformer16("unseen-updated",null);g&&this.$MercuryThreadInformer16("unseen-timestamp-updated",null);h&&this.$MercuryThreadInformer16("unread-updated",null);for(e in i){this.$MercuryThreadInformer16("messages-received",i);break}for(e in j){this.$MercuryThreadInformer16("messages-reordered",j);break}for(e in k){this.$MercuryThreadInformer16("messages-updated",k);break}for(e in l){this.$MercuryThreadInformer16("messages-deleted",l);break}}};d.$MercuryThreadInformer16=function(a,b){a==="threads-updated"&&g.debug(a,JSON.stringify(b)),this.inform(a,b)};return c}(b("mixin")(b("ArbiterMixin")));var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MercurySyncEventsProxy",["Arbiter","ChannelConstants","LogHistory","MercurySingletonProvider","MessengerMQTTConnectionEvents"],(function(a,b,c,d,e,f){"use strict";var g=b("LogHistory").getInstance("mercury_event_proxy"),h={DELTA:"DELTA",FAKE_DFF:"FAKE_DFF",FLOW:"FLOW",FLOW_REJECT:"FLOW_REJECT",INIT:"MercurySyncDeltaHandler/initSeqID",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",SHUTDOWN:"SHUTDOWN",TYP:"TYP"};a=function(){a.getArbiterTypeForFBID=function(a,b){return a+"/"+b};a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};function a(a){this.$2=[],this.$1=a,this.init()}var c=a.prototype;c.getArbiterType=function(b){return a.getArbiterTypeForFBID(this.$1,b)};c.init=function(){var a=this,c,d;this.$2.forEach(function(a){return b("Arbiter").unsubscribe(a)});this.$2=[(c=b("Arbiter")).subscribe((d=b("MessengerMQTTConnectionEvents")).DELTA_EVENT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.DELTA)].concat(e))}),c.subscribe(d.STREAM_CONNECT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.CONNECTED)].concat(e))}),c.subscribe(d.STREAM_DISCONNECT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.SHUTDOWN)].concat(e))}),c.subscribe(d.STREAM_CONNECTING,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.RECONNECTING)].concat(e))}),c.subscribe(b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),function(c){g.debug("fakedff",JSON.stringify({fbid:a.$1}));for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.FAKE_DFF)].concat(e))}),c.subscribe(d.TYP,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.TYP)].concat(e))})]};return a}();a.Events=h;var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryAttachment",["cx","EmojiLikeUtils","MercuryAudioType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a===Object(a)},i="_1c_u",j=new Set(["animated_image","photo","video","third_party_sticker"]),k={getAttachIconClass:function(a){switch(a){case"attach:image":return"_y2-";case"attach:video":return"_y2_";case"attach:music":return"_y30";case"attach:voice":return"_y31";case"attach:text":return"_y32";case"attach:pdf":return"_1k9k";case"attach:richtext":return"_1k9l";case"attach:spreadsheet":return"_1k9p";case"attach:presentation":return"_1k9r";case"attach:archive":return"_1k9s";case"attach:ms:word":return"_y33";case"attach:ms:xls":return"_y34";case"attach:ms:ppt":return"_y35"}return"_y36"},getAttachIconClassByMime:function(a){return this.getAttachIconClass(this.getAttachTypeByMime(a))},getAttachTypeByMime:function(a){if(!a)return"attach:unknown";if(a.startsWith("image"))return"attach:image";else if(a.startsWith("video"))return"attach:video";else if(a.startsWith("audio"))return"attach:music";else if(a.startsWith("text/plain"))return"attach:text";else if(a=="text/pdf"||a=="application/pdf"||a=="application/vnd.pdf"||a=="application/x-pdf")return"attach:pdf";else if(a=="text/richtext"||a=="application/rtf"||a=="application/x-iwork-pages-sffkey")return"attach:richtext";else if(a=="text/csv"||a=="application/x-iwork-numbers-sffkey")return"attach:spreadsheet";else if(a=="application/x-iwork-keynote-sffkey")return"attach:presentation";else if(a=="application/vnd.ms-cab-compressed"||a=="application/x-7z-compressed"||a=="application/x-ace-compressed"||a=="application/x-apple-diskimage"||a=="application/x-compress"||a=="application/x-compressed"||a=="application/x-gzip"||a=="application/x-rar-compressed"||a=="application/x-tar"||a=="application/x-zip-compressed"||a=="application/zip")return"attach:archive";else if(a=="application/msword"||a.startsWith("application/vnd.ms-word")||a.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return"attach:ms:word";else if(a.startsWith("application/vnd.ms-excel")||a.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return"attach:ms:xls";else if(a.startsWith("application/vnd.ms-powerpoint")||a.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return"attach:ms:ppt";else return"attach:unknown"},convertRaw:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];if(d.attach_type==="photo")b.push(d);else if(d.filename){var e=k.getAttachTypeByMime(d.filetype),f={};f.attach_type="file";f.name=d.filename;f.icon_type=e;f.url="";b.push(f)}}return b},get:function(a){var c=[];a.attachments?c=a.attachments:a.raw_attachments&&(c=this.convertRaw(a.raw_attachments));var d=b("EmojiLikeUtils").getEmojiSize(a);d&&(c=c.concat([{attach_type:"emoji_like",size:d}]));if(!(a.attachments&&a.attachments.length>0)){if(a.sticker_id)return c.concat([{attach_type:"sticker"}]);if(a.preview_attachments&&a.preview_attachments.length>0)return c.concat(a.preview_attachments)}return c},resizeContain:function(a,b){var c=a.width/a.height,d=b.width/b.height;if(d<c)return{width:Math.ceil(Math.min(a.height*d,b.width)),height:Math.ceil(Math.min(a.height,b.height))};else return{width:Math.ceil(Math.min(a.width,b.width)),height:Math.ceil(Math.min(a.width/d,b.height))}},isBubblePreferred:function(a){return this.isFileAttachment(a)},isPhotoAttachment:function(a){return(this==null?void 0:this.getAttachTypeByMime)&&this.getAttachTypeByMime(a.mime_type)==="attach:pdf"?!1:!!(a.attach_type=="photo"||a.attach_type=="animated_image"||a.attach_type=="third_party_sticker"||a.attach_type=="file"&&a.preview_url)},isPhotoGroupAttachment:function(a){return j.has(a.attach_type)},isSinglePhotoGroupAttachment:function(a){return!!(a.attachments&&a.attachments.length===1&&a.attachments[0]&&this.isPhotoGroupAttachment(a.attachments[0]))},isVideoAttachment:function(a){return a.attach_type=="video"},isShareAttachment:function(a){return a.attach_type=="share"},isFileAttachment:function(a){return a.attach_type=="file"},isErrorAttachment:function(a){return a.attach_type=="error"},isStickerAttachment:function(a){return a.attach_type=="sticker"},isEmojiLikeAttachment:function(a){return a.attach_type==="emoji_like"},isVoiceAttachment:function(a){return!a.metadata?!1:a.metadata.type===b("MercuryAudioType").AudioClip||a.metadata.type===b("MercuryAudioType").VoiceMessageWithTranscript},hasAttribution:function(a){return!!a.app_attribution},isLightweightActionAttachment:function(a){return!!(k.isShareAttachment(a)&&a.share&&a.share.target!=null&&a.share.target.lwa_type!=null)},isSingleVideoAttachment:function(a){var b=this;a=this.get(a).filter(h).filter(function(a){return b.isVideoAttachment(a)});return a.length===1},isSharedVideoAttachment:function(a){a=a.attach_type==="share"&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type==="share"&&a.share&&a.share.style_list.indexOf("genie_message")>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSharedVideoAttachmentMessage:function(a){var b=this;a=this.get(a).filter(h).filter(function(a){return b.isSharedVideoAttachment(a)||b.isGenieSharedVideoAttachment(a)});return a.length===1},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(i);return a&&a.length?a[0]:b}};e.exports=k}),null);
__d("TypingStates",[],(function(a,b,c,d,e,f){a=Object.freeze({INACTIVE:0,TYPING:1,QUITTING:2});e.exports=a}),null);
__d("MessengerJoinableModeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("RepliedToMessageStatusForGraphQL",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VALID:"VALID",DELETED:"DELETED",TEMPORARILY_UNAVAILABLE:"TEMPORARILY_UNAVAILABLE"})}),null);
__d("bs_belt_internalAVLset",["bs_curry","bs_caml_option","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c){var d=a!==null?a.height:0,e=c!==null?c.height:0;return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function j(a){return{value:a,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function l(a,b,c){var d=a!==null?a.height:0,e=c!==null?c.height:0;if(d>(e+2|0)){var f=a.left,g=a.value,h=a.right;if(k(f,h))return i(f,g,i(h,b,c));else{var j=h.left,l=h.value;h=h.right;return i(i(f,g,j),l,i(h,b,c))}}else if(e>(d+2|0)){f=c.left;g=c.value;j=c.right;if(k(j,f))return i(i(a,b,f),g,j);else{l=f.left;h=f.value;f=f.right;return i(i(a,b,l),h,i(f,g,j))}}else return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.value}}function a(a){if(a!==null)return b("bs_caml_option").some(m(a))}function c(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.value}}function d(a){if(a!==null)return b("bs_caml_option").some(n(a))}function e(a){if(a!==null)return n(a)}function o(a,b){var c=a.left,d=a.right;a=a.value;if(c!==null)return l(o(c,b),a,d);else{b.contents=a;return d}}function p(a){return a===null}function q(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function r(a,b){while(!0){var c=a;if(c!==null){r(c.left,b);b(c.value);a=c.right;continue}else return 0}}function s(a,c){return r(a,b("bs_curry").__1(c))}function t(a,b,c){while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.value;e=e.right;b=c(t(f,d,c),g);a=e;continue}else return d}}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){while(!0){var c=a;if(c!==null)if(b(c.value)&&v(c.left,b)){a=c.right;continue}else return!1;else return!0}}function w(a,c){return v(a,b("bs_curry").__1(c))}function x(a,b){while(!0){var c=a;if(c!==null)if(b(c.value)||x(c.left,b))return!0;else{a=c.right;continue}else return!1}}function y(a,c){return x(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null)return l(z(a.left,b),a.value,a.right);else return j(b)}function A(a,b){if(a!==null)return l(a.left,a.value,A(a.right,b));else return j(b)}function B(a,b,c){if(a!==null)if(c!==null){var d=a.height,e=c.height;if(d>(e+2|0))return l(a.left,a.value,B(a.right,b,c));else if(e>(d+2|0))return l(B(a,b,c.left),c.value,c.right);else return i(a,b,c)}else return A(a,b);else return z(c,b)}function C(a,b){if(a!==null)if(b!==null){var c={contents:b.value},d=o(b,c);return B(a,c.contents,d)}else return a;else return b}function D(a,b){if(a!==null){var c=a.value,d=D(a.left,b),e=d[1];d=d[0];var f=b(c);a=D(a.right,b);b=a[1];a=a[0];if(f)return[B(d,c,a),C(e,b)];else return[C(d,a),B(e,c,b)]}else return[null,null]}function E(a,c){return D(a,b("bs_curry").__1(c))}function F(a){var b=a.left;a=a.right;b=b!==null?F(b):0;a=a!==null?F(a):0;return(1+b|0)+a|0}function G(a){if(a!==null)return F(a);else return 0}function H(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d.value,H(d.right,c)];a=d.left;continue}else return c}}function I(a){return H(a,0)}function J(a){while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLset.ml", line 304, characters 6-12');J(c);a=b;continue}else return 0}}function K(a,b,c){while(!0){var d=b,e=a,f=e.left,g=e.value;e=e.right;f=f!==null?K(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function L(a,b,c,d){while(!0){var e=a,f=e.left,g=e.value;e=e.right;f!==null&&L(f,b,c,d);if(d(g)){f=b.forward;c[f]=g;b.forward=f+1|0}else{f=b.backward;c[f]=g;b.backward=f-1|0}if(e!==null){a=e;continue}else return 0}}function M(a,b,c,d){while(!0){var e=b,f=a,g=f.left,h=f.value;f=f.right;g=g!==null?M(g,e,c,d):e;e=d(h)?(c[g]=h,g+1|0):g;if(f!==null){b=e;a=f;continue}else return e}}function N(b){if(b!==null){var a=F(b);a=new Array(a);K(b,0,a);return a}else return[]}function O(a,b,c){switch(c){case 0:return null;case 1:return j(a[b]);case 2:var d=a[b],e=a[b-1|0];return{value:e,height:2,left:j(d),right:null};case 3:e=a[b];d=a[b-1|0];var f=a[b-2|0];return{value:d,height:2,left:j(e),right:j(f)};default:d=c/2|0;e=O(a,b,d);f=a[b-d|0];a=O(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f,a)}}function P(a,b,c){switch(c){case 0:return null;case 1:return j(a[b]);case 2:var d=a[b],e=a[b+1|0];return{value:e,height:2,left:j(d),right:null};case 3:e=a[b];d=a[b+1|0];var f=a[b+2|0];return{value:d,height:2,left:j(e),right:j(f)};default:d=c/2|0;e=P(a,b,d);f=a[b+d|0];a=P(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f,a)}}function aa(a){return P(a,0,a.length)}function Q(a,b){if(a!==null){var c=a.left,d=a.value,e=a.right,f=Q(c,b),g=b(d);b=Q(e,b);if(g)if(c===f&&e===b)return a;else return B(f,d,b);else return C(f,b)}else return null}function ba(a,c){return Q(a,b("bs_curry").__1(c))}function R(b,c){if(b!==null){var a=F(b);a=new Array(a);b=M(b,0,a,c);return P(a,0,b)}else return null}function ca(a,c){return R(a,b("bs_curry").__1(c))}function S(b,c){if(b!==null){var a=F(b),d=new Array(a),e=a-1|0,f={forward:0,backward:e};L(b,f,d,c);b=f.forward;return[P(d,0,b),O(d,e,a-b|0)]}else return[null,null]}function da(a,c){return S(a,b("bs_curry").__1(c))}function ea(b,c,a){while(!0){var d=b;if(d!==null){var e=d.value;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function T(a,b,c){var d=G(a),e=G(b);if(d===e){a=q(a,0);b=q(b,0);c=c;while(!0){var f=b,g=a;if(g&&f){var h=f[0],i=g[0],j=c(i.value,h.value);if(j===0){b=q(h.right,f[1]);a=q(i.right,g[1]);continue}else return j}else return 0}}else if(d<e)return-1;else return 1}function fa(a,b,c){return T(a,b,c)===0}function U(b,c,a){while(!0){var d=c,e=b;if(e!==null)if(d!==null){var f=e.left,g=e.value;e=e.right;var h=d.left,j=d.value;d=d.right;j=a(g,j);if(j===0)if(U(f,h,a)){c=d;b=e;continue}else return!1;else if(j<0)if(U(i(f,g,null),h,a)){b=e;continue}else return!1;else if(U(i(null,g,e),d,a)){b=f;continue}else return!1}else return!1;else return!0}}function ga(c,d,a){while(!0){var e=c;if(e!==null){var f=e.value,g=a(d,f);if(g===0)return b("bs_caml_option").some(f);else{c=g<0?e.left:e.right;continue}}else return}}function ha(b,c,a){while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else return}}function ia(b,c,a){while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function ja(a){var b=W(a.left);a.left=b;return V(a)}function ka(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(ja(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(ka(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(a,b,c){if(b!==null){var d=b.value;d=a(c,d);if(d===0)return b;else{var e=b.left,f=b.right;if(d<0){d=Z(a,e,c);b.left=d}else b.right=Z(a,f,c);return Y(b)}}else return j(c)}function la(c,a){var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b,c)<0}),f;e>=0?f=P(c,0,e):(e=-e|0,f=O(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e)f=Z(a,f,c[e]);return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.value=b.value;return c}}f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.minimum=a;f.minUndefined=c;f.maximum=d;f.maxUndefined=e;f.removeMinAuxWithRef=o;f.isEmpty=p;f.stackAllLeft=q;f.forEachU=r;f.forEach=s;f.reduceU=t;f.reduce=u;f.everyU=v;f.every=w;f.someU=x;f.some=y;f.joinShared=B;f.concatShared=C;f.keepSharedU=Q;f.keepShared=ba;f.keepCopyU=R;f.keepCopy=ca;f.partitionSharedU=D;f.partitionShared=E;f.partitionCopyU=S;f.partitionCopy=da;f.lengthNode=F;f.size=G;f.toList=I;f.checkInvariantInternal=J;f.fillArray=K;f.toArray=N;f.fromSortedArrayAux=P;f.fromSortedArrayRevAux=O;f.fromSortedArrayUnsafe=aa;f.has=ea;f.cmp=T;f.eq=fa;f.subset=U;f.get=ga;f.getUndefined=ha;f.getExn=ia;f.fromArray=la;f.addMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_SetDict",["bs_belt_internalAVLset"],(function(a,b,c,d,e,f){"use strict";var g;function h(c,d,a){if(c!==null){var e=c.value,f=a(d,e);if(f===0)return c;else{var g=c.left,i=c.right;if(f<0){f=h(g,d,a);if(f===g)return c;else return b("bs_belt_internalAVLset").bal(f,e,i)}else{f=h(i,d,a);if(f===i)return c;else return b("bs_belt_internalAVLset").bal(g,e,f)}}}else return b("bs_belt_internalAVLset").singleton(d)}function i(c,d,a){if(c!==null){var e=c.left,f=c.value,g=c.right,h=a(d,f);if(h===0)if(e!==null)if(g!==null){var j={contents:g.value},k=b("bs_belt_internalAVLset").removeMinAuxWithRef(g,j);return b("bs_belt_internalAVLset").bal(e,j.contents,k)}else return e;else return g;else if(h<0){j=i(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLset").bal(j,f,g)}else{k=i(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLset").bal(e,f,k)}}else return c}function a(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=h(b,f,a)}return b}function c(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=i(b,f,a)}return b}function j(a,c,d){var e=c.left,f=c.value,g=c.right,h=a(d,f);if(h===0)return[e,g];else if(h<0)if(e!==null){h=j(a,e,d);return[h[0],b("bs_belt_internalAVLset").joinShared(h[1],f,g)]}else return[null,c];else if(g!==null){h=j(a,g,d);return[b("bs_belt_internalAVLset").joinShared(e,f,h[0]),h[1]]}else return[c,null]}function k(a,c,d,e){var f=c.left,g=c.value,h=c.right,i=a(d,g);if(i===0){e.contents=!0;return[f,h]}else if(i<0)if(f!==null){i=k(a,f,d,e);return[i[0],b("bs_belt_internalAVLset").joinShared(i[1],g,h)]}else return[null,c];else if(h!==null){i=k(a,h,d,e);return[b("bs_belt_internalAVLset").joinShared(f,g,i[0]),i[1]]}else return[c,null]}function d(b,c,a){if(b!==null){var d={contents:!1};a=k(a,b,c,d);return[a,d.contents]}else return[[null,null],!1]}function l(c,d,a){if(c!==null)if(d!==null){var e=c.height,f=d.height;if(e>=f)if(f===1)return h(c,d.value,a);else{f=c.left;var g=c.value,i=c.right,k=j(a,d,g);return b("bs_belt_internalAVLset").joinShared(l(f,k[0],a),g,l(i,k[1],a))}else if(e===1)return h(d,c.value,a);else{f=d.left;g=d.value;i=d.right;k=j(a,c,g);return b("bs_belt_internalAVLset").joinShared(l(k[0],f,a),g,l(k[1],i,a))}}else return c;else return d}function m(c,d,a){if(c!==null&&d!==null){var e=c.left,f=c.value;c=c.right;var g={contents:!1};d=k(a,d,f,g);e=m(e,d[0],a);c=m(c,d[1],a);if(g.contents)return b("bs_belt_internalAVLset").joinShared(e,f,c);else return b("bs_belt_internalAVLset").concatShared(e,c)}else return null}function n(c,d,a){if(c!==null&&d!==null){var e=c.left,f=c.value,g=c.right,h={contents:!1};d=k(a,d,f,h);e=n(e,d[0],a);g=n(g,d[1],a);if(h.contents)return b("bs_belt_internalAVLset").concatShared(e,g);else return b("bs_belt_internalAVLset").joinShared(e,f,g)}else return c}e=null;var o=(g=b("bs_belt_internalAVLset")).fromArray,p=g.fromSortedArrayUnsafe,q=g.isEmpty,r=g.has,s=g.subset,t=g.cmp,u=g.eq,v=g.forEachU,w=g.forEach,x=g.reduceU,y=g.reduce,z=g.everyU,A=g.every,B=g.someU,C=g.some,D=g.keepSharedU,E=g.keepShared,F=g.partitionSharedU,G=g.partitionShared,H=g.size,I=g.toList,J=g.toArray,K=g.minimum,L=g.minUndefined,M=g.maximum,N=g.maxUndefined,O=g.get,P=g.getUndefined,Q=g.getExn;g=g.checkInvariantInternal;f.empty=e;f.fromArray=o;f.fromSortedArrayUnsafe=p;f.isEmpty=q;f.has=r;f.add=h;f.mergeMany=a;f.remove=i;f.removeMany=c;f.union=l;f.intersect=m;f.diff=n;f.subset=s;f.cmp=t;f.eq=u;f.forEachU=v;f.forEach=w;f.reduceU=x;f.reduce=y;f.everyU=z;f.every=A;f.someU=B;f.some=C;f.keepU=D;f.keep=E;f.partitionU=F;f.partition=G;f.size=H;f.toList=I;f.toArray=J;f.minimum=K;f.minUndefined=L;f.maximum=M;f.maxUndefined=N;f.get=O;f.getUndefined=P;f.getExn=Q;f.split=d;f.checkInvariantInternal=g}),null);
__d("bs_belt_Set",["bs_curry","bs_belt_SetDict"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=c.cmp;return{cmp:c,data:b("bs_belt_SetDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").add(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function e(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").mergeMany(c.data,d,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").removeMany(c.data,d,a)}}function h(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").union(c.data,d.data,a)}}function i(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").intersect(c.data,d.data,a)}}function j(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").diff(c.data,d.data,a)}}function k(c,d){var a=c.cmp;return b("bs_belt_SetDict").subset(c.data,d.data,a)}function l(c,d){var a=c.cmp;c=b("bs_belt_SetDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function m(a){return{cmp:a.cmp,data:null}}function n(a){return b("bs_belt_SetDict").isEmpty(a.data)}function o(a,c){var d=a.cmp;return b("bs_belt_SetDict").cmp(a.data,c.data,d)}function p(a,c){return b("bs_belt_SetDict").eq(a.data,c.data,a.cmp)}function q(a,c){return b("bs_belt_SetDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_SetDict").forEachU(a.data,b("bs_curry").__1(c))}function s(a,c,d){return b("bs_belt_SetDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__2(d))}function u(a,c){return b("bs_belt_SetDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_SetDict").everyU(a.data,b("bs_curry").__1(c))}function w(a,c){return b("bs_belt_SetDict").someU(a.data,c)}function x(a,c){return b("bs_belt_SetDict").someU(a.data,b("bs_curry").__1(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_SetDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__1(c))}function A(a,c){c=b("bs_belt_SetDict").partitionU(a.data,c);a=a.cmp;return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__1(c))}function C(a){return b("bs_belt_SetDict").size(a.data)}function D(a){return b("bs_belt_SetDict").toList(a.data)}function E(a){return b("bs_belt_SetDict").toArray(a.data)}function F(a){return b("bs_belt_SetDict").minimum(a.data)}function G(a){return b("bs_belt_SetDict").minUndefined(a.data)}function H(a){return b("bs_belt_SetDict").maximum(a.data)}function I(a){return b("bs_belt_SetDict").maxUndefined(a.data)}function J(a,c){return b("bs_belt_SetDict").get(a.data,c,a.cmp)}function K(a,c){return b("bs_belt_SetDict").getUndefined(a.data,c,a.cmp)}function L(a,c){return b("bs_belt_SetDict").getExn(a.data,c,a.cmp)}function M(a,c){return b("bs_belt_SetDict").has(a.data,c,a.cmp)}function N(a,c){return{cmp:c.cmp,data:b("bs_belt_SetDict").fromSortedArrayUnsafe(a)}}function O(a){return a.data}function P(a){a=a.cmp;return{cmp:a}}function Q(a,b){return{cmp:a.cmp,data:b}}function R(a){return b("bs_belt_SetDict").checkInvariantInternal(a.data)}var S=0,T=0,U=0;f.Int=S;f.$$String=T;f.Dict=U;f.make=m;f.fromArray=a;f.fromSortedArrayUnsafe=N;f.isEmpty=n;f.has=M;f.add=d;f.mergeMany=e;f.remove=c;f.removeMany=g;f.union=h;f.intersect=i;f.diff=j;f.subset=k;f.cmp=o;f.eq=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.size=C;f.toArray=E;f.toList=D;f.minimum=F;f.minUndefined=G;f.maximum=H;f.maxUndefined=I;f.get=J;f.getUndefined=K;f.getExn=L;f.split=l;f.checkInvariantInternal=R;f.getData=O;f.getId=P;f.packIdData=Q}),null);
__d("RemoteAction.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a){return 0}function a(a){return{send:g}}function c(a,b){if(b.send===g){b.send=a;return b}}function d(a){a.send=g;return 0}function e(a,c){return b("bs_curry")._1(a.send,c)}f.create=a;f.subscribe=c;f.unsubscribe=d;f.send=e}),null);
__d("XGroupsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/{idorvanity}/{?view}/{?post_id}/",{idorvanity:{type:"String",required:!0},view:{type:"Enum",enumType:1},post_id:{type:"Int"},rule_id:{type:"Int"},ref:{type:"String"},source_id:{type:"String"},notif_t:{type:"String"},nux:{type:"Enum",enumType:1},tip_id:{type:"Int"},feedback_id:{type:"FBID"},member_tag_id:{type:"FBID"},section:{type:"Enum",enumType:1},thread_id:{type:"String"},support_thread_id:{type:"String"},mentorship_profile_id:{type:"FBID"},autopopup_create_chat_dialog:{type:"Bool",defaultValue:!1},sorting_setting:{type:"String"},multi_events:{type:"String"},stories:{type:"Exists",defaultValue:!1},topics:{type:"Exists",defaultValue:!1},highlight_location:{type:"Exists",defaultValue:!1},highlight_sections:{type:"Exists",defaultValue:!1},highlight_groupapps:{type:"Exists",defaultValue:!1},highlight_pixel:{type:"Exists",defaultValue:!1},highlight_mentorship_option:{type:"Exists",defaultValue:!1},highlight_fundraiser_option:{type:"Exists",defaultValue:!1},highlight_auto_approval:{type:"Exists",defaultValue:!1},highlight_page_member:{type:"Exists",defaultValue:!1},highlight_units_edit_bar:{type:"Exists",defaultValue:!1},highlight_keyword_alerts:{type:"Exists",defaultValue:!1},queue:{type:"Enum",enumType:1},composer_prefill:{type:"String"},hide_workplace_pagelet:{type:"Bool",defaultValue:!1},permalink_add_comment_nux_shown:{type:"Bool",defaultValue:!1},badge_type:{type:"Enum",enumType:1},work_learning_entry_point:{type:"Enum",enumType:1},chained_wp:{type:"Bool",defaultValue:!1},hoist_pending_member_ids_suggested_order:{type:"FBIDKeyset"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}e.exports=a}),null);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","mqtt_unified_client_connect");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","mqtt_unified_client_incoming_publish");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","mqtt_unified_client_outgoing_publish");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("MqttWsClientTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttEnv",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_ws_forced_polling_only:4,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13});b=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.clearTimeout=function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){if(this.$3!=null){this.$3(a);return}clearTimeout(a)});a.setTimeout=function(a){function b(b,c){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return this.$4!=null?this.$4.apply(null,arguments):setTimeout.apply(null,arguments)});a.getLoggerInstance=function(){return this.$5!=null?this.$5():g.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):new WebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};a.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};a.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return b}();var g=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};return a}();e.exports={Env:new b(),MqttGkNames:a}}),null);
__d("IrisSubscribeChecker",["MqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env;a=function(){function a(a){this.$1=g.getLoggerInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;if(typeof window!=="undefined"){a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1)}}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=g.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$1.eventLogMiscellaneousError({errorMessage:a});this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();e.exports=a}),null);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();e.exports=a}),null);
__d("MqttAnalyticsHook",["MqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env;a=function(){function a(){this.$1=g.getLoggerInstance(),this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$1.bumpCounter("session_start"),g.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt")};b.onConnectFailure=function(){this.$3++,this.$1.bumpCounter("ws_connect_failure")};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$2===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$2++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send")};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$4===0&&this.$1.bumpCounter("polling_first_success"),this.$4++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish")};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$5++};return a}();e.exports=a}),null);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f){var g=b("MqttEnv").Env;function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{value:c,offset:b}}function d(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function f(a,b){return 256*a[b]+a[b+1]}function i(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function j(a,b,c,d){d=h(b,c,d);k(a,c,d);return d+b}function k(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function l(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}b=function(){"use strict";function a(a,b,c){this.$1=a*1e3,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;this.$3?(this.$3=!1,this.$4(),this.$2=g.setTimeout(function(){a.$6()},this.$1)):this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(g.clearTimeout(this.$2),this.$2=null);this.$1>0&&(this.$2=g.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};return a}();e.exports={UTF8Length:i,convertStringToUTF8:k,concatBuffers:a,decodeMultiByteInt:c,convertUTF8ToString:l,encodeMultiByteInt:d,writeUInt16BE:h,readUInt16BE:f,writeString:j,Pinger:b}}),null);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h={endpointWithSessionId:function(a,b){return this.endpointWithExtraParameter(a,"sid",b.toString())},endpointWithExtraParameters:function(a,b){var c=this,d=a;b.forEach(function(a,b,e){d=c.endpointWithExtraParameter(d,b,a)});return d},endpointWithExtraParameter:function(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c},generateSessionId:function(){return Math.floor(g.random()*Number.MAX_SAFE_INTEGER)},promiseDone:function(a,b,c){var d=arguments.length>1?a.then(b,c):a;d.then(null,function(a){g.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})},promiseDoneWithTimeout:function(a,b,c,d){var e=!1;g.setTimeout(function(){e||(e=!0,c(new Error("promise timeout")))},d);h.promiseDone(a,function(a){e||(e=!0,b(a))},function(a){e||(e=!0,c(a))})},sprintf:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})},hasWSSupport:function(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype},getWSAvailability:function(){var b="";if("WebSocket"in a&&a.WebSocket!==null)b+="W";else return"none";"CLOSING"in a.WebSocket.prototype&&(b+="C");return b}};e.exports=h}),null);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils"],(function(a,b,c,d,e,f){var g=(c=b("MqttProtocolUtils")).UTF8Length,h=c.convertStringToUTF8,i=c.convertUTF8ToString,j=c.decodeMultiByteInt,k=c.encodeMultiByteInt,l=c.readUInt16BE,m=c.writeString,n=c.writeUInt16BE,o=b("MqttUtils").sprintf,p=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),q=[0,6,77,81,73,115,100,112,3];function r(a,b){b=b;var c=b,d=a[b],e=d>>4;b+=1;var f=j(a,b);if(f==null)return{wireMessage:null,position:c};b=f.offset;f=b+f.value;if(f>a.length)return{wireMessage:null,position:c};var g;switch(e){case p.CONNACK:c=a[b++];c=!!(c&1);var h=a[b++];g=new u(c,h);break;case p.PUBLISH:c=d&15;h=c>>1&3;d=l(a,b);b+=2;var k=i(a,b,d);b+=d;d=null;h===1&&(d=l(a,b),b+=2);var m=w.createWithBytes(a.subarray(b,f)),n=(c&1)===1;c=(c&8)===8;g=new x(k,m,h,d,n,c);break;case p.PINGREQ:g=new s("PINGREQ");break;case p.PINGRESP:g=new s("PINGRESP");break;case p.PUBACK:case p.UNSUBACK:k=l(a,b);g=new v(e===p.PUBACK?"PUBACK":"UNSUBACK",k);break;case p.SUBACK:m=l(a,b);b+=2;h=a.subarray(b,f);g=new t(m,h);break;default:throw new Error(o("Invalid MQTT message type %s.",e))}return{wireMessage:g,position:f}}function a(a){var b=[],c=0;while(c<a.length){var d=r(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}d=function(){"use strict";function a(a){this.messageType=p[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var s=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(d);f=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(k(0),1);return b};return b}(d);var t=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(d),u=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(d),v=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=k(b),d=c.length+1;b=new ArrayBuffer(b+d);var e=new Uint8Array(b);e[0]=a;e.set(c,1);d=n(this.messageIdentifier,e,d);return b};return a}(d);c=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=q.length+3;b+=g(this.clientId)+2;b+=g(this.connectOptions.userName)+2;var c=k(b);b=new ArrayBuffer(1+c.length+b);var d=new Uint8Array(b);d[0]=a;a=1;d.set(c,1);a+=c.length;d.set(q,a);a+=q.length;c=2|128;d[a++]=c;a=n(this.connectOptions.keepAliveInterval,d,a);a=m(this.clientId,g(this.clientId),d,a);a=m(this.connectOptions.userName,g(this.connectOptions.userName),d,a);return b};return b}(d);b=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){var f;f=a.call(this,b)||this;f.topic=c;if(d<0&&d>1||d===1&&e==null)throw new TypeError(o("Argument Invalid. qos: %s messageType: %s.",d,b));f.qos=d;f.messageIdentifier=e;return f}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=g(this.topic),c=2+b+2;this.messageType===p.SUBSCRIBE&&(c+=1);var d=k(c);c=new ArrayBuffer(1+d.length+c);var e=new Uint8Array(c);e[0]=a;a=1;e.set(d,1);a+=d.length;this.messageIdentifier!=null&&(a=n(this.messageIdentifier,e,a));a=m(this.topic,b,e,a);this.messageType===p.SUBSCRIBE&&this.qos!=null&&(e[a++]=this.qos);return c};return b}(d);var w=function(){"use strict";function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(g(b)));h(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=i(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),x=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=g(this.topic),c=b+2;c+=this.messageIdentifier==null?0:2;var d=this.payloadMessage.bytes();c+=d.byteLength;var e=k(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;f.set(e,1);a=1+e.length;a=m(this.topic,b,f,a);this.messageIdentifier!=null&&(a=n(this.messageIdentifier,f,a));f.set(d,a);return c};return a}(d);e.exports={MESSAGE_TYPE:p,WireMessage:{Base:d,PubAckUnsubAck:v,Ping:s,ConnAck:u,Connect:c,Disconnect:f,Subscription:b,Publish:x},createMessageWithString:w.createWithString,decodeMessage:r,decodeByteMessages:a}}),null);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){this.errorCode=a,this.errorMessage=b};b=function(a,b){this.mqttError=a,this.connAck=b};c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));e.exports={MqttError:a,MqttChannelError:c,ConnectFailure:b}}),null);
__d("MqttProtocolClient",["MqttEnv","MqttProtocolCodec","MqttTypes","MqttProtocolUtils"],(function(a,b,c,d,e,f){"use strict";var g=30,h=6e4,i=b("MqttEnv").Env,j=(a=b("MqttProtocolCodec")).MESSAGE_TYPE,k=a.WireMessage,l=a.createMessageWithString,m=a.decodeByteMessages;c=b("MqttTypes").MqttError;var n=b("MqttTypes").ConnectFailure,o=b("MqttProtocolUtils").concatBuffers,p=b("MqttProtocolUtils").Pinger,q={SOCKET_ERROR:new c(1,"Socket error"),SOCKET_MESSAGE:new c(2,"Unable to parse invalid socket message"),INVALID_DATA_TYPE:new c(3,"Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new c(4,"Connect timed out"),CONNACK_FAILURE:new c(5,"Connection failure due to connack"),PING_TIMEOUT:new c(6,"Ping timeout"),APP_DISCONNECT:new c(7,"Disconnect initiated by app"),SERVER_DISCONNECT:new c(8,"Disconnect message sent my server"),SOCKET_CLOSE:new c(9,"Socket connection closed")};d=function(){function a(a){this.$3=a,this.$2={userName:"",mqttVersion:3,keepAliveInterval:10,ignoreSubProtocol:!1,onConnectSuccess:function(){},onConnectFailure:function(a){},onConnection:function(){},onConnectionError:function(a){},onConnectionLost:function(a){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a,b){}},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=i.getLoggerInstance()}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);this.$7=i.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$11(q.CONNECT_TIMEOUT)},g*1e3);this.$6=i.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$12(new k.Connect(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$11(q.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=o(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=m(a);var c=a.messages;b.$10=a.remaining;for(var a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,q.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$11(q.SOCKET_MESSAGE)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket"),b.$11(q.SOCKET_ERROR)};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),b.$11(q.SOCKET_CLOSE)};this.$8!=null&&this.$8.cancel();this.$8=new p(a.keepAliveInterval,this.$12.bind(this,new k.Ping("PINGREQ")),this.$11.bind(this,q.PING_TIMEOUT))};b.$13=function(){this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(a){},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(a){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null),this.$2.onConnectSuccess=function(){},this.$2.onConnectFailure=function(a){},this.$2.onConnection=function(){},this.$2.onConnectionError=function(a){},this.$2.onConnectionLost=function(a){},this.$2.onMessageArrived=function(a,b,c){},this.$2.onMessageDelivered=function(a,b){}};b.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$13();return}this.$12(new k.Disconnect());this.$9.bumpCounter("protocol.debug.disconnect");this.$11(q.APP_DISCONNECT)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw new Error("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new k.Subscription("SUBSCRIBE",a,0,this.$14());this.$12(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw new Error("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new k.Subscription("UNSUBSCRIBE",a,0,this.$14());this.$12(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var d=this.$14();a=new k.Publish(a,l(b),c,d);this.$12(a);return d};b.$14=function(){++this.$4===h&&(this.$4=1);return this.$4};b.$11=function(a,b){this.$9.bumpCounter("protocol.debug.disconnect.internal");var c=this.$5,d=this.$2,e=d.onConnectionLost,f=d.onConnectFailure;this.setConnected(!1);this.$13();c?i.scheduleCallback(function(){e(a)}):i.scheduleCallback(function(){f(new n(a,b!=null?b:-1))})};b.$12=function(a){var b=this.$6;if(b==null)return;if(b.readyState!=b.OPEN)return;b.send(a.encode())};b.handleMessage=function(a){var b=this;switch(a.messageType){case j.CONNACK:this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);if(a instanceof k.ConnAck){var c=a;if(c.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$11(q.CONNACK_FAILURE,c.returnCode);return}i.scheduleCallback(function(){b.$2.onConnectSuccess()});this.$8!=null&&this.$8.reset()}break;case j.PUBLISH:if(a instanceof k.Publish){var d=a;i.scheduleCallback(function(){b.$2.onMessageArrived(d.topic,d.payloadMessage.payloadString,d.qos)});c=d.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(d.qos===1&&c!=null){c=new k.PubAckUnsubAck("PUBACK",c);this.$12(c)}}break;case j.PUBACK:if(a instanceof k.PubAckUnsubAck){c=a;var e=c.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");i.scheduleCallback(function(){b.$2.onMessageDelivered("",e)})}break;case j.PINGRESP:this.$8!=null&&this.$8.reset();break;case j.DISCONNECT:this.$11(q.SERVER_DISCONNECT);break;case j.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case j.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();e.exports=d}),null);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});e.exports={MqttPublishEvent:a}}),null);
__d("MqttUserName",["gkx"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e,f,g,h){h===void 0&&(h=null),this.$1=a,this.$2=c,this.$3=d,this.$4=e,this.$5=f,this.$6=g,this.$7=b("gkx")("1166607")?!1:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus(),this.$8=h}var c=a.prototype;c.gen=function(a,c,d,e){e===void 0&&(e=[]);var f=b("gkx")("1166607")?!1:this.$7;a={u:this.$1,s:a,cp:this.$3,ecp:this.$2,chat_on:this.$6,fg:f,d:this.$4,ct:"websocket",mqtt_sid:"",aid:this.$5,st:c,pm:d,dc:"",no_auto_fg:!0,gas:this.$8,pack:e};return JSON.stringify(a)};c.setForegroundState=function(a){this.$7=a};c.setChatVisibility=function(a){this.$6=a};c.getEndpointCapabilities=function(){return this.$2};c.setEndpointCapabilities=function(a){this.$2=a};c.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();e.exports=a}),null);
__d("MqttConnection",["Promise","MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env;b("MqttEnv").MqttGkNames;var h=b("MqttPublishListener").MqttPublishEvent;b("MqttTypes").ConnectFailure;var i=b("MqttTypes").MqttChannelError;b("MqttTypes").MqttError;var j=10,k="publish",l="subscribe",m="unsubscribe",n=function(a){},o=18e4,p=5*1e3,q=15,r=21;a=function(){function a(){this.$8=!1;this.$10=g.getLoggerInstance();this.$11="Disconnected";this.$14=new Set();this.$15=new Map();this.$18=0;this.$19=0;this.$12=0;this.$13=0;this.$8=!1;this.$5="";this.$6=new(b("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$7=null;var a=function(){};this.$1=a;this.$2=a;this.$3=a;this.$16=!1;this.$17=!1;this.$20=new(b("MqttConnectionHookCollection"))();this.$4=function(){return[]}}var c=a.prototype;c.run=function(a){var b=this,c=a.onStateChange,d=a.onJSError,e=a.onMessageReceived,f=a.endpoint,g=a.mqttUserName,h=a.subscribedTopics;a=a.extraConnectMessageProvider;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=c;this.$3=e;this.$5=f;this.$6=g;this.$8=!0;this.$12=0;this.$2=d||n;h&&h.forEach(function(a){return b.$14.add(a)});this.$4=a;this.$21();this.$22()};c.shutdown=function(){this.$23(),this.$24("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};c.subscribe=function(a){this.$14.add(a);this.ensureConnected(l)&&this.$25(a);return!0};c.publish=function(a,c,d,e){var f={resolve:function(){},reject:function(a){}};e!=null&&(f.listener=e);var g=new(b("Promise"))(function(a,b){f.resolve=a,f.reject=b}),i=this.ensureConnected(k);!i?(e==null?void 0:e.onEvent(h.NOT_CONNECTED),f.reject(new Error("Client disconnected"))):this.$26(a,c,d,f);return g};c.unsubscribe=function(a){this.$14["delete"](a);this.ensureConnected(m)&&this.$27(a);return!0};c.addHook=function(a){this.$20.addHook(a)};c.removeHook=function(a){this.$20.removeHook(a)};c.isRunning=function(){return this.$8};c.getSessionId=function(){return this.$9};c.hasFatal=function(){return this.$16};c.hasConnectSuccess=function(){return this.$17};c.canPublish=function(){return this.ensureConnected("canPublish")};c.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};c.connectionState=function(){return this.$11};c.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw new Error("Unknown state "+a)};c.testOnlyGetSubscribedTopics=function(){return this.$14};c.$21=function(){var a=this;typeof window!=="undefined"&&window.addEventListener("unload",function(b){return a.$28(b)})};c.$28=function(a){this.publish("/browser_close","{}",0)};c.$23=function(){this.$8&&this.$7!=null&&(this.$29("Disconnected"),this.$7!=null&&this.$7.disconnect(),this.$7=null)};c.$29=function(a){a!==this.$11&&(this.$11=a,this.$1(a))};c.$22=function(){var a=this;if(!this.$8)return;this.$29("Connecting");var c=Date.now();this.$9=b("MqttUtils").generateSessionId();var d=Array.from(this.$14),e=b("MqttUtils").endpointWithSessionId(this.$5,this.$9);try{this.$7=new(b("MqttProtocolClient"))(e);var f=this.$30(),g=f.map(function(a){return a.topic});e=this.$6.gen(this.$9,d,f);this.$7!=null&&(this.$7.connect({userName:e,mqttVersion:3,keepAliveInterval:j,ignoreSubProtocol:!0,onConnectFailure:function(b){return a.$31(b,c,d,g)},onConnectSuccess:function(){return a.$32(c,d,g)},onConnection:function(){return a.$33(f,d)},onConnectionError:function(b){return a.$34(b)},onConnectionLost:function(b){return a.$35(b)},onMessageArrived:function(b,c,d){return a.$36(b,c,d)},onMessageDelivered:function(b,c){return a.$37(b,c)}}),this.$10.bumpCounter("protocol.connectattempt"),this.$20.onConnectAttempt(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"))}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$29("Disconnected"),this.$38(!1,!1,c,d,[],14,a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$20.onWSFatal(),this.$39(new i(!1,"ws_js_error",a),"client_init")}};c.$30=function(){var a=this.$4(),b=65536;a=a.map(function(a){a.messageId=b--;return a});return a};c.$25=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("_doSubscribe","Subscribing to "+a);this.$20.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};c.$27=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("_doUnsubscribe","Unsubscribing to "+a);this.$20.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};c.$26=function(a,b,c,d){if(this.$7!=null)try{b=this.$7.publish(a,b,c);this.$10.bumpCounter("protocol.publish");var e=b!=null?b:"null";this.$10.debugTrace("_doPublish","publish "+a+" with messageId:"+e+" qos:"+c);this.$20.onPublish(a);(e=d.listener)==null?void 0:e.onEvent(h.SENT);b!=null?this.$15.set(b,d):d.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);d.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};c.$40=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$23();this.$24("reconnect");this.$41();this.$9=-1;this.$13=0;a=a!=null?a:Math.pow(2,Math.min(this.$12,6))*(1e3+g.random()*200);this.$10.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");g.setTimeout(function(){b.$22()},a);this.$12+=1};c.$41=function(){var a=Date.now()-this.$13,b=this.$13!==0&&a>p,c=this.$12>q;(b||c)&&(this.$12=0);this.$13!==0&&a<=p&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};c.$38=function(a,b,c,d,e,f,g){a===!0?this.$19++:this.$18++,this.$10.eventLogConnect({sessionID:this.$9,connectionStatus:a,connectionState:this.mqttStateFromConnectionState(this.$11),ackReceived:b,duration:Date.now()-c,hostname:this.$5,attemptNumber:this.$12,failTotal:this.$18,successTotal:this.$19,subscribedTopics:d,publishes:e,errorCode:f,errorMessage:g})};c.$31=function(a,b,c,d){var e=a.mqttError,f=e.errorMessage;this.$10.debugTrace("connect","Connect failed "+f);this.$10.bumpCounter("protocol.onconnectfailure");this.$20.onConnectFailure();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$38(!1,a.connAck!=null,b,c,d,e.errorCode,f);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===r){this.$40(o);return}}this.$40()};c.$33=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$20.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$20.onSubscribe(a)});a.forEach(function(a){c.$20.onPublish(a.topic)});this.$29("TransportConnected")};c.$32=function(a,b,c){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$20.onConnectSuccess(),this.$17=!0,this.$38(!0,!0,a,b,c),this.$29("Connected"),this.$42(b),this.$13=Date.now()};c.$35=function(a){this.$10.bumpCounter("protocol.onconnectionlost"),a.errorCode&&this.$10.eventLogDisconnect({sessionID:this.$9,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$13}),this.$10.debugTrace("connect","connection lost"),this.$20.onConnectionLost(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost"),this.$40()};c.$34=function(a){};c.$36=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$20.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};c.$37=function(a,b){this.$10.bumpCounter("protocol.onmessagedelivered");a=b!=null?b:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$15.get(b);if(a==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$15["delete"](b);(b=a.listener)==null?void 0:b.onEvent(h.ACKED);a.resolve()};c.$24=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$15.forEach(function(b,c,d){(c=b.listener)==null?void 0:c.onEvent(h.NOT_ACKED);b.reject(new Error(a))}),this.$15.clear()};c.$42=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$14.has(a)||b.unsubscribe(a)});a=new Set(this.$14);a.forEach(function(a){c.has(a)||b.subscribe(a)})};c.$39=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$16=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};return a}();e.exports=a}),null);
__d("MqttChannel",["Promise","requireDeferred","ChannelClientID","IrisSubscribeChecker","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttPublishTimeoutConfig","MqttUserName","MqttUtils","isFastRefreshEnabledForCurrentDomain","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames,i=b("MqttPublishListener").MqttPublishEvent,j=b("MqttPublishTimeoutConfig").mqttPublishTimeoutMs||60*1e3;a=function(){function a(a){var c=this,d=a.endpoint,e=a.pollingEndpoint,f=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;a=a.guestAuthString;a=a===void 0?null:a;this.$10=g.getLoggerInstance();this.$10.setAppId(h);this.$11=new(b("MqttUserName"))(f,j,k,b("ChannelClientID").getID(),h,l,a);this.$1=d;this.$2=e;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new(b("MqttConnection"))();this.$12=null;this.$15=new(b("MqttAnalyticsHook"))();this.$14=new Map();this.$13=[];if(!g.isUserLoggedInNow()&&!b("isFastRefreshEnabledForCurrentDomain")()&&(a==null||a=="")){this.$10.bumpCounter("logged_out_init");return}this.$9.addHook(this.$15);this.$9.addHook(new(b("IrisSubscribeChecker"))(function(){return c.$4.size>0}));this.$16(i);this.$17();this.$10.logIfLoggedOut()}var c=a.prototype;c.$16=function(a){var c=this;if(this.$9.isRunning()){this.$18("run","Connection started calling run again");return}if(g.genGk(h.mqtt_ws_polling_enabled))if(g.genGk(h.mqtt_ws_forced_polling_only)){this.$18("MqttChannel","Websocket disabled, will do long polling only");return}else if(!b("MqttUtils").hasWSSupport()){this.$18("MqttChannel","Websocket Unavailable, will do long polling only");this.$10.bumpCounter("ws_unavailable_polling");return}this.$9.run({onStateChange:function(a){c.$19(a)},onJSError:function(a){c.$20(a)},onMessageReceived:function(a,b,d){c.$21(a,b,d)},endpoint:this.$1,mqttUserName:this.$11,subscribedTopics:a,extraConnectMessageProvider:function(){return c.$22()}})};c.shutdown=function(){this.$9&&this.$9.shutdown()};c.publish=function(a,c,d){d===void 0&&(d={qos:1,skipBuffer:!1});var e;d.qos===0?e=this.$23(a,c,d.listener):e=this.$24(a,c,d);b("MqttUtils").promiseDone(e,function(){},function(a){(a=d.listener)==null?void 0:a.onEvent(i.PUBLISH_ERROR)});return e};c.$23=function(a,b,c){return this.$25(a,b,0,c)};c.$24=function(a,c,d){var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),h=g.random();a={topic:a,payload:c,options:d,ack:e,publishToken:h,timeoutId:null};if(d.skipBuffer)if(this.$9.connectionState()==="Connecting"){this.$13.push(a);(c=d.listener)==null?void 0:c.onEvent(i.QUEUED)}else this.$26(a);else{a.timeoutId=this.$27(h);this.$14.set(h,a);(c=d.listener)==null?void 0:c.onEvent(i.QUEUED);this.$28(a)}return f};c.$26=function(a){b("MqttUtils").promiseDone(this.$25(a.topic,a.payload,a.options.qos,a.options.listener),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};c.$28=function(a){var c=this;b("MqttUtils").promiseDone(this.$25(a.topic,a.payload,a.options.qos,a.options.listener),function(){return c.$29(a)},function(a){})};c.$25=function(a,c,d,e){var f=this,g,h,j=this.getConnectionState(),k=Date.now();!this.$9.canPublish()&&this.$12&&this.$12.canPublish()?(g=this.$12.publish(a,c,d),h="lp",e!=null&&(g=g.then(function(){return e.onEvent(i.SENT)})),this.$10.bumpCounter("try_publish_lp")):(g=this.$9.publish(a,c,d,e),h="ws",this.$10.bumpCounter("try_publish_ws"));b("promiseDone")(g,function(){f.$10.eventLogOutgoingPublish({sessionID:f.$9.getSessionId(),topic:a,qos:d,payloadSizeBytes:c.length*2,success:!0,protocol:h,errorMessage:null,connectionState:j,startTime:k})},function(b){f.$10.eventLogOutgoingPublish({sessionID:f.$9.getSessionId(),topic:a,qos:d,payloadSizeBytes:c.length*2,success:!1,protocol:h,errorMessage:b.toString(),connectionState:j,startTime:k})});return g};c.subscribe=function(a,b){var c=this;this.$9.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};c.subscribeChannelEvents=function(a){this.$3.push(a)};c.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};c.registerExtraConnectPayloadProvider=function(a){var b=this;this.$18("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$9.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};c.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};c.unsubscribeAll=function(a){this.$9.unsubscribe(a),this.$8["delete"](a)};c.getConnectionState=function(){return this.$5};c.getLongPollingStatus=function(){return this.$7};c.getEndpoint=function(){return this.$1};c.addHook=function(a){this.$9.addHook(a)};c.removeHook=function(a){this.$9.removeHook(a)};c.testOnlyMessageReceived=function(a,b){this.$21(a,b,-1)};c.$30=function(a){var b=this.$14.get(a);b!=null&&b.timeoutId!=null&&g.clearTimeout(b.timeoutId);this.$14["delete"](a)};c.$27=function(a){var b=this;a=g.setTimeout(function(a){var c=b.$14.get(a);if(!c)return;var d=c.topic;b.$10.bumpCounter("publish_timeout."+d);b.$10.debugTrace("publish_timeout","Timeout publishing topic: "+d+" publishToken: "+a);b.$10.eventLogPublishTimeout({topic:d});b.$30(a);c.ack.reject(new Error("Publish Timed Out"))},j,a);return a};c.$29=function(a){var b=a.publishToken,c=this.$14.get(b);if(!c)return;this.$30(b);a.ack.resolve();this.$10.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$10.bumpCounter("publish_success."+a.topic)};c.$21=function(a,b,c){var d=this.$8.get(a);this.$10.eventLogIncomingPublish({sessionID:this.$9.getSessionId(),topic:a,connectionState:this.getConnectionState(),qos:c,payloadSizeBytes:b.length*2});if(!d)this.$10.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var c=d,a=Array.isArray(c),d=0,c=a?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(a){if(d>=c.length)break;e=c[d++]}else{d=c.next();if(d.done)break;e=d.value}e=e;try{e(b)}catch(a){this.$10.logError(a,"Listener exception"),this.$10.bumpCounter("listener_error")}}};c.$20=function(a){if(g.genGk(h.mqtt_ws_polling_enabled)){a.isRecoverable?this.$10.bumpCounter("recoverable_error_skipped"):this.$10.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$10.bumpCounter("recoverable_error_not_skipped"):this.$10.bumpCounter("unrecoverable_error_not_skipped");this.$31(a)};c.$32=function(a){this.$31(a)};c.$31=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};c.$33=function(){var a=this;this.$13.forEach(function(b){a.$26(b)});this.$13=[];this.$14.forEach(function(b,c,d){a.$28(b)})};c.$19=function(a){a==="Connecting"?(this.$13.forEach(function(a){a.ack.reject(new Error("Client Reconnecting"))}),this.$13=[]):a==="TransportConnected"&&this.$33(),this.$18("_changeState","Connection state = "+a),this.$34(a,this.$7)};c.$35=function(a,b){this.$12&&this.$12.canPublish()&&this.$33(),this.$18("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$34(this.$6,a)};c.$34=function(a,b){var c=this.$9.mqttStateFromConnectionState(a);this.$12&&this.$12.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$36(c))};c.$36=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};c.$22=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$10.logError(b,"ConnectPayload provider exception"),a.$10.bumpCounter("connectPayloadProvider_error")}});return b};c.$17=function(){var a=this;g.genGk(h.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&b("requireDeferred")("MqttLongPollingRunner").onReady(function(b){b=new b(a.$2,a.$11,a.$9.hasFatal(),a.$9.hasConnectSuccess(),function(b,c,d){return a.$21(b,c,d)},function(){return Array.from(a.$8.keys())},function(){return a.$22()},function(b){a.$32(b)},function(b,c){a.$35(b,c)});b.start();a.$9.addHook(b);b.addHook(a.$15);a.$12=b;a.$10.debugTrace("MqttChannel","longPollingRunner loaded")})};c.$18=function(a,b){this.$10.debugTrace(a,"Mqtt channel: "+b)};c.setForegroundState=function(a){this.$11&&this.$11.setForegroundState(a)};c.setChatVisibility=function(a){this.$11&&this.$11.setChatVisibility(a)};c.getEndpointCapabilities=function(){return this.$11.getEndpointCapabilities()};c.setEndpointCapabilities=function(a){this.$11.setEndpointCapabilities(a)};return a}();e.exports=a}),null);
__d("MqttLogger",["BanzaiODS","ChannelClientID","FantailLogger","FBLogger","Log","LogHistory","MqttEnv","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttUtils","MqttWsClientTypedLoggerLite","Random","gkx"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttWsClientTypedLoggerLite").log,i=b("Random").coinflip,j="mqtt_client",k=100,l=null,m={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},n={CONNECT:"connect",OUTGOING_PUBLISH:"outgoing_publish",INCOMING_PUBLISH:"incoming_publish"};a=function(){a.getInstance=function(){l||(l=new a());return l};function a(){this.$1=b("LogHistory").getInstance(j),this.$2=0,this.$3=b("gkx")("778292"),this.$4=Date.now(),this.$5=b("ChannelClientID").getID()}var c=a.prototype;c.setAppId=function(a){this.$2===0&&(this.$2=a)};c.eventLogConnect=function(a){var c=a.sessionID,d=a.connectionStatus,e=a.connectionState,f=a.ackReceived,h=a.duration,i=a.hostname,j=a.attemptNumber;a.failTotal;a.successTotal;var k=a.subscribedTopics,l=a.publishes,o=a.errorCode;a=a.errorMessage;var p=d?"success":"failed";this.bumpCounter(m.CONNECT+"."+p);p={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:h,hostname:i,feature_availability:b("MqttUtils").getWSAvailability(),attempt_number:j,subscribed_topics:k,publishes:l,error_code:o,error_message:a};var q={app_id:this.$2,event_type:n.CONNECT,acked:f,connection_state:e,client_type:"WEBSOCKET",duration:h,error:a,session_id:c};this.$6(m.CONNECT,p);this.$7(function(){b("MqttUnifiedClientConnectFalcoEvent").log(function(){return q})})};c.eventLogPull=function(a){var b=a.pullEventName,c=a.sessionID,d=a.status,e=a.duration,f=a.hostname;a=a.errorMessage;c={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:f,error_message:a};this.$6(b,c)};c.eventLogPullFinish=function(a){var b=a.pullEventName,c=a.sessionID,d=a.duration,e=a.errorMessage,f=a.publishReceived;a=a.publishSent;c={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,duration:d,error_message:e,publish_received:f,publish_sent:a};this.$6(b,c)};c.eventLogDisconnect=function(a){var b=a.sessionID,c=a.errorCode,d=a.errorMessage;a=a.duration;this.bumpCounter(m.DISCONNECT);b={device_id:this.$5,session_id:b,href:window.location.hostname,duration:a,error_code:c,error_message:d};this.$6(m.DISCONNECT,b)};c.eventLogOutgoingPublish=function(a){var c=a.sessionID,d=a.topic,e=a.qos,f=a.payloadSizeBytes,g=a.success,h=a.protocol,i=a.errorMessage,j=a.connectionState;a=a.startTime;this.bumpCounter(m.PUBLISH+"."+d);h={device_id:this.$5,href:window.location.hostname,topic:d,qos:e,payload_size_bytes:f,success:g?1:0,protocol:h,error_message:i};var k={app_id:this.$2,event_type:n.OUTGOING_PUBLISH,session_id:c,topic:d,client_type:"WEBSOCKET",connection_state:j,qos:e,acked:e==1?g:null,duration:Date.now()-a,error:i,payload_size:f};this.$6(m.PUBLISH,h);this.$7(function(){b("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return k})})};c.eventLogIncomingPublish=function(a){var c=a.sessionID,d=a.topic,e=a.connectionState,f=a.qos;a=a.payloadSizeBytes;var g={app_id:this.$2,event_type:n.INCOMING_PUBLISH,session_id:c,topic:d,client_type:"WEBSOCKET",connection_state:e,qos:f,payload_size:a};this.$7(function(){b("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return g})})};c.logError=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{b("FBLogger")(j).catching(a).mustfix(c),d.$8(b("FantailLogger").error,c)}catch(a){}})};c.eventLogPublishTimeout=function(a){a=a.topic;a={device_id:this.$5,href:window.location.hostname,topic:a};this.$6(m.PUBLISH_TIMEOUT,a)};c.eventLogMiscellaneousError=function(a){a=a.errorMessage;a={device_id:this.$5,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,error_message:a,time_passed:Date.now()-this.$4};this.$6(m.CLIENT_ERROR,a)};c.logIfLoggedOut=function(){if(!b("gkx")("1186990")||g.isUserLoggedInNow())return;var a={logged_in:g.isUserLoggedInNow(),href:window.location.href,error_message:"Not logged in",time_passed:Date.now()-this.$4};this.$6(m.CLIENT_ERROR,a)};c.logErrorWarn=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{b("FBLogger")(j).catching(a).warn(c),d.$8(b("FantailLogger").warn,c)}catch(a){}})};c.logWarn=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{d.$1.warn(a,c),d.$8(b("FantailLogger").warn,c)}catch(a){}})};c.debugTrace=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{d.$1.debug(a,c),d.$8(b("FantailLogger").debug,c)}catch(a){}})};c.bumpCounter=function(a){var c=this;if(!i(k))return;g.scheduleLoggingCallback(function(){c.$2!==0&&b("BanzaiODS").bumpEntityKey(2966,"mqtt_ws_client",c.$2+"."+a,k),b("BanzaiODS").bumpEntityKey(2966,"mqtt_ws_client",a,k)})};c.$6=function(a,c){var d=this;g.scheduleLoggingCallback(function(){c.event_type=a;c.app_id=d.$2;c.online=d.$9();var e=JSON.stringify(c);d.$1.log(a,e);a!==m.DISCONNECT&&h(c);d.$8(b("FantailLogger").info,e)})};c.$7=function(a){b("gkx")("1272991")&&g.scheduleLoggingCallback(a)};c.$8=function(a,b){g.scheduleLoggingCallback(function(){})};c.$9=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();e.exports=a}),null);
__d("MqttEnvInitializer",["CurrentUser","JSScheduler","MqttEnv","MqttLogger","Random","WebStorage","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";var g,h=b("MqttEnv").MqttGkNames,i=b("MqttEnv").Env,j="mqtt:",k={genGk:function(a){switch(a){case h.mqtt_waterfall_log_client_sampling:return b("gkx")("832242");case h.mqtt_ws_polling_enabled:return!0;case h.mqtt_ws_forced_polling_only:return b("gkx")("865724");case h.mqtt_lp_use_fetch:return b("gkx")("945829");case h.mqtt_fast_lp:return b("gkx")("1001007");case h.mqtt_lp_no_delay:return b("gkx")("1066746");case h.mqtt_enable_publish_over_polling:return b("gkx")("968609");default:b("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}},useJSScheduler:function(a){return b("gkx")("987139")?a:null},initialize:function(){i.initialize(b("Random").random,b("CurrentUser").isLoggedInNow,b("clearTimeout"),b("setTimeoutAcrossTransitions"),function(){return b("MqttLogger").getInstance()},k.genGk,null,k.useJSScheduler(b("JSScheduler").scheduleNormalPriCallback),k.useJSScheduler(b("JSScheduler").scheduleLoggingPriCallback),function(a,c){var d=(g||(g=b("WebStorage"))).getLocalStorage();if(d){d=d.getItem(j+a);if(d!=null)return d}return c},function(a,c){var d=(g||(g=b("WebStorage"))).getLocalStorage();d&&(c==null?d.removeItem(j+a):d.setItem(j+a,c))})}};e.exports=k}),null);
__d("FBMqttChannel",["MqttChannel","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f){"use strict";b("MqttEnvInitializer").initialize();e.exports=new(b("MqttChannel"))({endpoint:(a=b("MqttWebConfig")).endpoint,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid,appId:a.appID,initialSubscribedTopics:a.subscribedTopics,capabilities:a.capabilities,clientCapabilities:a.clientCapabilities,chatVisibility:a.chatVisibility})}),null);
__d("MWChatFriendsDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"limit",type:"Int!"},{defaultValue:null,kind:"LocalArgument",name:"scale",type:"Float!"},{defaultValue:null,kind:"LocalArgument",name:"order_by",type:"[MessengerContactsOrdering]!"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c=[b],d=[{kind:"Variable",name:"first",variableName:"limit"},{kind:"Variable",name:"orderby",variableName:"order_by"},{kind:"Literal",name:"without_memorialized",value:!0}],e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f={alias:null,args:[{kind:"Literal",name:"height",value:36},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},g=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatFriendsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:c,storageKey:null},{alias:null,args:d,concreteType:"MessengerContactsConnection",kind:"LinkedField",name:"messenger_contacts",plural:!1,selections:[{alias:null,args:null,concreteType:"Contact",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_profile",plural:!1,selections:c,storageKey:null},e,f],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatFriendsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:g,storageKey:null},{alias:null,args:d,concreteType:"MessengerContactsConnection",kind:"LinkedField",name:"messenger_contacts",plural:!1,selections:[{alias:null,args:null,concreteType:"Contact",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_profile",plural:!1,selections:g,storageKey:null},e,f,b],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"2893423234087979",metadata:{},name:"MWChatFriendsDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatKeywordDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"query",type:"String!"},{defaultValue:null,kind:"LocalArgument",name:"supportedTypes",type:"[MessengerSearchSupportedType!]!"},{defaultValue:null,kind:"LocalArgument",name:"scale",type:"Float!"}],b=[{kind:"Variable",name:"query",variableName:"query"}],c=[{kind:"Variable",name:"supported_types",variableName:"supportedTypes"}],d={alias:null,args:null,kind:"ScalarField",name:"display_name",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"subtext",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={kind:"Literal",name:"height",value:36},i={kind:"Literal",name:"width",value:36},j=[h,{kind:"Variable",name:"scale",variableName:"scale"},i],k=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],l={alias:null,args:j,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:k,storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"is_on_viewer_contact_list",storageKey:null},n=[g,l,{alias:null,args:null,concreteType:"Contact",kind:"LinkedField",name:"messenger_contact",plural:!1,selections:[m],storageKey:null}],o={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null};h={alias:null,args:[h,i],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:k,storageKey:"image(height:36,width:36)"};i=[{kind:"Literal",name:"first",value:10}];var q={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},r={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"User",abstractKey:null};j={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null},{alias:"page_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"page_profile_picture",args:j,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:k,storageKey:null}],type:"Page",abstractKey:null};k=[l,{alias:null,args:null,concreteType:"Contact",kind:"LinkedField",name:"messenger_contact",plural:!1,selections:[m,g],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatKeywordDataSourceQuery",selections:[{alias:null,args:b,concreteType:"MessengerSearchRootQuery",kind:"LinkedField",name:"messenger_search",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerSearchRootQueryResultModulesConnection",kind:"LinkedField",name:"result_modules",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:c,concreteType:"MessengerSearchResultsConnection",kind:"LinkedField",name:"search_results",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerSearchResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[d,e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[f,{kind:"InlineFragment",selections:n,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[o,p,h,{alias:null,args:i,concreteType:"MessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"other_participants",plural:!1,selections:[q,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[g,l,r],storageKey:null}],storageKey:null}],storageKey:"other_participants(first:10)"}],type:"MessengerViewerGroupThread",abstractKey:null},j,{kind:"InlineFragment",selections:n,type:"InstagramMessagingUser",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatKeywordDataSourceQuery",selections:[{alias:null,args:b,concreteType:"MessengerSearchRootQuery",kind:"LinkedField",name:"messenger_search",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerSearchRootQueryResultModulesConnection",kind:"LinkedField",name:"result_modules",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[f,{alias:null,args:c,concreteType:"MessengerSearchResultsConnection",kind:"LinkedField",name:"search_results",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerSearchResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[d,e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[f,g,{kind:"InlineFragment",selections:k,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[o,p,h,{alias:null,args:i,concreteType:"MessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"other_participants",plural:!1,selections:[q,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[f,g,l,r],storageKey:null},g],storageKey:null}],storageKey:"other_participants(first:10)"}],type:"MessengerViewerGroupThread",abstractKey:null},j,{kind:"InlineFragment",selections:k,type:"InstagramMessagingUser",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"2659472977484986",metadata:{},name:"MWChatKeywordDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatKeywordDataSourceQuery_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Literal",name:"height",value:36},b={kind:"Literal",name:"width",value:36},c=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],kind:"Fragment",metadata:null,name:"MWChatKeywordDataSourceQuery_thread",selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:null,args:[a,b],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:c,storageKey:"image(height:36,width:36)"},{alias:null,args:[{kind:"Literal",name:"first",value:10}],concreteType:"MessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"other_participants",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[a,{kind:"Variable",name:"scale",variableName:"scale"},b],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:"other_participants(first:10)"}],type:"MessengerViewerGroupThread",abstractKey:null}}();e.exports=a}),null);
__d("MWMSMarkThreadAsRead.re",["MWMSMarkThreadAsRead.bs"],(function(a,b,c,d,e,f){a=b("MWMSMarkThreadAsRead.bs").useHook;f.useHook=a}),null);
__d("MWMSMarkThreadAsUnread.bs",["React","FBMqttChannel","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.useCallback(function(c){c=JSON.stringify({threadId:a,mark:"read",state:!1});if(c!==void 0){b("FBMqttChannel").publish("/mark_thread",c);return 0}else{b("recoverableViolation")("Failed to construct JSON to mark read/unread","messenger_comet");return 0}},[a])}f.useHook=a}),null);
__d("MWMSMarkThreadAsUnread.re",["MWMSMarkThreadAsUnread.bs"],(function(a,b,c,d,e,f){a=b("MWMSMarkThreadAsUnread.bs").useHook;f.useHook=a}),null);
__d("MessengerMuteUtils.re",["bs_curry","MessengerMuteUtils.bs"],(function(a,b,c,d,e,f){a=b("MessengerMuteUtils.bs").mutedUntilLabel;f.mutedUntilLabel=a;c=function(a,c){a=b("bs_curry")._2(b("MessengerMuteUtils.bs").muteActionLabel,a,c);return a};f.muteActionLabel=c}),null);
__d("MWChatProfile.re",["MWChatProfile.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MWChatProfile.bs").make;f.make=a}),null);
__d("MWChatHeadSummaryPopout.re",["MWChatHeadSummaryPopout.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MWChatHeadSummaryPopout.bs").make;f.make=a}),null);
__d("MWJewelThreadSnippet.react",["BaseText.react","React","TetraText.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.isUnread;a=a.text;return c?g.jsx(b("TetraText.react"),{color:"highlight",numberOfLines:1,type:"bodyLink4",children:a}):g.jsx(b("TetraText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:a})}e.exports=a}),null);
__d("MWJewelThreadLastMessage.react",["fbt","CometRelativeTimestamp.react","Locale","Middot.react","MWJewelThreadSnippet.react","React","TetraText.react","stylex","useSnippetRenderer.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c;a=a.thread;c=((c=a.rtc_call_data)==null?void 0:c.call_state)!=="NO_ONGOING_CALL";var d=b("useSnippetRenderer.react")(a);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"j83agx80"+(b("Locale").isRTL()?" rl25f0pe":""),children:[h.jsx(b("MWJewelThreadSnippet.react"),{isUnread:a.unread_count!==0,text:d}),h.jsx("span",{className:"kkf49tns oygrvhab cgat1ltu kvgmc6g5",children:h.jsx(b("TetraText.react"),{type:"body4",children:h.jsx(b("Middot.react"),{})})}),h.jsx("span",{className:"g0qnabr5",children:h.jsx(b("CometRelativeTimestamp.react"),{date:new Date(a.last_message_timestamp),format:"minimized"})})]}),c&&h.jsx(b("TetraText.react"),{color:"positive",type:"body4",children:g._("Ongoing call")})]})}e.exports=a}),null);
__d("MessengerReadReceipt.re",["bs_curry","MessengerReadReceipt.bs"],(function(a,b,c,d,e,f){a=function(a,c,d){a=b("bs_curry")._3(b("MessengerReadReceipt.bs").getSeenBy,a,c,d);return a};f.getSeenBy=a}),null);
__d("RTWebInboxJoinOngoingCallIcon.react",["ix","React","TetraIcon.react","fbicon","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=function(a){switch(a){case"AUDIO_GROUP_CALL":return b("fbicon")._(g("558161"),20);case"VIDEO_GROUP_CALL":return b("fbicon")._(g("493174"),20);default:return null}};function a(a){var c=a.hidden;a=a.ongoingCallType;if(c)return null;c=i(a);return c===null?null:h.jsx("div",{className:"ke6wolob rk01pc8j pmk7jnqg mrt03zmi cypi58rs akv41dx8 spb7xbtv bkmhp75w emlxlaya s45kfl79",children:h.jsx("div",{className:"thwo4zme l9j0dhe7 a8nywdso qt6c0cv9 rz4wbd8a jb3vyjys taijpn5t tv7at329 j83agx80 rq0escxv sk4xxmp2 agehan2d n8ej3o3l rt8b4zig spb7xbtv bkmhp75w emlxlaya s45kfl79 h5vs1ck6 bp9cbjyn",children:h.jsx(b("TetraIcon.react"),{color:"white",icon:c,size:20})})})}e.exports=a}),null);
__d("MWJewelThread.react",["ix","fbt","requireDeferred","Actor","CometBadge.react","CometContextualLayer.react","CometListCellHoverButton.react","CometPressable.react","MercuryIDs","MercuryThreadInfo","MessengerParticipants.re","MessengerReadReceipt.re","MWChatHeadSummaryPopout.re","MWJewelThreadLastMessage.react","MWMSMarkThreadAsRead.re","MWMSThreadTitle.re","PresenceStatusContext","React","RTWebInboxJoinOngoingCallIcon.react","TetraIcon.react","TetraListCell.react","TetraOverlappingFacepileUnstyled.react","XCometMessengerControllerRouteBuilder","fbicon","stylex","useMenuButtonVisibilityState","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser","useShouldShowMessagingEntrypoint","useSnippetRenderer.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("Actor").useActor,j=b("requireDeferred")("MWJewelThreadHoverButtonDropdownMenu.react"),k=b("React");c=b("React");var l=c.useCallback,m=c.useContext,n=c.useRef,o=c.useState,p=h._("Mark as Read");function a(a){var c,d,e=i();e=e[0];var f=b("useShouldShowMessagingEntrypoint")("CHAT"),h=a.messagingEntrypoint,m=b("useMWChatOpenTabForGroup")(h),r=b("useMWChatOpenTabForPage")(h);h=b("useMWChatOpenTabForUser")(h);var s=h[0];h[1];h=o(!1);var t=h[0],u=h[1];h=n(null);var v=b("useMenuButtonVisibilityState")(),w=v[0];v=v[1];var x=v.setListItemHovered,y=v.setMenuBtnFocused,z=v.setMenuBtnHovered;v=v.setMenuOpened;var A=l(function(){x(!1),u(!1)},[x]),B=l(function(){x(!0),u(!0)},[x]),C=a.onClose,D=a.thread;c=a==null?void 0:(c=a.thread)==null?void 0:c.snippet_sender;c=c!=null?b("MessengerReadReceipt.re").getSeenBy(a.readReceipts,{author:c,status:null,thread_id:a.thread.thread_id,timestamp:a.thread.timestamp},!0):[];c=q(D,c,a.size,a.showPhotoOnly===!0);var E=c.seenByImages,F=c.threadImage;c=c.threadName;var G=b("XCometMessengerControllerRouteBuilder").buildURL({thread_key:D.thread_id}),H=l(function(a){var b;b=(b=D.thread_fbid)!=null?b:D.other_user_fbid;if(b==null)return;a=a.metaKey||a.ctrlKey||a.shiftKey;if(f&&!a)switch(D.thread_type){case 1:D.is_other_recipient_page?r(b):s(b);break;case 2:case 5:m(b);break;default:}C()},[s,m,r,C,f,D.thread_fbid,D.other_user_fbid,D.is_other_recipient_page,D.thread_type]);d=(d=(d=D.rtc_call_data)==null?void 0:d.call_state)!=null?d:"NO_ONGOING_CALL";var I=d!=="NO_ONGOING_CALL",J=b("useSnippetRenderer.react")(D),K=D.unread_count>0,L=b("MWMSMarkThreadAsRead.re").useHook(b("MercuryIDs").getThreadFBIDFromThreadID(D.thread_id)),M;K?M={addOn:k.jsx(b("CometPressable.react"),{"aria-label":p,expanding:!0,onPress:function(){return L()},children:k.jsx(b("CometBadge.react"),{color:"blue",isProfileBadge:!0,size:12})}),type:"body"}:b("MercuryThreadInfo").isMuted(D)?M={addOn:k.jsx(b("TetraIcon.react"),{color:"disabled",icon:b("fbicon")._(g("569284"),16)}),type:"body"}:D.snippet_sender!=null&&b("MercuryIDs").getThreadFBIDFromThreadID(D.snippet_sender)===e?E.length===0?M={addOn:k.jsx(b("TetraIcon.react"),{color:"disabled",icon:b("fbicon")._(g("498145"),16)}),type:"body"}:M={addOn:k.jsx(b("TetraOverlappingFacepileUnstyled.react"),{count:E.length,isTextInline:!0,items:E.map(function(a){return{alt:a.alt,source:{uri:a.src}}}),size:16}),type:"body"}:M={addOn:k.jsx("div",{className:"fwizqjfa cyypbtt7"}),type:"body"};return k.jsxs("div",{className:"l9j0dhe7",onMouseEnter:B,onMouseLeave:A,children:[k.jsx("div",{ref:h,children:k.jsx(b("TetraListCell.react"),{addOnPrimary:F,addOnSecondary:M,body:a.showPhotoOnly===!0?null:k.jsx(b("MWJewelThreadLastMessage.react"),{thread:D}),bodyLineLimit:1,emphasized:K,headline:a.showPhotoOnly===!0?null:c,headlineLineLimit:1,level:4,linkProps:{preventLocalNavigation:f,url:G},onPress:H,selected:a.selected})}),k.jsx(b("RTWebInboxJoinOngoingCallIcon.react"),{hidden:!I,ongoingCallType:d}),a.showMenuButton===!1?null:k.jsx(b("CometListCellHoverButton.react"),{hidden:!w,onFocusChange:y,onHoverChange:z,onMenuStateChange:v,popoverProps:{isUnread:K,onCloseJewel:a.onClose,thread:D},popoverResource:j,popoverTriggerType:"deferred"}),a.showPhotoOnly===!0&&h.current!=null&&t?k.jsx(b("CometContextualLayer.react"),{context:h.current,disablePositionAutoflip:!0,children:k.jsx(b("MWChatHeadSummaryPopout.re").make,{content:J,title:(e=c)!=null?e:void 0,unread:D.unread_count>0})}):null]})}var q=function(a,c,d,e){var f=Object.fromEntries(a.participants.map(function(a){return b("MessengerParticipants.re").getNow(a)}).filter(Boolean).map(function(a){return[a.id,a]})),g=s(a,f),h=b("MWMSThreadTitle.re").getProfileImages_({participants:f,threadImage:a.image_src}),i=r(a);h=t(h,g,i,d,e?a.unread_count:0);i=c.map(function(a){a=f[a];return a!=null&&a.image_src!=null?{alt:a.name,src:a.image_src}:null}).filter(Boolean);return{seenByImages:i,threadImage:h,threadName:g}},r=function(a){var c=m(b("PresenceStatusContext")),d=c.getOnlineIDs();a.other_user_fbid!=null?c=c.get(a.other_user_fbid)===2:c=a.participants.some(function(a){a=(a=b("MessengerParticipants.re").getNow(a))==null?void 0:a.fbid;return a!=null?d.includes(a):!1});return c},s=function(a,c){var d;d=(d=a.custom_nickname)!=null?d:{};var e=null,f=a.thread_fbid;if(f==null)return e;switch(a.thread_type){case 1:e=a.is_other_recipient_page?b("MWMSThreadTitle.re").getTitleForPage_({id:f,participants:c}):b("MWMSThreadTitle.re").getTitleForUser_({id:f,nicknames:d,participants:c});break;case 2:case 5:e=b("MWMSThreadTitle.re").getTitleForGroup_({nicknames:d,participants:c,threadName:a.name});break;default:e=null}return e},t=function(a,b,c,d,e){if(a.length===0)return null;else if(a.length===1){var f;f={alt:(f=b)!=null?f:"",shape:"circle",size:d,source:{uri:(f=a[0])!=null?f:""},type:"profile-photo"};c&&(f=babelHelpers["extends"]({},f,{addOn:{type:"availabilityBadge"}}));e>0&&(f=babelHelpers["extends"]({},f,{addOnTopEnd:{type:"notificationBadge"}}));return f}else{return{primaryPhoto:{alt:(f=b)!=null?f:"",source:{uri:(f=a[0])!=null?f:""}},secondaryPhoto:{alt:(f=b)!=null?f:"",source:{uri:(b=a[1])!=null?b:""}},showAvailabilityBadge:c,size:d,type:"messenger-facepile",unreadCount:e}}};e.exports=a}),null);
__d("MWJewelThreadGlimmer.react",["BaseGlimmer.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");function a(a){a===void 0&&(a={size:56});return h.jsxs("div",{className:"dati1w0a j83agx80",children:[h.jsx(b("BaseGlimmer.react"),{className:(g||(g=b("stylex"))).dedupe(a.size===56?{"border-top-start-radius-1":"s45kfl79","border-top-end-radius-1":"emlxlaya","border-bottom-end-radius-1":"bkmhp75w","border-bottom-start-radius-1":"spb7xbtv","height-1":"e5d9fub0","margin-top-1":"aov4n071","margin-end-1":"wkznzc2l","margin-bottom-1":"bi6gxh9e","margin-start-1":"hcukyx3x","width-1":"oeao4gh3"}:{},a.size===36?{"border-top-start-radius-1":"s45kfl79","border-top-end-radius-1":"emlxlaya","border-bottom-end-radius-1":"bkmhp75w","border-bottom-start-radius-1":"spb7xbtv","height-1":"tv7at329","margin-top-1":"aov4n071","margin-end-1":"wkznzc2l","margin-bottom-1":"bi6gxh9e","margin-start-1":"hcukyx3x","width-1":"thwo4zme"}:null),index:0}),h.jsxs("div",{className:"taijpn5t buofh1pr cbu4d94t j83agx80",children:[h.jsx(b("BaseGlimmer.react"),{className:"n99xedck oud54xpy gl3lb2sf l82x9zwi uo3d90p7 pw54ja7n ue3kfks5",index:1}),h.jsx(b("BaseGlimmer.react"),{className:"eq70wtua cyypbtt7 l82x9zwi uo3d90p7 pw54ja7n ue3kfks5",index:2})]})]})}e.exports=a}),null);
__d("RTWebJoinOngoingCallMenuItem.react",["ix","fbt","CometMenuItem.react","MercuryIDs","React","ZenonUserActionLogger","fbicon","useRTWebCometStartCallCallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){a=a.thread;var c=a.rtc_call_data,d=a.thread_id;a=(a=(a=a.rtc_call_data)==null?void 0:a.call_state)!=null?a:"NO_ONGOING_CALL";var e=b("useRTWebCometStartCallCallback")(),f,j,k;switch(a){case"AUDIO_GROUP_CALL":f=b("fbicon")._(g("558161"),20);j=h._("Join Call");k="audio";break;case"VIDEO_GROUP_CALL":f=b("fbicon")._(g("493174"),20);j=h._("Join Video Chat");k="video";break;default:return null}return i.jsx(b("CometMenuItem.react"),{icon:f,onClick:function(){c!=null&&(b("ZenonUserActionLogger").logClick({component:"join_call_button",surface:"messages_jewel"}),e({existingCall:c,mediaType:k,thread:{id:b("MercuryIDs").getThreadFBIDFromThreadID(d),type:2},trigger:"multiway_thread_list_join_call_button"}))},primaryText:j})}e.exports=a}),null);
__d("MWJewelThreadHoverButtonDropdownMenu.react",["ix","fbt","CometLazyDialogTrigger.react","CometMenu.react","CometMenuItem.react","JSResource","MessengerMuteUtils.re","MWChatUpdateMuteSettingMutation","MWMSMarkThreadAsRead.re","MWMSMarkThreadAsUnread.re","React","RTWebJoinOngoingCallMenuItem.react","XCometMessengerControllerRouteBuilder","XCometVanityURLControllerRouteBuilder","fbicon","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("JSResource")("MWChatMuteConversationDialogForJSResource.react").__setRef("MWJewelThreadHoverButtonDropdownMenu.react");function a(a){var c,d=a.isUnread,e=a.onCloseJewel;a=a.thread;var f=a.mute_until,k=a.other_user_fbid,l=a.thread_fbid,m=(c=l)!=null?c:k;if(m==null)return b("recoverableViolation")("thread_fbid and other_user_fbid can't both be null","messenger_comet");var n=b("MessengerMuteUtils.re").muteActionLabel(a.thread_type===1&&a.is_other_recipient_page,f!=null),o=b("MWMSMarkThreadAsRead.re").useHook(m),p=b("MWMSMarkThreadAsUnread.re").useHook(m);return i.jsxs(b("CometMenu.react"),{withArrow:!0,children:[i.jsx(b("CometMenuItem.react"),{icon:b("fbicon")._(g("477820"),20),onClick:function(){l!=null&&(d?o():p())},primaryText:d?h._("Mark as Read"):h._("Mark as Unread")}),i.jsx(b("CometMenuItem.react"),{href:b("XCometMessengerControllerRouteBuilder").buildURL({thread_key:m}),icon:b("fbicon")._(g("505620"),20),onClick:e,primaryText:h._("Open in Messenger")}),k!=null?i.jsx(b("CometMenuItem.react"),{href:b("XCometVanityURLControllerRouteBuilder").buildURL({vanity:k}),icon:b("fbicon")._(g("558623"),20),onClick:e,primaryText:h._("View Profile")}):null,f!=null?i.jsx(b("CometMenuItem.react"),{icon:b("fbicon")._(g("652791"),20),onClick:function(){b("MWChatUpdateMuteSettingMutation").commit({mute_duration:0,thread_fbid:m})},primaryText:n,secondaryText:b("MessengerMuteUtils.re").mutedUntilLabel(f)}):i.jsx(b("CometLazyDialogTrigger.react"),{dialogProps:{onUpdateMute:function(a){b("MWChatUpdateMuteSettingMutation").commit({mute_duration:a,thread_fbid:m})},title:n},dialogResource:j,children:function(a,c){return i.jsx(b("CometMenuItem.react"),{icon:b("fbicon")._(g("532356"),20),onClick:a,primaryText:n,ref:c})}}),i.jsx(b("RTWebJoinOngoingCallMenuItem.react"),{thread:a})]})}e.exports=a}),null);
__d("MWJewelFilteredMessagesThread.react",["ix","fbt","Locale","MWJewelThreadlistFetcher","MWJewelThreadSnippet.react","React","TetraIcon.react","TetraListCell.react","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MWJewelThreadlistFetcher").PAGINATION_COUNT,j=b("React");function a(a){var c=a.filteredMessagesCount;a=a.onOpenFilteredMessages;var d=h._("See Filtered Messages");c=c%i===0?h._("{number}+ Requests",[h._param("number",c)]):h._("{number} Requests",[h._param("number",c)]);return j.jsx(b("TetraListCell.react"),{addOnPrimary:{icon:b("fbicon")._(g("542884"),24),size:56,type:"contained-icon"},addOnSecondary:{addOn:j.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("Locale").isRTL()?b("fbicon")._(g("492485"),16):b("fbicon")._(g("492533"),16)}),type:"body"},body:j.jsx(b("MWJewelThreadSnippet.react"),{isUnread:!1,text:c}),headline:d,level:4,onPress:a})}e.exports=a}),null);
__d("MWJewelMessageRequestsThread.react",["ix","fbt","Locale","MessengerParticipants.re","MWJewelThreadSnippet.react","React","TetraIcon.react","TetraListCell.react","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.firstUnreadRequestThread,d=a.onOpenMessageRequests;a=a.unreadRequestsCount;var e=h._({"*":"New Message Requests","_1":"New Message Request"},[h._plural(a)]),f=h._({"someone":"From someone you may know","people":"From people you may know"},[h._enum(a===1?"someone":"people",{someone:"someone",people:"people"})]);c=c.snippet_sender;if(c!=null){c=b("MessengerParticipants.re").getNow(c);c!=null&&(a===1?f=h._("From {name}",[h._param("name",c.name)]):f=h._("From {name} and {count} more",[h._param("name",c.name),h._param("count",a-1)]))}return i.jsx(b("TetraListCell.react"),{addOnPrimary:{icon:b("fbicon")._(g("542884"),24),size:56,type:"contained-icon"},addOnSecondary:{addOn:i.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("Locale").isRTL()?b("fbicon")._(g("492485"),16):b("fbicon")._(g("492533"),16)}),type:"body"},body:i.jsx(b("MWJewelThreadSnippet.react"),{isUnread:!0,text:f}),headline:e,level:4,onPress:d})}e.exports=a}),null);
__d("MWChatSearchResultType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"group",PAGE:"page",USER:"user"});e.exports=a}),null);
__d("MWChatFriendsDataSource.query",["CometRelay","MWChatSearchResultType","MWChatSearchTypeaheadDataEntry","compactArray","MWChatFriendsDataSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;c=g!==void 0?g:g=b("MWChatFriendsDataSourceQuery.graphql");function a(a,c){c=a==null?void 0:(c=a.viewer)==null?void 0:(c=c.messenger_contacts)==null?void 0:c.nodes;if(!c)return[];var d=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:a.id;return b("compactArray")(c.map(function(a){var c;c=a==null?void 0:(c=a.messaging_profile)==null?void 0:c.id;var e=a==null?void 0:a.name;a=a==null?void 0:(a=a.profile_picture)==null?void 0:a.uri;return c===d||c==null||e==null||a==null?null:new(b("MWChatSearchTypeaheadDataEntry"))({displayName:e,id:c,imageUrl:a,isContact:!0,resultType:b("MWChatSearchResultType").USER,secondaryImageUrl:"",subtext:""})}))}e.exports={normalize:a,query:c}}),null);
__d("mwChatFriendsQueryVariablesBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){return babelHelpers["extends"]({},a)}}e.exports=a}),null);
__d("MWChatFriendsDataSource",["CometSearchTypeaheadBaseDataProvider","CometSearchTypeaheadBaseDataProviderQueryVariablesBuilder","CometSearchTypeaheadBaseNetworkCacheDataSource","CometSearchTypeaheadBaseQueryDataCacheProvider","MWChatFriendsDataSource.query","WebPixelRatio","gkx","mwChatFriendsQueryVariablesBuilder"],(function(a,b,c,d,e,f){"use strict";var g=b("MWChatFriendsDataSource.query").normalize,h=b("MWChatFriendsDataSource.query").query;a=function(){function a(a){var c=a.limit;a=a.relayEnvironment;c=new(b("CometSearchTypeaheadBaseDataProviderQueryVariablesBuilder"))(b("mwChatFriendsQueryVariablesBuilder")).setDefaultVariables({limit:c,order_by:b("gkx")("1217157")?["PHAT"]:["communication"],scale:b("WebPixelRatio").get()});var d=new(b("CometSearchTypeaheadBaseQueryDataCacheProvider"))();c=new(b("CometSearchTypeaheadBaseDataProvider"))({query:h,queryVariablesBuilder:c,relayEnvironment:a});this.$1=new(b("CometSearchTypeaheadBaseNetworkCacheDataSource"))(c,d,{normalizeFunc:g})}var c=a.prototype;c.fetchCache=function(a){return this.$1.fetchCache(a)};c.fetchNetwork=function(a){return this.$1.fetchNetwork(a)};return a}();e.exports=a}),null);
__d("mwChatSearchDataUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){d===void 0&&(d=1);e===void 0&&(e=1);var f=0,g=0,h=[],i=!0,j=0;while(f<a.length||g<b.length){if(f+g>=c)break;f===a.length&&(i=!1,j=0);g===b.length&&(i=!0,j=0);f<a.length&&i?(h.push(a[f]),f+=1,j+=1,j===d&&(j=0,i=!1)):g<b.length&&!i&&(h.push(b[g]),g+=1,j+=1,j===e&&(j=0,i=!0))}return h}e.exports={interleaveArrays:a}}),null);
__d("MWChatKeywordDataSource.query",["fbt","CometRelay","MWChatSearchResultType","MWChatSearchTypeaheadDataEntry","intlList","mwChatSearchDataUtils","MWChatKeywordDataSourceQuery.graphql","MWChatKeywordDataSourceQuery_thread.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b("CometRelay").graphql;var j=b("mwChatSearchDataUtils").interleaveArrays,k=2,l=g._("Facebook User");c=h!==void 0?h:h=b("MWChatKeywordDataSourceQuery.graphql");i!==void 0?i:i=b("MWChatKeywordDataSourceQuery_thread.graphql");function a(a,c){a=a==null?void 0:(a=a.messenger_search)==null?void 0:(a=a.result_modules)==null?void 0:a.nodes;if(!a)return[];var d=[],e=[],f=[],g=[];a=((a=(a=a[0].search_results)==null?void 0:a.edges)!=null?a:[]).filter(Boolean);a.map(function(a){var h,i,j=a.node,k=a.subtext;if(!j)return;switch(j.__typename){case"User":case"InstagramMessagingUser":h=new(b("MWChatSearchTypeaheadDataEntry"))({displayName:(h=a.display_name)!=null?h:"",id:(h=j.id)!=null?h:"",imageUrl:(h=(h=j.profile_picture)==null?void 0:h.uri)!=null?h:"",isContact:(h=j==null?void 0:(h=j.messenger_contact)==null?void 0:h.is_on_viewer_contact_list)!=null?h:!1,resultType:b("MWChatSearchResultType").USER,secondaryImageUrl:"",subtext:(h=k)!=null?h:""}).setMetaData({query:c.query});Boolean((i=j.messenger_contact)==null?void 0:i.is_on_viewer_contact_list)?d.push(h):e.push(h);break;case"MessengerViewerGroupThread":i=n(a);if(!i)return null;g.push(new(b("MWChatSearchTypeaheadDataEntry"))({displayName:i.title,id:(h=(h=j.thread_key)==null?void 0:h.thread_fbid)!=null?h:"",imageUrl:i.image_uri,isContact:!1,resultType:b("MWChatSearchResultType").GROUP,secondaryImageUrl:(h=i.secondary_image_uri)!=null?h:"",subtext:i.subtext}).setMetaData({query:c.query}));break;case"Page":f.push(new(b("MWChatSearchTypeaheadDataEntry"))({displayName:(h=a.display_name)!=null?h:"",id:(i=j.page_id)!=null?i:"",imageUrl:(h=(a=j.page_profile_picture)==null?void 0:a.uri)!=null?h:"",isContact:!1,resultType:b("MWChatSearchResultType").PAGE,secondaryImageUrl:"",subtext:(i=k)!=null?i:"",verificationStatus:j.verification_status}).setMetaData({query:c.query}));break;default:break}});return m(d,e,g,f)}function m(a,b,c,d){a=j(a,c,a.length+c.length,3,1);return[].concat(a,d,b)}function n(a){var b,c=a.node;if(!c||c.__typename!=="MessengerViewerGroupThread")return;b=(b=(b=c.image)==null?void 0:b.uri)!=null?b:"";var d=null,e=c.other_participants;if(b.length===0){var f=e?e.nodes.slice(0,2):[];f=f.map(function(a){return(a=(a=a.messaging_actor)==null?void 0:(a=a.profile_picture)==null?void 0:a.uri)!=null?a:""});f.length>1&&(d=f[1]);b=f[0]}f=(f=c.thread_name)!=null?f:null;var g=0;e=e?e.nodes.map(function(a){a=(a=a.messaging_actor)==null?void 0:a.name;if(a==null||a===""){g++;return null}return a}).filter(Boolean).concat(Array(g).fill(l)):[];c=(c=c.other_participants)==null?void 0:c.count;e=o(e,c,2);e=e!=null?e.toString():"";if(f==null){f=(c=e)!=null?c:"";a=(c=a.subtext)!=null?c:""}else a=e;return{image_uri:b,secondary_image_uri:d,subtext:a,title:f}}function o(a,c,d){d===void 0&&(d=k);if(!a)return null;if(c==null)return null;a=a.slice(0,d);d=c-a.length;return d<1?b("intlList")(a):g._("{name of the first n participants} and {number of other participants} more",[g._param("name of the first n participants",b("intlList")(a,b("intlList").CONJUNCTIONS.NONE)),g._param("number of other participants",d)])}e.exports={blendResultTypes:m,getParticipantTextFromGroup:o,getTitleSubtextAndImageFromGroup:n,normalize:a,query:c}}),null);
__d("mwChatKeywordQueryVariablesBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){b=b.query;return babelHelpers["extends"]({},a,{query:b})}}e.exports=a}),null);
__d("MWChatKeywordDataSource",["CometSearchTypeaheadBaseDataProvider","CometSearchTypeaheadBaseDataProviderQueryVariablesBuilder","CometSearchTypeaheadBaseNetworkCacheDataSource","CometSearchTypeaheadBaseQueryDataCacheProvider","MWChatKeywordDataSource.query","WebPixelRatio","mwChatKeywordQueryVariablesBuilder"],(function(a,b,c,d,e,f){"use strict";var g=b("MWChatKeywordDataSource.query").normalize,h=b("MWChatKeywordDataSource.query").query;a=function(){function a(a){var c=a.limit;a=a.relayEnvironment;c=new(b("CometSearchTypeaheadBaseDataProviderQueryVariablesBuilder"))(b("mwChatKeywordQueryVariablesBuilder")).setDefaultVariables({query:"",scale:b("WebPixelRatio").get(),supportedTypes:[{limit:c,result_type:"USER"},{limit:c,result_type:"GROUP"},{limit:c,result_type:"PAGE"}]});var d=new(b("CometSearchTypeaheadBaseQueryDataCacheProvider"))();c=new(b("CometSearchTypeaheadBaseDataProvider"))({query:h,queryVariablesBuilder:c,relayEnvironment:a});this.$1=new(b("CometSearchTypeaheadBaseNetworkCacheDataSource"))(c,d,{normalizeFunc:g})}var c=a.prototype;c.fetchCache=function(a){return this.$1.fetchCache(a)};c.fetchNetwork=function(a){return this.$1.fetchNetwork(a)};return a}();e.exports=a}),null);
__d("mwChatSearchPayloadDecoratorRemoveDuplicates",["MWChatSearchResultType"],(function(a,b,c,d,e,f){"use strict";function a(a){return function(c){var d=c.entries;c=babelHelpers.objectWithoutPropertiesLoose(c,["entries"]);var e=a.some(function(a){return a.getResultType()===b("MWChatSearchResultType").USER});d=d.filter(function(c){return e&&c.getResultType()!==b("MWChatSearchResultType").USER?!1:!a.some(function(a){return a.getKey()===c.getKey()})});return babelHelpers["extends"]({entries:d},c)}}e.exports=a}),null);
__d("MWChatSearchTypeaheadDataSource",["MWChatFriendsDataSource","MWChatKeywordDataSource","mwChatSearchPayloadDecoratorRemoveDuplicates"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=a.limit,d=a.relayEnvironment;a=a.suggestionsLimit;this.$3=[];this.$1=new(b("MWChatFriendsDataSource"))({limit:(a=a)!=null?a:c,relayEnvironment:d});this.$2=new(b("MWChatKeywordDataSource"))({limit:c,relayEnvironment:d})}var c=a.prototype;c.fetchCache=function(a){var c=a.query,d=b("mwChatSearchPayloadDecoratorRemoveDuplicates")(this.$3);if(c.length>0){c=this.$2.fetchCache(a);return d(c)}c=this.$1.fetchCache(a);return d(c)};c.fetchNetwork=function(a){var c=a.query,d=b("mwChatSearchPayloadDecoratorRemoveDuplicates")(this.$3);return c.length===0?this.$1.fetchNetwork(a).then(function(a){return d(a)}):this.$2.fetchNetwork(a).then(function(a){return d(a)})};c.setTokens=function(a){this.$3=a};return a}();e.exports=a}),null);
__d("MWJewelSearchEmptyState.react",["fbt","React","TetraText.react","stylex","useCometSearchTypeaheadEmptyState"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=b("useCometSearchTypeaheadEmptyState")();return c?h.jsxs("div",{className:"tw6a2znq f10w8fjw d1544ag0 pybr56ya",children:[h.jsx(b("TetraText.react"),{align:"center",type:"body2",children:g._("Nothing Found")}),h.jsx("br",{}),h.jsx(b("TetraText.react"),{align:"center",color:"tertiary",type:"body3",children:g._("We couldn't find any matches for \"{query}.\" Try checking for typos or using complete words.",[g._param("query",a.queryString)])})]}):null}e.exports=a}),null);
__d("MWJewelSearchTypeaheadViewItem.react",["CometPageVerificationIcon.react","CometSearchTypeaheadBaseViewItem.react","MWChatFacepile.re","MWChatProfile.re","React","TetraText.react","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("MWChatFacepile.re").make,h=b("MWChatProfile.re").make,i=b("React");function a(a){var c=a.entry;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","queryString"]);var d=c.getRawData(),e=d.imageUrl,f=d.secondaryImageUrl;d=d.verificationStatus;f=f!==""?i.jsx(g,{firstParticipantURI:e,secondParticipantURI:f,size:36}):i.jsx(h,{size:36,src:e});return i.jsx(b("CometSearchTypeaheadBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:c,itemStartContent:f,children:i.jsxs(b("TetraText.react"),{numberOfLines:1,type:"body3",children:[c.getLabel(),d!=null?i.jsx("span",{className:"scb9dxdr",children:i.jsx(b("CometPageVerificationIcon.react"),{size:"small",verificationBadge:d})}):null]})}))}e.exports=a}),null);
__d("MWJewelSearchTypeaheadViewList.react",["fbt","CometScrollView.react","React","TetraText.react","orEmptyArray","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={scroll:{maxHeight:"nt8syekh"},section:{paddingTop:"jb3vyjys",paddingEnd:"dflh9lhu",paddingBottom:"qt6c0cv9",paddingStart:"scb9dxdr"},title:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr"}};function k(a){var c=a.activeEntryKey,d=a.children,e=a.entries;a=a.title;return e!=null&&e.length>0?i.jsxs("div",{className:(h||(h=b("stylex")))(j.section),children:[i.jsx("div",{className:h(j.title),children:i.jsx(b("TetraText.react"),{type:"entityHeaderMeta1",children:a})}),e.map(function(a,b){var e=c===a.getKey();return d(a,e,b)})]}):null}function a(a){var c=a.children,d=a.entries,e=a.highlightedEntry;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","entries","highlightedEntry"]);a=e!=null?e.getKey():null;e=d.reduce(function(a,b){var c=b.getRawData();c=c.resultType;a[c]!=null?a[c].push(b):a[c]=[b];return a},{});d=b("orEmptyArray")(e.user);return i.jsx(b("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,xstyle:j.scroll,children:i.jsxs("ul",{"data-testid":void 0,role:"listbox",children:[i.jsx(k,{activeEntryKey:a,children:c,entries:d.filter(function(a){return a.getRawData().isContact}),title:g._("Contacts")}),i.jsx(k,{activeEntryKey:a,children:c,entries:e.group,title:g._("Group Conversations")}),i.jsx(k,{activeEntryKey:a,children:c,entries:e.page,title:g._("Businesses")}),i.jsx(k,{activeEntryKey:a,children:c,entries:d.filter(function(a){return!a.getRawData().isContact}),title:g._("More People")})]})})}e.exports=a}),null);
__d("MWJewelSearchTypeaheadViewStrategy.react",["MWJewelSearchEmptyState.react","MWJewelSearchTypeaheadViewItem.react","MWJewelSearchTypeaheadViewList.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.entries;a.extraViewProps;var d=a.highlightedEntry;a.onAbandonTypeahead_DO_NOT_USE;var e=babelHelpers.objectWithoutPropertiesLoose(a,["entries","extraViewProps","highlightedEntry","onAbandonTypeahead_DO_NOT_USE"]);return c.length===0?g.jsx(b("MWJewelSearchEmptyState.react"),{queryString:e.queryString}):g.jsx(b("MWJewelSearchTypeaheadViewList.react"),{entries:c,highlightedEntry:d,children:function(a,c){return g.createElement(b("MWJewelSearchTypeaheadViewItem.react"),babelHelpers["extends"]({},e,{entry:a,isActive:c,key:a.getKey()}))}})}e.exports=a}),null);
__d("MWJewelSearchTypeahead.react",["fbt","CometRelay","CometSearchTypeaheadBaseBackButton.react","CometSearchTypeaheadBaseInputRoundedStrategy.react","CometSearchTypeaheadBaseLayoutContextualStrategy.react","CometTypeahead.react","MWChatSearchTypeaheadDataSource","MWJewelSearchTypeaheadViewStrategy.react","React","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("CometRelay").useRelayEnvironment,i=b("React");c=b("React");var j=c.useCallback,k=c.useMemo,l=c.useState,m={searchInput:{marginTop:"aov4n071",marginEnd:"cxmmr5t8",marginBottom:"bi6gxh9e",marginStart:"hcukyx3x",paddingTop:"jb3vyjys",paddingEnd:"hv4rvrfc",paddingBottom:"qt6c0cv9",paddingStart:"dati1w0a"},searchView:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"mvk8q8v6",display:"j83agx80",minHeight:"mw5ich9q"}},n={hideIconAnimation:!0,hideIconOnFocus:!0};function a(a){var c=a.onBlur,d=a.onChange,e=a.onFocus,f=a.onPressEntry;a=babelHelpers.objectWithoutPropertiesLoose(a,["onBlur","onChange","onFocus","onPressEntry"]);var o=l(!1),p=o[0],q=o[1],r=h();o=k(function(){return new(b("MWChatSearchTypeaheadDataSource"))({limit:20,relayEnvironment:r})},[r]);var s=j(function(){q(!1),d(""),c()},[c,d]),t=j(function(){q(!0),e()},[e]);return i.jsx(b("CometTypeahead.react"),{dataSource:o,inputStartContent:p?i.jsx(b("CometSearchTypeaheadBaseBackButton.react"),{}):null,inputStrategyRenderer:b("CometSearchTypeaheadBaseInputRoundedStrategy.react"),inputStrategyRendererProps:n,layoutStrategyRenderer:b("CometSearchTypeaheadBaseLayoutContextualStrategy.react"),onBlur:s,onChange:d,onFocus:t,onPressEntry:f,placeholder:g._("Search Messenger"),queryString:a.queryString,viewStrategyRenderer:b("MWJewelSearchTypeaheadViewStrategy.react"),xstyles:{inputXStyle:m.searchInput,viewXStyle:m.searchView}})}e.exports=a}),null);
__d("MWJewelThreadListInner.react",["fbt","CometHeroHoldTrigger.react","CometInfiniteScrollTrigger.react","CometSettingsListDropdownLoadingState.react","FocusRegion.react","MercuryServerRequests","MessengerState.re","MWJewelFilteredMessagesThread.react","MWJewelMessageRequestsThread.react","MWJewelSearchTypeahead.react","MWJewelThread.react","MWJewelThreadGlimmer.react","MWJewelThreadlistFetcher","React","TetraText.react","stylex","useSimpleImpression"],(function(a,b,c,d,e,f,g){"use strict";var h=b("FocusRegion.react").FocusRegion,i=b("React");c=b("React");var j=c.useEffect,k=c.useRef,l="all",m="unread";function n(a,b,c){a=a[b];return a!=null?a[c]:null}function a(a){var c,d=[],e=k(0),f=n(b("MessengerState.re").threadlistOrderMap(a.messengerState),a.folder,l),o=(c=f==null?void 0:f.threadlist)!=null?c:[],p=function(){var c=o&&o.length>0?o[o.length-1]:null;if(c==null)return null;c=b("MessengerState.re").threads(a.messengerState)[c];return c?c.timestamp:null};c=function(){b("MWJewelThreadlistFetcher").loadItems(a.actor,a.folder,p()),a.setIsLoading(!0)};var q=f==null?void 0:f.threadlist.length,r=f==null?void 0:f.reachedEnd;b("useSimpleImpression")(function(){b("MercuryServerRequests").getForFBID(a.actor).markSeen()});j(function(){q===0&&r!==!0&&b("MWJewelThreadlistFetcher").preloadItems(a.actor,a.folder)},[a.actor,a.folder,q,r]);o.length>e.current&&a.isLoading&&(e.current=o.length,a.setIsLoading(!1));d=o.map(function(c){return b("MessengerState.re").getThreadMetaNow(a.actor,c)}).filter(Boolean);f=a.searchTypeahead!=null?i.jsx(h,{autoFocus:!1,children:a.searchTypeahead}):null;e=null;if(a.onOpenMessageRequests!=null){var s;s=(s=n(b("MessengerState.re").threadlistOrderMap(a.messengerState),"pending",m))==null?void 0:s.threadlist;if(s!=null){var t=s.length;if(t>0){s=b("MessengerState.re").thread(a.messengerState,s[0]);s!=null&&a.onOpenMessageRequests!=null&&(e=i.jsx(b("MWJewelMessageRequestsThread.react"),{firstUnreadRequestThread:s,onOpenMessageRequests:a.onOpenMessageRequests,unreadRequestsCount:t}))}}}s=null;if(a.onOpenFilteredMessages!=null){t=(t=n(b("MessengerState.re").threadlistOrderMap(a.messengerState),"other",l))==null?void 0:t.threadlist;if(t!=null){t=t.length;t>0&&a.onOpenFilteredMessages!=null&&(s=i.jsx(b("MWJewelFilteredMessagesThread.react"),{filteredMessagesCount:t,onOpenFilteredMessages:a.onOpenFilteredMessages}))}}return o.length===0?a.isLoading&&r===!1?i.jsxs("div",{className:"stjgntxs ni8dbmo4",children:[i.jsx(b("CometHeroHoldTrigger.react"),{description:"Jewel Query",hold:!0}),i.jsx(b("CometSettingsListDropdownLoadingState.react").InnerGlimmer,{size:a.threadImageSize==="small"?36:56})]}):i.jsxs("div",{className:"stjgntxs ni8dbmo4","data-testid":void 0,children:[f,e,i.jsx("div",{className:"dati1w0a ihqw7lf3 hv4rvrfc discj3wi",children:i.jsx(b("TetraText.react"),{align:"center",type:"body2",children:g._("No messages found.")})})]}):i.jsxs("div",{"data-testid":void 0,children:[f,e,d.map(function(c){var d;return i.jsx(b("MWJewelThread.react"),{messagingEntrypoint:(d=a.threadListMessagingEntrypoint)!=null?d:"jewel",onClose:a.onClose,readReceipts:b("MessengerState.re").readReceiptsPerThread(a.messengerState),selected:a.selectedThreadID===c.thread_id,showMenuButton:a.showThreadMenuButton,showPhotoOnly:a.showPhotosOnly,size:a.threadImageSize==="small"?36:56,thread:c},c.thread_id)}),s,i.jsxs(b("CometInfiniteScrollTrigger.react"),{hasMore:r===!1,isLoading:a.isLoading,onLoadMore:c,children:[i.jsx(b("MWJewelThreadGlimmer.react"),{size:a.threadImageSize==="small"?36:56}),i.jsx(b("MWJewelThreadGlimmer.react"),{size:a.threadImageSize==="small"?36:56})]})]})}e.exports=a}),null);
__d("MWJewelThreadList.react",["Actor","MessengerState.re","MWJewelThreadListInner.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("Actor").useActor,h=b("React");c=b("React");var i=c.useState;function a(a){var c=a.folder,d=babelHelpers.objectWithoutPropertiesLoose(a,["folder"]);a=g();var e=a[0];a=i(!0);var f=a[0],j=a[1];return h.jsx(b("MessengerState.re").jsComponent,{fbid:e,children:function(a){return h.jsx(b("MWJewelThreadListInner.react"),babelHelpers["extends"]({},d,{actor:e,folder:c,isLoading:f,messengerState:a,setIsLoading:j}))}})}e.exports=a}),null);
__d("MWChatHeadSummaryPopout.bs",["fbt","React","Locale","stylex","TetraText.react","CometBadge.react","MWChatTextTransform.bs","CometTextWithEntities.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={container:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"clwgnc31",boxSizing:"rq0escxv",display:"j83agx80",flexDirection:"cbu4d94t",fontSize:"jq4qci2q",maxWidth:"dlpeemhq",minWidth:"jgsskzai",position:"pmk7jnqg",end:"cypi58rs",bottom:"i09qtzwb",backgroundColor:"nred35xi",paddingStart:"h4z51re5",paddingEnd:"rv4hoivh",height:"e5d9fub0",justifyContent:"gt1oanoe"},gradientLTR:{backgroundImage:"rvdht4aw"},gradientRTL:{backgroundImage:"hv4tdetg"},openChatArrowPointer:{borderTopEndRadius:"hcy7w5mv",bottom:"s2hgh8fk",height:"gl3lb2sf",opacity:"pedkr2u6",position:"pmk7jnqg",end:"b5fwa0m2",width:"hhz5lgdu"},openChatArrowPointerShadow:{boxShadow:"clwgnc31"}},k=b("Locale").isRTL(),l=k?-45:45;function a(a){var c=a.title,d=a.unread;a=a.content;return i.createElement(i.Fragment,void 0,i.jsx("div",{className:(h||(h=b("stylex")))(j.openChatArrowPointer,j.openChatArrowPointerShadow),style:{transform:"rotate("+(String(l)+"deg)")}}),i.jsxs("div",{children:[i.jsx(b("TetraText.react"),{color:"primary",type:"headlineEmphasized4",numberOfLines:1,children:c!==void 0?i.jsx(b("CometTextWithEntities.react"),{text:c.toString(),transforms:[b("MWChatTextTransform.bs").emoticonTransform,b("MWChatTextTransform.bs").emojiTransform]}):g._("Unknown Chat")}),i.jsxs(b("TetraText.react"),{color:"secondary",type:"body3",numberOfLines:1,children:[d?i.jsx(b("CometBadge.react"),{color:"blue"}):null,a]})],className:h(j.container)}),i.jsx("div",{className:h(j.openChatArrowPointer,k?j.gradientRTL:j.gradientLTR),style:{transform:"rotate("+(String(l)+"deg)")}}))}c=a;f.styles=j;f.isRTL=k;f.rotation=l;f.make=c}),null);
__d("MercuryAttachmentSnippetType",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("You sent a valentine."):g._("{name} sent a valentine.",[g._param("name",b)])}};e.exports=a}),null);
__d("MessengerLightweightActionUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){return!!(a&&a.attach_type==="share"&&a.share&&a.share.target&&a.share.target.lwa_type)}function a(a){a=a==null?void 0:a.attachments;return!!(a&&a.length===1&&g(a[0]))}function b(a){return a.attachments[0].share.title}function c(a){return a[0].share.title}e.exports={isLWAMessage:a,isLWAAttachment:g,getCollapsedLWAText:b,getLWASnippetText:c}}),null);
__d("P2PSnippetStringUtils",["fbt"],(function(a,b,c,d,e,f,g){a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your request for {payment request amount} from {receiver's name} was canceled.",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}'s request for {payment request amount} was canceled.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name} declined your request for {payment request amount}.",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("You declined {requester's name}'s request for {payment request amount}.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("You requested {amount} from {requestee name}.",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name} requested {amount} from you.",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name} requested {amount} from {requestee name}.",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,b,c,d,e,f){a=a||1;b=[b,c,d,e,f];switch(a){case 2:return this.getRequestDeclinedSnippet.apply(this,b);case 5:case 6:return this.getRequestCanceledSnippet.apply(this,b)}return this.getRequestSentSnippet.apply(this,b)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your {amount} payment to {receiver_name} was canceled.",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}'s {amount} payment was canceled.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name} didn't accept your {amount} payment.",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("You didn't accept {sender name}'s {amount} payment.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("You sent {receiver name} {amount}.",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name} sent you {amount}.",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name} sent {receiver name} {amount}.",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,b,c,d,e,f){b=[b,c,d,e,f];c=a||15;switch(c){case 5:return this.getTransferDeclinedSnippet.apply(this,b);case 3:case 10:case 11:case 12:case 16:return this.getTransferCanceledSnippet.apply(this,b)}return this.getTransferSentSnippet.apply(this,b)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants"],(function(a,b,c,d,e,f,g){"use strict";a={getAttachmentSnippetType:function(a){if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("You sent a video."):g._("{sender name} sent a video.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("You sent a voice message."):g._("{name} sent a voice message.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("You sent a sticker."):g._("{name} sent a sticker.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("You sent a location."):g._("{sender name} sent a location.",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("You sent a live location."):g._("{sender name} sent a live location.",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("You sent a video."):g._("You sent a photo."):a?g._("View {sender name}'s disappearing video.",[g._param("sender name",d)]):g._("View {sender name}'s disappearing photo.",[g._param("sender name",d)])}if(e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0]))return b("MessengerLightweightActionUtils").getLWASnippetText(e);return e&&e.length===1&&this._isGloballyRemovedMessageAttachment(e[0])?e[0].share.description:c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").MIXED:return c?g._("You sent some attachments."):g._("{sender name} sent some attachments.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);default:return""}},_isGloballyRemovedMessageAttachment:function(a){return a.share&&a.share.style_list&&a.share.style_list.includes("globally_deleted_message_placeholder")},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type==="third_party_sticker"},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type==="video"},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,"business_message_items")},_hasSticker:function(a){return a.length===1&&a[0].attach_type==="sticker"},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_location")},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_live_location")},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,"montage_direct")},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion")},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion_request")},_hasSingleShareAttachmentOfStyle:function(a,b){return a.length===1&&a[0].attach_type==="share"&&a[0].share&&a[0].share.style_list.indexOf(b)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type==="share"},_hasError:function(a){return a.length===1&&a[0].attach_type==="error"},_hasGift:function(a){return a.length===1&&a[0].attach_type==="gift"},_hasFile:function(a){return a.length===1&&a[0].attach_type==="file"},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="photo"})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="animated_image"})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a photo.");else return g._("{name} sent a photo.",[g._param("name",b)]);else if(a)return g._({"*":"You sent {num_photos} photos."},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name} sent {num_photos} photos."},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a GIF.");else return g._("{name} sent a GIF.",[g._param("name",b)]);else if(a)return g._("You sent {num_animated_images} GIFs.",[g._param("num_animated_images",c.length)]);else return g._("{name} sent {num_animated_images} GIFs.",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name} sent an attachment.",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a}),null);
__d("useSnippetRenderer.react",["fbt","Actor","BaseText.react","CometEmojiTransform","CometEmoticonTransform","MercuryAttachmentSnippetRenderer","MercuryIDs","MessengerParticipants.re","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("Actor").useActor,i=b("React"),j=["227878347358915","369239263222822","369239343222814","369239383222810"];function k(a,c){var d=b("MercuryIDs").getUserIDFromParticipantID(a.id);c=c&&c[d]||a.short_name;return i.jsx(b("BaseText.react"),{text:c,transforms:[b("CometEmoticonTransform")(),b("CometEmojiTransform")()]})}function l(a,b,c,d,e){return c.id===d?g._("You: {last message sent in the thread}",[g._param("last message sent in the thread",a)]):e?a:g._("{sender name}: {last message sent in the thread}",[g._param("sender name",k(c,b)),g._param("last message sent in the thread",a)])}function a(a){var c=h();c=c[0];c=b("MercuryIDs").getParticipantIDFromUserID(c);var d=a.snippet,e=a==null?void 0:a.snippet_sender;e=e!=null?b("MessengerParticipants.re").getNow(e):null;if(e!=null)if(a.snippet_attachments.length!==0){var f=a.snippet_attachments;d=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(f),c===a.snippet_sender,k(e,a.custom_nickname),f);(f==null?void 0:f.length)===1&&j.includes((f=f[0])==null?void 0:(f=f.metadata)==null?void 0:f.stickerID)&&(d=l(i.jsx(b("BaseText.react"),{text:"(Y)",transforms:[b("CometEmoticonTransform")()]}),a.custom_nickname,e,c,a.is_canonical))}else a.snippet!=null&&a.snippet.toString()!==""&&(d=l(i.jsx(b("BaseText.react"),{text:a.snippet.toString(),transforms:[b("CometEmoticonTransform")(),b("CometEmojiTransform")()]}),a.custom_nickname,e,c,a.is_canonical));return d}e.exports=a}),null);
__d("FBRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway",CLIENT_REPORTED_EVENT:"client_reported_event"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO",FHD_IDEAL_LQ_REQUIRED_VIDEO:"FHD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20,KILLED:21}),l=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout","Killed"],m=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",AUDIO_ONLY_DISALLOWED:"CollabAudioOnlyDisallowed",UNKNOWN:"CollabUnknown",KILLED_VIA_THRIFT_API:"CollabKilledViaThriftApi"}),n=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),o=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var p=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),q=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"}),r=Object.freeze({LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"}),s=Object.freeze({UNKNOWN:0,MEDIA_CONNECTED:1}),t=Object.freeze({PLAN_B:"plan-b",UNIFIED_PLAN:"unified-plan"});o={CallBlockingConstants:o,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:m,GroupVideoViewLayout:q,IncomingCallDialogTypes:b,Orientation:r,PayloadType:a,RTCConstraints:j,SDPSemantics:t,SignalingProtocol:p,StreamType:h,UIEventType:n,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,ClientReportedEventType:s,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return l.indexOf(a)},callEndReasonString:function(a){a=l[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=o}),null);
__d("getBrowserGMTOffsetAdjustedForSkew",["DateConsts","FBLogger"],(function(a,b,c,d,e,f){"use strict";var g=(c=b("DateConsts")).HOUR_PER_DAY,h=c.MIN_PER_HOUR,i=c.MS_PER_SEC,j=c.SEC_PER_MIN;function a(a){var c=h*g,d=new Date(),e=d.getTimezoneOffset();d=d.getTime()/i;var f=15;a=a-d;d=Math.round(a/(f*j))*f;d!=0&&b("FBLogger")("TimezoneAutoset").warn("Adjusting timezone offset for clock skew. Browser offset: %s. Raw skew %s. Rounded skew %s",e,a,d);f=Math.round(e+d)%c;f>12*h?f-=c:f<-14*h&&(f+=c);return f}e.exports=a}),null);
__d("MessengerThreadListLoggerUtil",["MessagingTag","QuickPerformanceLogger"],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=1;function i(a,c){return!a||!a.includes(b("MessagingTag").INBOX.toUpperCase())?null:c==null?25296905:25296906}function j(a,b,c){return[].concat(a||[],[b,c]).filter(Boolean).join("_")}function a(a,c,d){var e=i(a,c);if(!e)return;b("QuickPerformanceLogger").markerStart(e,h);g.set(j(a,c,d),h);h++}function c(a,c,d,e){var f=i(a,c);if(!f)return;a=j(a,c,d);c=g.get(a);c!=null&&(b("QuickPerformanceLogger").markerEnd(f,e,c),g["delete"](a))}e.exports={markerStart:a,markerEnd:c}}),null);
__d("MessengerThreadlistWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"3253745841302430"};b.getQueryID=function(){return"269594000881384"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerGraphQLThreadlistFetcher.bs",["Promise","Utils.bs","gkx","bs_js_dict","BanzaiODS","bs_caml_array","WebGraphQL","bs_caml_format","bs_caml_option","CurrentUser","MercuryServerRequestsConfig","MessengerThreadListLoggerUtil","ChatReliabilityInstrumentation","MessengerServerPayloadTransformer.bs","MessengerThreadlistWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";function g(a){b("MessengerThreadListLoggerUtil").markerStart(a.tags,a.timestamp,a.limit);return new(b("MessengerThreadlistWebGraphQLQuery"))({limit:a.limit,before:a.timestamp,tags:a.tags,isWorkUser:b("CurrentUser").isWorkUser(),includeDeliveryReceipts:a.includeDeliveryReceipts,includeSeqID:a.includeSeqID,onlyPinnedThreads:a.onlyPinnedThreads,is_work_teamwork_not_putting_muted_in_unreads:b("gkx")("1105011")})}function h(a,c,d,e){var f=[],g=[],h={},i=[],j={},k={contents:void 0},l={contents:0},m=[];e.forEach(function(e,n){n=b("bs_caml_array").caml_array_get(c,n);var o=b("Utils.bs").optionBoolToBool(b("bs_caml_option").nullable_to_opt(n.onlyPinnedThreads)),p=[],q=[],r=[],s=e.viewer.pending_threads;s==null||(l.contents=s.unseen_count);e.viewer.message_threads.nodes.forEach(function(c){if(c==null)return 0;else{var e=b("MessengerServerPayloadTransformer.bs").transformThread(a,c,d),g=b("MessengerServerPayloadTransformer.bs").transformParticipants(c);g.forEach(function(a){j[a.fbid]=a;return 0});var k;if(e.is_canonical){g=e.other_user_fbid;g==null?k=null:(p.push(g),k=g)}else{g=e.thread_fbid;g==null?k=null:(q.push(g),k=g)}r.push(e.thread_id);f.push(e);if(!(k==null)){g=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(a,c);g!==void 0&&(h[k]=b("bs_caml_option").valFromOption(g))}if(!(k==null)){g=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(c);if(g.length!==0){c=g[0];e.is_canonical?i.push({other_user_fbid:k,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(c.timestamp_precise)}):i.push({other_user_fbid:null,thread_fbid:k,time:b("bs_caml_format").caml_float_of_string(c.timestamp_precise)})}}if(!(k==null)&&o){m.push(k);return 0}else return 0}});s=e.viewer.message_threads.sync_sequence_id;s==null||(k.contents=b("bs_caml_format").caml_int_of_string(s));if(o)return 0;else{e=n.timestamp;g.push({folder:n.folder,other_user_fbids:p,thread_fbids:q,thread_ids:r,filter:n.filter,limit:e==null?n.limit:n.limit-1|0});return 0}});return{threads:f,ordered_threadlists:g,pending_folder_unseen_count:l.contents,roger:h,delivery_receipts:i,participants:b("bs_js_dict").values(j),sequence_id:k.contents,pinned_thread_ids:m}}function i(a,c){a.forEach(function(a){b("MessengerThreadListLoggerUtil").markerEnd(a.tags,a.timestamp,a.limit,c);return 0});return 0}function a(a,c,d,e){var f=c.map(g);return b("Promise").all(b("WebGraphQL").execAll(f,{actorID:d?a:null,batchName:"MessengerGraphQLThreadlistFetcher",msgrRegion:b("MercuryServerRequestsConfig").msgrRegion,allowCrossPageTransition:!0}))["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql",e+".failure");i(c,"FAIL");b("ChatReliabilityInstrumentation").logERROR("fetch_thread_list_fail");return b("Promise").reject(a)}).then(function(f){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql",e+".success");i(c,"SUCCESS");return h(a,c,d,f)})}f._getQuery=g;f.transform=h;f.markerEnd=i;f.fetchAll=a}),null);
__d("isAdsExcelAddinURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)fbaddins\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}e.exports=a}),null);
__d("isValidAsyncSignalURI",[],(function(a,b,c,d,e,f){var g=new RegExp("((^|\\.)instagram\\.com$)|((^|\\.)wit\\.ai$)|((^|\\.)accountkit\\.com$)","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.includes(a.getProtocol())&&g.test(a.getDomain())}e.exports=a}),null);
__d("AsyncSignal",["Promise","ErrorGuard","QueryString","Run","TimeSlice","TrackingConfig","URI","ZeroRewrites","getAsyncParams","isAdsExcelAddinURI","isFacebookURI","isMessengerDotComURI","isValidAsyncSignalURI","isWorkplaceDotComURI","memoize","promiseDone"],(function(a,b,c,d,e,f){var g,h,i;function a(a,c){this.data=c||{},this.uri=a.toString(),b("TrackingConfig").domain&&this.uri.charAt(0)=="/"&&(this.uri=b("TrackingConfig").domain+this.uri)}a.prototype.setHandler=function(a){this.handler=a;return this};a.prototype.setTimeout=function(a){this.timeout=a;return this};a.prototype.send=function(){b("TimeSlice").guard(this._send.bind(this),"AsyncSignal send",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype._send=function(){var a=this.handler,c=this.data;c.asyncSignal=(Math.random()*1e4|0)+1;var d=b("ZeroRewrites").rewriteURI(new(g||(g=b("URI")))(this.uri));d=b("isFacebookURI")(d)||b("isMessengerDotComURI")(d)||b("isAdsExcelAddinURI")(d)||b("isWorkplaceDotComURI")(d)||b("isValidAsyncSignalURI")(d);if(d)Object.assign(c,b("getAsyncParams")("POST"));else throw new Error("'"+this.uri+"' is an external URL, you should not send async signals to offsite links.");var e=b("QueryString").appendToUrl(this.uri,c);i||(i=new(b("Promise"))(function(a){b("Run").onAfterLoad(a)}));d=i.then(function(){return new(b("Promise"))(function(a,b){var c=new Image();c.onload=a;c.onerror=c.onabort=b;c.src=e})});if(a){var f=!1,j=b("memoize")(function(){(h||(h=b("ErrorGuard"))).applyWithGuard(a,null,[f])});b("promiseDone")(d.then(function(){f=!0,j()},j));this.timeout&&setTimeout(j,this.timeout)}return this};e.exports=a}),null);
__d("AsyncTypedRequest",["AsyncRequest"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.setReplaceTransportMarkers();return b}var c=b.prototype;c.promisePayload=function(b){return a.prototype.promisePayload.call(this,b)};c.setPayloadHandler=function(b){a.prototype.setPayloadHandler.call(this,b);return this};return b}(b("AsyncRequest"));e.exports=a}),null);
__d("Chromedome",["fbt"],(function(a,b,c,d,e,f,g){a={start:function(a){if(top!==window||document.domain==null||!/(^|\.)facebook\.(com|sg)$/.test(document.domain))return;a=g._("Stop!");var b=g._("This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account."),c=g._("See {url} for more information.",[g._param("url","https://www.facebook.com/selfxss")]);if(window.chrome||window.safari){var d="font-family:helvetica; font-size:20px; ";[[a,d+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[b,d],[c,d],["",""]].map(function(a){window.setTimeout(console.log.bind(console,"\n%c"+a[0].toString(),a[1]))})}else{a=[""," .d8888b.  888                       888","d88P  Y88b 888                       888","Y88b.      888                       888",' "Y888b.   888888  .d88b.  88888b.   888','    "Y88b. 888    d88""88b 888 "88b  888','      "888 888    888  888 888  888  Y8P',"Y88b  d88P Y88b.  Y88..88P 888 d88P",' "Y8888P"   "Y888  "Y88P"  88888P"   888',"                           888","                           888","                           888"];d=(""+b.toString()).match(/.{35}.+?\s+|.+$/g);if(d!=null){b=Math.floor(Math.max(0,(a.length-d.length)/2));for(var e=0;e<a.length||e<d.length;e++){var f=a[e];a[e]=f+new Array(45-f.length).join(" ")+(d[e-b]||"")}}console.log("\n\n\n"+a.join("\n")+"\n\n"+c.toString()+"\n");return}}};e.exports=a}),null);
__d("ChannelConstants",[],(function(a,b,c,d,e,f){var g="channel/";a={CHANNEL_MANUAL_RECONNECT_DEFER_MSEC:2e3,MUTE_WARNING_TIME_MSEC:25e3,WARNING_COUNTDOWN_THRESHOLD_MSEC:15e3,ON_SHUTDOWN:g+"shutdown",ON_INVALID_HISTORY:g+"invalid_history",ON_CONFIG:g+"config",ON_ENTER_STATE:g+"enter_state",ON_EXIT_STATE:g+"exit_state",ATTEMPT_RECONNECT:g+"attempt_reconnect",RTI_SESSION:g+"new_rti_address",CONSOLE_LOG:g+"message:console_log",GET_RTI_SESSION_REQUEST:g+"rti_session_request",SKYWALKER:g+"skywalker",CHANNEL_ESTABLISHED:g+"established",OK:"ok",ERROR:"error",ERROR_MAX:"error_max",ERROR_MISSING:"error_missing",ERROR_MSG_TYPE:"error_msg_type",ERROR_SHUTDOWN:"error_shutdown",ERROR_STALE:"error_stale",SYS_OWNER:"sys_owner",SYS_NONOWNER:"sys_nonowner",SYS_ONLINE:"sys_online",SYS_OFFLINE:"sys_offline",SYS_TIMETRAVEL:"sys_timetravel",HINT_AUTH:"shutdown auth",HINT_CONN:"shutdown conn",HINT_DISABLED:"shutdown disabled",HINT_INVALID_STATE:"shutdown invalid state",HINT_MAINT:"shutdown maint",HINT_UNSUPPORTED:"shutdown unsupported",reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,CAPABILITY_VOIP_INTEROP:8,CAPABILITY_ACTIVE_ON_DESKTOP_APP:16384,CAPABILITY_PLAYING_INSTANT_GAME:2097152,FANTAIL_SERVICE:"WebchatClient",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",FAKE_DFF:"fake_dff",THROTTLED:g+"throttled",JUMPSTART:g+"jumpstart",ENTITY_PRESENCE_ACTIVE_PING:"entity_presence/active_ping",ENTITY_PRESENCE_SKIPPED_PING:"entity_presence/skipped_ping",SUBSCRIPTION_STATE:{SUBSCRIBE:"s",MUTATE_CONTEXT:"m",UNSUBSCRIBE:"u"},DEFAULT_MAX_SUBSCRIPTIONS:300,DEFAULT_EVICTION_BATCH_SIZE:20,DEFAULT_MAX_SUBSCRIPTION_FLUSH_BATCH_SIZE:300,DEFAULT_MAX_CONSECUTIVE_FLUSH_FAILURES:3,getArbiterType:function(a){return g+"message:"+a},getRTISkywalkerArbiterType:function(a,b){return g+"skywalker:"+a+":"+b}};e.exports=a}),null);
__d("LastActiveTimes",["fbt","ServerTime"],(function(a,b,c,d,e,f,g){var h={};function i(a){if(!a||a<0)return null;a=b("ServerTime").get()/1e3-a;a=Math.floor(a/60);var c=Math.floor(a/60),d=Math.floor(c/24);if(a<=1)return g._({"*":"{count}m"},[g._param("count",1,[0])]);else if(a<60)return g._({"*":"{count}m"},[g._param("count",a,[0])]);else if(c<24)return g._({"*":"{count}h"},[g._param("count",c,[0])]);else if(d<3)return g._({"*":"{count}d"},[g._param("count",d,[0])]);else return null}function j(a,b){(!(a in h)||h[a]<b)&&(h[a]=b)}function k(a){if(a in h)return h[a];else return 0}a={update:function(a){for(var b in a)j(b,a[b])},getShortDisplay:function(a){return i(k(a))},get:function(a){return k(a)},getDebugData:function(){return h}};e.exports=a}),null);
__d("PresenceConfig",["PresenceConfigInitialData"],(function(a,b,c,d,e,f){var g=Object.assign({},b("PresenceConfigInitialData"));a={get:function(a,b){return a in g?g[a]:b}};e.exports=a}),null);
__d("PresenceStatus",["ArbiterMixin","AvailableListConstants","AvailableListInitialData","BanzaiODS","Bootloader","ChatVisibility","CurrentUser","FBIDCheck","FBLogger","LastActiveTimes","PresenceConfig","PresencePrivacy","ServerTime","createObjectFrom","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f){b("BanzaiODS").setEntitySample("presence",1e-4);var g={},h={},i={},j={},k=Object.assign({},b("ArbiterMixin")),l=b("debounceAcrossTransitions")(function(){return k.inform("change")},0);function m(a){var c,d=parseInt(a.topic.match(/\d+$/),10);a=parseInt(JSON.parse(a.payload).lat,10);var e=Date.now()-a*1e3;e=b("PresenceConfig").get("active_cutoff")*1e3-e;b("LastActiveTimes").update((c={},c[d]=a,c));k.checkPresence(d);k.get(d)===b("AvailableListConstants").ACTIVE&&(window.clearTimeout(j[d].timeout),j[d].timeout=window.setTimeout(function(){k.checkPresence(d)},e))}function n(a){return/^\d+$/.test(a)}Object.assign(k,{resetPresenceData:function(){g={},h={}},reset:function(){k.resetPresenceData(),i={}},get:function(a){!n(a)&&b("PresenceConfig").get("presence_throw_for_malformed_id")&&b("FBLogger")("presence").warn("received malformed id '%s'",a);if(a==b("CurrentUser").getID())return b("ChatVisibility").isOnline()?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE;n(a)&&!b("FBIDCheck").isUser_deprecated(a)&&!j[a]&&(b("BanzaiODS").bumpEntityKey(3303,"presence","page_subscribe"),j[a]={},b("PresenceConfig").get("presence_page_green_dot_sub")&&b("Bootloader").loadModules(["SkywalkerManager"],function(b){return b.subscribe("presence_push/fb/"+a,m)},"PresenceStatus"));var c=b("AvailableListConstants").OFFLINE;a in g&&(c=g[a]);b("PresencePrivacy").allows(a)||(c=b("AvailableListConstants").OFFLINE);return c},getCapabilities:function(a){a=h[a];return a?a:0},isPlayingCanvasGameUser:function(a){return!!i[a]},getGroup:function(a){return a.some(function(a){return a==b("CurrentUser").getID()?!1:k.get(a)===b("AvailableListConstants").ACTIVE})?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE},set:function(a,c,d,e,f,i){if(a==b("CurrentUser").getID())return!1;var j;if(c!==null&&c!==void 0){c=c==b("AvailableListConstants").ACTIVE?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE;d=k.get(a);j=d!=c;if((j||c==b("AvailableListConstants").ACTIVE)&&b("FBIDCheck").isUser_deprecated(a)){b("LastActiveTimes").update((e={},e[a]=b("ServerTime").get()/1e3,e))}g[a]=c}d=!1;f!==void 0&&f!==null&&(d=k.getCapabilities(a)!=f,h[a]=f);e=j||d;e&&!i&&l();return e},setPlayingCanvasGameFriends:function(a){if(!b("gkx")("678262"))return;i=b("createObjectFrom")(a)},getOnlineIDs:function(){var a,c=[];for(a in g)k.get(a)===b("AvailableListConstants").ACTIVE&&c.push(a);return c},getAllIDs:function(){return Object.keys(g)},getOnlineCount:function(){return k.getOnlineIDs().length},getPresenceStats:function(){var a=0,c=0,d=0;for(var e in g){a+=1;switch(k.get(e)){case b("AvailableListConstants").OFFLINE:c+=1;break;case b("AvailableListConstants").ACTIVE:d+=1;break;default:break}}return{total:a,offline:c,active:d}},getAllDebugInfo:function(){var a={};for(var b in g)a[b]={p:g[b],vc:h[b]};return a},setMultiFromMQTT:function(a){var c={};Array.isArray(a)&&a.forEach(function(a){a.l&&(c[a.u]=a.l),k.set(a.u,a.p,!1,"mqtt",a.c,!0)});b("LastActiveTimes").update(c);l()},setMultiChatproxy:function(a){var c={};for(var d in a){a[d].lat&&(c[d]=a[d].lat);var e=a[d].p;k.set(d,e,!1,"chatproxy",a[d].vc,!0)}b("LastActiveTimes").update(c);l()},setMultiActive:function(a,c){var d=!1;a.forEach(function(a){k.set(a,b("AvailableListConstants").ACTIVE,!1,c,null,!0)&&(d=!0)});d&&l()},checkPresence:function(a){var c=!1,d=Math.ceil(Date.now()/1e3)-b("LastActiveTimes").get(a);k.set(a,d<b("PresenceConfig").get("active_cutoff")?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE,!1,"pylon",null,!0)&&(c=!0);c&&l()}});b("AvailableListInitialData").activeList&&b("AvailableListInitialData").activeList.length>0&&k.setMultiActive(b("AvailableListInitialData").activeList,"available_list_active");b("AvailableListInitialData").playingNow&&b("AvailableListInitialData").playingNow.length>0&&k.setPlayingCanvasGameFriends(b("AvailableListInitialData").playingNow);b("AvailableListInitialData").lastActiveTimes&&Object.keys(b("AvailableListInitialData").lastActiveTimes).length>0&&b("LastActiveTimes").update(b("AvailableListInitialData").lastActiveTimes);e.exports=k}),null);
__d("MessengerWebGraphQLTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebGraphQLLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebGraphQLLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebGraphQLLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setQueryParams=function(a){this.$1.query_params=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={error_message:!0,event:!0,query_params:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercuryAssert",["MercuryIDs"],(function(a,b,c,d,e,f){e.exports={isParticipantID:function(a){if(a==null)throw new Error("participant_id null/undefined");if(!b("MercuryIDs").isValid(a))throw new Error("bad_participant_id "+a)},allParticipantIDs:function(a){a.forEach(this.isParticipantID)},isUserParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(a==null)throw new Error("participant_id null/undefined");if(c.type!="fbid")throw new Error("bad_user_id "+a)},isEmailParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(a==null)throw new Error("participant_id null/undefined");if(c.type!="email")throw new Error("bad_email_id "+a)},allThreadID:function(a){a.forEach(this.isThreadID)},isThreadID:function(a){if(a==null)throw new Error("participant_id null/undefined");if(!b("MercuryIDs").isValid(a))throw new Error("bad_thread_id "+a)}}}),null);
__d("MercuryVanityIDMap.bs",["bs_js_dict","MercuryAssert","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";var g={},h={};function a(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a.toLowerCase()))}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(h,a))}function d(a){return b("bs_js_dict").get(h,a)!==void 0}function e(a){return b("bs_js_dict").get(g,a.toLowerCase())!==void 0}function i(a,c){b("MercuryAssert").isParticipantID(c);a=a.toLowerCase();g[a]=c;h[c]=a;return 0}f.vanityToID=g;f.idToVanity=h;f.getID=a;f.getVanity=c;f.hasID=d;f.hasVanity=e;f.set=i}),null);
__d("MessengerMessageWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2848441488556444"};b.getQueryID=function(){return"2539291476330394"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadMetadataWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1844738185554526"};b.getQueryID=function(){return"506565903040384"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerMessageDFFFetcher.bs",["Promise","bs_caml_array","WebGraphQL","bs_caml_builtin_exceptions","MessengerMessageTransformer.bs","MessengerMessageWebGraphQLQuery","MessengerThreadMetadataWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("Promise").all(b("WebGraphQL").execAll([new(b("MessengerThreadMetadataWebGraphQLQuery"))({id:c.thread_id}),new(b("MessengerMessageWebGraphQLQuery"))({thread_and_message_id:{thread_id:c.thread_id,message_id:c.message_id}})],{actorID:a,batchName:"MessengerMessageDFFFetcher"})).then(function(c){var e=b("bs_caml_array").caml_array_get(c,0);c=b("bs_caml_array").caml_array_get(c,1);e=e.message_thread;c=c.message;if(e==null)throw b("bs_caml_builtin_exceptions").not_found;else if(c==null)throw b("bs_caml_builtin_exceptions").not_found;else return b("Promise").resolve(b("MessengerMessageTransformer.bs").transformMessage(a,c,{thread_id:null,thread_fbid:e.thread_key.thread_fbid,other_user_fbid:e.thread_key.other_user_id,folder:e.folder.toLowerCase()},d))})}f.fetch_=a}),null);
__d("ImmutableValue",["invariant","isNode"],(function(a,b,c,d,e,f,g){"use strict";var h="_DONT_EVER_TYPE_THIS_SECRET_KEY";a=function(){function a(b){b===a[h]||g(0,5608)}a.mergeAllPropertiesInto=function(a,b){var c=b.length;for(var d=0;d<c;d++)Object.assign(a,b[d])};a.deepFreezeRootNode=function(c){if(b("isNode")(c))return;Object.freeze(c);for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&a.recurseDeepFreeze(c[d]);Object.seal(c)};a.recurseDeepFreeze=function(c){if(b("isNode")(c)||!a.shouldRecurseFreeze(c))return;Object.freeze(c);for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&a.recurseDeepFreeze(c[d]);Object.seal(c)};a.shouldRecurseFreeze=function(b){return typeof b==="object"&&!(b instanceof a)&&b!==null};return a}();a._DONT_EVER_TYPE_THIS_SECRET_KEY=Math.random();e.exports=a}),null);
__d("ImmutableObject",["invariant","ImmutableValue","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h=b("mergeHelpers").checkMergeObjectArgs,i=b("mergeHelpers").isTerminal,j="_DONT_EVER_TYPE_THIS_SECRET_KEY";function k(a){a instanceof b("ImmutableValue")||g(0,3884)}var l=function(c){babelHelpers.inheritsLoose(a,c);function a(){var a;a=c.call(this,b("ImmutableValue")[j])||this;b("ImmutableValue").mergeAllPropertiesInto(babelHelpers.assertThisInitialized(a),arguments);return a}a.set=function(b,c){k(b);typeof c==="object"&&c!==void 0&&!Array.isArray(c)||g(0,3885);return new a(b,c)};a.setProperty=function(b,c,d){var e={};e[c]=d;return a.set(b,e)};a.deleteProperty=function(b,c){var d={};for(var e in b)e!==c&&Object.prototype.hasOwnProperty.call(b,e)&&(d[e]=b[e]);return new a(d)};a.setDeep=function(a,b){k(a);return m(a,b)};a.values=function(a){return Object.keys(a).map(function(b){return a[b]})};return a}(b("ImmutableValue"));function m(a,c){h(a,c);var d={},e=Object.keys(a);for(var f=0;f<e.length;f++){var g=e[f];!Object.prototype.hasOwnProperty.call(c,g)?d[g]=a[g]:i(a[g])||i(c[g])?d[g]=c[g]:d[g]=m(a[g],c[g])}g=Object.keys(c);for(f=0;f<g.length;f++){e=g[f];if(Object.prototype.hasOwnProperty.call(a,e))continue;d[e]=c[e]}return a instanceof b("ImmutableValue")?new l(d):c instanceof b("ImmutableValue")?new l(d):d}e.exports=l}),null);
__d("MessengerParticipantsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"3155186547886547"};b.getQueryID=function(){return"1009367449423157"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();c.messaging_actors.forEach(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}});c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.$$fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_js_dict","bs_caml_obj","BanzaiODS","immutable","bs_belt_Array","MercuryIDs","bs_caml_option","CurrentUser","MercuryAssert","ImmutableObject","bs_js_null_undefined","MercuryVanityIDMap.bs","MercuryParticipantTypes","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:1},i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(a){if(b("CurrentUser").isWorkUser())return g._("Workplace User");else return g._("Facebook User")}function o(a){var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(a){Object.keys(i).forEach(function(a){return m(i,a)});return 0}function p(a){var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=b("bs_js_dict").get(i,c);if(d!==void 0){i[c]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}}function c(a){a=a.participants;if(a==null)return 0;else{a.map(p);return 0}}function d(a){a=a.preloaded_participants;if(a==null)return 0;else{a.map(p);return 0}}function q(a,c){var d={},e=[];a.forEach(function(a){var c=b("bs_js_dict").get(i,a);if(c!==void 0){d[a]=b("bs_caml_option").valFromOption(c);return 0}else{e.push(a);return 0}});if(e.length!==0){var f=[];e.forEach(function(a){if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h.contents.toString();k[g]=[a,c];h.contents=h.contents+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").$$fetch({ids:f}).then(function(a){a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){var d=b("bs_js_dict").get(k,a);if(d!==void 0){d=d;var e=d[0],c={};e.forEach(function(d){var a=b("bs_js_dict").get(i,d);if(a!==void 0){c[d]=b("bs_caml_option").valFromOption(a);return 0}else return 0});if(Object.keys(c).length===e.length){l(k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}else{c(d);return null}}function e(a,c){b("MercuryAssert").isParticipantID(a);return q([a],function(d){d=b("bs_js_dict").get(d,a);if(d!==void 0)return b("bs_curry")._1(c,b("bs_caml_option").valFromOption(d));else return 0})}function r(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(i,a))}function s(c,d){var e=[],a=[];c.forEach(function(b){var c=r(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=q(e,function(a){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_caml_option").nullable_to_opt(r(a))}))});return[a,f]}else return[a,null]}function t(a,c){var d=function(a){return b("immutable").Map(a.map(function(a){return[a.id,a]}))},e=function(a){return b("bs_curry")._1(c,d(a))};a=s(a,e);return[d(a[0]),a[1]]}function u(a){return l(k,a)}function v(a){if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.addPreloadedParticipants=d;f.getDefaultName=n;f.get=e;f.getNow=r;f.getMulti=q;f.getMultiEager=s;f.getMultiEagerMap=t;f.removeCallback=u;f.getIDFromVanityOrFBID=v}),null);
__d("MessengerParticipants.re",["bs_curry","MessengerParticipants.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").get,a,c);return a};f.get=a;c=b("MessengerParticipants.bs").getNow;f.getNow=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getMulti,a,c);return a};f.getMulti=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getMultiEager,a,c);return a};f.getMultiEager=e;a=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getMultiEagerMap,a,c);return a};f.getMultiEagerMap=a;c=b("MessengerParticipants.bs").removeCallback;f.removeCallback=c}),null);
__d("MercurySyncConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({ARBITER_EVENT_INVALID_STATE:"SYNC:INVALID_STATE",ARBITER_EVENT_INVALID_STATE_RETRY:"SYNC:INVALID_STATE_RETRY",ARBITER_EVENT_INVALID_STATE_RECOVER:"SYNC:INVALID_STATE_RECOVER",ARBITER_EVENT_INVALID_STATE_STALE:"SYNC:INVALID_STATE_STALE"});e.exports=a}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1={},this.$2=a}var c=a.prototype;c.getForFBID=function(a){this.$1[a]||(this.$1[a]=new this.$2(a));return this.$1[a]};c.get=function(){return this.getForFBID(b("CurrentUser").getID())};c.resetAll=function(){var a=this.$1;this.$1={};return a};a.mock=function(a){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};return a}();e.exports=a}),null);
__d("MercurySyncDeltaHolder",["MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$2=new Map(),this.$3=[],this.$1=0}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var b=a.prototype;b.peek=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3[0]};b.getTop=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3.reverse()[0]};b.pop=function(){this.$3=this.$3.sort(function(a,b){return a-b});if(this.$3.length===0)return void 0;var a=this.$3.shift(),b=this.$2.get(a);this.$2["delete"](a);return{seqID:a,delta:b}};b.push=function(a,b){if(this.$2.has(a))return;this.$2.set(a,b);this.$3.push(a)};b.getLastSeqID=function(){return this.$1};b.updateLastSeqID=function(a){this.$1=a};b.updateLastSeqIDAndClearHistory=function(a){this.$2=new Map(),this.$3=[],this.$1=a};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncDeltaTypes",[],(function(a,b,c,d,e,f){"use strict";a={AdminAddedToGroupThread:"AdminAddedToGroupThread",AdminRemovedFromGroupThread:"AdminRemovedFromGroupThread",AdminTextMessage:"AdminTextMessage",ChangeViewerStatus:"ChangeViewerStatus",DeliveryReceipt:"DeliveryReceipt",ForcedFetch:"ForcedFetch",MarkRead:"MarkRead",MarkUnread:"MarkUnread",MarkFolderSeen:"MarkFolderSeen",MessageDelete:"MessageDelete",NewMessage:"NewMessage",NoOp:"NoOp",PagesManagerEvent:"PagesManagerEvent",ParticipantLeftGroupThread:"ParticipantLeftGroupThread",ParticipantsAddedToGroupThread:"ParticipantsAddedToGroupThread",ReadReceipt:"ReadReceipt",ReplaceMessage:"ReplaceMessage",ThreadAction:"ThreadAction",ThreadDelete:"ThreadDelete",ThreadFolder:"ThreadFolder",ThreadMuteSettings:"ThreadMuteSettings",ThreadName:"ThreadName",JoinableMode:"JoinableMode",ApprovalMode:"ApprovalMode",ApprovalQueue:"ApprovalQueue",ClientPayload:"ClientPayload",GenieMessage:"GenieMessage",MontageMessage:"MontageMessage",RtcCallData:"RtcCallData"};e.exports=a}),null);
__d("bs_belt_SortArray",["bs_curry","bs_belt_Array"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d,e){while(!0){var f=c,g=b;if(f>=d)return f;else{var h=a[f];if(e(h,g)){c=f+1|0;b=h;continue}else return f}}}function h(a,b){var c=a.length;if(c===0||c===1)return c;else{var d=a[0],e=a[1];if(b(d,e)){var f=a,h=e,i=2,j=c,k=b;while(!0){var l=i,m=h;if(l>=j)return l;else{var n=f[l];if(k(m,n)){i=l+1|0;h=n;continue}else return l}}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){var c=a.length;if(c===0)return!0;else{a=a;var d=0;b=b;c=c-1|0;while(!0){var e=d;if(e===c)return!0;else if(b(a[e],a[e+1|0])<=0){d=e+1|0;continue}else return!1}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p<d){i=m+1|0;c=a[p];k=p;continue}else return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0)}else{h[m]=n;p=o+1|0;if(p<g){i=m+1|0;f=e[p];l=p;continue}else return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0)}}}function k(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}else{b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}}else if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(s<d&&t<g){i=r;f=e[t];l=t;c=a[s];k=s;continue}else if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}}else{h[m]=n;p=o+1|0;t=m+1|0;if(p<g){i=t;f=e[p];l=p;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,t,d-q|0);return(t+d|0)-q|0}}}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q<c){b=a[q];j=q;continue}else return l}else if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(q<c&&m<f){h=o;e=d[m];k=m;b=a[q];j=q;continue}else return o}else{p=n+1|0;if(p<f){e=d[p];k=p;continue}else return l}}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r<d){i=p;c=a[r];k=r;continue}else return p}else if(n===0){r=q+1|0;p=o+1|0;if(r<d&&p<g){f=e[p];l=p;c=a[r];k=r;continue}else if(r===d)return m;else{b("bs_belt_Array").blitUnsafe(a,r,h,m,d-r|0);return(m+d|0)-r|0}}else{n=o+1|0;if(n<g){f=e[n];l=n;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0,e=e-1|0;g<=e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}return 0}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);else{var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}}function q(a,b){var c=a.length;if(c<=5)return o(a,0,a,0,c,b);else{var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){var d=a.length;if(d===0)return-1;else{var e=a[0];e=c(b,e);if(e<0)return-1;else{e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=a;a=0;d=d-1|0;b=b;c=c;while(!0){var f=d,g=a,h=(g+f|0)/2|0,i=e[h];i=c(b,i);if(i===0)return h;else if(i<0)if(f===h)if(c(e[g],b)===0)return g;else return-(f+1|0)|0;else{d=h;continue}else if(g===h)if(c(e[f],b)===0)return f;else return-(f+1|0)|0;else{a=h;continue}}}}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w=0,x=0;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("react-relay/ReactRelayContainerUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.displayName||a.name||"Component"}function a(a){return"Relay("+g(a)+")"}e.exports={getComponentName:g,getContainerName:a}}),null);
__d("react-relay/isRelayEnvironment",[],(function(a,b,c,d,e,f){"use strict";function a(a){return typeof a==="object"&&a!==null&&typeof a.check==="function"&&typeof a.lookup==="function"&&typeof a.retain==="function"&&typeof a.execute==="function"&&typeof a.subscribe==="function"}e.exports=a}),null);
__d("react-relay/RelayContext",["invariant","react-relay/isRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a){h(a)||g(0,6172,a);return a}function h(a){return typeof a==="object"&&a!==null&&!Array.isArray(a)&&b("react-relay/isRelayEnvironment")(a.environment)}e.exports={assertRelayContext:a,isRelayContext:h}}),null);
__d("react-relay/readContext",["react"],(function(a,b,c,d,e,f){"use strict";var g;c=g||b("react");d=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var h=d.ReactCurrentDispatcher,i=d.ReactCurrentOwner;function a(a){var b=h!=null?h.current:i.currentDispatcher;return b.readContext(a)}e.exports=a}),null);
__d("react-relay/buildReactRelayContainer",["invariant","react","react-relay/ReactRelayContext","react-relay/assertFragmentMap","mapObject","react-relay/readContext","react-relay/ReactRelayContainerUtils","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("react-relay/ReactRelayContainerUtils").getComponentName,l=b("react-relay/ReactRelayContainerUtils").getContainerName,m=b("relay-runtime").getFragment;function a(a,c,d){var e=l(a);b("react-relay/assertFragmentMap")(k(a),c);c=(i||(i=b("mapObject")))(c,m);var f=d(a,c);f.displayName=e;function h(a,c){var d=b("react-relay/readContext")(b("react-relay/ReactRelayContext"));d!=null||g(0,18241,e,e);return j.jsx(f,babelHelpers["extends"]({},a,{__relayContext:d,componentRef:a.componentRef||c}))}h.displayName=e;d=j.forwardRef(h);return d}e.exports=a}),null);
__d("react-relay/getRootVariablesForFragments",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g=b("relay-runtime").getSelector;function a(a,b){var c={};Object.keys(a).forEach(function(d){var e=a[d];d=b[d];e=g(e,d);e=e!=null&&e.kind==="PluralReaderSelector"?(d=(d=e.selectors[0])==null?void 0:d.owner.variables)!=null?d:{}:(d=e==null?void 0:e.owner.variables)!=null?d:{};c=babelHelpers["extends"]({},c,e)});return c}e.exports=a}),null);
__d("react-relay/ReactRelayFragmentContainer",["react","areEqual","react-relay/buildReactRelayContainer","react-relay/getRootVariablesForFragments","react-relay/ReactRelayContainerUtils","react-relay/RelayContext","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("react-relay/ReactRelayContainerUtils").getContainerName,k=b("react-relay/RelayContext").assertRelayContext,l=b("relay-runtime").createFragmentSpecResolver,m=b("relay-runtime").getDataIDsFromObject,n=b("relay-runtime").isScalarAndEqual;function o(a,c){var d,e,f=j(a);return e=d=function(d){babelHelpers.inheritsLoose(e,d);function e(a){var b;b=d.call(this,a)||this;b.$3=function(){var a=b.state.resolver;b.setState(function(b){return a===b.resolver?{data:b.resolver.resolve(),relayProp:p(b.relayProp.environment)}:null})};var e=k(a.__relayContext),g=l(e,f,c,a);b.state={data:g.resolve(),prevProps:a,prevPropsContext:e,relayProp:p(e.environment),resolver:g};return b}e.getDerivedStateFromProps=function(a,d){var e=d.prevProps,g=k(a.__relayContext);e=m(c,e);var i=m(c,a),j=d.resolver;if(d.prevPropsContext.environment!==g.environment||!(h||(h=b("areEqual")))(e,i)){j=l(g,f,c,a);return{data:j.resolve(),prevPropsContext:g,prevProps:a,relayProp:p(g.environment),resolver:j}}else{j.setProps(a);e=j.resolve();if(e!==d.data)return{data:e,prevProps:a,prevPropsContext:g,relayProp:p(g.environment)}}return null};var g=e.prototype;g.componentDidMount=function(){this.$1(),this.$2()};g.componentDidUpdate=function(a,b){this.state.resolver!==b.resolver&&(b.resolver.dispose(),this.$1()),this.$2()};g.componentWillUnmount=function(){this.state.resolver.dispose()};g.shouldComponentUpdate=function(a,b){if(b.data!==this.state.data)return!0;var d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];if(f==="__relayContext"){if(b.prevPropsContext.environment!==this.state.prevPropsContext.environment)return!0}else if(!Object.prototype.hasOwnProperty.call(c,f)&&!n(a[f],this.props[f]))return!0}return!1};g.$2=function(){var a=this.state,b=a.data;a=a.resolver;a=a.resolve();b!==a&&this.setState({data:a})};g.$1=function(){var a=this.state.resolver;a.setCallback(this.$3)};g.render=function(){var b=this.props,c=b.componentRef;b.__relayContext;b=babelHelpers.objectWithoutPropertiesLoose(b,["componentRef","__relayContext"]);return i.createElement(a,babelHelpers["extends"]({},b,this.state.data,{ref:c,relay:this.state.relayProp}))};return e}(i.Component),d.displayName=f,e}function p(a){return{environment:a}}function a(a,c){return b("react-relay/buildReactRelayContainer")(a,c,o)}e.exports={createContainer:a}}),null);
__d("react-relay/ReactRelayLocalQueryRenderer",["react","react-relay/ReactRelayContext","relay-runtime","areEqual"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=i.useLayoutEffect,k=i.useState,l=i.useRef,m=i.useMemo,n=b("relay-runtime").createOperationDescriptor;c=b("relay-runtime").deepFreeze;var o=b("relay-runtime").getRequest;function p(a){var c=i.useRef(a);(h||(h=b("areEqual")))(c.current,a)||(c.current=a);return c.current}function a(a){var c=a.environment,d=a.query,e=a.variables;a=a.render;var f=p(e),g=m(function(){var a=o(d);return n(a,f)},[d,f]);e=m(function(){return{environment:c}},[c]);var h=l(null),q=k(null),r=q[1],s=l(null);q=m(function(){c.check(g);var a=c.lookup(g.fragment);h.current=a.data;var b=c.retain(g),d=c.subscribe(a,function(a){h.current=a.data,r(h.current)}),e=!1;function f(){e||(e=!0,s.current=null,b.dispose(),d.dispose())}s.current&&s.current();s.current=f;return a},[c,g]);j(function(){var a=s.current;return function(){a&&a()}},[q]);return i.jsx(b("react-relay/ReactRelayContext").Provider,{value:e,children:a({props:h.current})})}e.exports=a}),null);
__d("react-relay/ReactRelayQueryFetcher",["invariant","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=b("relay-runtime").isRelayModernEnvironment,i=b("relay-runtime").__internal.fetchQuery;a=function(){function a(a){this.$4=[],this.$8=!1,a!=null&&(this.$7=a.cacheSelectionReference,this.$4=a.selectionReferences)}var b=a.prototype;b.getSelectionReferences=function(){return{cacheSelectionReference:this.$7,selectionReferences:this.$4}};b.lookupInStore=function(a,b,c){if((c==="store-and-network"||c==="store-or-network")&&a.check(b).status==="available"){this.$9(a,b);return a.lookup(b.fragment)}return null};b.execute=function(a){var b=this,c=a.environment,d=a.operation,e=a.cacheConfig;a=a.preservePreviousReferences;var f=a===void 0?!1:a,g=c.retain(d);a=e!=null?{networkCacheConfig:e}:{};var j=function(){b.$4=b.$4.concat(g)},k=function(){f||b.disposeSelectionReferences(),b.$4=b.$4.concat(g)},l=function(){b.$4=b.$4.concat(g)};return!h(c)?c.execute({operation:d,cacheConfig:e})["do"]({error:j,complete:k,unsubscribe:l}):i(c,d,a)["do"]({error:j,complete:k,unsubscribe:l})};b.setOnDataChange=function(a){this.$1||g(0,4542),typeof a==="function"&&(this.$1.onDataChangeCallbacks=this.$1.onDataChangeCallbacks||[],this.$1.onDataChangeCallbacks.push(a),this.$8&&(this.$6!=null?a({error:this.$6}):this.$5!=null&&a({snapshot:this.$5})))};b.fetch=function(a,b){var c=this,d=a.cacheConfig,e=a.environment,f=a.operation;a=a.onDataChange;var g=!1,h;this.disposeRequest();var i=this.$1&&this.$1.onDataChangeCallbacks;this.$1={cacheConfig:d,environment:e,onDataChangeCallbacks:i||[],operation:f};a&&this.$1.onDataChangeCallbacks.indexOf(a)===-1&&this.$1.onDataChangeCallbacks.push(a);var j=this.execute({environment:e,operation:f,cacheConfig:(i=b)!=null?i:d})["finally"](function(){c.$2=null}).subscribe({next:function(){c.$8=!0,c.$6=null,c.$10({notifyFirstResult:g})},error:function(a){c.$8=!0;c.$6=a;c.$5=null;var b=c.$1&&c.$1.onDataChangeCallbacks;g?b&&b.forEach(function(b){b({error:a})}):h=a}});this.$2={dispose:function(){j.unsubscribe()}};g=!0;if(h)throw h;return this.$5};b.retry=function(a){this.$1||g(0,4543);return this.fetch({cacheConfig:this.$1.cacheConfig,environment:this.$1.environment,operation:this.$1.operation,onDataChange:null},a)};b.dispose=function(){this.disposeRequest(),this.disposeSelectionReferences()};b.disposeRequest=function(){this.$6=null,this.$5=null,this.$2&&this.$2.dispose(),this.$3&&(this.$3.dispose(),this.$3=null)};b.$9=function(a,b){this.$11(),this.$7=a.retain(b)};b.$11=function(){this.$7&&this.$7.dispose(),this.$7=null};b.disposeSelectionReferences=function(){this.$11(),this.$4.forEach(function(a){return a.dispose()}),this.$4=[]};b.$10=function(a){var b=this;a=a.notifyFirstResult;this.$1||g(0,4544);var c=this.$1,d=c.environment,e=c.onDataChangeCallbacks;c=c.operation;if(this.$5)return;this.$5=d.lookup(c.fragment);this.$3=d.subscribe(this.$5,function(a){if(b.$1!=null){var c=b.$1.onDataChangeCallbacks;Array.isArray(c)&&c.forEach(function(b){return b({snapshot:a})})}});if(this.$5&&a&&Array.isArray(e)){var f=this.$5;e.forEach(function(a){return a({snapshot:f})})}};return a}();e.exports=a}),null);
__d("react-relay/ReactRelayPaginationContainer",["invariant","react","react-relay/ReactRelayContext","react-relay/ReactRelayQueryFetcher","areEqual","react-relay/buildReactRelayContainer","react-relay/getRootVariablesForFragments","warning","react-relay/ReactRelayContainerUtils","react-relay/RelayContext","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("react-relay/ReactRelayContainerUtils").getComponentName,l=b("react-relay/ReactRelayContainerUtils").getContainerName,m=b("react-relay/RelayContext").assertRelayContext,n=b("relay-runtime").ConnectionInterface,o=b("relay-runtime").Observable,p=b("relay-runtime").createFragmentSpecResolver,q=b("relay-runtime").createOperationDescriptor,r=b("relay-runtime").getDataIDsFromObject,s=b("relay-runtime").getRequest;b("relay-runtime").getSelector;var t=b("relay-runtime").getVariablesFromObject,u=b("relay-runtime").isScalarAndEqual,v="forward";function w(a){var b=a.path;b||g(0,1219);return function(c){c=c[a.fragmentName];for(var d=0;d<b.length;d++){if(!c||typeof c!=="object")return null;c=c[b[d]]}return c}}function x(a){var b=a.count;b||g(0,1220);return function(a,c){return babelHelpers["extends"]({},a,(a={},a[b]=c,a))}}function y(a){var b=null,c=!1;for(var d in a){var e=a[d],f=e.metadata&&e.metadata.connection;e.metadata!==void 0&&(c=!0);f&&(f.length===1||g(0,1221,d,f.length),b&&g(0,1222),b=babelHelpers["extends"]({},f[0],{fragmentName:d}))}!c||b!==null||g(0,1223);return b||{}}function z(a){return typeof a==="function"?{error:a,complete:a,unsubscribe:function(b){typeof a==="function"&&a()}}:a||{}}function A(a,c,d){var e,f=k(a),h=l(a),A=y(c),B=d.getConnectionFromProps||w(A),C=d.direction||A.direction;C||g(0,1224);var D=d.getFragmentVariables||x(A);return e=A=function(e){babelHelpers.inheritsLoose(k,e);function k(a){var d;d=e.call(this,a)||this;d.$8=function(){d.setState({data:d.$4.resolve()})};d.$11=function(){var a=d.$15();return!!(a&&a.hasMore&&a.cursor)};d.$12=function(){return!!d.$2};d.$14=function(a,b,c){if(!d.$16("refetchConnection"))return{dispose:function(){}};d.$3=c;c={count:a,cursor:null,totalCount:a};a=d.$17(c,z(b),{force:!0});return{dispose:a.unsubscribe}};d.$13=function(a,c,e){if(!d.$16("loadMore"))return{dispose:function(){}};var f=z(c),g=d.$15();if(!g){o.create(function(a){return a.complete()}).subscribe(f);return null}var h=g.edgeCount+a;if(e&&e.force)return d.$14(h,c);c=n.get();var i=c.END_CURSOR;c=c.START_CURSOR;g=g.cursor;b("warning")(g!=null&&g!=="","ReactRelayPaginationContainer: Cannot `loadMore` without valid `%s` (got `%s`)",C===v?i:c,g);i={count:a,cursor:g,totalCount:h};c=d.$17(i,f,e);return{dispose:c.unsubscribe}};var f=m(a.__relayContext);d.$1=!1;d.$2=null;d.$3=null;d.$4=p(f,h,c,a,d.$8);d.state={data:d.$4.resolve(),prevContext:f,contextForChildren:f,relayProp:d.$9(f)};d.$6=!1;d.$7=!1;return d}var l=k.prototype;l.UNSAFE_componentWillReceiveProps=function(a){var d=m(a.__relayContext),e=r(c,this.props),f=r(c,a),g=b("react-relay/getRootVariablesForFragments")(c,this.props),j=b("react-relay/getRootVariablesForFragments")(c,a);d.environment!==this.state.prevContext.environment||!(i||(i=b("areEqual")))(g,j)||!(i||(i=b("areEqual")))(e,f)?(this.$10(),this.$4=p(d,h,c,a,this.$8),this.setState({prevContext:d,contextForChildren:d,relayProp:this.$9(d)})):this.$7||this.$4.setProps(a);g=this.$4.resolve();g!==this.state.data&&this.setState({data:g})};l.componentWillUnmount=function(){this.$6=!0,this.$10()};l.shouldComponentUpdate=function(a,b){if(b.data!==this.state.data||b.relayProp!==this.state.relayProp)return!0;var d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];if(f==="__relayContext"){if(b.prevContext.environment!==this.state.prevContext.environment)return!0}else if(!Object.prototype.hasOwnProperty.call(c,f)&&!u(a[f],this.props[f]))return!0}return!1};l.$9=function(a){return{hasMore:this.$11,isLoading:this.$12,loadMore:this.$13,refetchConnection:this.$14,environment:a.environment}};l.$15=function(){var a=this.props;a.componentRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["componentRef"]);a=babelHelpers["extends"]({},a,this.state.data);a=B(a);if(a==null)return null;var c=n.get(),d=c.EDGES,e=c.PAGE_INFO,h=c.HAS_NEXT_PAGE,i=c.HAS_PREV_PAGE,j=c.END_CURSOR;c=c.START_CURSOR;typeof a==="object"||g(0,1225,f,d,e,a);var k=a[d];a=a[e];if(k==null||a==null)return null;Array.isArray(k)||g(0,1226,f,d,k);typeof a==="object"||g(0,1227,f,e,a);d=C===v?a[h]:a[i];a=C===v?a[j]:a[c];if(typeof d!=="boolean"||k.length!==0&&typeof a==="undefined"){b("warning")(!1,"ReactRelayPaginationContainer: Cannot paginate without %s fields in `%s`. Be sure to fetch %s (got `%s`) and %s (got `%s`).",e,f,C===v?h:i,d,C===v?j:c,a);return null}return{cursor:a,edgeCount:k.length,hasMore:d}};l.$18=function(){this.$5||(this.$5=new(b("react-relay/ReactRelayQueryFetcher"))());return this.$5};l.$16=function(a){if(this.$6){b("warning")(!1,"ReactRelayPaginationContainer: Unexpected call of `%s` on unmounted container `%s`. It looks like some instances of your container still trying to fetch data but they already unmounted. Please make sure you clear all timers, intervals, async calls, etc that may trigger `%s` call.",a,h,a);return!1}return!0};l.$17=function(a,e,h){var j=this,k=m(this.props.__relayContext);k=k.environment;var l=this.props;l.componentRef;l.__relayContext;l=babelHelpers.objectWithoutPropertiesLoose(l,["componentRef","__relayContext"]);var n=babelHelpers["extends"]({},l,this.state.data),p,r=b("react-relay/getRootVariablesForFragments")(c,l);p=t(c,l);p=babelHelpers["extends"]({},r,p,this.$3);l=d.getVariables(n,{count:a.count,cursor:a.cursor},p);typeof l==="object"&&l!==null||g(0,1228,l,f);l=babelHelpers["extends"]({},l,this.$3);p=babelHelpers["extends"]({},l,p);r=h?{force:!!h.force}:void 0;r!=null&&(h==null?void 0:h.metadata)!=null&&(r.metadata=h==null?void 0:h.metadata);n=s(d.query);var u=q(n,l),v=null;this.$2&&this.$2.unsubscribe();this.$7=!0;var w=function(c,d){c=j.$4.resolve();j.$4.setVariables(D(p,a.totalCount),u.request.node);var e=j.$4.resolve();!(i||(i=b("areEqual")))(c,e)?j.setState({data:e,contextForChildren:{environment:j.props.__relayContext.environment}},d):d()};h=function(){j.$2===v&&(j.$2=null,j.$1=!1)};this.$1=!0;v=this.$18().execute({environment:k,operation:u,cacheConfig:r,preservePreviousReferences:!0}).mergeMap(function(a){return o.create(function(b){w(a,function(){b.next(),b.complete()})})})["do"]({error:h,complete:h,unsubscribe:h}).subscribe(e||{});this.$2=this.$1?v:null;return v};l.$10=function(){this.$4.dispose(),this.$3=null,this.$7=!1,this.$2&&(this.$2.unsubscribe(),this.$2=null,this.$1=!1),this.$5&&this.$5.dispose()};l.render=function(){var c=this.props,d=c.componentRef;c.__relayContext;c=babelHelpers.objectWithoutPropertiesLoose(c,["componentRef","__relayContext"]);return j.jsx(b("react-relay/ReactRelayContext").Provider,{value:this.state.contextForChildren,children:j.jsx(a,babelHelpers["extends"]({},c,this.state.data,{ref:d,relay:this.state.relayProp}))})};return k}(j.Component),A.displayName=h,e}function a(a,c,d){return b("react-relay/buildReactRelayContainer")(a,c,function(a,b){return A(a,b,d)})}e.exports={createContainer:a}}),null);
__d("react-relay/ReactRelayQueryRenderer",["react","react-relay/ReactRelayContext","react-relay/ReactRelayQueryFetcher","areEqual","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("relay-runtime").createOperationDescriptor;a=b("relay-runtime").deepFreeze;var k=b("relay-runtime").getRequest,l={};c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;var e={handleDataChange:null,handleRetryAfterError:null},f;if(c.query){var g=c.query;g=k(g);f=p(g.params,c.variables);g=l[f]?l[f].queryFetcher:new(b("react-relay/ReactRelayQueryFetcher"))()}else g=new(b("react-relay/ReactRelayQueryFetcher"))();d.state=babelHelpers["extends"]({prevPropsEnvironment:c.environment,prevPropsVariables:c.variables,prevQuery:c.query,queryFetcher:g,retryCallbacks:e},q(c,g,e,f));return d}c.getDerivedStateFromProps=function(a,c){if(c.prevQuery!==a.query||c.prevPropsEnvironment!==a.environment||!(h||(h=b("areEqual")))(c.prevPropsVariables,a.variables)){var d=a.query,e=c.queryFetcher.getSelectionReferences();c.queryFetcher.disposeRequest();if(d){d=k(d);d=p(d.params,a.variables);d=l[d]?l[d].queryFetcher:new(b("react-relay/ReactRelayQueryFetcher"))(e)}else d=new(b("react-relay/ReactRelayQueryFetcher"))(e);return babelHelpers["extends"]({prevQuery:a.query,prevPropsEnvironment:a.environment,prevPropsVariables:a.variables,queryFetcher:d},q(a,d,c.retryCallbacks))}return null};var d=c.prototype;d.componentDidMount=function(){var a=this,b=this.state,c=b.retryCallbacks,d=b.queryFetcher;b=b.requestCacheKey;b&&delete l[b];c.handleDataChange=function(b){var c=b.error==null?null:b.error,d=b.snapshot==null?null:b.snapshot;a.setState(function(a){var b=a.requestCacheKey;b&&delete l[b];return d===a.snapshot&&c===a.error?null:{renderProps:o(c,d,a.queryFetcher,a.retryCallbacks),snapshot:d,requestCacheKey:null}})};c.handleRetryAfterError=function(b){return a.setState(function(a){a=a.requestCacheKey;a&&delete l[a];return{renderProps:m(),requestCacheKey:null}})};this.props.query&&d.setOnDataChange(c.handleDataChange)};d.componentDidUpdate=function(){var a=this.state.requestCacheKey;a&&(delete l[a],delete this.state.requestCacheKey)};d.componentWillUnmount=function(){this.state.queryFetcher.dispose()};d.shouldComponentUpdate=function(a,b){return a.render!==this.props.render||b.renderProps!==this.state.renderProps};d.render=function(){var a=this.state,c=a.renderProps;a=a.relayContext;return i.jsx(b("react-relay/ReactRelayContext").Provider,{value:a,children:this.props.render(c)})};return c}(i.Component);function m(){return{error:null,props:null,retry:null}}function n(){return{error:null,props:{},retry:null}}function o(a,b,c,d){return{error:a?a:null,props:b?b.data:null,retry:function(b){b=c.retry(b);b&&typeof d.handleDataChange==="function"?d.handleDataChange({snapshot:b}):a&&typeof d.handleRetryAfterError==="function"&&d.handleRetryAfterError(a)}}}function p(a,b){a=a.id||a.text;return JSON.stringify({id:String(a),variables:b})}function q(a,b,c,d){var e=a.environment,f=a.query,g=a.variables;e=e;if(f){f=k(f);g=j(f,g);var h={environment:e};if(typeof d==="string"&&l[d]){var i=l[d].snapshot;if(i)return{error:null,relayContext:h,renderProps:o(null,i,b,c),snapshot:i,requestCacheKey:d};else return{error:null,relayContext:h,renderProps:m(),snapshot:null,requestCacheKey:d}}try{i=b.lookupInStore(e,g,a.fetchPolicy);g=b.fetch({cacheConfig:a.cacheConfig,environment:e,onDataChange:c.handleDataChange,operation:g});g=g||i;d=d||p(f.params,a.variables);l[d]={queryFetcher:b,snapshot:g};return!g?{error:null,relayContext:h,renderProps:m(),snapshot:null,requestCacheKey:d}:{error:null,relayContext:h,renderProps:o(null,g,b,c),snapshot:g,requestCacheKey:d}}catch(a){return{error:a,relayContext:h,renderProps:o(a,null,b,c),snapshot:null,requestCacheKey:d}}}else{b.dispose();i={environment:e};return{error:null,relayContext:i,renderProps:n(),requestCacheKey:null}}}e.exports=c}),null);
__d("react-relay/ReactRelayRefetchContainer",["react","react-relay/ReactRelayContext","react-relay/ReactRelayQueryFetcher","areEqual","react-relay/buildReactRelayContainer","react-relay/getRootVariablesForFragments","warning","react-relay/ReactRelayContainerUtils","react-relay/RelayContext","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("react-relay/ReactRelayContainerUtils").getContainerName,k=b("react-relay/RelayContext").assertRelayContext,l=b("relay-runtime").Observable,m=b("relay-runtime").createFragmentSpecResolver,n=b("relay-runtime").createOperationDescriptor,o=b("relay-runtime").getDataIDsFromObject,p=b("relay-runtime").getRequest;b("relay-runtime").getSelector;var q=b("relay-runtime").getVariablesFromObject,r=b("relay-runtime").isScalarAndEqual;function s(a,c,d){var e,f,g=j(a);return f=e=function(e){babelHelpers.inheritsLoose(f,e);function f(a){var f;f=e.call(this,a)||this;f.$6=function(){var a=f.state.resolver;f.setState(function(b){return a===b.resolver?{data:b.resolver.resolve()}:null})};f.$4=function(a,e,h,i){if(f.$3){b("warning")(!1,"ReactRelayRefetchContainer: Unexpected call of `refetch` on unmounted container `%s`. It looks like some instances of your container still trying to refetch the data but they already unmounted. Please make sure you clear all timers, intervals, async calls, etc that may trigger `refetch`.",g);return{dispose:function(){}}}var j=k(f.props.__relayContext);j=j.environment;var m=b("react-relay/getRootVariablesForFragments")(c,f.props);a=typeof a==="function"?a(f.$7()):a;a=babelHelpers["extends"]({},m,a);var o=e?babelHelpers["extends"]({},a,e):a;m=i?{force:!!i.force}:void 0;m!=null&&(i==null?void 0:i.metadata)!=null&&(m.metadata=i==null?void 0:i.metadata);var q=typeof h==="function"?{next:h,error:h}:h||{};e=p(d);var r=n(e,a);f.state.localVariables=a;f.$1&&f.$1.unsubscribe();var s;h=f.$8().lookupInStore(j,r,i==null?void 0:i.fetchPolicy);if(h!=null){f.state.resolver.setVariables(o,r.request.node);f.setState(function(a){return{data:a.resolver.resolve(),contextForChildren:{environment:f.props.__relayContext.environment}}},function(){q.next&&q.next(),q.complete&&q.complete()});return{dispose:function(){}}}f.$8().execute({environment:j,operation:r,cacheConfig:m,preservePreviousReferences:!0}).mergeMap(function(a){f.state.resolver.setVariables(o,r.request.node);return l.create(function(a){return f.setState(function(a){return{data:a.resolver.resolve(),contextForChildren:{environment:f.props.__relayContext.environment}}},function(){a.next(),a.complete()})})})["finally"](function(){f.$1===s&&(f.$1=null)}).subscribe(babelHelpers["extends"]({},q,{start:function(a){f.$1=s=a,q.start&&q.start(a)}}));return{dispose:function(){s&&s.unsubscribe()}}};var h=k(a.__relayContext);f.$1=null;var i=m(h,g,c,a);f.state={data:i.resolve(),localVariables:null,prevProps:a,prevPropsContext:h,contextForChildren:h,relayProp:t(h.environment,f.$4),resolver:i};f.$3=!1;return f}var j=f.prototype;j.componentDidMount=function(){this.$5()};j.componentDidUpdate=function(a,b){this.state.resolver!==b.resolver&&(b.resolver.dispose(),this.$2&&this.$2.dispose(),this.$1&&this.$1.unsubscribe(),this.$5())};f.getDerivedStateFromProps=function(a,d){var e=d.prevProps,f=k(a.__relayContext),i=o(c,e),j=o(c,a);e=b("react-relay/getRootVariablesForFragments")(c,e);var l=b("react-relay/getRootVariablesForFragments")(c,a),n=d.resolver;if(d.prevPropsContext.environment!==f.environment||!(h||(h=b("areEqual")))(e,l)||!(h||(h=b("areEqual")))(i,j)){n=m(f,g,c,a);return{data:n.resolve(),localVariables:null,prevProps:a,prevPropsContext:f,contextForChildren:f,relayProp:t(f.environment,d.relayProp.refetch),resolver:n}}else d.localVariables||n.setProps(a);e=n.resolve();return e!==d.data?{data:e,prevProps:a}:null};j.componentWillUnmount=function(){this.$3=!0,this.state.resolver.dispose(),this.$2&&this.$2.dispose(),this.$1&&this.$1.unsubscribe()};j.shouldComponentUpdate=function(a,b){if(b.data!==this.state.data||b.relayProp!==this.state.relayProp)return!0;var d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];if(f==="__relayContext"){if(this.state.prevPropsContext.environment!==b.prevPropsContext.environment)return!0}else if(!Object.prototype.hasOwnProperty.call(c,f)&&!r(a[f],this.props[f]))return!0}return!1};j.$5=function(){var a=this.state,b=a.data;a=a.resolver;a.setCallback(this.$6);a=a.resolve();b!==a&&this.setState({data:a})};j.$7=function(){return q(c,this.props)};j.$8=function(){this.$2||(this.$2=new(b("react-relay/ReactRelayQueryFetcher"))());return this.$2};j.render=function(){var c=this.props,d=c.componentRef;c.__relayContext;c=babelHelpers.objectWithoutPropertiesLoose(c,["componentRef","__relayContext"]);var e=this.state,f=e.relayProp;e=e.contextForChildren;return i.jsx(b("react-relay/ReactRelayContext").Provider,{value:e,children:i.jsx(a,babelHelpers["extends"]({},c,this.state.data,{ref:d,relay:f}))})};return f}(i.Component),e.displayName=g,f}function t(a,b){return{environment:a,refetch:b}}function a(a,c,d){return b("react-relay/buildReactRelayContainer")(a,c,function(a,b){return s(a,b,d)})}e.exports={createContainer:a}}),null);
__d("react-relay",["react-relay/ReactRelayContext","react-relay/ReactRelayFragmentContainer","react-relay/ReactRelayLocalQueryRenderer","react-relay/ReactRelayPaginationContainer","react-relay/ReactRelayQueryRenderer","react-relay/ReactRelayRefetchContainer","relay-runtime"],(function(a,b,c,d,e,f){"use strict";e.exports={ConnectionHandler:(a=b("relay-runtime")).ConnectionHandler,QueryRenderer:b("react-relay/ReactRelayQueryRenderer"),LocalQueryRenderer:b("react-relay/ReactRelayLocalQueryRenderer"),MutationTypes:a.MutationTypes,RangeOperations:a.RangeOperations,ReactRelayContext:b("react-relay/ReactRelayContext"),applyOptimisticMutation:a.applyOptimisticMutation,commitLocalUpdate:a.commitLocalUpdate,commitMutation:a.commitMutation,createFragmentContainer:b("react-relay/ReactRelayFragmentContainer").createContainer,createPaginationContainer:b("react-relay/ReactRelayPaginationContainer").createContainer,createRefetchContainer:b("react-relay/ReactRelayRefetchContainer").createContainer,fetchQuery:a.fetchQuery,graphql:a.graphql,readInlineData:a.readInlineData,requestSubscription:a.requestSubscription}}),null);
__d("RelayModern",["RelayFBMutations","RelayFBSubscription","enqueueMutation","react-relay","RelayFBEnvironmentDefinitions","configureRelayForWWW"],(function(a,b,c,d,e,f){"use strict";a=b("enqueueMutation").enqueueMutation;c=b("RelayFBEnvironmentDefinitions").createEnvironment;d=b("RelayFBEnvironmentDefinitions").createEnvironmentFactory;b("configureRelayForWWW")();e.exports=babelHelpers["extends"]({},b("react-relay"),{commitMutation:b("RelayFBMutations").addFBisms(b("react-relay").commitMutation),enqueueMutation:b("RelayFBMutations").addFBisms(a),requestSubscription:b("RelayFBSubscription").addFBisms(b("react-relay").requestSubscription),createEnvironment:c,createEnvironmentFactory:d})}),null);
__d("BanzaiLogger",["Banzai"],(function(a,b,c,d,e,f){function g(a){return{log:function(c,d){b("Banzai").post("logger:"+c,d,a)},create:g}}a=g();e.exports=a}),null);
__d("XCometStoriesCreateControllerRouteBuilder",["cometRouteBuilder"],(function(a,b,c,d,e,f){a=b("cometRouteBuilder")("/stories/create/",Object.freeze({}),void 0);e.exports=a}),null);
__d("useCometHomeChatSettingsQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"2630118660439463",metadata:{relayPreloadable:!0},name:"useCometHomeChatSettingsQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("useStoriesIsUploading_user.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStoriesIsUploading_user",selections:[{alias:"buckets",args:[{kind:"Literal",name:"find",value:"loading"},{kind:"Literal",name:"first",value:1}],concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_status",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'unified_stories_buckets(find:"loading",first:1)'}],type:"User",abstractKey:null};e.exports=a}),null);
__d("BaseToasterView.react",["CometToasterStateManager","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("CometToasterStateManager").getInstance();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={visibleToasts:[]},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromProps=function(a,b){b=b!=null?b.visibleToasts.slice(0,a.maxVisible):[];var c=0,d=a.filterToasts,e=a.toasterState,f={},g=d!=null?Object.keys(e).filter(function(a){var b,c=e[a];f[a]=c;var g=c==null?void 0:c.shown;b=c==null?void 0:(b=c.value)==null?void 0:(b=b.type)==null?void 0:b.name;if(c==null||b==null)return!0;if(d.has(b)&&!g){h.expire(a);return!1}}):Object.keys(e),i=b.reduce(function(a,b){b!=null&&a.add(b.id);return a},new Set()),j=0;while(c<a.maxVisible){var k=b[c],l=Object.keys(f).length>0?f:a.toasterState;if(k!=null){l=Object.prototype.hasOwnProperty.call(l,k.id);if(l){l=e[k.id];b[c]={expired:l.expired,id:l.id,toast:l.value};c++;continue}else b[c]=null}k=null;while(k==null&&j<g.length){l=g[j++];var m=i.has(l);m||(k=a.toasterState[l])}k!=null&&(b[c]={expired:k.expired,id:k.id,toast:k.value});c++}return{visibleToasts:b}};var c=b.prototype;c.render=function(){var a=this;return g.jsx("ul",{className:this.props.className,children:this.state.visibleToasts.map(function(b,c){return b!=null?a.props.children(b.toast,b.id,b.expired,c):null})})};return b}(g.PureComponent);a.defaultProps={maxVisible:1};e.exports=a}),null);
__d("CometToastAnimationInternal.react",["React","stylex","useFadeEffect","useMergeRefs","useToasterStateManager","useVisibilityObserver"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");c=b("React");var i=c.useCallback,j=100,k={mount:{opacity:"pedkr2u6",transform:"g3zh7qmp",transitionDuration:"pc15xi3s",transitionTimingFunction:"ilcmz9jb"},root:{opacity:"b5wmifdl",transform:"f2tghaqp",transitionDuration:"s1992sns",transitionProperty:"r5qslco7",transitionTimingFunction:"nf1dmkjp"}};function a(a){var c=a.children,d=a.expired;d=d===void 0?!1:d;var e=a.id,f=a.position;a=a.xstyle;var l=b("useToasterStateManager")(),m=h.Children.only(c);c=i(function(){l.resetTimer(e)},[e,l]);var n=i(function(){l.stopTimer(e)},[e,l]),o=i(function(){l.shown(e)},[e,l]),p=i(function(){l.hidden(e)},[e,l]),q=i(function(a){m.props.onActionPress!=null&&m.props.onActionPress(a),a.defaultPrevented||l.expire(e)},[m.props,e,l]);p=b("useVisibilityObserver")({onHidden:p,onVisible:o});o=b("useFadeEffect")(!d);d=o[0];var r=o[1];o=o[2];o=b("useMergeRefs")(o,p);return d?h.jsx("li",{className:(g||(g=b("stylex")))(k.root,r&&k.mount,a),onMouseEnter:n,onMouseLeave:c,ref:o,style:{bottom:j*f},children:h.cloneElement(m,{onActionPress:q})}):null}e.exports=a}),null);
__d("CometHomeChatSettings.entrypoint",["JSResourceForInteraction","useCometHomeChatSettingsQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){return{queries:{chatSettingsQueryReference:{parameters:b("useCometHomeChatSettingsQuery$Parameters"),variables:{}}}}},root:b("JSResourceForInteraction")("CometHomeChatSettings.react",{"class":"fluid",name:"Comet Chat Settings Menu",oncall:"messenger_web_product"}).__setRef("CometHomeChatSettings.entrypoint")};e.exports=a}),null);
__d("MWMSThreadTitle.re",["bs_curry","MWMSThreadTitle.bs"],(function(a,b,c,d,e,f){a=function(a){a=b("bs_curry")._2(b("MWMSThreadTitle.bs").getProfileImages_,a.threadImage==null?void 0:a.threadImage,a.participants);return a};f.getProfileImages_=a;c=function(a){a=b("bs_curry")._3(b("MWMSThreadTitle.bs").getTitleForGroup_,a.threadName,a.participants,a.nicknames);return a};f.getTitleForGroup_=c;d=function(a){a=b("bs_curry")._3(b("MWMSThreadTitle.bs").getTitleForUser_,a.id,a.participants,a.nicknames);return a};f.getTitleForUser_=d;e=function(a){a=b("bs_curry")._2(b("MWMSThreadTitle.bs").getTitleForPage_,a.id,a.participants);return a};f.getTitleForPage_=e}),null);
__d("MWChatOpenNewTab.re",["MWChatOpenNewTab.bs"],(function(a,b,c,d,e,f){a=function(a){var c=b("MWChatOpenNewTab.bs").useHook(a);return function(a){a=c(a==null?void 0:a);return a}};f.useHook=a}),null);
__d("VideoChatLinksUserActionsTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:VideoChatLinksUserActionsLoggerConfig")}),null);
__d("useMWChatNewVideoChat",["fbt","requireDeferred","CometRelay","React","RTWebPreCallContext","VideoChatLinksUserActionsTypedLoggerLite","cometPushToast","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=b("CometRelay").useRelayEnvironment;c=b("React");var i=c.useCallback,j=c.useContext,k=c.useState,l=b("requireDeferred")("ZenonPreCallHookBuilderHelper"),m=b("cometPushToast").cometPushErrorToast;function a(a){var c=j(b("RTWebPreCallContext")),d=h(),e=k(!1),f=e[0],n=e[1];e=i(function(){n(!0),b("VideoChatLinksUserActionsTypedLoggerLite").log({component:"messenger_inbox_meetup_create_link_button",event:"meetup_entry_point_clicked",surface:"www_facebook_window"}),l.loadImmediately(function(e){b("promiseDone")(e.createMeetup(c,d,"www_facebook_window","messenger_inbox_meetup_create_link_button"),function(d){d==null?(n(!1),m({message:g._("Unable to create a new Video Chat.")})):b("promiseDone")(e.joinMeetup(c,d),function(){n(!1),a!=null&&a()},function(){n(!1)})},function(){n(!1),m({message:g._("Unable to create a new Video Chat.")})})})},[a,d,c]);return[e,f]}e.exports=a}),null);
__d("StoriesActorContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c={actorID:null};e.exports=a.createContext(c)}),null);
__d("StoriesActorProvider.react",["React","StoriesActorContext"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useMemo;function a(a){var c=a.actorID;a=a.children;var d=h(function(){return{actorID:c}},[c]);return g.jsx(b("StoriesActorContext").Provider,{value:d,children:a})}e.exports=a}),null);
__d("useStoriesIsUploading",["CometRelay","React","useStoriesIsUploading_user.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment;c=b("React");var i=c.useEffect,j=c.useState,k=g!==void 0?g:g=b("useStoriesIsUploading_user.graphql");function a(a,b){var c=j(!1),d=c[0],e=c[1];c=h(k,a);var f=l(c);i(function(){f&&e(!0),d&&!f&&(b&&b(),e(!1))},[d,b,f]);return f}function l(a){a=a==null?void 0:(a=a.buckets)==null?void 0:a.edges;return a&&a.length===1?m(a[0]):!1}function m(a){var b=!1;a=a==null?void 0:(a=a.node)==null?void 0:(a=a.unified_stories)==null?void 0:a.edges;if(a!=null){a=a.map(function(a){return a==null?void 0:a.node});a!=null&&a.forEach(function(a){a=a==null?void 0:(a=a.story_card_info)==null?void 0:a.thread_status;a==="PENDING"&&(b=!0)})}return b}e.exports=a}),null);
__d("StoriesEnums",[],(function(a,b,c,d,e,f){"use strict";a={BACKGROUND_STYLE:{BLACK:"black",DEFAULT:"default"},EMPTY_BUCKET_TYPES:{FRIEND_BUCKET:"FRIEND_BUCKET",SELF_BUCKET:"SELF_BUCKET",UNSELECTED:"UNSELECTED"},END_CARD:{AVATAR_WIDTH:44,COUNT_DOWN_SECONDS:5,MAX_AVATAR_NUMBER:4,MAX_TILE_NUMBER:6,MS_PER_INTERVAL:200,MS_PER_SECOND:1e3,PADDING_HORIZONTAL:12,PADDING_VERTICAL:16,PADDING_WIDTH:32},GRADIENT_DIRECTION:{BL_TR:"BL_TR",BOTTOM_TOP:"BOTTOM_TOP",BR_TL:"BR_TL",LEFT_RIGHT:"LEFT_RIGHT",RIGHT_LEFT:"RIGHT_LEFT",TL_BR:"TL_BR",TOP_BOTTOM:"TOP_BOTTOM",TR_BL:"TR_BL"},LIGHTWEIGHT_REACTION_UNICODES:{ANGER:"\ud83d\ude21",HAHA:"\ud83d\ude06",LIKE:"\ud83d\udc4d",LOVE:"\u2764\ufe0f",SORRY:"\ud83d\ude22",SUPPORT:"\ud83e\udd17",WOW:"\ud83d\ude2e"},NAV_DIRECTIONS:{NEXT_BUCKET:"next-bucket",NEXT_CARD:"next-card",PREV_BUCKET:"prev-bucket",PREV_CARD:"prev-card",STAY_HERE:"stay_here"},POLL_STICKER:{AVAILABLE_WIDTH_RATIO:(240-2*12)/240,BACKGROUND_COLOR_BLUE:"#79A6FF",BACOGROUND_COLOR_SLATE:"#EAEFF2",CHILD_PADDING_RATIO:.05,DEFAULT_OPTION_WIDTH_RATIO:.5,FIVE_OPTION_STAR_RATING:"FIVE_OPTION_STAR_RATING",IG_LEFT_TEXT_COLOR:"#13bda6",IG_RIGHT_TEXT_COLOR:"#F36B7F",IG_TWO_OPTION_COMBINED:"IG_TWO_OPTION_COMBINED",MINIMUM_LABEL_WIDTH_RATIO:.31,OVERFLOW_CHILD_PADDING_RATIO:20/240,TEXT_BIG_HEIGHT_RATIO:40/72,TEXT_BIG_MAX_FONT_SIZE_RATIO:30/240,TEXT_BIG_MIN_FONT_SIZE_RATIO:20/240,TEXT_BIG_RATIO:40/240,TEXT_COLOR_GREY:"#5F6673",TEXT_ONLY_FONT_SIZE_RATIO:20/240,TEXT_SMALL_HEIGHT_RATIO:25/72,TEXT_SMALL_MAX_FONT_SIZE_RATIO:20/240,TEXT_SMALL_MIN_FONT_SIZE_RATIO:12/240,TEXT_SMALL_RATIO:25/240,TEXT_WITH_PERCENT_FONT_SIZE_RATIO:12/240,TWO_OPTION_COMBINED:"TWO_OPTION_COMBINED",VOTE_COUNT_FONT_SIZE_RATIO:32/240,VOTE_OPTION_MAX_WIDTH_RATIO:.75},PRONOUN:{FEMALE:"FEMALE",MALE:"MALE",NEUTRAL:"NEUTRAL"},RECTANGULAR_TILE_TYPES:{THREE_COLUMN:"THREE_COLUMN",TWO_COLUMN:"TWO_COLUMN"},STORIES_BUCKETS_INDEXER_TYPES:{OTHER:"OTHER",OWNED_SELF:"OWNED_SELF"},STORIES_OPTION_TYPES:{DELETE:"DELETE",DELETE_STORY_AND_BLOCK_MEMBER:"DELETE_STORY_AND_BLOCK_MEMBER",MUTE_CARD_OWNER:"MUTE_CARD_OWNER",REPORT_TO_GROUP_ADMINS:"REPORT_TO_GROUP_ADMINS"},STORY_CARD_TYPES:{ADMINED_ADDITIONAL_PROFILE_STORY:"ADMINED_ADDITIONAL_PROFILE_STORY",ARCHIVED_STORY:"ARCHIVED_STORY",BIRTHDAY_STORY:"BIRTHDAY_STORY",CREW_STORY:"CREW_STORY",EVENT_STORY:"EVENT_STORY",GOODWILL_GENERATED_STORY:"GOODWILL_GENERATED_STORY",GOODWILL_STORY:"GOODWILL_STORY",GROUP_STORY:"GROUP_STORY",HIGHLIGHTED_STORY:"HIGHLIGHTED_STORY",LIVE_STORY:"LIVE_STORY",M_GROUP_STORY:"M_GROUP_STORY",NULL_STATE_STORY:"NULL_STATE_STORY",PAGE_STORY:"PAGE_STORY",PROFILE_PLUS_STORY:"PROFILE_PLUS_STORY",PROMOTION_STORY:"PROMOTION_STORY",SHARED_PAGE_STORY:"SHARED_PAGE_STORY",STORY:"STORY",TOPIC_STORY:"TOPIC_STORY",UNKNOWN:"UNKNOWN",WAS_LIVE:"WAS_LIVE"},STORY_MEDIA_TYPES:{PHOTO:"Photo",VIDEO:"Video"},STORY_OVERLAY_TYPES:{EXTERNAL_SONG:"StoryOverlayExternalSong",INTERACTIVE_STICKER:"StoryOverlayReactionSticker",POLL_STICKER:"StoryOverlayPollSticker",RESHARED_CONTENT:"StoryOverlayResharedContent",RESHARED_POST:"StoryOverlayResharedPost",TAG_STICKER:"StoryOverlayTagSticker"},STORY_REACTION_STICKERS_CONSTANTS:{ANIMATIONS_INTERVAL_THROTTLE:300,HOLD_DELAY:1e3},TAG_STICKER_TYPES:{LOCATION:"LOCATION",PAGE:"PAGE",PEOPLE:"PEOPLE",PRODUCT:"PRODUCT"},VIEWER_THEME:{DARK_MODE:"dark_mode",DARK15:"dark_15",DARK30:"dark_30",DEFAULT:"default"},VIEWERSHEET_ANIMATION:{DEFAULT:"default",SLIDE_UP:"slide_up"},VIEWERSHEET_STYLE:{PAGE_TRANSITION:"PAGE_TRANSITION",USER:"USER",USER_TRANSITION:"USER_TRANSITION"},VOTING_PHASES:{JUST_VOTED:"JUST_VOTED",RESULTS:"RESULTS",VOTING:"VOTING"}};e.exports=a}),null);
__d("StoriesLoggerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getCameraPostType:function(a){switch(a){case"PAGE_STORY":return"PAGE_STORY";case"GROUP_STORY":return"GROUP_STORY";case"EVENT_STORY":return"EVENT_STORY";case"BIRTHDAY_STORY":return"BIRTHDAY_STORY";case"CREW_STORY":return"CREW_STORY";case"GOODWILL_STORY":return"GOODWILL_STORY";case"GOODWILL_GENERATED_STORY":return"GOODWILL_GENERATED_STORY";case"STORY":return"STORY";case"PROFILE_PLUS_STORY":return"PROFILE_PLUS_STORY";case"ADMINED_ADDITIONAL_PROFILE_STORY":return"ADMINED_ADDITIONAL_PROFILE_STORY"}return null},getLoggingMediaType:function(a){var b="unknown";a==="Photo"?b="photo":a==="Video"?b="video":a==="live"&&(b="live");return b},getOwnerType:function(a,b,c,d){switch(b){case"Page":return"page";case"Event":return"event";case"User":return c===a?"self":d?"friend":"followee";case"Group":return"group";case"StoryPromotionOwner":return"promotion";default:return"null"}}};e.exports=a}),null);
__d("StoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ACTION_SOURCE:{ARCHIVE:"archive",FACEBOOK_CHAT_TAB:"facebook_chat_tab",IN_FEED:"in_feed",MESSENGER_DOT_COM:"messenger_dot_com",NOTIFICATION:"notification",PAGE_PROFILE:"page_profile",POST_HEADER:"post_header_actor_photo",STORIES_SURFACE:"stories_surface",TODAY_IN:"today_in",TRAY:"story_tray",UNKNOWN:"unknown",VIEWER:"viewer"},ACTION_TYPE:{CLOSE_STORY:"close_story",DELETE_MEDIA:"delete_media_attempted",OPEN_LINK:"open_link",OPEN_MEDIA:"open_media",OPEN_SEEN_SUMMARY:"open_seen_summary",OPEN_STORY:"open_story",PAUSE_STORY:"pause_story",REACTION_STICKER_INTERACTED:"reaction_sticker_interacted",REPLY_ATTEMPT_COMPLETED:"reply_attempt_completed",SEND_REPLY_ATTEMPT:"attempt_to_send_reply",SEND_STORY_FAILED:"send_story_failed",SEND_STORY_SUCCEEDED:"send_story_succeed",STORY_MEDIA_VIEW:"story_media_view",STORY_NAVIGATION:"story_navigation",TRAY_LOAD:"story_tray_load",UNPAUSE_STORY:"unpause_story",VISIT_PAGE:"fb_stories_visit_page"},CLOSE_STORY_GESTURE:{AUTO_EXIT:"auto_exit",BACK_BUTTON_EXIT:"back_button_exit",BLUR_BACKGROUND:"blur_background",CLOSE_BUTTON_EXIT:"close_button_exit",KEYBOARD_EXIT:"keyboard_exit"},FB_STORIES_IMPRESSION:75,FB_STORIES_TIMESPENT:76,IMPRESSION_DEDUPLICATION_TIME:6e4,NAVIGATION_GESTURE:{AUTO_JUMP:"auto_jump",NAVIGATE_AWAY:"navigate_away",SWIPE_LEFT:"swipe_left",SWIPE_RIGHT:"swipe_right",TAP_BACKWARD:"tap_backward",TAP_FORWARD:"tap_forward",VIEWER_SHEET:"viewer_sheet"},STORY_TYPE:{EVENT_STORY:"event",FOLLOWEE_STORY:"followee",FRIEND_STORY:"friend",GROUP_STORY:"group",MISSING_STORY_DATA:"missingStoryData",PAGE_STORY:"page",SELF_STORY:"self",STORY_PROMOTION:"promotion"},TIMESPENT_MINIMUM_TIME:500};e.exports=a}),null);
__d("StoriesGating",["StoriesEnums","gkx","qex"],(function(a,b,c,d,e,f){"use strict";var g={getBackgroundStyle:function(){if(g.isComet())return b("StoriesEnums").BACKGROUND_STYLE.DEFAULT;var a=b("qex")._("1148215");return a===b("StoriesEnums").BACKGROUND_STYLE.BLACK?b("StoriesEnums").BACKGROUND_STYLE.BLACK:b("StoriesEnums").BACKGROUND_STYLE.DEFAULT},getIsNavigationPaneOnLeft:function(){var a;return(a=b("qex")._("1121435"))!=null?a:!0},getPhotoDuration:function(){var a;a=(a=b("qex")._("1148127"))!=null?a:6;return a*1e3},getTileGridInitialRowCount:function(){var a;return(a=b("qex")._("1231317"))!=null?a:3},getTileGridRowSize:function(){var a;return(a=b("qex")._("1231318"))!=null?a:6},getViewerSheetStyle:function(){var a;return(a=b("qex")._("1081237"))!=null?a:b("StoriesEnums").VIEWERSHEET_ANIMATION.DEFAULT},isAddToStoryEnabled:function(){return b("gkx")("678359")},isComet:function(){return b("gkx")("708253")},isCometPrivacySelectorEnabled:function(){return b("gkx")("1276925")},isCometProductionEnabled:function(){return g.isComet()&&b("gkx")("1465546")},isCometStoriesVideoProductionEnabled:function(){return b("gkx")("1351783")},isCometStoriesViewerOpenAnimationEnabled:function(){return g.isComet()&&b("gkx")("1437541")},isEmployee:function(){return b("gkx")("678680")},isFriendsAndConnectionsDeprecated:function(){return b("gkx")("1234255")},isInteractiveStickersEnabled:function(){return b("gkx")("823030")},isLightweightReactionsViewerSheetEnabled:function(){var a;return(a=b("qex")._("706596"))!=null?a:!1},isMusicStoryV2WithAttributionEnabled:function(){return b("gkx")("1407290")},isPageStoryReshareEnabled:function(){var a;return(a=b("qex")._("1071294"))!=null?a:!1},isPollStickersEnabled:function(){return!0},isProductionInitialPhotoUploadEnabled:function(){return b("gkx")("1482246")},isReshareConsumptionEnabled:function(){var a;return(a=b("qex")._("1064124"))!=null?a:!1},isSongStickersEnabled:function(){return!0},isStoriesArchiveEnabled:function(){return b("gkx")("1220640")},isSupportReactionEnabled:function(){var a;return(a=b("qex")._("1371343"))!=null?a:!1},isTest:function(){return b("gkx")("709647")},isTileGridPermalinkEnabled:function(){var a;return g.isComet()?!1:(a=b("qex")._("1192726"))!=null?a:!1},isUsingStoriesArchiveViewerV2:function(){return b("gkx")("1268828")},shouldAutoplayAfterEndCard:function(){var a;return(a=b("qex")._("1061827"))!=null?a:!1},shouldHideNavPane:function(){var a;return g.isComet()?!1:(a=b("qex")._("1154326"))!=null?a:!1},shouldLogStoryMediaView:function(){return b("gkx")("1261311")},shouldMockLogging:function(){return b("gkx")("1260876")},shouldPreloadPhotoUri:function(){return b("gkx")("1268714")},shouldPreloadPhotoUriWithBucketPrefetching:function(){return b("gkx")("1268714")},shouldScaleTileGridItems:function(){var a;return(a=b("qex")._("1231374"))!=null?a:!0},shouldShowEndCard:function(){var a;return(a=b("qex")._("1015355"))!=null?a:!1},shouldShowNavButtonTooltip:function(){var a;return(a=b("qex")._("1148192"))!=null?a:!1},shouldShowTileGridSeeMoreButton:function(){var a;return(a=b("qex")._("1231324"))!=null?a:!1},shouldShowViewerTileGridButton:function(){var a;return g.isComet()?!1:(a=b("qex")._("1184281"))!=null?a:!1},shouldSuspendBothQueries:function(){var a;return!g.shouldHideNavPane()?!1:(a=b("qex")._("1213321"))!=null?a:!1},shouldUseBrowseContent:function(){var a;return(a=b("qex")._("1222085"))!=null?a:!1},shouldUseEasyExit:function(){return!1}};e.exports=g}),null);
__d("MeetupExperiments",["RTWebIncomingRingConfiguration","gkx","qex"],(function(a,b,c,d,e,f){"use strict";a={dwebLaunchGkEnabled:function(){return b("gkx")("1397101")},supportLinkCreatorMode:function(){return b("gkx")("1340584")},supportLinkCreationInChatSideBar:function(){var a;return b("RTWebIncomingRingConfiguration").isSupportedClientForProtocol("mw")&&((a=b("qex")._("1382106"))!=null?a:!1)},supportLinkCreationInInbox:function(){var a;return b("RTWebIncomingRingConfiguration").isSupportedClientForProtocol("mw")&&((a=b("qex")._("1382569"))!=null?a:!1)},sendCreatorNotifications:function(){return b("gkx")("1375506")},supportJoinerWaitingLobby:function(){return b("gkx")("1456547")}};e.exports=a}),null);
__d("MessengerCreateVideoChatLinkCallMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input",type:"CreateMessengerCallInviteLinkData!"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CreateMessengerCallInviteLinkResponsePayload",kind:"LinkedField",name:"create_messenger_call_invite_link",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerCallInviteLink",kind:"LinkedField",name:"messenger_call_invite_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerCreateVideoChatLinkCallMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerCreateVideoChatLinkCallMutation",selections:b},params:{id:"2794067527328171",metadata:{},name:"MessengerCreateVideoChatLinkCallMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VideoChatLinksUserActionsMultiplexLogger",["requireCond","cr:1443591"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1443591")}),null);
__d("MWMSMarkThreadAsRead.bs",["React","FBMqttChannel","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){a=JSON.stringify({threadId:a,mark:"read",state:!0});if(a!==void 0){b("FBMqttChannel").publish("/mark_thread",a);return 0}else{b("recoverableViolation")("Failed to construct JSON to mark read/unread","messenger_comet");return 0}}function a(a){return g.useCallback(function(b){return h(a)},[a])}f.send=h;f.useHook=a}),null);
__d("MessengerCreateVideoChatLinkCallMutation",["Promise","requireCond","cr:1012418","MessengerCreateVideoChatLinkCallMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("cr:1012418").commitMutation;b("cr:1012418").graphql;function a(a){return new(b("Promise"))(function(c,d){h(a,{mutation:g!==void 0?g:g=b("MessengerCreateVideoChatLinkCallMutation.graphql"),onCompleted:function(a){a=a==null?void 0:(a=a.create_messenger_call_invite_link)==null?void 0:(a=a.messenger_call_invite_link)==null?void 0:a.link_url;return a!=null?c(a):d({error:"Failed to create linkurl."})},onError:function(a){d(a)},optimisticUpdater:null,variables:{input:{client_mutation_id:"",link_metadata:{link_type:"MEETUP",should_allow_anonymous_guests:!0},should_allow_guests:!0}}})})}e.exports=a}),null);
__d("ZenonCallWindowErrors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error)),h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));e.exports={CannotAcceptInviteError:f,ConferenceNameMutationFailedError:b,IncompleteControllerParamsError:c,InviteNotFoundError:g,OpeningAnotherCallError:a,UninitializedError:h,UnsupportedThreadTypeError:d}}),null);
__d("randomZenonCallID",["Random"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("Random").uint32()+1)}e.exports=a}),null);
__d("randomZenonNonce",["Random"],(function(a,b,c,d,e,f){"use strict";var g=2,h=6,i=36,j=2176782336;function a(){var a="";for(var c=0;c<g;c++){var d=Math.floor(b("Random").random()*j).toString(i);while(d.length<h)d="0"+d;a+=d}return a}e.exports=a}),null);
__d("ZenonPreCallHookBuilderHelper",["regeneratorRuntime","MessengerCreateVideoChatLinkCallMutation","VideoChatLinksUserActionsMultiplexLogger","ZenonCallWindowErrors","randomZenonCallID","randomZenonNonce"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonCallWindowErrors").CannotAcceptInviteError,h=b("ZenonCallWindowErrors").InviteNotFoundError,i=b("ZenonCallWindowErrors").UninitializedError;a={acceptCall:function(a,c){if(a===null)throw new i();var d=a.callInviteModel;a=a.callWindowController;var e=d.getCurrentInvite();if(e===null)throw new h();if(e.type!=="ringing"||e.context.type!=="thread")throw new g();var f=b("randomZenonNonce")();a=a.initCall({context:{controllerParams:e.controllerParams,intent:"accept invite"},joinContext:{thread:e.context.type==="thread"?e.context.thread:{id:"0",type:2},type:"thread"},mediaType:e.requestingVideo?"video":"audio",nonce:f});e=a[0];a=a[1];d.accept(f,{isPopupBlocked:e===null,trigger:c});return a},createMeetup:function(a,c,d,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:if(!(a===null)){g.next=2;break}throw new i();case 2:j(d,e).setEvent("meetup_attempt_create_meetup").log();g.prev=3;g.next=6;return b("regeneratorRuntime").awrap(b("MessengerCreateVideoChatLinkCallMutation")(c));case 6:f=g.sent;f!=null?j(d,e).setEvent("meetup_create_success").log():j(d,e).setEvent("meetup_create_failed").log();return g.abrupt("return",f);case 11:g.prev=11;g.t0=g["catch"](3);j(d,e).setEvent("meetup_create_failed").log();j(d,e).setEvent("error").setErrorType("LinkCreationError "+g.t0.name).setErrorDetails(g.t0.description).log();throw g.t0;case 16:case"end":return g.stop()}},null,this,[[3,11]])},joinMeetup:function(a,c,d){if(a===null)throw new i();var e=a.callInviteModel;a=a.callWindowController;var f=b("randomZenonNonce")();a=a.initCall({context:{callID:b("randomZenonCallID")(),existingCall:null,intent:"start or join",invitees:[]},joinContext:{linkUrl:c,type:"link"},mediaType:"video",nonce:f});a[0];c=a[1];a=e.getCurrentInvite();a!=null&&d!=null&&e.accept(f,{isPopupBlocked:!1,trigger:d});return c},startCall:function(a,c){var d=c.existingCall,e=c.extra,f=c.invitees,g=c.mediaType,h=c.thread;c=c.trigger;if(a===null)throw new i();var j=a.callWindowController;a=a.incomingRingSDK;var k=b("randomZenonCallID")(),l=b("randomZenonNonce")();j=j.initCall({context:{callID:k,existingCall:d,intent:"start or join",invitees:f},extra:e,joinContext:{thread:h,type:"thread"},mediaType:g,nonce:l});d=j[0];f=j[1];a.startCallIntent(l,{callID:k,callTrigger:c,isPopupBlocked:d===null,isVideo:g==="video",peerID:h.type===1?h.id:"MW_PEER_ID",protocol:h.type===1?"p2p":"mw"});return f}};function j(a,c){return new(b("VideoChatLinksUserActionsMultiplexLogger"))().setSurface(a).setComponent(c)}e.exports=a}),null);
__d("useZenonCallInvite",["React"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useEffect,h=c.useState;function a(a){var b=h(function(){return a?a.getCurrentInvite():null}),c=b[0],d=b[1];g(function(){if(a){var b=a.addListener("callInvite",d);return function(){b.remove()}}else d(null)},[a]);return c}e.exports=a}),null);
__d("ZenonPreCallHookBuilder",["CometRelay","FBLogger","React","ZenonPreCallHookBuilderHelper","useZenonCallInvite"],(function(a,b,c,d,e,f){"use strict";var g=b("CometRelay").useRelayEnvironment;a=b("React");var h=a.useCallback,i=a.useContext,j=a.useDebugValue,k=a.useEffect,l=6e4;c={createAcceptCallCallbackHook:function(a){return function(){var c=i(a);return h(function(a){a=a.trigger;return b("ZenonPreCallHookBuilderHelper").acceptCall(c,a)},[c])}},createCallInviteHook:function(a){return function(){var c=i(a);c=b("useZenonCallInvite")(c?c.callInviteModel:null);j(c);return c}},createInviteAndStartCallCallbackHookFactory:function(a,c){return function(d,e){return function(){var f=i(a),g=d(),j=e(),k=c();return h(function(a){var c=a.existingCall,d=a.thread;if(!f||!f.incomingRingSDK.isCallSupported({threadType:d.type,type:"thread"}))j(a);else switch(d.type){case 1:k(babelHelpers["extends"]({},a,{invitees:[d.id]}));break;case 2:c===null||c.call_state==="NO_ONGOING_CALL"?g(a,function(b){k(babelHelpers["extends"]({},a,{invitees:b}))}):k(babelHelpers["extends"]({},a,{invitees:[]}));break;default:b("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",d.type)}},[f,g,j,k])}}},createNoAnswerTimeoutHook:function(a,b){return function(){var c=i(a),d=b();k(function(){if(c&&d&&d.type==="ringing"){var a=window.setTimeout(function(){c.callInviteModel.decline("NoAnswerTimeout")},l);return function(){window.clearTimeout(a)}}},[c,d])}},createStartCallCallbackHook:function(a){return function(){var c=i(a);return h(function(a){var d=a.existingCall,e=a.extra,f=a.invitees,g=a.mediaType,h=a.thread;a=a.trigger;return b("ZenonPreCallHookBuilderHelper").startCall(c,{existingCall:d,extra:e,invitees:f,mediaType:g,thread:h,trigger:a})},[c])}},createCreateMeetupCallbackHook:function(a){return function(){var c=i(a),d=g();return h(function(a,e){return b("ZenonPreCallHookBuilderHelper").createMeetup(c,d,a,e)},[c,d])}},createJoinMeetupCallbackHook:function(a){return function(){var c=i(a);return h(function(a,d){return b("ZenonPreCallHookBuilderHelper").joinMeetup(c,a,d)},[c])}}};e.exports=c}),null);
__d("RTWebPreCallHooks",["RTWebPreCallContext","ZenonPreCallHookBuilder"],(function(a,b,c,d,e,f){"use strict";d=(a=b("ZenonPreCallHookBuilder")).createAcceptCallCallbackHook(c=b("RTWebPreCallContext"));f=a.createCallInviteHook(c);b=a.createNoAnswerTimeoutHook(c,f);var g=a.createStartCallCallbackHook(c),h=a.createCreateMeetupCallbackHook(c),i=a.createJoinMeetupCallbackHook(c);a=a.createInviteAndStartCallCallbackHookFactory(c,g);e.exports={createInviteAndStartCallCallbackHook:a,useAcceptCallCallback:d,useCallInvite:f,useCreateMeetupCallback:h,useJoinMeetupCallback:i,useNoAnswerTimeout:b,useStartCallCallback:g}}),null);
__d("useRTWebOutgoingGroupCallDialog",["JSResource","React","useCometLazyDialog"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useRef,i=b("JSResource")("RTWebCometOutgoingGroupCallContent.react").__setRef("useRTWebOutgoingGroupCallDialog");function a(){var a=h(!1),c=b("useCometLazyDialog")(i),d=c[0];return g(function(b){var c=b.onCall,e=b.threadID;b=b.viewer;a.current||(a.current=!0,d({onCall:c,threadID:e,viewer:b},function(){a.current=!1}))},[a,d])}e.exports=a}),null);
__d("useRTWebOutgoingUnsupportedBrowserDialog",["JSResource","React","useCometLazyDialog"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=b("JSResource")("RTWebCometOutgoingUnsupportedDialog.react").__setRef("useRTWebOutgoingUnsupportedBrowserDialog");function a(){var a=b("useCometLazyDialog")(h),c=a[0];return g(function(a){c(a)},[c])}e.exports=a}),null);
__d("useRTWebCometStartCallCallback",["Actor","React","RTWebPreCallHooks","useRTWebOutgoingGroupCallDialog","useRTWebOutgoingUnsupportedBrowserDialog"],(function(a,b,c,d,e,f){"use strict";var g=b("Actor").useActor;d=b("React");var h=d.useCallback;f=b("RTWebPreCallHooks").createInviteAndStartCallCallbackHook(a,c);function a(){var a=g(),c=a[0],d=b("useRTWebOutgoingGroupCallDialog")();return h(function(a,b){a=a.thread.id;d({onCall:b,threadID:a,viewer:c})},[d,c])}function c(){var a=g(),c=a[0],d=b("useRTWebOutgoingUnsupportedBrowserDialog")();return h(function(a){a=a.thread;var b=a.id;a=a.type;d({actorID:c,threadID:b,threadType:a})},[c,d])}e.exports=f}),null);
__d("FBRTCConsoleLogger",["nullthrows","requireCond","Log","LogHistory","cr:1112656"],(function(a,b,c,d,e,f){"use strict";var g=null;a=function(){a.getInstance=function(){g||(g=new a());return g};function a(){this.$1=b("LogHistory").getInstance(a.MODULE_NAME)}var c=a.prototype;c.getLogHistory=function(){return this.$1};c.log=function(a,b,c,d,e){d===void 0&&(d="Console");e===void 0&&(e="DEBUG");e=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(d||"Console",a+e);return this};return a}();a.MODULE_NAME="webrtc";e.exports=a}),null);
__d("RTCWebUserActionsDebugTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:RTCWebUserActionsDebugLoggerConfig")}),null);
__d("RTCWebUserActionsTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:RTCWebUserActionsLoggerConfig")}),null);
__d("ZenonUserActionLogger",["FBRTCConsoleLogger","RTCWebUserActionsDebugTypedLoggerLite","RTCWebUserActionsTypedLoggerLite","gkx","qex"],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=window.location.hostname.search("facebook")!==-1?"facebook":window.location.hostname.search("messenger")!==-1?"messenger_dot_com":null,i=h==="facebook"&&b("gkx")("708253")?"Comet":h==="messenger_dot_com"&&b("qex")._("1277463")?"ZenonOnMercury":void 0,j={logCheckpoint:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"checkpoint"}))},logClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logError:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"error"}))},logEvent:function(a){var c;c=babelHelpers["extends"]({},a,{codebase_version:i,page:(c=a.page)!=null?c:h});var d=babelHelpers["extends"]({},c,{client_time:Date.now()});b("RTCWebUserActionsDebugTypedLoggerLite").log(d);b("RTCWebUserActionsTypedLoggerLite").log(d);b("FBRTCConsoleLogger").getInstance().getLogHistory().log((d=a.event)!=null?d:"null",JSON.stringify(c))},logImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},logPreCallClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logPreCallImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},startTimer:function(a){var b=Date.now();g=g.set(a,b);j.logCheckpoint({checkpoint:a+"_timerStart"})},stopTimer:function(a){var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{},d=function(a){var b=g.get(a);if(b!=null){g["delete"](a);return parseInt(Date.now()-b,10)}return null};c.event_time_elapsed=d(a.timerName);j.logCheckpoint(babelHelpers["extends"]({},c,{checkpoint:b+"_timerEnd"}));return parseInt(c.event_time_elapsed,10)}};e.exports=j}),null);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCallID=function(a){this.$1.call_id=a;return this};c.setClientAppVersion=function(a){this.$1.client_app_version=a;return this};c.setClientLockStatus=function(a){this.$1.client_lock_status=a;return this};c.setClientMonoTimeMs=function(a){this.$1.client_mono_time_ms=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setConferenceNameRaw=function(a){this.$1.conference_name_raw=a;return this};c.setCreationAction=function(a){this.$1.creation_action=a;return this};c.setErrorDetails=function(a){this.$1.error_details=a;return this};c.setErrorType=function(a){this.$1.error_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExceptionObject=function(a){this.$1.exception_object=a;return this};c.setExperimentsEnabled=function(a){this.$1.experiments_enabled=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setFalcoBatchSequence=function(a){this.$1.falco_batch_sequence=a;return this};c.setFunnelSessionID=function(a){this.$1.funnel_session_id=a;return this};c.setGroupSize=function(a){this.$1.group_size=a;return this};c.setKickedUserID=function(a){this.$1.kicked_user_id=a;return this};c.setLinkShareTo=function(a){this.$1.link_share_to=a;return this};c.setOpenLinkFrom=function(a){this.$1.open_link_from=a;return this};c.setOpenLinkFromAppVersion=function(a){this.$1.open_link_from_app_version=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setReferralSurface=function(a){this.$1.referral_surface=a;return this};c.setRoomIDRaw=function(a){this.$1.room_id_raw=a;return this};c.setServerInfoData=function(a){this.$1.server_info_data=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setThreadType=function(a){this.$1.thread_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUserIdsToBeRemoved=function(a){this.$1.user_ids_to_be_removed=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoCallLinkHashRaw=function(a){this.$1.video_call_link_hash_raw=a;return this};c.setVideoCallLinkIDRaw=function(a){this.$1.video_call_link_id_raw=a;return this};c.setVideoCallLinkURLRaw=function(a){this.$1.video_call_link_url_raw=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={call_id:!0,client_app_version:!0,client_lock_status:!0,client_mono_time_ms:!0,clienttime:!0,component:!0,conference_name_raw:!0,creation_action:!0,error_details:!0,error_type:!0,event:!0,exception_object:!0,experiments_enabled:!0,falco_batch_sequence:!0,funnel_session_id:!0,group_size:!0,kicked_user_id:!0,link_share_to:!0,open_link_from:!0,open_link_from_app_version:!0,reason:!0,referral_surface:!0,room_id_raw:!0,server_info_data:!0,surface:!0,thread_type:!0,time:!0,user_ids_to_be_removed:!0,vc:!0,video_call_link_hash_raw:!0,video_call_link_id_raw:!0,video_call_link_url_raw:!0,weight:!0};e.exports=a}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","bs_caml_option","bs_belt_MapString","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e){c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){if(c==null)return[];else{a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_caml_option").valFromOption(a).reduce(function(a,e,f,h){if(g(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,c){a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_caml_option").valFromOption(a).reduce(function(a,b,d,e){if(a)return g(c,b.watermark,d,!1);else return!1},!0);else return!1}function d(a){return!b("bs_belt_MapString").isEmpty(a)}function e(a,c){if(b("bs_belt_MapString").isEmpty(a))return b("immutable").OrderedMap();else{a=b("bs_belt_MapString").get(a,c);if(a!==void 0)return b("bs_caml_option").valFromOption(a);else return b("immutable").OrderedMap()}}function h(a,c,d){a=b("bs_belt_MapString").get(a,c);if(a!==void 0){c=b("bs_caml_option").valFromOption(a).get(d);if(c==null)return null;else return c}else return null}var i=null;f.emptyReadReceipts=i;f.wasSeen=g;f.getSeenBy=a;f.wasSeenByAll=c;f.hasReadReceipts=d;f.getSeenTimestamps=e;f.getSeenTimestamp=h}),null);
__d("PresenceViewerCapabilities",["ArbiterMixin","PresenceConfig"],(function(a,b,c,d,e,f){"use strict";var g=null;a=Object.assign({},b("ArbiterMixin"));Object.assign(a,{get:function(){if(g!=null)return g;g=b("PresenceConfig").get("viewer_presence_capabilities");return g}});e.exports=a}),null);
__d("useCometComposerHandler",["CometComposerPluginsDispatchContext","React"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useContext,h=c.useEffect;function a(a){var c=g(b("CometComposerPluginsDispatchContext"));h(function(){c({handler:a,type:"install_handler"});return function(){return c({handler:a,type:"uninstall_handler"})}},[c,a])}e.exports=a}),null);
__d("MWChatDeleteMessageEventEmitter",["BaseEventEmitter"],(function(a,b,c,d,e,f){"use strict";var g="deleteMessage",h=new(b("BaseEventEmitter"))();e.exports={emit:function(a){h.emit(g,a)},subscribe:function(a){var b=h.addListener(g,a);return function(){return b.remove()}}}}),null);
__d("MessengerWebDeltasTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDeltaEvent=function(a){this.$1.delta_event=a;return this};c.setDeltaType=function(a){this.$1.delta_type=a;return this};c.setIgnoreReason=function(a){this.$1.ignore_reason=a;return this};c.setSyncSeqID=function(a){this.$1.sync_seq_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={delta_event:!0,delta_type:!0,ignore_reason:!0,sync_seq_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercuryFilters.bs",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";var g=b("MessagingTag").UNREAD;d=b("MessagingTag").GROUPS;function a(a){return[g]}function c(a){return a===g}e="all";b="named";var h="unnamed";f.all=e;f.unread=g;f.groups=d;f.named=b;f.unnamed=h;f.getSupportedFilters=a;f.isSupportedFilter=c}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.optionBoolToBool=b}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function(a,b,c,d,e,f){"use strict";a=b("EmojiStaticConfig").sizeMap;c=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"});d={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"};f=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"});b=[983040];var g="hot_emoji_source",h="hot_emoji_size",i="emoji_like",j="\ud83d\udc4d",k=[128077];e.exports={FB_THUMBS_UP_EMOJI:b,size:c,sizeMap:a,sizeMapTransfer:d,source:f,SOURCE_TAG_PREFIX:g,TAG_PREFIX_NEW:h,TAG_PREFIX_OLD:i,THUMBS_UP_EMOJI:j,THUMBS_UP_EMOJI_CODES:k}}),null);
__d("WorkplaceChatHelper",["ChannelConstants","CurrentUser","PresenceViewerCapabilities"],(function(a,b,c,d,e,f){"use strict";a={isDesktopChatApp:function(){return window.workchat!==void 0},getAppID:function(){return window.workchat.appId},showWindow:function(){window.workchat.showWindow()},getIsSystemDoNotDisturbOn:function(){var a;a=(a=window.workchat)==null?void 0:a.getIsSystemDoNotDisturbOn;return a==null?!1:a()},getScreenSharingSourceID:function(){return window.workchat.getScreenSharingSourceID()},stopScreenSharing:function(){return window.workchat.stopScreenSharing()},suppressChatIfActiveOnDesktop:function(){return b("CurrentUser").isWorkUser()&&(b("PresenceViewerCapabilities").get()&b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP)==b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP}};e.exports=a}),null);
__d("monitorCodeUse",["invariant","BanzaiScuba","ErrorNormalizeUtils","ScriptPath","SiteData","forEachObject","gkx","ReactCurrentOwner"],(function(a,b,c,d,e,f,g){var h;function i(a){a=a.type;if(typeof a==="string")return a;return typeof a==="function"?a.displayName||a.name:null}function j(a){var b=1e3,c=[];while(a&&c.length<b)c.push(i(a)||""),typeof a.tag==="number"?a=a["return"]:a=a._currentElement&&a._currentElement._owner;return c}function k(a){return Array.isArray(a)?"[...]":l(a)}function l(a){if(a==null)return""+String(a);if(Array.isArray(a)){if(a.length>10){var b=a.slice(0,5).map(k);return"["+b.join(", ")+", ...]"}b=a.map(k);return"["+b.join(", ")+"]"}if(typeof a==="string")return"'"+a+"'";if(typeof a==="object"){b=Object.keys(a).map(function(a){return a+"=..."});return"{"+b.join(", ")+"}"}return String(a)}function m(a){return a.identifier||""}function n(a){var b;return((b=a.script)!=null?b:"")+"  "+((b=a.line)!=null?b:"")+":"+((b=a.column)!=null?b:"")}var o;function a(a,c,d){c===void 0&&(c={});d===void 0&&(d={});a&&!/[^a-z0-9_]/.test(a)||g(0,2789);var e={};d.sampleRate!=null&&(e.sampleRate=d.sampleRate);var f=new(b("BanzaiScuba"))("core_monitor",null,e);f.addNormal("event",a);o===void 0&&(o=b("gkx")("708253"));f.addNormal("is_comet",o);e=h||(h=b("ReactCurrentOwner"));f.addNormVector("owners",j(e.current));f.addNormal("uri",window.location.href);f.addNormal("script_path",b("ScriptPath").getScriptPath());f.addNormal("devserver_username",b("SiteData").devserver_username||"");e=!1;d.forceIncludeStackTrace&&(e=!0);if(e)try{d=new Error(a);d.framesToPop=1;e=b("ErrorNormalizeUtils").normalizeError(d).stackFrames;a=e.map(m);d=e.map(n).join("\n");f.addNormVector("stacktrace",a);f.addDenorm("stack",d)}catch(a){}b("forEachObject")(c,function(a,b,c){typeof a==="string"?f.addNormal(b,a):typeof a==="number"&&(a|0)===a?f.addInteger(b,a):Array.isArray(a)?f.addNormVector(b,a.map(l)):f.addNormal(b,l(a))});f.post()}e.exports=a}),null);
__d("Dispatcher_DEPRECATED",["invariant","FBLogger","monitorCodeUse"],(function(a,b,c,d,e,f,g){"use strict";var h="ID_";a=function(){function a(){this.$1=new Map(),this.$2=!1,this.$3=new Map(),this.$4=new Map(),this.$5=1}var b=a.prototype;b.register=function(a,b){b=this.__genID(b);this.$1.set(b,a);return b};b.unregister=function(a){this.$1.get(a)||g(0,1331,a),this.$1["delete"](a)};b.waitFor=function(a){this.$2||g(0,1332);for(var b=0;b<a.length;b++){var c=a[b];if(this.$4.get(c)){this.$3.get(c)||g(0,2380,c);continue}this.$1.get(c)||g(0,2381,c);this.$7(c)}};b.dispatch=function(a){var b=this;j(this.$2,this.$6,a);this.$8(a);try{this.$1.forEach(function(a,c){if(b.$4.get(c))return;b.$7(c)})}finally{this.$9()}};b.isDispatching=function(){return this.$2};b.$7=function(a){this.$4.set(a,!0);var b=this.$1.get(a);b&&this.__invokeCallback(a,b,this.$6);this.$3.set(a,!0)};b.__invokeCallback=function(a,b,c){b(c)};b.$8=function(a){for(var b=this.$1.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;this.$4.set(e,!1);this.$3.set(e,!1)}this.$6=a;this.$2=!0};b.$9=function(){delete this.$6,this.$2=!1};b.__genID=function(a){var b=a?a+"_":h;a=a||b+this.$5++;while(this.$1.get(a))a=b+this.$5++;return a};return a}();function i(a){var b="<unknown>";if(!a)return b;if(typeof a.type==="string")return a.type;if(typeof a.actionType==="string")return a.actionType;if(!a.action)return b;if(typeof a.action.type==="string")return a.action.type;return typeof a.action.actionType==="string"?a.action.actionType:b}function j(a,c,d){if(a){a=new Error("Cannot dispatch in the middle of a dispatch");b("FBLogger")("flux_dispatcher").catching(a).mustfix("Tried to dispatch action %s while already dispatching %s",i(d),i(c));throw a}}e.exports=a}),null);
__d("ExplicitRegistrationDispatcherUtils",["emptyFunction","setImmediate"],(function(a,b,c,d,e,f){"use strict";a=!1;c=b("emptyFunction");e.exports={warn:c,inlineRequiresEnabled:a}}),null);
__d("ExplicitRegistrationDispatcher",["Dispatcher_DEPRECATED","ExplicitRegistrationDispatcherUtils","setImmediate"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;b=b.strict;c=a.call(this)||this;c.$ExplicitRegistrationDispatcher2=b;c.$ExplicitRegistrationDispatcher1={};return c}var c=b.prototype;c.explicitlyRegisterStore=function(a){a=a.getDispatchToken();this.$ExplicitRegistrationDispatcher1[a]=!0;return a};c.explicitlyRegisterStores=function(a){var b=this;return a.map(function(a){return b.explicitlyRegisterStore(a)})};c.register=function(b,c){var d=this;d=this.__genID(c);this.$ExplicitRegistrationDispatcher1[d]=!1;c=a.prototype.register.call(this,this.$ExplicitRegistrationDispatcher4.bind(this,d,b),d);return c};c.$ExplicitRegistrationDispatcher4=function(a,b,c){(this.$ExplicitRegistrationDispatcher1[a]||!this.$ExplicitRegistrationDispatcher2)&&this.__invokeCallback(a,b,c)};c.unregister=function(b){a.prototype.unregister.call(this,b),delete this.$ExplicitRegistrationDispatcher1[b]};c.__getMaps=function(){};return b}(b("Dispatcher_DEPRECATED"));e.exports=a}),null);
__d("mergeHelpers",["invariant","FbtResultBase"],(function(a,b,c,d,e,f,g){"use strict";var h=36,i=function(a){return typeof a!=="object"||a instanceof Date||a===null||a instanceof b("FbtResultBase")},j={MAX_MERGE_DEPTH:h,isTerminal:i,normalizeMergeArg:function(a){return a==null?{}:a},checkMergeArrayArgs:function(a,b){Array.isArray(a)&&Array.isArray(b)||g(0,3714,a,b)},checkMergeObjectArgs:function(a,b){j.checkMergeObjectArg(a),j.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){!i(a)&&!Array.isArray(a)||g(0,3715,a)},checkMergeIntoObjectArg:function(a){(!i(a)||typeof a==="function")&&!Array.isArray(a)||g(0,3716,a)},checkMergeLevel:function(a){a<h||g(0,3717)},checkArrayStrategy:function(a){a==null||a in j.ArrayStrategies||g(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}};e.exports=j}),null);
__d("CometTopNavListDropdown.react",["ix","fbt","CometPopover.react","CometRow.react","CometRowItem.react","Locale","React","TetraCircleButton.react","TetraText.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k={card:{display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"h77mwsce",minHeight:"dp1hu0rb"},cardMaxHeight:{maxHeight:"h58bhtfz"},cardWidth:{width:"o36gj0jk"},heading:{alignItems:"bp9cbjyn",display:"j83agx80",flexShrink:"pfnyh3mw",justifyContent:"i1fnvgqd",minHeight:"jklb3kyz",paddingTop:"pybr56ya",paddingEnd:"hv4rvrfc",paddingBottom:"e5nlhep0",paddingStart:"dati1w0a"},root:{marginEnd:"oi9244e8",marginTop:"knvmm38d"}};function a(a){var c=a.children,d=a.label;a=a.name;return j.jsx("div",{className:(i||(i=b("stylex")))(k.root),children:j.jsx(b("CometPopover.react"),{label:d,popoverName:a,children:c})})}a.Card=function(a){var c=a.children,d=a.testid;d=a.useFullWidth;d=d===void 0?!1:d;a=a.useMaxHeight;return j.jsx("div",{className:(i||(i=b("stylex")))(k.card,d===!1?k.cardWidth:null,a===!0?k.cardMaxHeight:null),"data-testid":void 0,children:c})};a.Title=function(a){var c=a.actions;c=c===void 0?[]:c;var d=a.onReturn;a=a.title;return j.jsxs("div",{className:(i||(i=b("stylex")))(k.heading),children:[j.jsxs(b("CometRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:[d!=null?j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraCircleButton.react"),{icon:b("Locale").isRTL()?b("fbicon")._(g("514454"),20):b("fbicon")._(g("512647"),20),label:h._("Back"),onPress:d,size:32,type:"deemphasized"})}):null,j.jsx(b("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(b("TetraText.react"),{isSemanticHeading:!0,type:"headlineEmphasized1",children:a})})]}),j.jsx(b("CometRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:c.map(function(a,c){return j.jsx(b("CometRowItem.react"),{children:a},c)})})]})};a.styles={cardWidth:k.cardWidth};e.exports=a}),null);
__d("CometUnstyledButton_DEPRECATED.react",["BaseButtonOrLink_DEPRECATED.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h={expanded:{display:"a8c37x1j",width:"k4urcfbm"},root:{backgroundColor:"g5ia77u1",borderTop:"qu0x051f",borderEnd:"esr5mh6w",borderBottom:"e9989ue4",borderStart:"r7d6kgcz",color:"gmql0nx0",cursor:"nhd2j8a9",display:"q9uorilb",fontFamily:"ihxqhq3m",fontSize:"l94mrbxd",lineHeight:"aenfhxwr",marginTop:"kvgmc6g5",marginEnd:"cxmmr5t8",marginBottom:"oygrvhab",marginStart:"hcukyx3x",paddingTop:"jb3vyjys",paddingEnd:"rz4wbd8a",paddingBottom:"qt6c0cv9",paddingStart:"a8nywdso",textAlign:"i1ao9s8h",textDecoration:"myohyog2",":hover":{color:"ksdfmwjs",textDecoration:"gofk2cf1"},":active":{transform:"lsqurvkf",transition:"bj9fd4vl"}}};function a(a,c){var d=a.expanded;d=d===void 0?!1:d;var e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["expanded","xstyle"]);return g.jsx(b("BaseButtonOrLink_DEPRECATED.react"),babelHelpers["extends"]({},a,{ref:c,xstyle:[h.root,d&&h.expanded,e]}))}e.exports=g.forwardRef(a)}),null);
__d("BaseClickableListItem.react",["BaseListItem.react","CometUnstyledButton_DEPRECATED.react","React","stylex","useCometAriaID","useMergeRefs"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={auxiliary:{alignItems:"bp9cbjyn",bottom:"i09qtzwb",display:"j83agx80",end:"cypi58rs",position:"pmk7jnqg",top:"kr520xx4"},button:{":active":{transform:"tm8avpzi"}},disabled:{backgroundColor:"ha302278",bottom:"i09qtzwb",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"},indented:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"gm7ombtx"},listItem:{borderTop:"qu0x051f",borderEnd:"esr5mh6w",borderBottom:"e9989ue4",borderStart:"r7d6kgcz",borderTopStartRadius:"beltcj47",borderTopEndRadius:"p86d2i9g",borderBottomEndRadius:"aot14ch1",borderBottomStartRadius:"kzx2olss",cursor:"nhd2j8a9",fontFamily:"ihxqhq3m",marginTop:"kvgmc6g5",marginEnd:"oi9244e8",marginBottom:"oygrvhab",marginStart:"h676nmdw",textAlign:"hzawbc8m"},root:{position:"l9j0dhe7"},selected:{backgroundColor:"k19f6yf2"},unindented:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr"},unselected:{":hover":{backgroundColor:"gfay22hk"},":active":{backgroundColor:"pdl3lqly"}}};function a(a,c){var d=a.addon;d=d===void 0?null:d;var e=a.children,f=a.indented;f=f===void 0?!1:f;var j=a.right;j=j===void 0?null:j;var k=a.selected;k=k===void 0?!1:k;a=babelHelpers.objectWithoutPropertiesLoose(a,["addon","children","indented","right","selected"]);var l=b("useCometAriaID")("aria-labelledby"),m=l[0],n=m[0];m=m[1];l=l[1];var o=l[0];l=l[1];c=b("useMergeRefs")(c,l);return h.jsxs("div",{className:(g||(g=b("stylex")))(i.root),children:[h.jsx(b("CometUnstyledButton_DEPRECATED.react"),babelHelpers["extends"]({},a,o,{expanded:!0,ref:c,xstyle:i.button,children:h.jsx(b("BaseListItem.react"),{addon:d,className:g(i.listItem,f?i.indented:null,f?null:i.unindented,k?i.selected:null,k?null:i.unselected),children:h.jsx("div",babelHelpers["extends"]({},n,{ref:m,children:e}))})})),j!=null&&h.jsx("div",{className:(g||(g=b("stylex")))(i.auxiliary),children:j}),a.disabled===!0?h.jsx("div",{className:(g||(g=b("stylex")))(i.disabled,i.listItem)}):null]})}e.exports=h.forwardRef(a)}),null);
__d("CometListCellHoverButton.react",["ix","fbt","CometDeferredPopoverTrigger.react","CometLazyPopoverTrigger.react","FocusWithinHandler.react","React","TetraCircleButton.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");c=b("React");var k=c.useCallback;function a(a){var c=a.hidden,d=a.label,e=a.onFocusChange,f=a.onHoverChange,l=a.onMenuStateChange,m=a.onPress,n=k(function(a){l!=null&&l(a)},[l]),o=k(function(a,k){return j.jsx("div",{className:(i||(i=b("stylex"))).dedupe({"end-1":"rm21btxo","pointer-events-1":"mrt03zmi","position-1":"pmk7jnqg","top-1":"rk01pc8j","transform-0.1":"ke6wolob"},c?{"clip-1":"svngc6pa","height-1":"ay7djpcl","overflow-x-1":"ni8dbmo4","overflow-y-1":"stjgntxs","position-1":"pmk7jnqg","width-1":"rfua0xdk"}:null),ref:a,children:j.jsx("div",{className:"kujm000c spb7xbtv bkmhp75w emlxlaya s45kfl79",children:j.jsx(b("FocusWithinHandler.react"),{onFocusChange:e,children:j.jsx(b("TetraCircleButton.react"),{color:"secondary",icon:b("fbicon")._(g("484387"),20),label:d!=null?d:h._("Menu"),onHoverIn:f!=null?function(){return f(!0)}:void 0,onHoverOut:f!=null?function(){return f(!1)}:void 0,onPress:function(){m&&m(),k()},size:36,type:"overlay"})})})})},[c,e,d,f,m]);n={align:"middle",autoAlign:!0,onVisibilityChange:n,popoverProps:a.popoverProps,position:"below"};if(a.popoverTriggerType==="lazy")return j.jsx(b("CometLazyPopoverTrigger.react"),babelHelpers["extends"]({},n,{popoverResource:a.popoverResource,children:function(a,b){return o(a,b)}}));else return j.jsx(b("CometDeferredPopoverTrigger.react"),babelHelpers["extends"]({},n,{popoverResource:a.popoverResource,children:function(a,b){return o(a,b)}}))}e.exports=a}),null);
__d("CometHomeRightRailUnit.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,b){var c=a.children,d=a.hasBottomDivider;d=d===void 0?!0:d;var e=a.header;a=a.testid;return g.jsxs("div",{className:"l9j0dhe7","data-testid":void 0,ref:b,children:[e,g.jsx("div",{className:"cxgpxx05 sj5x9vvc",children:c}),d?g.jsx("div",{className:"re5koujm pmk7jnqg ay7djpcl cypi58rs qee0rdz8 pwoa4pd7"}):null]})}e.exports=g.forwardRef(a)}),null);
__d("useMenuButtonVisibilityState",["React","FocusManager.react"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useReducer,i=b("FocusManager.react").isFocusingWithoutUserIntent,j={btnFocused:!1,btnHovered:!1,itemHovered:!1,menuOpened:!1};function k(a,b){switch(b.type){case"menubtnhover":return babelHelpers["extends"]({},a,{btnHovered:b.value});case"menubtnfocus":return babelHelpers["extends"]({},a,{btnFocused:b.value});case"listitemhover":return babelHelpers["extends"]({},a,{itemHovered:b.value},!b.value&&{btnFocused:!1});case"menuopen":return!b.value?{btnFocused:a.btnFocused,btnHovered:!1,itemHovered:!1,menuOpened:!1}:babelHelpers["extends"]({},a,{menuOpened:b.value});default:return a}}function a(){var a=h(k,j),b=a[0],c=b.btnFocused,d=b.btnHovered,e=b.itemHovered;b=b.menuOpened;var f=a[1];a=g(function(a){f({type:"menubtnhover",value:a})},[]);var l=g(function(a){f({type:"listitemhover",value:a})},[]),m=g(function(a){f({type:"menuopen",value:a})},[]),n=g(function(a){a?i()||f({type:"menubtnfocus",value:!0}):f({type:"menubtnfocus",value:!1})},[]);c=c||d||e||b;return[c,{setListItemHovered:l,setMenuBtnFocused:n,setMenuBtnHovered:a,setMenuOpened:m}]}e.exports=a}),null);
__d("MessengerDesktopAppLinks",[],(function(a,b,c,d,e,f){e.exports={macOSX:"https://apps.apple.com/app/messenger/id1480068668",windows:"https://www.microsoft.com/p/messenger/9wzdncrf0083"}}),null);
__d("XCometEventCreateControllerRouteBuilder",["cometRouteBuilder"],(function(a,b,c,d,e,f){a=b("cometRouteBuilder")("/events/create/",Object.freeze({dialog_entry_point:"others"}),void 0);e.exports=a}),null);
__d("XCometMarketplaceComposerControllerRouteBuilder",["cometRouteBuilder"],(function(a,b,c,d,e,f){a=b("cometRouteBuilder")("/marketplace/create/{listing_type}/",Object.freeze({shipping:!1}),void 0);e.exports=a}),null);
__d("XCometPageCreationControllerRouteBuilder",["cometRouteBuilder"],(function(a,b,c,d,e,f){a=b("cometRouteBuilder")("/pages/creation/",Object.freeze({}),void 0);e.exports=a}),null);
__d("MWChatUpdateMuteSettingMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input",type:"MessengerUpdateMuteSettingData!"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerUpdateMuteSettingResponsePayload",kind:"LinkedField",name:"messenger_update_mute_setting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"muted_until",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatUpdateMuteSettingMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatUpdateMuteSettingMutation",selections:b},params:{id:"2376670165755701",metadata:{},name:"MWChatUpdateMuteSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerDesktopUpsellLinks",["CurrentUser","MessengerDesktopAppLinks","UserAgent","qex"],(function(a,b,c,d,e,f){"use strict";function g(){if(b("UserAgent").isPlatform("Mac OS X"))return b("MessengerDesktopAppLinks").macOSX;else if(b("UserAgent").isPlatform("Windows"))return b("MessengerDesktopAppLinks").windows;return null}function a(){var a=g(),c=a!=null&&!b("CurrentUser").isWorkUser()&&!!b("qex")._("1431495");return c?a:null}e.exports={getDesktopUpsellLinkForPlatform:g,getDesktopUpsellLinkIfEnabledForCalls:a}}),null);
__d("TetraContextRowLink.react",["CometLink.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.external;c=c===void 0?!1:c;var d=a.linkProps,e=a.onPress;a=babelHelpers.objectWithoutPropertiesLoose(a,["external","linkProps","onPress"]);d=(d=d)!=null?d:{};var f=d.url;d=babelHelpers.objectWithoutPropertiesLoose(d,["url"]);d=babelHelpers["extends"]({},d,{href:f});return g.jsx(b("CometLink.react"),babelHelpers["extends"]({},a,d,{onClick:e,target:c?"_blank":void 0}))}e.exports=a}),null);
__d("TetraContextRowExternalLink.react",["React","TetraContextRowLink.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx(b("TetraContextRowLink.react"),babelHelpers["extends"]({},a,{external:!0}))}e.exports=a}),null);
__d("MWChatUpdateMuteSettingMutation",["CometRelay","CometRelayEnvironment","createCommitMutation","MWChatUpdateMuteSettingMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;a=b("createCommitMutation").createCommitMutation;e.exports.commit=a(b("CometRelayEnvironment"),{mutation:g!==void 0?g:g=b("MWChatUpdateMuteSettingMutation.graphql")})}),null);
__d("MessengerMuteUtils.bs",["fbt","formatDate","DateStrings"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a>0)if(a<86401)return;else{var c=new Date(a*1e3).getDay(),d=c===new Date().getDay(),e=c===new Date().getDay()+1;if(e)return g._("Off until {time} tomorrow",[g._param("time",b("formatDate")(a,"g:ia"))]);else if(d)return g._("Off until {time}",[g._param("time",b("formatDate")(a,"g:ia"))]);else return g._("Off until {time} {weekday name}",[g._param("time",b("formatDate")(a,"g:ia")),g._param("weekday name",b("DateStrings").getWeekdayName(c))])}else if(a===-1)return g._("Off indefinitely");else return}function c(a,b){if(a)if(b)return g._("Unmute notifications");else return g._("Mute notifications");else if(b)return g._("Unmute conversation");else return g._("Mute conversation")}f.mutedUntilLabel=a;f.muteActionLabel=c}),null);
__d("MessengerGraphQLThreadlistFetcher.re",["bs_curry","MessengerGraphQLThreadlistFetcher.bs"],(function(a,b,c,d,e,f){a=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerGraphQLThreadlistFetcher.bs").fetchAll,a,c,d,e);return a};f.fetchAll=a}),null);
__d("MWJewelThreadlistFetcher",["MercuryServerPayloadPreprocessor","MessengerGraphQLThreadlistFetcher.re","MessengerWebGraphQLTypedLogger","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g={inbox:!1,other:!1,pending:!1},h={PAGINATION_COUNT:20,_createParams:function(a,b){return a.map(function(a){var c=[a.folder.toUpperCase()];a.filter!=null&&c.push(a.filter);return{filter:a.filter,folder:a.folder,includeDeliveryReceipts:!0,includeSeqID:!1,isWorkUser:!1,limit:b==null?h.PAGINATION_COUNT:h.PAGINATION_COUNT+1,onlyPinnedThreads:!1,tags:c,timestamp:b}})},_loadItems:function(a,c){b("promiseDone")(b("MessengerGraphQLThreadlistFetcher.re").fetchAll(a,c,!1,"fetch_threadlist"),function(c){return b("MercuryServerPayloadPreprocessor").getForFBID(a).handleUpdate(babelHelpers["extends"]({},c,{payload_source:"server_fetch_threadlist_info"}))},function(a){a=typeof a==="object"&&a!==null&&a.errors!=null?a.errors:a;new(b("MessengerWebGraphQLTypedLogger"))().setErrorMessage(JSON.stringify(a)).setEvent("threadlist_failure").setQueryParams(JSON.stringify(c)).log()})},loadItems:function(a,b,c){h._loadItems(a,h._createParams([{folder:b}],c))},preloadItems:function(a,b,c){g[b]||(g[b]=!0,h._loadItems(a,h._createParams([{folder:b}].concat(c===!0?[{filter:"unread",folder:"pending"}]:[]),null)))}};e.exports=h}),null);
__d("MWChatSearchTypeaheadDataEntry",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getKey=function(){return this.$1.id};b.getLabel=function(){return this.$1.displayName};b.getMetaData=function(){return this.$2};b.getRawData=function(){return this.$1};b.getResultType=function(){return this.$1.resultType};b.setMetaData=function(a){this.$2=a;return this};return a}();e.exports=a}),null);
__d("MessengerMQTTPresence",["BanzaiODS","FBMqttChannel"],(function(a,b,c,d,e,f){"use strict";var g="/orca_presence",h="mqtt_web.presence",i="/send_additional_contacts",j=!1;a={subscribe:function(a){if(j)return;j=!0;b("FBMqttChannel").subscribe(g,function(c){c=JSON.parse(c);c&&c.list&&(c.list_type&&c.list_type==="full"&&a.reset(),a.setMultiFromMQTT(c.list),b("BanzaiODS").bumpEntityKey(3303,h,"buddylist.event"),b("BanzaiODS").bumpEntityKey(3303,h,"buddylist.active_buddies",c.list.length))})},unsubscribe:function(){j=!1,b("FBMqttChannel").unsubscribeAll(g)},sendAdditionalBuddyRequest:function(a){b("FBMqttChannel").publish(i,JSON.stringify({additional_contacts:[a]}))}};e.exports=a}),null);
__d("ClientServiceWorkerMessage",[],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.sendViaController=function(){if(!navigator.serviceWorker||!navigator.serviceWorker.controller)return;var a=new self.MessageChannel();this.$3&&(a.port1.onmessage=this.$3);navigator.serviceWorker.controller.postMessage({command:this.$1,data:this.$2},[a.port2])};return a}();e.exports=a}),null);
__d("useCurrentRouteBuilder",["CometRouteParams","React","cometRouteBuilder","useCurrentRoute"],(function(a,b,c,d,e,f){"use strict";var g=b("CometRouteParams").useRouteParams;c=b("React");var h=c.useMemo;function a(){var a,c=g(),d=(a=b("useCurrentRoute")())==null?void 0:a.routePath;return h(function(){return d==null?null:b("cometRouteBuilder")(d,Object.freeze({}),new Set(),c)},[d,c])}e.exports=a}),null);
__d("CometAlertDialogImpl.react",["fbt","CometCardedDialog.react","CometRow.react","CometRowItem.react","React","TetraButton.react","TetraText.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.body,d=a.close,e=a.onClose;a=a.title;return h.jsxs(b("CometCardedDialog.react"),{onClose:e,withCloseButton:!0,children:[h.jsx("div",{className:"bjjx79mm dati1w0a clqubjjj jbae33se",children:h.jsx(b("TetraText.react"),{numberOfLines:1,type:"headlineEmphasized2",children:a})}),h.jsx("div",{className:"l9j0dhe7 dati1w0a f10w8fjw hv4rvrfc pybr56ya",children:h.jsx(b("TetraText.react"),{type:"body3",children:c})}),h.jsx("div",{className:"a8nywdso ihqw7lf3 rz4wbd8a jb3vyjys",children:h.jsx(b("CometRow.react"),{align:"end",children:h.jsx(b("CometRowItem.react"),{children:h.jsx(b("TetraButton.react"),{label:(a=d)!=null?a:g._("Close"),onPress:e,testid:void 0,type:"primary"})})})})]})}e.exports=a}),null);
__d("useCometAlertDialog",["requireDeferred","CometCardedDialogLoadingState.react","React","useCometDeferredDialog"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("CometAlertDialogImpl.react"),h=b("React");c=b("React");var i=c.useCallback;function a(){var a=b("useCometDeferredDialog")(g,function(){return h.jsx(b("CometCardedDialogLoadingState.react"),{})}),c=a[0];a=a[1];var d=i(function(a,b){b===void 0&&(b=function(){}),c(a,b)},[c]);return[d,a]}e.exports=a}),null);
__d("bs_int64",["bs_caml_int64","bs_caml_format","bs_caml_js_exceptions","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_caml_int64").sub(a,[0,1])}function c(a){if(b("bs_caml_int64").ge(a,[0,0]))return a;else return b("bs_caml_int64").neg(a)}function d(a){return b("bs_caml_int64").xor(a,[-1,4294967295])}function e(a){try{return b("bs_caml_format").caml_int64_of_string(a)}catch(c){a=b("bs_caml_js_exceptions").internalToOCamlException(c);if(a[0]===b("bs_caml_builtin_exceptions").failure)return;else throw a}}var g=b("bs_caml_int64").compare;function h(a,c){return b("bs_caml_int64").compare(a,c)===0}var i=[0,0],j=[0,1],k=[-1,4294967295],l=b("bs_caml_int64").succ,m=[2147483647,4294967295],n=[-2147483648,0],o=b("bs_caml_int64").to_string;f.zero=i;f.one=j;f.minus_one=k;f.succ=l;f.pred=a;f.abs=c;f.max_int=m;f.min_int=n;f.lognot=d;f.of_string_opt=e;f.to_string=o;f.compare=g;f.equal=h}),null);
__d("MWChatTheme.bs",["FBID.bs","bs_block","bs_int64","React","bs_caml_int64","bs_caml_format","bs_caml_exceptions","MessengerColors"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("bs_caml_format").caml_int64_of_string;function a(a){return b("FBID.bs").ofString(b("bs_int64").to_string(a))}var i=b("FBID.bs").ofStringExn("196241301102133"),j=b("bs_caml_format").caml_int64_of_string(i);function c(a){return a[0].id}function d(a){if(a.tag)return!0;else return!1}var k=b("bs_caml_exceptions").create("MWChatTheme.NotEnoughColorsForAGradient");function e(a,b){a=a!==void 0?a:.4;var c=parseInt(b.slice(1,3),16),d=parseInt(b.slice(3,5),16);b=parseInt(b.slice(5,7),16);a=a.toFixed(4);return"rgba("+(String(c)+(","+(String(d)+(","+(String(b)+(","+(String(a)+")")))))))}function l(a){if(a.tag)return a[0].colors[0];else return a[0].color}function m(a){if(a.tag){var b=a[0].colors;return b[b.length-1|0]}else return a[0].color}function n(a){if(a.tag)return a[0].fallback;else return a[0].color}function o(a,b,c){var d=a!==void 0?a:0;a=b!==void 0?b:100;b=c.length;if(b!==1)if(b!==0){var e=[];b=c.length;var f=a-d,g=f/(b-1|0);d!==0&&e.push(c[0]+" 0%");c.forEach(function(a,b){b=(d+b*g).toFixed(2);e.push(""+(String(a)+(" "+(String(b)+"%"))));return 0});a!==100&&e.push(c[b-1|0]+" 100%");f=e.join(", ");return"linear-gradient("+(String(f)+")")}else throw k;else throw k}var p=b("bs_block").__(0,[{id:j,color:"#0084FF",label:"Default Blue"}]);function q(a){return"#"+a.slice(2)}function r(a){a=b("bs_caml_int64").to_int32(a);var c=(a&16711680)>>>16,d=(a&65280)>>>8;a=a&255;var e=function(a){return a.toString(16).padStart(2,"0")};return"#"+(e(c)+(e(d)+e(a)))}var s=["FF0084FF","FF0084FF","FF0084FF"],t=b("bs_block").__(1,[{id:j,colors:s.map(q),radialGradient:b("MessengerColors").makeRadialGradient(s,!1),fallback:"#0084FF",label:"Default Blue",reverse:!1}]),u=g.createContext(p);function v(a){return g.useContext(u)}function w(a){var b=a.value;a=a.children;return g.createElement(u.Provider,{value:b,children:a})}w=w;f.genThemeIdFromFBID=h;f.genFBIDFromThemeId=a;f.defaultBlueThemeFBID=i;f.defaultBlueThemeInt64=j;f.getId=c;f.isGradient=d;f.NotEnoughColorsForAGradient=k;f.lighten=e;f.top=l;f.bottom=m;f.middle=n;f.gradient=o;f.$$default=p;f["default"]=p;f.__esModule=!0;f.aRGBtoHex=q;f.intToHex=r;f.darkTestColors=s;f.dark_test=t;f.context=u;f.useTheme=v;f.provider=w}),null);
__d("createCommitMutation",["Promise","requireCond","cr:819055"],(function(a,b,c,d,e,f){"use strict";var g=b("cr:819055").commitMutation;function h(a,c,d){return new(b("Promise"))(function(b,e){return g(a,babelHelpers["extends"]({},d,{variables:{input:c},onCompleted:function(a,c){c&&c.length?e(c):b(a)},onError:function(a){return e([a])}}))})}function a(a,b){return function(c){return h(a,c,b)}}function c(a){return function(b,c){return h(b,c,a)}}function d(a,b){return function(c){return h(a,c,b(c))}}e.exports.createCommitMutation=a;e.exports.createCommitMutationForEnvironment=c;e.exports.createCommitMutationWithVariables=d}),null);
__d("MWChatCloseTabs.bs",["requireCond","cr:1439015"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1439015");c=b("cr:1439015").useHook;f.$Many$blue_tabs$MWChatBlueTabsCloseTabs$$chat_heads_plus$MWChatMultiTabCloseTabs$$default$MWChatSingleTabCloseTabs$requireCond=b("cr:1439015");f.CloseTabs=a;f.useHook=c}),null);
__d("MWChatCloseTabs.re",["MWChatCloseTabs.bs"],(function(a,b,c,d,e,f){a=b("MWChatCloseTabs.bs").useHook;f.useHook=a}),null);
__d("MWChatSingleTabCloseTabs.bs",["React","MWChatTabContext.bs","MWChatTabDispatcher.bs","useCometFeedNoRoutingNavigationEventLogger"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("useCometFeedNoRoutingNavigationEventLogger")(),d=g.useContext(b("MWChatTabContext.bs").context);return g.useCallback(function(a){c(Date.now(),"","messenger");if(d!==void 0)return b("MWChatTabDispatcher.bs").dispatch(void 0,d,1);else return 0},[d,c])}f.useHook=a}),null);
__d("MWChatWithSidebarThreadListHeader.react",["ix","fbt","CometPressable.react","CometTooltip.react","MWChatCloseTabs.re","MWChatOpenNewTab.re","MWChatWithSidebarSettingsButton.react","React","TetraCircleButton.react","TetraIcon.react","TetraRow.react","TetraRowItem.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k={composeButtonCollapsed:{marginTop:"n1l5q3vz"},composeButtonExpanded:{marginEnd:"oi9244e8"},headerCollapsed:{alignItems:"bp9cbjyn",display:"j83agx80",flexDirection:"cbu4d94t",flexShrink:"pfnyh3mw",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr"},headerExpanded:{flexGrow:"buofh1pr"},headerExpandedOverlay:{boxShadow:"orkrrvc0"}},l=h._("New message");function a(a){var c=b("MWChatOpenNewTab.re").useHook("chat_with_sidebar"),d=b("MWChatCloseTabs.re").useHook("chat_with_sidebar");return a.isSidebarCollapsed?j.jsxs("div",{className:(i||(i=b("stylex")))(k.headerCollapsed),children:[j.jsx(b("MWChatWithSidebarSettingsButton.react"),{isExpanded:!1,popoverPosition:"below"}),j.jsx("div",{className:(i||(i=b("stylex")))(k.composeButtonCollapsed),children:j.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(g("507172"),20),label:l,onPress:function(){return c()},size:36})})]}):j.jsx(b("CometPressable.react"),{"aria-label":h._("Collapse Chat"),expanding:!0,onPress:function(){d()},overlayDisabled:!0,xstyle:function(b){b=b.hovered;return[(a.hasScrolled||b)&&k.headerExpandedOverlay]},children:j.jsx("div",{className:(i||(i=b("stylex")))(k.headerExpanded),children:j.jsxs(b("TetraRow.react"),{paddingHorizontal:8,paddingVertical:8,verticalAlign:"center",children:[j.jsx(b("TetraRowItem.react"),{children:j.jsx(b("MWChatWithSidebarSettingsButton.react"),{isExpanded:!0,popoverPosition:"below"})}),j.jsx(b("TetraRowItem.react"),{xstyle:k.composeButtonExpanded,children:j.jsx(m,{onNewMessage:c})})]})})})}var m=function(a){return j.jsx(b("CometTooltip.react"),{position:"above",tooltip:l,children:j.jsx(b("TetraIcon.react"),{alt:l,color:"secondary",icon:b("fbicon")._(g("507172"),20),onPress:function(){return a.onNewMessage()}})})};e.exports=a}),null);
__d("MWChatWithSidebarLHS.react",["CometScrollView.react","MWChatThreadId.re","MWChatWithSidebarThreadListHeader.react","MWJewelThreadList.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useState;function a(a){var c=a.isSidebarCollapsed,d=a.openThreadID;a=a.setIsCollapsed;var e=h(!1),f=e[0],i=e[1];e=function(a){i(!0)};var j=function(){i(!1)};return g.jsxs(g.Fragment,{children:[g.jsx(b("MWChatWithSidebarThreadListHeader.react"),{hasScrolled:f,isSidebarCollapsed:c,setIsSidebarCollapsed:a}),g.jsx(b("CometScrollView.react"),{onScroll:e,onScrollTop:j,showsHorizontalScrollIndicator:!1,children:g.jsx(b("MWJewelThreadList.react"),{folder:"inbox",onClose:function(){},selectedThreadID:d!=null?b("MWChatThreadId.re").getMercuryID(d):null,showPhotosOnly:c,showThreadMenuButton:!1,threadImageSize:"small",threadListMessagingEntrypoint:"chat_with_sidebar"})})]})}e.exports=a}),null);
__d("MWChatWithSidebarSettingsButton.react",["ix","fbt","CometEntryPointPopoverTrigger.react","CometHomeChatSettings.entrypoint","CometPressable.react","CometTooltip.react","React","TetraIcon.react","TetraRow.react","TetraRowItem.react","TetraText.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k=h._("Options"),l={chevron:{marginStart:"kkf49tns"},expandButton:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"taijpn5t",width:"k4urcfbm"},root:{minHeight:"jklb3kyz",width:"k4urcfbm"}};function a(a){return j.jsx(b("CometEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:{},otherProps:{chatSettingsContextualSection:"chat_with_sidebar"},popoverEntryPoint:b("CometHomeChatSettings.entrypoint"),position:a.popoverPosition,preloadTrigger:"button",children:function(c,d,e,f,m,n){return j.jsx(b("CometPressable.react"),{"aria-label":k,onHoverIn:f,onHoverOut:m,onPress:d,onPressIn:n,overlayOffset:4,overlayRadius:4,ref:c,xstyle:l.root,children:a.isExpanded?j.jsx(b("CometTooltip.react"),{position:"above",tooltip:k,children:j.jsxs(b("TetraRow.react"),{align:"center",paddingHorizontal:8,paddingTop:0,spacingHorizontal:8,spacingVertical:0,verticalAlign:"center",children:[j.jsx(b("TetraRowItem.react"),{children:j.jsx(b("TetraIcon.react"),{color:"highlight",icon:b("fbicon")._(g("505617"),20)})}),j.jsx(b("TetraRowItem.react"),{expanding:!0,children:j.jsx(b("TetraText.react"),{type:"headline4",children:h._("Chats")})}),j.jsx(b("TetraRowItem.react"),{children:j.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("fbicon")._(g("549339"),10)})})]})}):j.jsx(b("CometTooltip.react"),{position:"above",tooltip:k,children:j.jsxs("div",{className:(i||(i=b("stylex")))(l.expandButton),children:[j.jsx(b("TetraIcon.react"),{color:"highlight",icon:b("fbicon")._(g("505617"),20)}),j.jsx("div",{className:(i||(i=b("stylex")))(l.chevron),children:j.jsx(b("TetraIcon.react"),{color:"primary",icon:b("fbicon")._(g("549339"),10)})})]})})})}})}e.exports=a}),null);
__d("MWChatSidebarHeaderMinimized.react",["ix","fbt","requireDeferredForDisplay","CometPlaceholder.react","MWChatOpenNewTab.re","MWChatWithSidebarSettingsButton.react","React","TetraIcon.react","TetraRow.react","TetraRowItem.react","deferredLoadComponent","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("deferredLoadComponent")(b("requireDeferredForDisplay")("MWChatBadgeCount.react"));function a(a){var c=b("MWChatOpenNewTab.re").useHook("chat_with_sidebar");return i.jsx("div",{className:"o9ndlxrr dflh9lhu fer614ym pzfvarvs rq0escxv",children:i.jsxs(b("TetraRow.react"),{paddingHorizontal:8,paddingVertical:8,verticalAlign:"center",children:[i.jsx(b("TetraRowItem.react"),{children:i.jsx(b("MWChatWithSidebarSettingsButton.react"),{isExpanded:!0,popoverPosition:"above"})}),i.jsx(b("TetraRowItem.react"),{expanding:!0,children:i.jsx("div",{children:i.jsx(b("CometPlaceholder.react"),{fallback:null,children:i.jsx(j,{})})})}),i.jsx(b("TetraRowItem.react"),{children:i.jsx(b("TetraIcon.react"),{alt:h._("New Message"),color:"secondary",icon:b("fbicon")._(g("507172"),20),onPress:function(){return c()}})})]})})}e.exports=a}),null);
__d("MWChatSidebarHeaderMinimizedWrapper.react",["CometPlaceholder.react","JSResource","MWChatSidebarHeaderMinimized.react","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("MWChatSidebarHeaderMinimizedImpl.react").__setRef("MWChatSidebarHeaderMinimizedWrapper.react"));function a(a){return g.jsx(b("CometPlaceholder.react"),{fallback:g.jsx(b("MWChatSidebarHeaderMinimized.react"),{}),children:g.jsx(h,{lastOpenThreadId:a.lastOpenThreadId,children:g.jsx(b("MWChatSidebarHeaderMinimized.react"),{})})})}e.exports=a}),null);